import{_ as xe}from"./CIxdp835.js";import{m as fe,r as p,s as M,g as ge,c as l,a as e,b as G,h as f,q as B,t as r,k as o,j as Z,v as te,l as X,y as ve,F as j,x as D,w as Y,A as he,T as se,o as i,z as C,d as oe,i as ae}from"#entry";import{_ as be}from"./DlAUqK2U.js";const _e={class:"min-h-screen bg-gradient-to-br from-neutral-50 via-orange-50/30 to-terracota-50/20 p-6 md:p-8 space-y-8"},we={class:"bg-white rounded-2xl shadow-sm border border-[#EFCB9D] overflow-hidden transition-all duration-300 hover:shadow-lg"},ye={class:"sticky top-0 z-20 bg-[#FFF6EC] border-t-4 border-[#EFCB9D] px-6 md:px-8 py-6 shadow-md"},ke={class:"flex items-start justify-between gap-4 mb-4"},Be={class:"text-right flex-shrink-0"},Ce={class:"text-5xl font-bold text-[#C57A3E] leading-none"},Ee={class:"relative"},Fe={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4"},Me={class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold bg-[#C57A3E] text-white"},Ae={key:0,class:"bg-neutral-100 h-1.5 relative overflow-hidden"},Se={class:"px-6 md:px-8 py-6 bg-gradient-to-b from-neutral-50 to-white"},Pe={class:"overflow-x-auto -mx-2 px-2 pb-2"},je={class:"grid grid-cols-1 md:grid-cols-3 gap-4 min-w-max md:min-w-0"},De={class:"bg-white rounded-xl p-5 shadow-sm border border-neutral-200 hover:shadow-md transition-all duration-200 min-w-[280px] md:min-w-0"},Ne={class:"flex items-center gap-4"},Te={class:"flex-1"},Ie={class:"text-3xl font-bold text-neutral-800"},Le={class:"bg-white rounded-xl p-5 shadow-sm border border-neutral-200 hover:shadow-md transition-all duration-200 min-w-[280px] md:min-w-0"},ze={class:"flex items-center gap-4"},qe={class:"flex-1"},$e={class:"text-3xl font-bold text-[#B46E4B]"},Ve={key:0,class:"text-xs text-neutral-500 mt-0.5"},Oe={class:"bg-white rounded-xl p-5 shadow-sm border border-neutral-200 hover:shadow-md transition-all duration-200 min-w-[280px] md:min-w-0"},Ue={class:"flex items-center gap-4"},He={class:"flex-1"},Re={class:"text-3xl font-bold text-[#E9C46A]"},Ge={class:"text-xs text-neutral-500 mt-0.5"},Ze={class:"px-6 md:px-8 py-6"},Xe={key:0,class:"space-y-4"},Ye={key:1,class:"space-y-4"},Je={class:"flex flex-col md:flex-row md:items-center gap-5 ml-2"},Ke={class:"relative flex-shrink-0"},Qe={class:"w-16 h-16 rounded-xl bg-gradient-to-br from-[#C57A3E] to-[#B46E4B] flex items-center justify-center text-white font-bold shadow-sm text-xl"},We={class:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4"},et={class:"font-bold text-neutral-800 text-lg mb-1"},tt={class:"text-sm text-neutral-500 capitalize flex items-center gap-1.5"},st={class:"text-sm font-medium text-neutral-700"},ot={class:"capitalize"},at={class:"flex items-center gap-2"},rt={class:"text-sm text-neutral-500"},nt={class:"text-left md:text-right"},lt={class:"text-2xl font-bold text-[#B46E4B]"},it={class:"flex-shrink-0"},dt=["onClick","disabled"],ct={key:2,class:"text-center py-16"},ut={class:"text-neutral-600 mb-6 text-base"},pt={key:3,class:"text-center py-16"},mt={class:"bg-white rounded-2xl shadow-sm border border-neutral-200 overflow-hidden mt-8"},xt={class:"sticky top-0 z-20 bg-gradient-to-r from-green-50 to-emerald-50/50 px-6 md:px-8 py-6 border-b border-neutral-200 shadow-md"},ft={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4"},gt=["value"],vt={class:"relative"},ht={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4"},bt={class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold bg-[#54BF83] text-white"},_t={class:"px-6 md:px-8 py-6 bg-gradient-to-b from-green-50/50 to-white border-b border-green-100"},wt={class:"overflow-x-auto -mx-2 px-2 pb-2"},yt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 min-w-max md:min-w-0"},kt={class:"bg-white rounded-xl p-5 shadow-sm border border-green-200 hover:shadow-md transition-all duration-200 min-w-[280px] md:min-w-0"},Bt={class:"flex items-center gap-4"},Ct={class:"text-3xl font-bold text-neutral-800"},Et={key:0,class:"text-xs text-neutral-500 mt-0.5"},Ft={class:"bg-white rounded-xl p-5 shadow-sm border border-green-200 hover:shadow-md transition-all duration-200 min-w-[280px] md:min-w-0"},Mt={class:"flex items-center gap-4"},At={class:"text-3xl font-bold text-[#54BF83]"},St={key:0,class:"text-xs text-neutral-500 mt-0.5"},Pt={class:"bg-white rounded-xl p-5 shadow-sm border border-blue-200 hover:shadow-md transition-all duration-200 min-w-[280px] md:min-w-0"},jt={class:"flex items-center gap-4"},Dt={class:"text-3xl font-bold text-blue-600"},Nt={key:0,class:"text-xs text-neutral-500 mt-0.5"},Tt={class:"px-6 md:px-8 py-6"},It={key:0,class:"space-y-3"},Lt={key:1,class:"space-y-4"},zt=["onClick"],qt={class:"flex flex-col md:flex-row md:items-center gap-5 ml-2"},$t={class:"relative flex-shrink-0"},Vt={class:"w-16 h-16 rounded-xl bg-gradient-to-br from-[#54BF83] to-emerald-600 flex items-center justify-center text-white font-bold shadow-sm text-xl"},Ot={class:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4"},Ut={class:"font-bold text-neutral-800 text-lg mb-1"},Ht={class:"text-sm text-neutral-500 capitalize flex items-center gap-1.5"},Rt={class:"text-sm font-medium text-neutral-700"},Gt={class:"flex items-center gap-2"},Zt={class:"text-sm text-neutral-500"},Xt={class:"text-left md:text-right"},Yt={class:"text-2xl font-bold text-[#54BF83]"},Jt={class:"text-xs text-neutral-500 mt-1 flex items-center md:justify-end gap-1.5"},Kt={key:2,class:"text-center py-16"},Qt={class:"text-neutral-600 mb-6"},Wt={key:3,class:"text-center py-16"},es={class:"text-neutral-600"},ts={key:0,class:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 md:p-8"},ss={key:0,class:"space-y-6"},os={class:"flex items-center gap-4 p-4 bg-gradient-to-r from-green-50 to-transparent rounded-xl border border-green-100"},as={class:"w-16 h-16 rounded-xl bg-gradient-to-br from-[#54BF83] to-emerald-600 flex items-center justify-center text-white font-bold shadow-sm text-2xl"},rs={class:"text-lg font-bold text-neutral-800"},ns={class:"text-sm text-neutral-600 capitalize"},ls={class:"grid grid-cols-2 gap-4"},is={class:"p-4 bg-neutral-50 rounded-xl border border-neutral-200"},ds={class:"text-2xl font-bold text-[#54BF83]"},cs={class:"p-4 bg-neutral-50 rounded-xl border border-neutral-200"},us={class:"text-base font-semibold text-neutral-800"},ps={class:"p-4 bg-neutral-50 rounded-xl border border-neutral-200"},ms={class:"text-2xl font-bold text-neutral-800"},xs={class:"p-4 bg-neutral-50 rounded-xl border border-neutral-200"},fs={__name:"pagos",setup(gs){const E=fe(),I=p(!0),v=p([]),N=p(0),L=p(0),A=p(""),z=p([]),T=p(!1),m=p(null),q=p(!0),_=p([]),$=p(0),J=p(0),h=p(""),g=p("");p(!1),p("");const V=p(!1),re=M(()=>{const a=_.value.length+v.value.length;return a===0?100:Math.round(v.value.length/a*100)}),F=M(()=>{if(!h.value.trim())return _.value;const a=h.value.toLowerCase().trim();return _.value.filter(t=>{const c=(t.paciente_nombre||"").toLowerCase(),s=(t.terapeuta_nombre||"").toLowerCase(),u=(t.tipo_bono||"").toLowerCase();return c.includes(a)||s.includes(a)||u.includes(a)})}),w=M(()=>{if(!g.value.trim())return v.value;const a=g.value.toLowerCase().trim();return v.value.filter(t=>{const c=(t.paciente_nombre||"").toLowerCase(),s=(t.terapeuta_nombre||"").toLowerCase(),u=(t.tipo_bono||"").toLowerCase();return c.includes(a)||s.includes(a)||u.includes(a)})}),ne=M(()=>F.value.reduce((a,t)=>a+(Number(t.monto_total)||0),0)),le=M(()=>F.value.filter(a=>a.sesiones_restantes<=1).length),K=M(()=>w.value.reduce((a,t)=>a+(Number(t.monto_total)||0),0)),ie=M(()=>w.value.length===0?0:K.value/w.value.length),y=a=>new Intl.NumberFormat("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a||0),Q=a=>a?new Date(a).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"No especificada",O=a=>{if(!a)return"?";const t=a.split(" ");return t.length>=2?`${t[0][0]}${t[1][0]}`.toUpperCase():a.substring(0,2).toUpperCase()},U=async()=>{try{I.value=!0;let a=E.from("bonos").select("*").eq("estado_pago","pagado").order("fecha_pago",{ascending:!1});if(A.value){const[n,x]=A.value.split("-"),R=new Date(parseInt(n),parseInt(x)-1,1),me=new Date(parseInt(n),parseInt(x),0,23,59,59);a=a.gte("fecha_pago",R.toISOString()).lte("fecha_pago",me.toISOString())}const{data:t,error:c}=await a;if(c){console.error("Error al cargar bonos confirmados:",c);return}if(!t||t.length===0){v.value=[],N.value=0,L.value=0;return}const s=[...new Set(t.map(n=>n.paciente_id))],{data:u,error:b}=await E.from("pacientes").select("id, nombre_completo, email, terapeuta_id").in("id",s);b&&console.error("Error al cargar pacientes:",b);const k=u?[...new Set(u.map(n=>n.terapeuta_id).filter(Boolean))]:[];let P=[];if(k.length>0){const{data:n,error:x}=await E.from("terapeutas").select("id, nombre_completo").in("id",k);x||(P=n||[])}const S=new Map(u?.map(n=>[n.id,n])||[]),d=new Map(P.map(n=>[n.id,n]));v.value=t.map(n=>{const x=S.get(n.paciente_id),R=x?.terapeuta_id?d.get(x.terapeuta_id):null;return{id:n.id,paciente_id:n.paciente_id,paciente_nombre:x?.nombre_completo||"Sin nombre",paciente_email:x?.email,terapeuta_nombre:R?.nombre_completo,sesiones_totales:n.sesiones_totales,sesiones_restantes:n.sesiones_restantes,monto_total:n.monto_total,tipo_bono:n.tipo_bono,fecha_pago:n.fecha_pago,metodo_pago:n.metodo_pago}}),N.value=v.value.reduce((n,x)=>n+(Number(x.monto_total)||0),0),L.value=v.value.length>0?N.value/v.value.length:0}catch(a){console.error("Error al cargar bonos confirmados:",a)}finally{I.value=!1}},de=async()=>{try{const{data:a,error:t}=await E.from("bonos").select("fecha_pago").eq("estado_pago","pagado").not("fecha_pago","is",null).order("fecha_pago",{ascending:!1});if(t){console.error("Error al cargar meses:",t);return}if(!a||a.length===0){z.value=[];return}const c=new Set;a.forEach(u=>{if(u.fecha_pago){const b=new Date(u.fecha_pago),k=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}`;c.add(k)}});const s=Array.from(c).sort().reverse();z.value=s.map(u=>{const[b,k]=u.split("-"),S=new Date(parseInt(b),parseInt(k)-1).toLocaleDateString("es-ES",{month:"long",year:"numeric"});return{valor:u,nombre:S.charAt(0).toUpperCase()+S.slice(1)}})}catch(a){console.error("Error al cargar meses disponibles:",a)}},ce=async()=>{await U()},ue=a=>{m.value=a,T.value=!0},H=()=>{T.value=!1,m.value=null},W=async()=>{try{q.value=!0;const{data:a,error:t}=await E.from("bonos").select("*").eq("estado_pago","pendiente").in("estado",["activo","pendiente"]).order("created_at",{ascending:!1});if(t){console.error("Error al cargar bonos pendientes:",t);return}if(!a||a.length===0){_.value=[],$.value=0,J.value=0;return}const c=[...new Set(a.map(d=>d.paciente_id))],{data:s,error:u}=await E.from("pacientes").select("id, nombre_completo, email, terapeuta_id").in("id",c);u&&console.error("Error al cargar pacientes:",u);const b=s?[...new Set(s.map(d=>d.terapeuta_id).filter(Boolean))]:[];let k=[];if(b.length>0){const{data:d,error:n}=await E.from("terapeutas").select("id, nombre_completo").in("id",b);n||(k=d||[])}const P=new Map(s?.map(d=>[d.id,d])||[]),S=new Map(k.map(d=>[d.id,d]));_.value=a.map(d=>{const n=P.get(d.paciente_id),x=n?.terapeuta_id?S.get(n.terapeuta_id):null;return{id:d.id,paciente_id:d.paciente_id,paciente_nombre:n?.nombre_completo||"Sin nombre",paciente_email:n?.email,terapeuta_nombre:x?.nombre_completo,sesiones_totales:d.sesiones_totales,sesiones_restantes:d.sesiones_restantes,monto_total:d.monto_total,tipo_bono:d.tipo_bono,estado:d.estado,created_at:d.created_at}}),$.value=_.value.reduce((d,n)=>d+(Number(n.monto_total)||0),0),J.value=_.value.filter(d=>d.sesiones_restantes<=1).length}catch(a){console.error("Error al cargar bonos pendientes:",a)}finally{q.value=!1}},pe=async a=>{try{V.value=!0;const{error:t}=await E.from("bonos").update({estado_pago:"pagado",fecha_pago:new Date().toISOString()}).eq("id",a.id);if(t)throw t;await Promise.all([W(),U()]),ee("‚úÖ Pago confirmado exitosamente","success")}catch(t){console.error("Error al confirmar pago:",t),ee("‚ùå Error al confirmar pago: "+t.message,"error")}finally{V.value=!1}},ee=(a,t="info")=>{const c=document.createElement("div");c.className=`fixed top-4 right-4 z-[100] px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 transform transition-all duration-300 ${t==="success"?"bg-[#54BF83] text-white":t==="error"?"bg-red-500 text-white":"bg-neutral-800 text-white"}`,c.innerHTML=`
    <span class="text-lg">${t==="success"?"‚úì":t==="error"?"‚úï":"‚Ñπ"}</span>
    <span class="font-medium">${a}</span>
  `,document.body.appendChild(c),setTimeout(()=>{c.style.transform="translateX(0)"},10),setTimeout(()=>{c.style.opacity="0",c.style.transform="translateX(100%)",setTimeout(()=>{document.body.removeChild(c)},300)},3e3)};return ge(()=>{de(),U(),W()}),(a,t)=>{const c=xe;return i(),l("div",_e,[e("div",we,[e("div",ye,[e("div",ke,[t[6]||(t[6]=B('<div class="flex-1" data-v-2c341127><div class="flex items-center gap-3 mb-2" data-v-2c341127><div class="w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center" data-v-2c341127><svg class="w-6 h-6 text-[#C57A3E]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-2c341127><circle cx="12" cy="12" r="10" data-v-2c341127></circle><polyline points="12 6 12 12 16 14" data-v-2c341127></polyline></svg></div><h2 class="text-2xl font-serif font-bold text-[#C57A3E]" data-v-2c341127> Bonos Pendientes de Confirmar </h2></div><p class="text-sm text-neutral-600 leading-relaxed ml-13" data-v-2c341127> Gestiona aqu√≠ los pagos pendientes y el seguimiento financiero de cada paciente. </p></div>',1)),e("div",Be,[t[5]||(t[5]=e("p",{class:"text-xs text-neutral-500 uppercase tracking-wider font-semibold mb-1"},"Pendientes",-1)),e("p",Ce,r(o(F).length),1)])]),e("div",Ee,[t[7]||(t[7]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-neutral-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.35-4.35"})])],-1)),Z(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>X(h)?h.value=s:null),type:"text",placeholder:"Buscar paciente en bonos pendientes...",class:"w-full pl-12 pr-4 py-3 border border-neutral-300 rounded-xl text-sm focus:ring-2 focus:ring-[#C57A3E]/20 focus:border-[#C57A3E] transition-all bg-white placeholder:text-neutral-400"},null,512),[[te,o(h)]]),o(h)?(i(),l("div",Fe,[e("span",Me,r(o(F).length)+" resultado"+r(o(F).length!==1?"s":""),1)])):f("",!0)])]),o(_).length>0||o(v).length>0?(i(),l("div",Ae,[e("div",{class:"absolute inset-y-0 left-0 bg-gradient-to-r from-[#54BF83] to-[#B46E4B] transition-all duration-700 ease-out",style:ve({width:`${o(re)}%`})},null,4)])):f("",!0),e("div",Se,[e("div",Pe,[e("div",je,[e("div",De,[e("div",Ne,[t[9]||(t[9]=e("div",{class:"w-14 h-14 rounded-xl bg-gradient-to-br from-[#F4A261]/20 to-[#F4A261]/10 flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-7 h-7 text-[#F4A261]",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 6 12 12 16 14"})])],-1)),e("div",Te,[t[8]||(t[8]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold tracking-wide mb-1"},"Bonos Pendientes",-1)),e("p",Ie,r(o(_).length),1)])])]),e("div",Le,[e("div",ze,[t[11]||(t[11]=e("div",{class:"w-14 h-14 rounded-xl bg-gradient-to-br from-[#B46E4B]/20 to-[#B46E4B]/10 flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-7 h-7 text-[#B46E4B]",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})])],-1)),e("div",qe,[t[10]||(t[10]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold tracking-wide mb-1"},"Total por Confirmar",-1)),e("p",$e,r(y(o(ne)))+"‚Ç¨",1),o(h)?(i(),l("p",Ve,"de "+r(y(o($)))+"‚Ç¨ total",1)):f("",!0)])])]),e("div",Oe,[e("div",Ue,[t[13]||(t[13]=B('<div class="w-14 h-14 rounded-xl bg-gradient-to-br from-[#E9C46A]/20 to-[#E9C46A]/10 flex items-center justify-center flex-shrink-0" data-v-2c341127><svg class="w-7 h-7 text-[#E9C46A]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-2c341127><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" data-v-2c341127></path><path d="M12 9v4" data-v-2c341127></path><path d="M12 17h.01" data-v-2c341127></path></svg></div>',1)),e("div",He,[t[12]||(t[12]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold tracking-wide mb-1"},"Requieren Atenci√≥n",-1)),e("p",Re,r(o(le)),1),e("p",Ge,r(o(h)?"en resultados":"Pocas sesiones restantes"),1)])])])])])]),e("div",Ze,[o(q)?(i(),l("div",Xe,[(i(),l(j,null,D(3,s=>e("div",{key:s,class:"animate-pulse"},[...t[14]||(t[14]=[e("div",{class:"bg-gradient-to-r from-neutral-100 via-neutral-200 to-neutral-100 bg-[length:200%_100%] rounded-xl h-32 animate-shimmer"},null,-1)])])),64))])):o(F).length>0?(i(),l("div",Ye,[(i(!0),l(j,null,D(o(F),s=>(i(),l("div",{key:s.id,class:"group relative bg-white rounded-xl p-5 md:p-6 hover:shadow-lg transition-all duration-200 border border-neutral-200 hover:border-[#C57A3E]"},[e("div",{class:C(["absolute left-0 top-0 bottom-0 w-1 rounded-l-xl",{"bg-red-500":s.sesiones_restantes===0,"bg-orange-500":s.sesiones_restantes===1,"bg-amber-500":s.sesiones_restantes===2,"bg-[#C57A3E]":s.sesiones_restantes>2}])},null,2),e("div",Je,[e("div",Ke,[e("div",Qe,r(O(s.paciente_nombre)),1),s.sesiones_restantes<=1?(i(),l("div",{key:0,class:C(["absolute -top-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center shadow-md",{"bg-red-500":s.sesiones_restantes===0,"bg-orange-500":s.sesiones_restantes===1}])},[...t[15]||(t[15]=[e("span",{class:"text-white text-xs font-bold"},"!",-1)])],2)):f("",!0)]),e("div",We,[e("div",null,[e("p",et,r(s.paciente_nombre),1),e("p",tt,[t[16]||(t[16]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-[#C57A3E]"},null,-1)),oe(" "+r(s.tipo_bono||"Bono Est√°ndar"),1)])]),e("div",null,[t[17]||(t[17]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Terapeuta",-1)),e("p",st,r(s.terapeuta_nombre||"No asignado"),1)]),e("div",null,[t[18]||(t[18]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Estado",-1)),e("span",{class:C(["inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium",{"bg-green-100 text-green-700":s.estado==="activo","bg-amber-100 text-amber-700":s.estado==="pendiente","bg-neutral-100 text-neutral-700":s.estado==="agotado"}])},[e("span",{class:C(["w-1.5 h-1.5 rounded-full",{"bg-green-500":s.estado==="activo","bg-amber-500":s.estado==="pendiente","bg-neutral-500":s.estado==="agotado"}])},null,2),e("span",ot,r(s.estado),1)],2)]),e("div",null,[t[20]||(t[20]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Sesiones",-1)),e("div",at,[e("p",{class:C(["text-base font-bold",{"text-red-600":s.sesiones_restantes===0,"text-orange-600":s.sesiones_restantes===1,"text-amber-600":s.sesiones_restantes===2,"text-green-600":s.sesiones_restantes>2}])},r(s.sesiones_restantes),3),e("p",rt,"/ "+r(s.sesiones_totales),1)]),s.sesiones_restantes<=1?(i(),l("div",{key:0,class:C(["flex items-center gap-1 text-xs font-semibold mt-1",{"text-red-600":s.sesiones_restantes===0,"text-orange-600":s.sesiones_restantes===1}])},[t[19]||(t[19]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),e("path",{d:"M12 9v4"}),e("path",{d:"M12 17h.01"})],-1)),e("span",null,r(s.sesiones_restantes===0?"¬°AGOTADO!":"¬°√öLTIMA!"),1)],2)):f("",!0)]),e("div",nt,[t[21]||(t[21]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Monto",-1)),e("p",lt,r(y(s.monto_total))+"‚Ç¨",1),t[22]||(t[22]=e("p",{class:"text-xs text-[#C57A3E] font-medium mt-0.5"},"Por confirmar",-1))])]),e("div",it,[e("button",{onClick:ae(u=>pe(s),["stop"]),disabled:o(V),class:"w-full md:w-auto px-6 py-3 bg-[#B46E4B] text-white rounded-xl hover:bg-[#C57A3E] transition-all duration-200 font-semibold text-sm shadow-sm hover:shadow-md flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed group-hover:scale-105"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("span",null,"Confirmar Pago",-1)])],8,dt)])])]))),128))])):o(h)&&o(F).length===0?(i(),l("div",ct,[t[25]||(t[25]=B('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-orange-50 mb-5" data-v-2c341127><svg class="w-12 h-12 text-[#C57A3E]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-2c341127><circle cx="11" cy="11" r="8" data-v-2c341127></circle><path d="m21 21-4.35-4.35" data-v-2c341127></path></svg></div><h3 class="text-2xl font-serif font-bold text-neutral-800 mb-2" data-v-2c341127> No se encontraron resultados </h3>',2)),e("p",ut,' No hay bonos pendientes para "'+r(o(h))+'" ',1),e("button",{onClick:t[1]||(t[1]=s=>h.value=""),class:"inline-flex items-center gap-2 px-6 py-3 bg-[#B46E4B] text-white rounded-xl hover:bg-[#C57A3E] transition-all duration-200 font-semibold shadow-sm hover:shadow-md"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M18 6 6 18"}),e("path",{d:"m6 6 12 12"})],-1),e("span",null,"Limpiar b√∫squeda",-1)])])])):(i(),l("div",pt,[t[27]||(t[27]=B('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-[#F8FFF9] mb-5" data-v-2c341127><svg class="w-12 h-12 text-[#54BF83]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-2c341127><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-2c341127></path></svg></div><h3 class="text-2xl font-serif font-bold text-neutral-800 mb-2" data-v-2c341127> Todo al d√≠a üßæ </h3><p class="text-neutral-600 mb-6 text-base" data-v-2c341127> No hay bonos pendientes de confirmar pago. </p>',3)),G(c,{to:"/coordinadora/pacientes",class:"inline-flex items-center gap-2 px-6 py-3 bg-[#B46E4B] text-white rounded-xl hover:bg-[#C57A3E] transition-all duration-200 font-semibold shadow-sm hover:shadow-md"},{default:Y(()=>[...t[26]||(t[26]=[e("span",null,"Gestionar Pacientes",-1),e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M5 12h14"}),e("path",{d:"m12 5 7 7-7 7"})],-1)])]),_:1})]))])]),e("div",mt,[e("div",xt,[e("div",ft,[t[29]||(t[29]=B('<div data-v-2c341127><h2 class="text-xl font-serif font-bold text-neutral-800 flex items-center gap-2.5 mb-1" data-v-2c341127><svg class="w-6 h-6 text-[#54BF83]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-2c341127><path d="M3 3v18h18" data-v-2c341127></path><path d="m19 9-5 5-4-4-3 3" data-v-2c341127></path></svg><span data-v-2c341127>Historial de Pagos Confirmados</span></h2><p class="text-sm text-neutral-600 leading-relaxed" data-v-2c341127> Bonos ya registrados y confirmados por coordinaci√≥n. </p></div>',1)),Z(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>X(A)?A.value=s:null),onChange:ce,class:"px-4 py-2.5 border border-neutral-300 rounded-xl text-sm font-medium focus:ring-2 focus:ring-[#54BF83]/20 focus:border-[#54BF83] transition-all bg-white hover:border-[#54BF83] cursor-pointer"},[t[28]||(t[28]=e("option",{value:""},"üìÖ Todos los meses",-1)),(i(!0),l(j,null,D(o(z),s=>(i(),l("option",{key:s.valor,value:s.valor},r(s.nombre),9,gt))),128))],544),[[he,o(A)]])]),e("div",vt,[t[30]||(t[30]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-neutral-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.35-4.35"})])],-1)),Z(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>X(g)?g.value=s:null),type:"text",placeholder:"Buscar paciente en pagos confirmados...",class:"w-full pl-12 pr-4 py-3 border border-neutral-300 rounded-xl text-sm focus:ring-2 focus:ring-[#54BF83]/20 focus:border-[#54BF83] transition-all bg-white placeholder:text-neutral-400"},null,512),[[te,o(g)]]),o(g)?(i(),l("div",ht,[e("span",bt,r(o(w).length)+" resultado"+r(o(w).length!==1?"s":""),1)])):f("",!0)])]),e("div",_t,[e("div",wt,[e("div",yt,[e("div",kt,[e("div",Bt,[t[32]||(t[32]=e("div",{class:"w-14 h-14 rounded-xl bg-gradient-to-br from-[#54BF83]/20 to-[#54BF83]/10 flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-7 h-7 text-[#54BF83]",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[t[31]||(t[31]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold tracking-wide mb-1"},"Bonos Confirmados",-1)),e("p",Ct,r(o(w).length),1),o(g)?(i(),l("p",Et,"de "+r(o(v).length)+" total",1)):f("",!0)])])]),e("div",Ft,[e("div",Mt,[t[34]||(t[34]=e("div",{class:"w-14 h-14 rounded-xl bg-gradient-to-br from-[#54BF83]/30 to-[#54BF83]/15 flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-7 h-7 text-[#54BF83]",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})])],-1)),e("div",null,[t[33]||(t[33]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold tracking-wide mb-1"},"Total Confirmado",-1)),e("p",At,r(y(o(K)))+"‚Ç¨",1),o(g)?(i(),l("p",St,"de "+r(y(o(N)))+"‚Ç¨ total",1)):f("",!0)])])]),e("div",Pt,[e("div",jt,[t[36]||(t[36]=B('<div class="w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500/20 to-blue-500/10 flex items-center justify-center flex-shrink-0" data-v-2c341127><svg class="w-7 h-7 text-blue-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-2c341127><path d="M3 3v18h18" data-v-2c341127></path><path d="M18 17V9" data-v-2c341127></path><path d="M13 17V5" data-v-2c341127></path><path d="M8 17v-3" data-v-2c341127></path></svg></div>',1)),e("div",null,[t[35]||(t[35]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold tracking-wide mb-1"},"Promedio por Bono",-1)),e("p",Dt,r(y(o(ie)))+"‚Ç¨",1),o(g)?(i(),l("p",Nt,"de "+r(y(o(L)))+"‚Ç¨ total",1)):f("",!0)])])])])])]),e("div",Tt,[o(I)?(i(),l("div",It,[(i(),l(j,null,D(4,s=>e("div",{key:s,class:"animate-pulse"},[...t[37]||(t[37]=[e("div",{class:"bg-gradient-to-r from-neutral-100 via-neutral-200 to-neutral-100 bg-[length:200%_100%] rounded-lg h-24 animate-shimmer"},null,-1)])])),64))])):o(w).length>0?(i(),l("div",Lt,[(i(!0),l(j,null,D(o(w),s=>(i(),l("div",{key:s.id,class:"group relative bg-white rounded-xl p-5 md:p-6 hover:shadow-lg transition-all duration-200 cursor-pointer border border-green-100 hover:border-[#54BF83]",onClick:u=>ue(s)},[t[46]||(t[46]=e("div",{class:"absolute left-0 top-0 bottom-0 w-1 bg-[#54BF83] rounded-l-xl"},null,-1)),e("div",qt,[e("div",$t,[e("div",Vt,r(O(s.paciente_nombre)),1),t[38]||(t[38]=e("div",{class:"absolute -top-1 -right-1 w-6 h-6 rounded-full bg-[#54BF83] flex items-center justify-center shadow-md"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},[e("path",{d:"M5 13l4 4L19 7"})])],-1))]),e("div",Ot,[e("div",null,[e("p",Ut,r(s.paciente_nombre),1),e("p",Ht,[t[39]||(t[39]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-[#54BF83]"},null,-1)),oe(" "+r(s.tipo_bono||"Bono Est√°ndar"),1)])]),e("div",null,[t[40]||(t[40]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Terapeuta",-1)),e("p",Rt,r(s.terapeuta_nombre||"No asignado"),1)]),t[45]||(t[45]=e("div",null,[e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Estado"),e("span",{class:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"},[e("span",{class:"w-1.5 h-1.5 rounded-full bg-green-500"}),e("span",null,"Confirmado")])],-1)),e("div",null,[t[42]||(t[42]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Sesiones",-1)),e("div",Gt,[e("p",{class:C(["text-base font-bold",{"text-red-600":s.sesiones_restantes===0,"text-orange-600":s.sesiones_restantes===1,"text-amber-600":s.sesiones_restantes===2,"text-green-600":s.sesiones_restantes>2}])},r(s.sesiones_restantes),3),e("p",Zt,"/ "+r(s.sesiones_totales),1)]),s.sesiones_restantes<=1?(i(),l("div",{key:0,class:C(["flex items-center gap-1 text-xs font-semibold mt-1",{"text-red-600":s.sesiones_restantes===0,"text-orange-600":s.sesiones_restantes===1}])},[t[41]||(t[41]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),e("path",{d:"M12 9v4"}),e("path",{d:"M12 17h.01"})],-1)),e("span",null,r(s.sesiones_restantes===0?"¬°AGOTADO!":"¬°RENOVAR!"),1)],2)):f("",!0)]),e("div",Xt,[t[44]||(t[44]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Pago Confirmado",-1)),e("p",Yt,r(y(s.monto_total))+"‚Ç¨",1),e("p",Jt,[t[43]||(t[43]=B('<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-2c341127><rect width="18" height="18" x="3" y="4" rx="2" ry="2" data-v-2c341127></rect><line x1="16" x2="16" y1="2" y2="6" data-v-2c341127></line><line x1="8" x2="8" y1="2" y2="6" data-v-2c341127></line><line x1="3" x2="21" y1="10" y2="10" data-v-2c341127></line></svg>',1)),e("span",null,r(Q(s.fecha_pago)),1)])])])])],8,zt))),128))])):o(g)&&o(w).length===0?(i(),l("div",Kt,[t[48]||(t[48]=B('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-50 mb-5" data-v-2c341127><svg class="w-12 h-12 text-[#54BF83]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-2c341127><circle cx="11" cy="11" r="8" data-v-2c341127></circle><path d="m21 21-4.35-4.35" data-v-2c341127></path></svg></div><h3 class="text-xl font-semibold text-neutral-800 mb-2" data-v-2c341127> No se encontraron resultados </h3>',2)),e("p",Qt,' No hay pagos confirmados para "'+r(o(g))+'" ',1),e("button",{onClick:t[4]||(t[4]=s=>g.value=""),class:"inline-flex items-center gap-2 px-6 py-3 bg-[#54BF83] text-white rounded-xl hover:bg-emerald-600 transition-all duration-200 font-semibold shadow-sm hover:shadow-md"},[...t[47]||(t[47]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M18 6 6 18"}),e("path",{d:"m6 6 12 12"})],-1),e("span",null,"Limpiar b√∫squeda",-1)])])])):(i(),l("div",Wt,[t[49]||(t[49]=B('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-neutral-100 mb-5" data-v-2c341127><svg class="w-12 h-12 text-neutral-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-2c341127><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" data-v-2c341127></path><circle cx="12" cy="7" r="4" data-v-2c341127></circle></svg></div><h3 class="text-xl font-semibold text-neutral-800 mb-2" data-v-2c341127> Sin pagos registrados </h3>',2)),e("p",es,r(o(A)?"No hay pagos confirmados en este mes":"No hay pagos confirmados a√∫n"),1)]))])]),G(se,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Y(()=>[o(T)?(i(),l("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:ae(H,["self"])},[G(se,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:Y(()=>[o(T)?(i(),l("div",ts,[e("div",{class:"flex items-center justify-between mb-6"},[t[51]||(t[51]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#54BF83]/20 to-[#54BF83]/10 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-[#54BF83]",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("h3",{class:"text-xl font-serif font-bold text-neutral-800"},"Detalle del Pago")],-1)),e("button",{onClick:H,class:"p-2 hover:bg-neutral-100 rounded-lg transition-colors"},[...t[50]||(t[50]=[e("svg",{class:"w-5 h-5 text-neutral-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M18 6 6 18"}),e("path",{d:"m6 6 12 12"})],-1)])])]),o(m)?(i(),l("div",ss,[e("div",os,[e("div",as,r(O(o(m).paciente_nombre)),1),e("div",null,[e("p",rs,r(o(m).paciente_nombre),1),e("p",ns,r(o(m).tipo_bono),1)])]),e("div",ls,[e("div",is,[t[52]||(t[52]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Monto Total",-1)),e("p",ds,r(y(o(m).monto_total))+"‚Ç¨",1)]),e("div",cs,[t[53]||(t[53]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Fecha de Pago",-1)),e("p",us,r(Q(o(m).fecha_pago)),1)]),e("div",ps,[t[54]||(t[54]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Sesiones Totales",-1)),e("p",ms,r(o(m).sesiones_totales),1)]),e("div",xs,[t[55]||(t[55]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Sesiones Restantes",-1)),e("p",{class:C(["text-2xl font-bold",{"text-red-600":o(m).sesiones_restantes===0,"text-orange-600":o(m).sesiones_restantes===1,"text-amber-600":o(m).sesiones_restantes===2,"text-green-600":o(m).sesiones_restantes>2}])},r(o(m).sesiones_restantes),3)])]),e("div",{class:"flex justify-end pt-4"},[e("button",{onClick:H,class:"px-6 py-2.5 bg-neutral-200 hover:bg-neutral-300 text-neutral-800 rounded-xl transition-colors font-semibold"}," Cerrar ")])])):f("",!0)])):f("",!0)]),_:1})])):f("",!0)]),_:1})])}}},_s=be(fs,[["__scopeId","data-v-2c341127"]]);export{_s as default};
