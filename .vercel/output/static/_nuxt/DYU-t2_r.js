import{_ as C}from"./C13k7riN.js";import{u as B}from"./C9Cd2paA.js";import{e as j,r as h,q as y,f as E,c as r,k as s,a as t,g as d,t as n,y as _,x as b,b as A,w as D,F as M,s as z,h as N,o as i,d as w}from"#entry";import"./Cy0_MzJF.js";const S={class:"max-w-4xl mx-auto space-y-6 px-4 py-8"},V={key:0,class:"flex flex-col items-center justify-center min-h-[40vh]"},H={key:1},P={key:0,class:"bg-white rounded-xl shadow-sm border border-[#EAD5D3]/30 p-6 mb-8"},T={class:"flex items-center justify-between mb-4"},q={class:"text-xl font-['Lora'] font-medium text-[#5D4A44]"},$={class:"text-sm text-[#5D4A44] opacity-70 font-['Lato']"},G={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-6"},I={class:"text-center"},Q={class:"text-4xl font-['Lora'] font-bold text-[#D8AFA0]"},R={class:"text-center"},J={class:"text-4xl font-['Lora'] font-bold text-[#5D4A44]"},K={class:"text-center"},O={class:"text-4xl font-['Lora'] font-bold text-[#5D4A44] opacity-50"},U={class:"space-y-2"},W={class:"flex justify-between text-xs font-['Lato'] text-[#5D4A44] opacity-70"},X={class:"w-full bg-[#EAD5D3]/30 rounded-full h-3 overflow-hidden"},Y={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6"},Z={class:"flex items-center space-x-3 p-4 bg-[#F9F7F3] rounded-lg"},tt={class:"text-lg font-['Lora'] font-medium text-[#5D4A44]"},et={class:"text-xs text-[#5D4A44] opacity-50 font-['Lato']"},st={class:"flex items-center space-x-3 p-4 bg-[#F9F7F3] rounded-lg"},ot={class:"text-lg font-['Lora'] font-medium text-[#5D4A44]"},at={key:0,class:"text-xs text-[#5D4A44] opacity-50 font-['Lato']"},nt={key:0,class:"flex items-start space-x-3 p-4 bg-amber-50 border border-amber-200 rounded-lg mt-6"},rt={key:1,class:"flex items-start space-x-3 p-4 bg-red-50 border border-red-200 rounded-lg mt-6"},it={key:2,class:"pt-4 border-t border-[#EAD5D3]/30 mt-6"},lt={key:1,class:"space-y-4"},dt={class:"space-y-3"},ct={class:"flex items-center justify-between mb-3"},xt={class:"text-base font-['Lato'] font-medium text-[#5D4A44]"},ut={class:"text-xs text-[#5D4A44] opacity-70 font-['Lato']"},mt={class:"text-right"},pt={class:"text-sm font-['Lora'] font-medium text-[#5D4A44]"},ft={class:"w-full bg-[#EAD5D3]/30 rounded-full h-2"},_t={class:"flex items-center space-x-2 mt-2 text-xs text-[#5D4A44] opacity-60 font-['Lato']"},gt={key:0},vt={key:2,class:"flex flex-col items-center justify-center text-center py-16"},wt=j({__name:"bono",setup(ht){const{getBonos:k}=B(),u=h(!0),m=h([]),o=y(()=>m.value.find(a=>a.estado==="activo")),p=y(()=>m.value.filter(a=>a.estado!=="activo").sort((a,e)=>new Date(e.created_at).getTime()-new Date(a.created_at).getTime())),L=async()=>{u.value=!0;try{const a=await k();m.value=(a||[]).map(e=>({...e,estado:e.estado,sesiones_usadas:e.total_sesiones-e.sesiones_restantes}))}catch(a){console.error("Error al cargar bonos:",a)}finally{u.value=!1}},c=a=>a?new Date(a).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"",g=a=>{try{return new Intl.NumberFormat("es-ES",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}catch{return a}},f=a=>({activo:"Activo",agotado:"Agotado",expirado:"Expirado",cancelado:"Cancelado"})[a]||a,v=a=>({activo:"bg-green-100 text-green-800",agotado:"bg-red-100 text-red-800",expirado:"bg-gray-100 text-gray-800",cancelado:"bg-orange-100 text-orange-800"})[a]||"bg-gray-100 text-gray-800",F=(a,e)=>{const x=a/e*100;return x>50?"bg-[#D8AFA0]":x>25?"bg-amber-500":"bg-red-500"};return E(L),(a,e)=>{const x=C;return i(),r("div",S,[s(u)?(i(),r("div",V,[...e[0]||(e[0]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#D8AFA0]"},null,-1),t("p",{class:"mt-4 text-[#5D4A44] opacity-70 font-['Lato']"},"Cargando tu bono...",-1)])])):(i(),r("div",H,[e[17]||(e[17]=t("header",{class:"mb-8"},[t("h1",{class:"text-2xl sm:text-3xl font-['Lora'] font-medium text-[#5D4A44]"}," Mi Bono "),t("p",{class:"text-sm text-[#5D4A44] opacity-70 font-['Lato'] mt-1"}," Gestiona y consulta tu bono de sesiones ")],-1)),s(o)?(i(),r("section",P,[t("header",T,[t("div",null,[t("h2",q,"Bono de "+n(s(o).total_sesiones)+" Sesiones",1),t("p",$,"Contratado el "+n(c(s(o).created_at)),1)]),t("div",null,[t("span",{class:_([v(s(o).estado),"px-3 py-1 rounded-full text-xs font-['Lato'] font-medium"])},n(f(s(o).estado)),3)])]),t("div",G,[t("div",I,[t("p",Q,n(s(o).sesiones_restantes),1),e[1]||(e[1]=t("p",{class:"text-sm text-[#5D4A44] opacity-70 font-['Lato'] mt-1"},"Disponibles",-1))]),t("div",R,[t("p",J,n(s(o).total_sesiones),1),e[2]||(e[2]=t("p",{class:"text-sm text-[#5D4A44] opacity-70 font-['Lato'] mt-1"},"Totales",-1))]),t("div",K,[t("p",O,n(s(o).sesiones_usadas),1),e[3]||(e[3]=t("p",{class:"text-sm text-[#5D4A44] opacity-70 font-['Lato'] mt-1"},"Completadas",-1))])]),t("div",U,[t("div",W,[e[4]||(e[4]=t("span",null,"Progreso del bono",-1)),t("span",null,n(Math.round(s(o).sesiones_usadas/s(o).total_sesiones*100))+"%",1)]),t("div",X,[t("div",{class:_(["h-full rounded-full transition-all duration-500",F(s(o).sesiones_restantes,s(o).total_sesiones)]),style:b({width:`${s(o).sesiones_usadas/s(o).total_sesiones*100}%`})},null,6)])]),t("div",Y,[t("div",Z,[e[6]||(e[6]=t("div",{class:"w-10 h-10 rounded-full bg-[#D8AFA0]/20 flex items-center justify-center flex-shrink-0"},[t("svg",{class:"w-5 h-5 text-[#D8AFA0]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[e[5]||(e[5]=t("p",{class:"text-xs text-[#5D4A44] opacity-70 font-['Lato']"},"Precio total",-1)),t("p",tt,n(g(s(o).precio_total))+"€",1),t("p",et,n(g(s(o).precio_total/s(o).total_sesiones))+"€ por sesión",1)])]),t("div",st,[e[8]||(e[8]=t("div",{class:"w-10 h-10 rounded-full bg-[#D8AFA0]/20 flex items-center justify-center flex-shrink-0"},[t("svg",{class:"w-5 h-5 text-[#D8AFA0]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[e[7]||(e[7]=t("p",{class:"text-xs text-[#5D4A44] opacity-70 font-['Lato']"},"Estado",-1)),t("p",ot,n(f(s(o).estado)),1),s(o).fecha_expiracion?(i(),r("p",at,"Válido hasta "+n(c(s(o).fecha_expiracion)),1)):d("",!0)])])]),s(o).sesiones_restantes<=2&&s(o).sesiones_restantes>0?(i(),r("div",nt,[...e[9]||(e[9]=[t("svg",{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),t("div",null,[t("p",{class:"text-sm font-['Lato'] font-medium text-amber-900"},"Quedan pocas sesiones"),t("p",{class:"text-xs font-['Lato'] text-amber-700 mt-1"},"Considera renovar tu bono pronto para mantener la continuidad.")],-1)])])):d("",!0),s(o).sesiones_restantes===0?(i(),r("div",rt,[...e[10]||(e[10]=[t("svg",{class:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("div",null,[t("p",{class:"text-sm font-['Lato'] font-medium text-red-900"},"Bono agotado"),t("p",{class:"text-xs font-['Lato'] text-red-700 mt-1"},"Has utilizado todas las sesiones. Contacta para adquirir uno nuevo.")],-1)])])):d("",!0),s(o).sesiones_restantes<=2?(i(),r("div",it,[A(x,{to:"/como-empezar",class:"block w-full text-center px-6 py-3 bg-[#D8AFA0] hover:bg-[#C89B8A] text-white rounded-lg font-['Lato'] font-medium transition-colors"},{default:D(()=>[...e[11]||(e[11]=[w("Renovar Bono",-1)])]),_:1})])):d("",!0)])):d("",!0),s(p).length>0?(i(),r("section",lt,[e[14]||(e[14]=t("h2",{class:"text-lg font-['Lora'] font-medium text-[#5D4A44] mb-2"},"Historial de Bonos",-1)),t("div",dt,[(i(!0),r(M,null,z(s(p),l=>(i(),r("article",{key:l.id,class:"bg-white rounded-lg shadow-sm border border-[#EAD5D3]/30 p-4"},[t("div",ct,[t("div",null,[t("h3",xt,"Bono de "+n(l.total_sesiones)+" Sesiones",1),t("p",ut,n(c(l.created_at)),1)]),t("div",mt,[t("p",pt,n(l.sesiones_usadas)+"/"+n(l.total_sesiones),1),e[12]||(e[12]=t("p",{class:"text-xs text-[#5D4A44] opacity-70 font-['Lato']"},"sesiones",-1))])]),t("div",ft,[t("div",{class:"h-full bg-[#5D4A44] opacity-30 rounded-full",style:b({width:`${l.sesiones_usadas/l.total_sesiones*100}%`})},null,4)]),t("div",_t,[t("span",{class:_(["px-2 py-0.5 rounded-full font-medium",v(l.estado)])},n(f(l.estado)),3),e[13]||(e[13]=t("span",null,"·",-1)),t("span",null,"Contratado: "+n(c(l.created_at)),1),l.fecha_expiracion?(i(),r("span",gt,"· Expira: "+n(c(l.fecha_expiracion)),1)):d("",!0)])]))),128))])])):d("",!0),!s(o)&&s(p).length===0?(i(),r("div",vt,[e[16]||(e[16]=N('<div class="w-20 h-20 rounded-full bg-[#EAD5D3]/30 flex items-center justify-center mb-4"><svg class="w-10 h-10 text-[#D8AFA0]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div><h3 class="text-xl font-[&#39;Lora&#39;] font-medium text-[#5D4A44] mb-2">No tienes bonos activos</h3><p class="text-sm text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;] max-w-md mb-6">Adquiere un bono para comenzar tu proceso terapéutico.</p>',3)),A(x,{to:"/contacto",class:"px-6 py-3 bg-[#D8AFA0] hover:bg-[#C89B8A] text-white rounded-lg font-['Lato'] font-medium transition-colors"},{default:D(()=>[...e[15]||(e[15]=[w("Contactar",-1)])]),_:1})])):d("",!0)]))])}}});export{wt as default};
