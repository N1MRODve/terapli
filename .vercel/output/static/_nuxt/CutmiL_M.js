import{ad as s,ae as n,n as u}from"#entry";import{u as p}from"./C9M7zbam.js";import"./Cy0_MzJF.js";const b=s(async(d,f)=>{let r,a;const{user:l,loadUserProfile:c,userProfile:e,waitForUser:t}=p();if(!l.value){console.warn("[role-coordinadora] No hay usuario autenticado, omitiendo verificaciÃ³n de rol");return}try{if(console.log("[role-coordinadora] Esperando carga de usuario y perfil..."),[r,a]=n(()=>t()),await r,a(),e.value||(console.log("[role-coordinadora] Perfil no disponible, cargando manualmente..."),[r,a]=n(()=>c()),await r,a()),!e.value){console.error("[role-coordinadora] No se pudo cargar el perfil del usuario");return}const o=e.value.rol;if(console.log("[role-coordinadora] Usuario con rol:",o,"accediendo a:",d.path),o==="coordinadora"){console.log("[role-coordinadora] Acceso permitido para coordinadora");return}console.log(`[role-coordinadora] Usuario con rol '${o}' no autorizado, redirigiendo...`);const i={psicologa:"/terapeuta/dashboard",coordinadora:"/coordinadora/dashboard",paciente:"/paciente/dashboard"}[o]||"/login";if(d.path===i){console.log("[role-coordinadora] Ya en la ruta de destino, evitando bucle");return}return console.log(`[role-coordinadora] Redirigiendo a ${i}`),u(i,{replace:!0})}catch(o){console.error("[role-coordinadora] Error al verificar rol:",o);return}});export{b as default};
