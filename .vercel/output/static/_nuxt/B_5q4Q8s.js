import{ah as t,f as u,ai as d,n as p}from"#entry";const m=t(async(n,f)=>{let r,a;const{user:l,loadUserProfile:c,userProfile:e,waitForUser:s}=u();if(!l.value){console.warn("[role-coordinadora] No hay usuario autenticado, omitiendo verificaciÃ³n de rol");return}try{if(console.log("[role-coordinadora] Esperando carga de usuario y perfil..."),[r,a]=d(()=>s()),await r,a(),e.value||(console.log("[role-coordinadora] Perfil no disponible, cargando manualmente..."),[r,a]=d(()=>c()),await r,a()),!e.value){console.error("[role-coordinadora] No se pudo cargar el perfil del usuario");return}const o=e.value.rol;if(console.log("[role-coordinadora] Usuario con rol:",o,"accediendo a:",n.path),o==="coordinadora"){console.log("[role-coordinadora] Acceso permitido para coordinadora");return}console.log(`[role-coordinadora] Usuario con rol '${o}' no autorizado, redirigiendo...`);const i={psicologa:"/terapeuta/dashboard",coordinadora:"/coordinadora/dashboard",paciente:"/paciente/dashboard"}[o]||"/login";if(n.path===i){console.log("[role-coordinadora] Ya en la ruta de destino, evitando bucle");return}return console.log(`[role-coordinadora] Redirigiendo a ${i}`),p(i,{replace:!0})}catch(o){console.error("[role-coordinadora] Error al verificar rol:",o);return}});export{m as default};
