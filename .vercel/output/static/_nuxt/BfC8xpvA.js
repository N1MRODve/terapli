import{_ as xe}from"./C13k7riN.js";import{r as x,q as T,f as ve,c as d,a as e,b as Y,g as b,h as D,t as l,k as n,j as J,v as oe,l as K,x as he,F as q,s as V,w as Q,z as be,T as re,o as c,y as M,d as se,i as ne}from"#entry";import{u as we}from"./Cy0_MzJF.js";import{_ as _e}from"./DlAUqK2U.js";const ye={class:"min-h-screen bg-gradient-to-br from-[#F2F2F2] via-[#FAFAFA] to-[#F8F9FA] p-6 md:p-8 space-y-8 relative overflow-hidden"},Fe={class:"relative z-10 bg-white/85 backdrop-blur-sm rounded-3xl shadow-xl border border-white/50 overflow-hidden transition-all duration-500 hover:shadow-2xl hover:bg-white/90"},ke={class:"sticky top-0 z-20 bg-gradient-to-r from-[#5550F2]/5 via-[#027368]/5 to-[#04BF9D]/5 backdrop-blur-md border-t-4 border-gradient-to-r from-[#5550F2] to-[#027368] px-6 md:px-8 py-6 shadow-lg"},Ee={class:"flex items-start justify-between gap-4 mb-4"},Ce={class:"text-right flex-shrink-0"},Be={class:"relative"},Ne={class:"text-5xl font-bold bg-gradient-to-r from-[#F2B33D] to-[#5550F2] bg-clip-text text-transparent leading-none"},De={class:"relative group"},Me={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4"},Se={class:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-xs font-['Lato'] font-semibold bg-gradient-to-r from-[#04BF9D] to-[#027368] text-white shadow-lg"},$e={key:0,class:"bg-gradient-to-r from-gray-100 to-gray-50 h-2 relative overflow-hidden"},Pe={class:"px-6 md:px-8 py-8 bg-gradient-to-b from-white/50 to-white/80 backdrop-blur-sm"},Te={class:"overflow-x-auto -mx-2 px-2 pb-2"},Ae={class:"grid grid-cols-1 md:grid-cols-3 gap-6 min-w-max md:min-w-0"},Le={class:"group bg-white/90 backdrop-blur-md rounded-2xl p-6 shadow-sm border border-white/50 hover:shadow-md hover:bg-white/95 transition-all duration-300 min-w-[280px] md:min-w-0 relative overflow-hidden"},Ie={class:"relative flex items-center gap-4"},je={class:"flex-1"},ze={class:"text-3xl font-['Elms_Sans'] font-bold bg-gradient-to-r from-[#F2B33D] to-[#5550F2] bg-clip-text text-transparent"},qe={class:"group bg-white/90 backdrop-blur-md rounded-2xl p-6 shadow-sm border border-white/50 hover:shadow-md hover:bg-white/95 transition-all duration-300 min-w-[280px] md:min-w-0 relative overflow-hidden"},Ve={class:"relative flex items-center gap-4"},Re={class:"flex-1"},Ue={class:"text-3xl font-['Elms_Sans'] font-bold bg-gradient-to-r from-[#027368] to-[#04BF9D] bg-clip-text text-transparent"},Oe={key:0,class:"text-xs font-['Lato'] text-gray-500 mt-1"},He={class:"group bg-white/90 backdrop-blur-md rounded-2xl p-6 shadow-lg border border-white/50 hover:shadow-xl hover:bg-white/95 transition-all duration-300 min-w-[280px] md:min-w-0 relative overflow-hidden"},Ge={class:"relative flex items-center gap-4"},Xe={class:"flex-1"},Ze={class:"text-3xl font-['Elms_Sans'] font-bold bg-gradient-to-r from-[#F2B33D] to-[#5550F2] bg-clip-text text-transparent"},Ye={class:"text-xs font-['Lato'] text-gray-500 mt-1"},Je={class:"px-6 md:px-8 py-6"},Ke={key:0,class:"space-y-4"},Qe={key:1,class:"space-y-4"},We={class:"flex flex-col md:flex-row md:items-center gap-5 ml-2"},et={class:"relative flex-shrink-0"},tt={class:"w-16 h-16 rounded-xl bg-gradient-to-br from-[#04BF9D] to-[#027368] flex items-center justify-center text-white font-bold shadow-sm text-xl"},ot={class:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4"},rt={class:"font-bold text-neutral-800 text-lg mb-1"},st={class:"text-sm text-neutral-500 capitalize flex items-center gap-1.5"},nt={class:"text-sm font-medium text-neutral-700"},at={class:"capitalize"},lt={class:"flex items-center gap-2"},it={class:"text-sm text-neutral-500"},dt={class:"text-left md:text-right"},ct={class:"text-2xl font-bold text-[#B46E4B]"},ut={class:"flex-shrink-0"},pt=["onClick","disabled"],ft={key:2,class:"text-center py-16"},mt={class:"text-neutral-600 mb-6 text-base"},gt={key:3,class:"text-center py-16"},xt={class:"bg-white rounded-2xl shadow-sm border border-neutral-200 overflow-hidden mt-8"},vt={class:"sticky top-0 z-20 bg-gradient-to-r from-green-50 to-emerald-50/50 px-6 md:px-8 py-6 border-b border-neutral-200 shadow-md"},ht={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4"},bt=["value"],wt={class:"relative"},_t={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4"},yt={class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold bg-[#027368] text-white"},Ft={class:"px-6 md:px-8 py-6 bg-gradient-to-b from-green-50/50 to-white border-b border-green-100"},kt={class:"overflow-x-auto -mx-2 px-2 pb-2"},Et={class:"grid grid-cols-1 md:grid-cols-3 gap-4 min-w-max md:min-w-0"},Ct={class:"bg-white rounded-xl p-5 shadow-sm border border-green-200 hover:shadow-md transition-all duration-200 min-w-[280px] md:min-w-0"},Bt={class:"flex items-center gap-4"},Nt={class:"text-3xl font-bold text-neutral-800"},Dt={key:0,class:"text-xs text-neutral-500 mt-0.5"},Mt={class:"bg-white rounded-xl p-5 shadow-sm border border-green-200 hover:shadow-md transition-all duration-200 min-w-[280px] md:min-w-0"},St={class:"flex items-center gap-4"},$t={class:"text-3xl font-bold text-[#027368]"},Pt={key:0,class:"text-xs text-neutral-500 mt-0.5"},Tt={class:"bg-white rounded-xl p-5 shadow-sm border border-blue-200 hover:shadow-md transition-all duration-200 min-w-[280px] md:min-w-0"},At={class:"flex items-center gap-4"},Lt={class:"text-3xl font-bold text-blue-600"},It={key:0,class:"text-xs text-neutral-500 mt-0.5"},jt={class:"px-6 md:px-8 py-6"},zt={key:0,class:"space-y-3"},qt={key:1,class:"space-y-4"},Vt=["onClick"],Rt={class:"flex flex-col md:flex-row md:items-center gap-5 ml-2"},Ut={class:"relative flex-shrink-0"},Ot={class:"w-16 h-16 rounded-xl bg-gradient-to-br from-[#027368] to-[#04BF9D] flex items-center justify-center text-white font-bold shadow-sm text-xl"},Ht={class:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4"},Gt={class:"font-bold text-neutral-800 text-lg mb-1"},Xt={class:"text-sm text-neutral-500 capitalize flex items-center gap-1.5"},Zt={class:"text-sm font-medium text-neutral-700"},Yt={class:"flex items-center gap-2"},Jt={class:"text-sm text-neutral-500"},Kt={class:"text-left md:text-right"},Qt={class:"text-2xl font-bold text-[#027368]"},Wt={class:"text-xs text-neutral-500 mt-1 flex items-center md:justify-end gap-1.5"},eo={key:2,class:"text-center py-16"},to={class:"text-neutral-600 mb-6"},oo={key:3,class:"text-center py-16"},ro={class:"text-neutral-600"},so={key:0,class:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 md:p-8"},no={key:0,class:"space-y-6"},ao={class:"flex items-center gap-4 p-4 bg-gradient-to-r from-green-50 to-transparent rounded-xl border border-green-100"},lo={class:"w-16 h-16 rounded-xl bg-gradient-to-br from-[#027368] to-[#04BF9D] flex items-center justify-center text-white font-bold shadow-sm text-2xl"},io={class:"text-lg font-bold text-neutral-800"},co={class:"text-sm text-neutral-600 capitalize"},uo={class:"grid grid-cols-2 gap-4"},po={class:"p-4 bg-neutral-50 rounded-xl border border-neutral-200"},fo={class:"text-2xl font-bold text-[#027368]"},mo={class:"p-4 bg-neutral-50 rounded-xl border border-neutral-200"},go={class:"text-base font-semibold text-neutral-800"},xo={class:"p-4 bg-neutral-50 rounded-xl border border-neutral-200"},vo={class:"text-2xl font-bold text-neutral-800"},ho={class:"p-4 bg-neutral-50 rounded-xl border border-neutral-200"},bo={__name:"pagos",setup(wo){const C=we(),U=x(!0),v=x([]),P=x(0),A=x(0),S=x(""),I=x([]),R=x(!1),h=x(null),O=x(!0),w=x([]),L=x(0),j=x(0),F=x(""),_=x("");x(!1),x("");const H=x(!1),ae=T(()=>{const r=w.value.length+v.value.length;return r===0?100:Math.round(v.value.length/r*100)}),$=T(()=>{if(!F.value.trim())return w.value;const r=F.value.toLowerCase().trim();return w.value.filter(t=>{const i=(t.paciente_nombre||"").toLowerCase(),o=(t.terapeuta_nombre||"").toLowerCase(),f=(t.tipo_bono||"").toLowerCase();return i.includes(r)||o.includes(r)||f.includes(r)})}),B=T(()=>{if(!_.value.trim())return v.value;const r=_.value.toLowerCase().trim();return v.value.filter(t=>{const i=(t.paciente_nombre||"").toLowerCase(),o=(t.terapeuta_nombre||"").toLowerCase(),f=(t.tipo_bono||"").toLowerCase();return i.includes(r)||o.includes(r)||f.includes(r)})}),le=T(()=>$.value.reduce((r,t)=>r+(Number(t.monto_total)||0),0)),ie=T(()=>$.value.filter(r=>r.sesiones_restantes<=1).length),W=T(()=>B.value.reduce((r,t)=>r+(Number(t.monto_total)||0),0)),de=T(()=>B.value.length===0?0:W.value/B.value.length),N=r=>new Intl.NumberFormat("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0),ee=r=>r?new Date(r).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"No especificada",G=r=>{if(!r)return"?";const t=r.split(" ");return t.length>=2?`${t[0][0]}${t[1][0]}`.toUpperCase():r.substring(0,2).toUpperCase()},X=async()=>{console.log("[Frontend] Iniciando carga de bonos confirmados");try{if(U.value=!0,!C){console.error("[Frontend] Cliente Supabase no disponible"),g("‚ùå Error: Cliente de base de datos no disponible","error");return}console.log("[Frontend] Construyendo query para bonos confirmados...");let r=C.from("bonos").select("*").eq("estado_pago","pagado").order("fecha_pago",{ascending:!1});if(S.value){console.log("[Frontend] Aplicando filtro de mes:",S.value);try{const[s,p]=S.value.split("-"),E=parseInt(s),z=parseInt(p);if(isNaN(E)||isNaN(z)||z<1||z>12){console.error("[Frontend] Mes seleccionado inv√°lido:",S.value),g("‚ùå Filtro de mes inv√°lido","error");return}const me=new Date(E,z-1,1),ge=new Date(E,z,0,23,59,59);r=r.gte("fecha_pago",me.toISOString()).lte("fecha_pago",ge.toISOString())}catch(s){console.error("[Frontend] Error al procesar filtro de fecha:",s),g("‚ùå Error en filtro de fecha","error");return}}console.log("[Frontend] Ejecutando query de bonos confirmados...");const{data:t,error:i}=await r;if(i){console.error("[Frontend] Error al cargar bonos confirmados:",i),g(`‚ùå Error al cargar bonos: ${i.message}`,"error");return}if(!t||t.length===0){console.log("[Frontend] No se encontraron bonos confirmados"),v.value=[],P.value=0,A.value=0;return}console.log(`[Frontend] Encontrados ${t.length} bonos confirmados`);const o=[...new Set(t.map(s=>s.paciente_id).filter(Boolean))];if(o.length===0){console.warn("[Frontend] No hay IDs de pacientes v√°lidos en los bonos"),v.value=t.map(s=>({...s,paciente_nombre:"Sin nombre",paciente_email:null,terapeuta_nombre:null}));return}console.log(`[Frontend] Cargando informaci√≥n de ${o.length} pacientes...`);const{data:f,error:k}=await C.from("pacientes").select("id, nombre_completo, email, terapeuta_id").in("id",o);k&&(console.error("[Frontend] Error al cargar pacientes:",k),g(`‚ö†Ô∏è Error al cargar datos de pacientes: ${k.message}`,"warning"));const u=f?[...new Set(f.map(s=>s.terapeuta_id).filter(Boolean))]:[];let m=[];if(u.length>0){console.log(`[Frontend] Cargando informaci√≥n de ${u.length} terapeutas...`);try{const{data:s,error:p}=await C.from("terapeutas").select("id, nombre_completo").in("id",u);p?(console.error("[Frontend] Error al cargar terapeutas:",p),g(`‚ö†Ô∏è Error al cargar datos de terapeutas: ${p.message}`,"warning")):(m=s||[],console.log(`[Frontend] ‚úÖ ${m.length} terapeutas cargados`))}catch(s){console.error("[Frontend] Excepci√≥n al cargar terapeutas:",s)}}const y=new Map;f&&Array.isArray(f)&&f.forEach(s=>{s&&s.id&&y.set(s.id,s)});const a=new Map;m&&Array.isArray(m)&&m.forEach(s=>{s&&s.id&&a.set(s.id,s)}),console.log("[Frontend] Transformando datos de bonos confirmados..."),v.value=t.map(s=>{try{const p=s.paciente_id?y.get(s.paciente_id):null,E=p?.terapeuta_id?a.get(p.terapeuta_id):null;return{id:s.id,paciente_id:s.paciente_id,paciente_nombre:p?.nombre_completo||"Sin nombre",paciente_email:p?.email||null,terapeuta_nombre:E?.nombre_completo||null,sesiones_totales:Number(s.sesiones_totales)||0,sesiones_restantes:Number(s.sesiones_restantes)||0,monto_total:Number(s.monto_total)||0,tipo_bono:s.tipo_bono||"Bono Est√°ndar",fecha_pago:s.fecha_pago,metodo_pago:s.metodo_pago||"No especificado"}}catch(p){return console.error("[Frontend] Error al transformar bono:",p,s),{id:s.id||"unknown",paciente_id:s.paciente_id,paciente_nombre:"Error en datos",paciente_email:null,terapeuta_nombre:null,sesiones_totales:0,sesiones_restantes:0,monto_total:0,tipo_bono:"Error",fecha_pago:s.fecha_pago,metodo_pago:"Error"}}}),console.log(`[Frontend] ‚úÖ ${v.value.length} bonos confirmados procesados`);try{P.value=v.value.reduce((s,p)=>{const E=Number(p.monto_total);return s+(isNaN(E)?0:E)},0),A.value=v.value.length>0?P.value/v.value.length:0,console.log(`[Frontend] ‚úÖ Totales calculados - Total: ${P.value}‚Ç¨, Promedio: ${A.value}‚Ç¨`)}catch(s){console.error("[Frontend] Error al calcular totales:",s),P.value=0,A.value=0}}catch(r){console.error("[Frontend] Error general al cargar bonos confirmados:",r),g(`‚ùå Error al cargar bonos confirmados: ${r.message}`,"error"),v.value=[],P.value=0,A.value=0}finally{U.value=!1,console.log("[Frontend] Carga de bonos confirmados finalizada")}},ce=async()=>{console.log("[Frontend] Iniciando carga de meses disponibles");try{if(!C){console.error("[Frontend] Cliente Supabase no disponible para meses");return}console.log("[Frontend] Ejecutando query de meses disponibles...");const{data:r,error:t}=await C.from("bonos").select("fecha_pago").eq("estado_pago","pagado").not("fecha_pago","is",null).order("fecha_pago",{ascending:!1});if(t){console.error("[Frontend] Error al cargar meses:",t),g(`‚ö†Ô∏è Error al cargar filtro de meses: ${t.message}`,"warning");return}if(!r||r.length===0){console.log("[Frontend] No se encontraron fechas de pago"),I.value=[];return}console.log(`[Frontend] Procesando ${r.length} fechas para extraer meses √∫nicos`);const i=new Set;let o=0,f=0;r.forEach(u=>{try{if(u.fecha_pago){const m=new Date(u.fecha_pago);if(isNaN(m.getTime())){f++,console.warn("[Frontend] Fecha inv√°lida encontrada:",u.fecha_pago);return}const y=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}`;i.add(y),o++}}catch(m){f++,console.error("[Frontend] Error al procesar fecha:",m,u.fecha_pago)}}),console.log(`[Frontend] Fechas procesadas - V√°lidas: ${o}, Inv√°lidas: ${f}`);const k=Array.from(i).sort().reverse();I.value=k.map(u=>{try{const[m,y]=u.split("-"),a=parseInt(m),s=parseInt(y);if(isNaN(a)||isNaN(s)||s<1||s>12)return console.error("[Frontend] Valores de fecha inv√°lidos:",{year:m,month:y}),{valor:u,nombre:"Mes inv√°lido"};const p=new Date(a,s-1);if(isNaN(p.getTime()))return console.error("[Frontend] Fecha construida inv√°lida:",{yearNum:a,monthNum:s}),{valor:u,nombre:"Fecha inv√°lida"};const E=p.toLocaleDateString("es-ES",{month:"long",year:"numeric"});return{valor:u,nombre:E.charAt(0).toUpperCase()+E.slice(1)}}catch(m){return console.error("[Frontend] Error al formatear mes:",m,u),{valor:u,nombre:`Error: ${u}`}}}).filter(u=>u.nombre!=="Mes inv√°lido"&&u.nombre!=="Fecha inv√°lida"),console.log(`[Frontend] ‚úÖ ${I.value.length} meses √∫nicos disponibles`)}catch(r){console.error("[Frontend] Error general al cargar meses disponibles:",r),g("‚ö†Ô∏è Error al cargar filtro de meses","warning"),I.value=[]}},ue=async()=>{await X()},pe=r=>{h.value=r,R.value=!0},Z=()=>{R.value=!1,h.value=null},te=async()=>{console.log("[Frontend] Iniciando carga de bonos pendientes");try{if(O.value=!0,!C){console.error("[Frontend] Cliente Supabase no disponible"),g("‚ùå Error: Cliente de base de datos no disponible","error");return}console.log("[Frontend] Ejecutando query de bonos pendientes...");const{data:r,error:t}=await C.from("bonos").select("*").eq("estado_pago","pendiente").in("estado",["activo","pendiente"]).order("created_at",{ascending:!1});if(t){console.error("[Frontend] Error al cargar bonos pendientes:",t),g(`‚ùå Error al cargar bonos pendientes: ${t.message}`,"error");return}if(!r||r.length===0){console.log("[Frontend] No se encontraron bonos pendientes"),w.value=[],L.value=0,j.value=0;return}console.log(`[Frontend] Encontrados ${r.length} bonos pendientes`);const i=[...new Set(r.map(a=>a.paciente_id).filter(Boolean))];if(i.length===0){console.warn("[Frontend] No hay IDs de pacientes v√°lidos en los bonos pendientes"),w.value=r.map(a=>({...a,paciente_nombre:"Sin nombre",paciente_email:null,terapeuta_nombre:null}));return}console.log(`[Frontend] Cargando informaci√≥n de ${i.length} pacientes para bonos pendientes...`);const{data:o,error:f}=await C.from("pacientes").select("id, nombre_completo, email, terapeuta_id").in("id",i);f&&(console.error("[Frontend] Error al cargar pacientes para bonos pendientes:",f),g(`‚ö†Ô∏è Error al cargar datos de pacientes: ${f.message}`,"warning"));const k=o?[...new Set(o.map(a=>a.terapeuta_id).filter(Boolean))]:[];let u=[];if(k.length>0){console.log(`[Frontend] Cargando informaci√≥n de ${k.length} terapeutas para bonos pendientes...`);try{const{data:a,error:s}=await C.from("terapeutas").select("id, nombre_completo").in("id",k);s?(console.error("[Frontend] Error al cargar terapeutas para bonos pendientes:",s),g(`‚ö†Ô∏è Error al cargar datos de terapeutas: ${s.message}`,"warning")):(u=a||[],console.log(`[Frontend] ‚úÖ ${u.length} terapeutas cargados para bonos pendientes`))}catch(a){console.error("[Frontend] Excepci√≥n al cargar terapeutas para bonos pendientes:",a)}}const m=new Map;o&&Array.isArray(o)&&o.forEach(a=>{a&&a.id&&m.set(a.id,a)});const y=new Map;u&&Array.isArray(u)&&u.forEach(a=>{a&&a.id&&y.set(a.id,a)}),console.log("[Frontend] Transformando datos de bonos pendientes..."),w.value=r.map(a=>{try{const s=a.paciente_id?m.get(a.paciente_id):null,p=s?.terapeuta_id?y.get(s.terapeuta_id):null;return{id:a.id,paciente_id:a.paciente_id,paciente_nombre:s?.nombre_completo||"Sin nombre",paciente_email:s?.email||null,terapeuta_nombre:p?.nombre_completo||null,sesiones_totales:Number(a.sesiones_totales)||0,sesiones_restantes:Number(a.sesiones_restantes)||0,monto_total:Number(a.monto_total)||0,tipo_bono:a.tipo_bono||"Bono Est√°ndar",estado:a.estado||"pendiente",created_at:a.created_at}}catch(s){return console.error("[Frontend] Error al transformar bono pendiente:",s,a),{id:a.id||"unknown",paciente_id:a.paciente_id,paciente_nombre:"Error en datos",paciente_email:null,terapeuta_nombre:null,sesiones_totales:0,sesiones_restantes:0,monto_total:0,tipo_bono:"Error",estado:"error",created_at:a.created_at}}}),console.log(`[Frontend] ‚úÖ ${w.value.length} bonos pendientes procesados`);try{L.value=w.value.reduce((a,s)=>{const p=Number(s.monto_total);return a+(isNaN(p)?0:p)},0),j.value=w.value.filter(a=>{const s=Number(a.sesiones_restantes);return!isNaN(s)&&s<=1}).length,console.log(`[Frontend] ‚úÖ Totales pendientes calculados - Total: ${L.value}‚Ç¨, Urgentes: ${j.value}`)}catch(a){console.error("[Frontend] Error al calcular totales de bonos pendientes:",a),L.value=0,j.value=0}}catch(r){console.error("[Frontend] Error general al cargar bonos pendientes:",r),g(`‚ùå Error al cargar bonos pendientes: ${r.message}`,"error"),w.value=[],L.value=0,j.value=0}finally{O.value=!1,console.log("[Frontend] Carga de bonos pendientes finalizada")}},fe=async r=>{if(!r||!r.id){console.error("[Frontend] Bono inv√°lido para confirmaci√≥n:",r),g("‚ùå Error: Datos del bono inv√°lidos","error");return}console.log("[Frontend] Iniciando confirmaci√≥n de pago para bono:",r.id);try{H.value=!0;const{data:t,error:i}=await $fetch("/api/pagos/confirmar",{method:"POST",body:{bonoId:r.id,metodoPago:"coordinacion"}}).catch(o=>{throw console.error("[Frontend] Error en fetch:",o),o.status===401?new Error("No tienes permisos para confirmar pagos"):o.status===403?new Error("Acceso denegado. Solo coordinadoras pueden confirmar pagos"):o.status===404?new Error("El bono no existe o ya fue confirmado"):o.status===409?new Error("El bono ya fue confirmado por otro usuario"):o.status>=500?new Error("Error del servidor. Por favor intenta nuevamente"):new Error(o.data?.message||o.statusText||"Error al confirmar pago")});if(i)throw console.error("[Frontend] Error de la API:",i),new Error(i.message||"Error desconocido de la API");if(!t||!t.success)throw console.error("[Frontend] Respuesta inv√°lida de la API:",t),new Error("Respuesta inv√°lida del servidor");console.log("[Frontend] ‚úÖ Pago confirmado exitosamente");try{await Promise.all([te().catch(o=>{console.error("[Frontend] Error al recargar bonos pendientes:",o)}),X().catch(o=>{console.error("[Frontend] Error al recargar bonos confirmados:",o)})])}catch(o){console.error("[Frontend] Error al recargar listas:",o),g("‚ö†Ô∏è Pago confirmado pero las listas no se actualizaron. Recarga la p√°gina","warning");return}g("‚úÖ Pago confirmado exitosamente","success")}catch(t){console.error("[Frontend] Error al confirmar pago:",t);const i=t.message||t.statusText||"Error al confirmar pago";g(`‚ùå ${i}`,"error")}finally{H.value=!1}},g=(r,t="info")=>{try{if(!r||typeof r!="string"){console.error("[Frontend] Toast mensaje inv√°lido:",r);return}const i=document.createElement("div"),o=["success","error","warning","info"].includes(t)?t:"info",f={success:"bg-[#027368] text-white border-[#04BF9D]/20",error:"bg-red-500 text-white border-red-400/20",warning:"bg-amber-500 text-white border-amber-400/20",info:"bg-neutral-800 text-white border-neutral-600/20"},k={success:"‚úì",error:"‚úï",warning:"‚ö†",info:"‚Ñπ"};i.className=`fixed top-4 right-4 z-[100] px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 transform transition-all duration-300 border-2 ${f[o]} max-w-md`;const u=r.replace(/</g,"&lt;").replace(/>/g,"&gt;");if(i.innerHTML=`
      <span class="text-lg flex-shrink-0">${k[o]}</span>
      <span class="font-medium text-sm leading-tight">${u}</span>
    `,!document.body){console.error("[Frontend] document.body no disponible para toast");return}document.body.appendChild(i),requestAnimationFrame(()=>{i.parentNode&&(i.style.transform="translateX(0)")});const y=setTimeout(()=>{i.parentNode&&(i.style.opacity="0",i.style.transform="translateX(100%)",setTimeout(()=>{i.parentNode&&document.body.removeChild(i)},300))},o==="error"?5e3:o==="warning"?4e3:3e3);i.addEventListener("click",()=>{clearTimeout(y),i.parentNode&&(i.style.opacity="0",i.style.transform="translateX(100%)",setTimeout(()=>{i.parentNode&&document.body.removeChild(i)},300))}),i.style.cursor="pointer"}catch(i){console.error("[Frontend] Error al mostrar toast:",i),alert(r)}};return ve(()=>{ce(),X(),te()}),(r,t)=>{const i=xe;return c(),d("div",ye,[t[61]||(t[61]=e("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[e("div",{class:"absolute -top-32 -right-32 w-96 h-96 bg-gradient-to-br from-[#5550F2]/10 to-[#027368]/5 rounded-full blur-3xl"}),e("div",{class:"absolute -bottom-32 -left-32 w-96 h-96 bg-gradient-to-tr from-[#04BF9D]/10 to-[#F2B33D]/5 rounded-full blur-3xl"}),e("div",{class:"absolute top-1/3 right-1/4 w-64 h-64 bg-gradient-to-r from-[#027368]/8 to-[#5550F2]/8 rounded-full blur-2xl"})],-1)),e("div",Fe,[e("div",ke,[e("div",Ee,[t[7]||(t[7]=D('<div class="flex-1" data-v-efdf5c5d><div class="flex items-center gap-3 mb-2" data-v-efdf5c5d><div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-[#5550F2] to-[#027368] shadow-lg flex items-center justify-center group-hover:shadow-xl transition-all duration-300" data-v-efdf5c5d><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" data-v-efdf5c5d><circle cx="12" cy="12" r="10" data-v-efdf5c5d></circle><polyline points="12 6 12 12 16 14" data-v-efdf5c5d></polyline></svg></div><h2 class="text-2xl font-[&#39;Elms_Sans&#39;] font-bold bg-gradient-to-r from-[#5550F2] to-[#027368] bg-clip-text text-transparent" data-v-efdf5c5d> Bonos Pendientes de Confirmar </h2></div><p class="text-sm font-[&#39;Lato&#39;] text-gray-600 leading-relaxed ml-15" data-v-efdf5c5d> Gestiona aqu√≠ los pagos pendientes y el seguimiento financiero de cada paciente. </p></div>',1)),e("div",Ce,[t[6]||(t[6]=e("p",{class:"text-xs font-['Lato'] text-gray-500 uppercase tracking-wider font-semibold mb-1"},"Pendientes",-1)),e("div",Be,[e("p",Ne,l(n($).length),1),t[5]||(t[5]=e("div",{class:"absolute -inset-2 bg-gradient-to-r from-[#F2B33D]/20 to-[#5550F2]/20 rounded-xl blur opacity-60"},null,-1))])])]),e("div",De,[t[8]||(t[8]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-[#027368] group-focus-within:text-[#5550F2] transition-colors duration-300",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.35-4.35"})])],-1)),J(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>K(F)?F.value=o:null),type:"text",placeholder:"Buscar paciente en bonos pendientes...",class:"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl text-sm font-['Lato'] focus:ring-2 focus:ring-[#5550F2]/20 focus:border-[#5550F2] transition-all duration-300 bg-white/80 backdrop-blur-sm placeholder:text-gray-400 hover:bg-white/90 shadow-sm hover:shadow-md"},null,512),[[oe,n(F)]]),n(F)?(c(),d("div",Me,[e("span",Se,l(n($).length)+" resultado"+l(n($).length!==1?"s":""),1)])):b("",!0)])]),n(w).length>0||n(v).length>0?(c(),d("div",$e,[e("div",{class:"absolute inset-y-0 left-0 bg-gradient-to-r from-[#04BF9D] via-[#027368] to-[#5550F2] transition-all duration-700 ease-out shadow-lg",style:he({width:`${n(ae)}%`})},null,4),t[9]||(t[9]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"},null,-1))])):b("",!0),e("div",Pe,[e("div",Te,[e("div",Ae,[e("div",Le,[t[12]||(t[12]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-[#F2B33D]/5 to-[#5550F2]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),e("div",Ie,[t[11]||(t[11]=e("div",{class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-[#F2B33D] to-[#F2B33D]/70 shadow-lg flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 6 12 12 16 14"})])],-1)),e("div",je,[t[10]||(t[10]=e("p",{class:"text-xs font-['Lato'] text-gray-500 uppercase font-semibold tracking-wider mb-2"},"Bonos Pendientes",-1)),e("p",ze,l(n(w).length),1)])])]),e("div",qe,[t[15]||(t[15]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-[#027368]/5 to-[#04BF9D]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),e("div",Ve,[t[14]||(t[14]=e("div",{class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-[#027368] to-[#04BF9D] shadow-lg flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},[e("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})])],-1)),e("div",Re,[t[13]||(t[13]=e("p",{class:"text-xs font-['Lato'] text-gray-500 uppercase font-semibold tracking-wider mb-2"},"Total por Confirmar",-1)),e("p",Ue,l(N(n(le)))+"‚Ç¨",1),n(F)?(c(),d("p",Oe,"de "+l(N(n(L)))+"‚Ç¨ total",1)):b("",!0)])])]),e("div",He,[t[18]||(t[18]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-[#F2B33D]/5 to-[#5550F2]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),e("div",Ge,[t[17]||(t[17]=D('<div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-[#F2B33D] to-[#5550F2] shadow-lg flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300" data-v-efdf5c5d><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" data-v-efdf5c5d><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" data-v-efdf5c5d></path><path d="M12 9v4" data-v-efdf5c5d></path><path d="M12 17h.01" data-v-efdf5c5d></path></svg></div>',1)),e("div",Xe,[t[16]||(t[16]=e("p",{class:"text-xs font-['Lato'] text-gray-500 uppercase font-semibold tracking-wider mb-2"},"Requieren Atenci√≥n",-1)),e("p",Ze,l(n(ie)),1),e("p",Ye,l(n(F)?"en resultados":"Pocas sesiones restantes"),1)])])])])])]),e("div",Je,[n(O)?(c(),d("div",Ke,[(c(),d(q,null,V(3,o=>e("div",{key:o,class:"animate-pulse"},[...t[19]||(t[19]=[e("div",{class:"bg-gradient-to-r from-neutral-100 via-neutral-200 to-neutral-100 bg-[length:200%_100%] rounded-xl h-32 animate-shimmer"},null,-1)])])),64))])):n($).length>0?(c(),d("div",Qe,[(c(!0),d(q,null,V(n($),o=>(c(),d("div",{key:o.id,class:"group relative bg-white rounded-xl p-5 md:p-6 hover:shadow-md transition-all duration-300 border border-neutral-200/50 hover:border-[#5550F2]/30 shadow-sm"},[e("div",{class:M(["absolute left-0 top-0 bottom-0 w-1 rounded-l-xl",{"bg-red-500":o.sesiones_restantes===0,"bg-orange-500":o.sesiones_restantes===1,"bg-amber-500":o.sesiones_restantes===2,"bg-gradient-to-b from-[#04BF9D] to-[#027368]":o.sesiones_restantes>2}])},null,2),e("div",We,[e("div",et,[e("div",tt,l(G(o.paciente_nombre)),1),o.sesiones_restantes<=1?(c(),d("div",{key:0,class:M(["absolute -top-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center shadow-md",{"bg-red-500":o.sesiones_restantes===0,"bg-orange-500":o.sesiones_restantes===1}])},[...t[20]||(t[20]=[e("span",{class:"text-white text-xs font-bold"},"!",-1)])],2)):b("",!0)]),e("div",ot,[e("div",null,[e("p",rt,l(o.paciente_nombre),1),e("p",st,[t[21]||(t[21]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-[#04BF9D]"},null,-1)),se(" "+l(o.tipo_bono||"Bono Est√°ndar"),1)])]),e("div",null,[t[22]||(t[22]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Terapeuta",-1)),e("p",nt,l(o.terapeuta_nombre||"No asignado"),1)]),e("div",null,[t[23]||(t[23]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Estado",-1)),e("span",{class:M(["inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium",{"bg-green-100 text-green-700":o.estado==="activo","bg-amber-100 text-amber-700":o.estado==="pendiente","bg-neutral-100 text-neutral-700":o.estado==="agotado"}])},[e("span",{class:M(["w-1.5 h-1.5 rounded-full",{"bg-green-500":o.estado==="activo","bg-amber-500":o.estado==="pendiente","bg-neutral-500":o.estado==="agotado"}])},null,2),e("span",at,l(o.estado),1)],2)]),e("div",null,[t[25]||(t[25]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Sesiones",-1)),e("div",lt,[e("p",{class:M(["text-base font-bold",{"text-red-600":o.sesiones_restantes===0,"text-orange-600":o.sesiones_restantes===1,"text-amber-600":o.sesiones_restantes===2,"text-[#027368]":o.sesiones_restantes>2}])},l(o.sesiones_restantes),3),e("p",it,"/ "+l(o.sesiones_totales),1)]),o.sesiones_restantes<=1?(c(),d("div",{key:0,class:M(["flex items-center gap-1 text-xs font-semibold mt-1",{"text-red-600":o.sesiones_restantes===0,"text-orange-600":o.sesiones_restantes===1}])},[t[24]||(t[24]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),e("path",{d:"M12 9v4"}),e("path",{d:"M12 17h.01"})],-1)),e("span",null,l(o.sesiones_restantes===0?"¬°AGOTADO!":"¬°√öLTIMA!"),1)],2)):b("",!0)]),e("div",dt,[t[26]||(t[26]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Monto",-1)),e("p",ct,l(N(o.monto_total))+"‚Ç¨",1),t[27]||(t[27]=e("p",{class:"text-xs text-[#C57A3E] font-medium mt-0.5"},"Por confirmar",-1))])]),e("div",ut,[e("button",{onClick:ne(f=>fe(o),["stop"]),disabled:n(H),class:"group/btn w-full md:w-auto px-6 py-3 bg-gradient-to-r from-[#04BF9D] to-[#027368] text-white rounded-xl hover:from-[#027368] hover:to-[#5550F2] transition-all duration-300 font-['Lato'] font-semibold text-sm shadow-sm hover:shadow-md flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 border border-white/20 backdrop-blur-sm"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5 group-hover/btn:scale-110 transition-transform duration-300",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("span",null,"Confirmar Pago",-1)])],8,pt)])])]))),128))])):n(F)&&n($).length===0?(c(),d("div",ft,[t[30]||(t[30]=D('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-orange-50 mb-5" data-v-efdf5c5d><svg class="w-12 h-12 text-[#C57A3E]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-efdf5c5d><circle cx="11" cy="11" r="8" data-v-efdf5c5d></circle><path d="m21 21-4.35-4.35" data-v-efdf5c5d></path></svg></div><h3 class="text-2xl font-serif font-bold text-neutral-800 mb-2" data-v-efdf5c5d> No se encontraron resultados </h3>',2)),e("p",mt,' No hay bonos pendientes para "'+l(n(F))+'" ',1),e("button",{onClick:t[1]||(t[1]=o=>F.value=""),class:"group/btn inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#5550F2] to-[#027368] text-white rounded-xl hover:from-[#027368] hover:to-[#04BF9D] transition-all duration-300 font-['Lato'] font-semibold shadow-sm hover:shadow-md hover:scale-105 border border-white/20 backdrop-blur-sm"},[...t[29]||(t[29]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M18 6 6 18"}),e("path",{d:"m6 6 12 12"})],-1),e("span",null,"Limpiar b√∫squeda",-1)])])])):(c(),d("div",gt,[t[32]||(t[32]=D('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-[#F8FFF9] mb-5" data-v-efdf5c5d><svg class="w-12 h-12 text-[#027368]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-efdf5c5d><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-efdf5c5d></path></svg></div><h3 class="text-2xl font-serif font-bold text-neutral-800 mb-2" data-v-efdf5c5d> Todo al d√≠a üßæ </h3><p class="text-neutral-600 mb-6 text-base" data-v-efdf5c5d> No hay bonos pendientes de confirmar pago. </p>',3)),Y(i,{to:"/coordinadora/pacientes",class:"group/btn inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#5550F2] to-[#027368] text-white rounded-xl hover:from-[#027368] hover:to-[#04BF9D] transition-all duration-300 font-['Lato'] font-semibold shadow-sm hover:shadow-md hover:scale-105 border border-white/20 backdrop-blur-sm"},{default:Q(()=>[...t[31]||(t[31]=[e("span",null,"Gestionar Pacientes",-1),e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M5 12h14"}),e("path",{d:"m12 5 7 7-7 7"})],-1)])]),_:1})]))])]),e("div",xt,[e("div",vt,[e("div",ht,[t[34]||(t[34]=D('<div data-v-efdf5c5d><h2 class="text-xl font-serif font-bold text-neutral-800 flex items-center gap-2.5 mb-1" data-v-efdf5c5d><svg class="w-6 h-6 text-[#027368]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-efdf5c5d><path d="M3 3v18h18" data-v-efdf5c5d></path><path d="m19 9-5 5-4-4-3 3" data-v-efdf5c5d></path></svg><span data-v-efdf5c5d>Historial de Pagos Confirmados</span></h2><p class="text-sm text-neutral-600 leading-relaxed" data-v-efdf5c5d> Bonos ya registrados y confirmados por coordinaci√≥n. </p></div>',1)),J(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>K(S)?S.value=o:null),onChange:ue,class:"px-4 py-2.5 border border-neutral-300 rounded-xl text-sm font-medium focus:ring-2 focus:ring-[#027368]/20 focus:border-[#027368] transition-all bg-white hover:border-[#027368] cursor-pointer"},[t[33]||(t[33]=e("option",{value:""},"üìÖ Todos los meses",-1)),(c(!0),d(q,null,V(n(I),o=>(c(),d("option",{key:o.valor,value:o.valor},l(o.nombre),9,bt))),128))],544),[[be,n(S)]])]),e("div",wt,[t[35]||(t[35]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-neutral-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.35-4.35"})])],-1)),J(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>K(_)?_.value=o:null),type:"text",placeholder:"Buscar paciente en pagos confirmados...",class:"w-full pl-12 pr-4 py-3 border border-neutral-300 rounded-xl text-sm focus:ring-2 focus:ring-[#027368]/20 focus:border-[#027368] transition-all bg-white placeholder:text-neutral-400"},null,512),[[oe,n(_)]]),n(_)?(c(),d("div",_t,[e("span",yt,l(n(B).length)+" resultado"+l(n(B).length!==1?"s":""),1)])):b("",!0)])]),e("div",Ft,[e("div",kt,[e("div",Et,[e("div",Ct,[e("div",Bt,[t[37]||(t[37]=e("div",{class:"w-14 h-14 rounded-xl bg-gradient-to-br from-[#027368]/20 to-[#027368]/10 flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-7 h-7 text-[#027368]",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[t[36]||(t[36]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold tracking-wide mb-1"},"Bonos Confirmados",-1)),e("p",Nt,l(n(B).length),1),n(_)?(c(),d("p",Dt,"de "+l(n(v).length)+" total",1)):b("",!0)])])]),e("div",Mt,[e("div",St,[t[39]||(t[39]=e("div",{class:"w-14 h-14 rounded-xl bg-gradient-to-br from-[#027368]/30 to-[#027368]/15 flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-7 h-7 text-[#027368]",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})])],-1)),e("div",null,[t[38]||(t[38]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold tracking-wide mb-1"},"Total Confirmado",-1)),e("p",$t,l(N(n(W)))+"‚Ç¨",1),n(_)?(c(),d("p",Pt,"de "+l(N(n(P)))+"‚Ç¨ total",1)):b("",!0)])])]),e("div",Tt,[e("div",At,[t[41]||(t[41]=D('<div class="w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500/20 to-blue-500/10 flex items-center justify-center flex-shrink-0" data-v-efdf5c5d><svg class="w-7 h-7 text-blue-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-efdf5c5d><path d="M3 3v18h18" data-v-efdf5c5d></path><path d="M18 17V9" data-v-efdf5c5d></path><path d="M13 17V5" data-v-efdf5c5d></path><path d="M8 17v-3" data-v-efdf5c5d></path></svg></div>',1)),e("div",null,[t[40]||(t[40]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold tracking-wide mb-1"},"Promedio por Bono",-1)),e("p",Lt,l(N(n(de)))+"‚Ç¨",1),n(_)?(c(),d("p",It,"de "+l(N(n(A)))+"‚Ç¨ total",1)):b("",!0)])])])])])]),e("div",jt,[n(U)?(c(),d("div",zt,[(c(),d(q,null,V(4,o=>e("div",{key:o,class:"animate-pulse"},[...t[42]||(t[42]=[e("div",{class:"bg-gradient-to-r from-neutral-100 via-neutral-200 to-neutral-100 bg-[length:200%_100%] rounded-lg h-24 animate-shimmer"},null,-1)])])),64))])):n(B).length>0?(c(),d("div",qt,[(c(!0),d(q,null,V(n(B),o=>(c(),d("div",{key:o.id,class:"group relative bg-white rounded-xl p-5 md:p-6 hover:shadow-md transition-all duration-200 cursor-pointer border border-green-100 hover:border-[#027368] shadow-sm",onClick:f=>pe(o)},[t[51]||(t[51]=e("div",{class:"absolute left-0 top-0 bottom-0 w-1 bg-[#027368] rounded-l-xl"},null,-1)),e("div",Rt,[e("div",Ut,[e("div",Ot,l(G(o.paciente_nombre)),1),t[43]||(t[43]=e("div",{class:"absolute -top-1 -right-1 w-6 h-6 rounded-full bg-[#027368] flex items-center justify-center shadow-md"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},[e("path",{d:"M5 13l4 4L19 7"})])],-1))]),e("div",Ht,[e("div",null,[e("p",Gt,l(o.paciente_nombre),1),e("p",Xt,[t[44]||(t[44]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-[#027368]"},null,-1)),se(" "+l(o.tipo_bono||"Bono Est√°ndar"),1)])]),e("div",null,[t[45]||(t[45]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Terapeuta",-1)),e("p",Zt,l(o.terapeuta_nombre||"No asignado"),1)]),t[50]||(t[50]=e("div",null,[e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Estado"),e("span",{class:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-[#027368]/10 text-[#027368]"},[e("span",{class:"w-1.5 h-1.5 rounded-full bg-[#027368]"}),e("span",null,"Confirmado")])],-1)),e("div",null,[t[47]||(t[47]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Sesiones",-1)),e("div",Yt,[e("p",{class:M(["text-base font-bold",{"text-red-600":o.sesiones_restantes===0,"text-orange-600":o.sesiones_restantes===1,"text-amber-600":o.sesiones_restantes===2,"text-[#027368]":o.sesiones_restantes>2}])},l(o.sesiones_restantes),3),e("p",Jt,"/ "+l(o.sesiones_totales),1)]),o.sesiones_restantes<=1?(c(),d("div",{key:0,class:M(["flex items-center gap-1 text-xs font-semibold mt-1",{"text-red-600":o.sesiones_restantes===0,"text-orange-600":o.sesiones_restantes===1}])},[t[46]||(t[46]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),e("path",{d:"M12 9v4"}),e("path",{d:"M12 17h.01"})],-1)),e("span",null,l(o.sesiones_restantes===0?"¬°AGOTADO!":"¬°RENOVAR!"),1)],2)):b("",!0)]),e("div",Kt,[t[49]||(t[49]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Pago Confirmado",-1)),e("p",Qt,l(N(o.monto_total))+"‚Ç¨",1),e("p",Wt,[t[48]||(t[48]=D('<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-efdf5c5d><rect width="18" height="18" x="3" y="4" rx="2" ry="2" data-v-efdf5c5d></rect><line x1="16" x2="16" y1="2" y2="6" data-v-efdf5c5d></line><line x1="8" x2="8" y1="2" y2="6" data-v-efdf5c5d></line><line x1="3" x2="21" y1="10" y2="10" data-v-efdf5c5d></line></svg>',1)),e("span",null,l(ee(o.fecha_pago)),1)])])])])],8,Vt))),128))])):n(_)&&n(B).length===0?(c(),d("div",eo,[t[53]||(t[53]=D('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-50 mb-5" data-v-efdf5c5d><svg class="w-12 h-12 text-[#027368]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-efdf5c5d><circle cx="11" cy="11" r="8" data-v-efdf5c5d></circle><path d="m21 21-4.35-4.35" data-v-efdf5c5d></path></svg></div><h3 class="text-xl font-semibold text-neutral-800 mb-2" data-v-efdf5c5d> No se encontraron resultados </h3>',2)),e("p",to,' No hay pagos confirmados para "'+l(n(_))+'" ',1),e("button",{onClick:t[4]||(t[4]=o=>_.value=""),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#04BF9D] to-[#027368] text-white rounded-xl hover:from-[#027368] hover:to-[#04BF9D] transition-all duration-200 font-semibold shadow-sm hover:shadow-md"},[...t[52]||(t[52]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M18 6 6 18"}),e("path",{d:"m6 6 12 12"})],-1),e("span",null,"Limpiar b√∫squeda",-1)])])])):(c(),d("div",oo,[t[54]||(t[54]=D('<div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-neutral-100 mb-5" data-v-efdf5c5d><svg class="w-12 h-12 text-neutral-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-efdf5c5d><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" data-v-efdf5c5d></path><circle cx="12" cy="7" r="4" data-v-efdf5c5d></circle></svg></div><h3 class="text-xl font-semibold text-neutral-800 mb-2" data-v-efdf5c5d> Sin pagos registrados </h3>',2)),e("p",ro,l(n(S)?"No hay pagos confirmados en este mes":"No hay pagos confirmados a√∫n"),1)]))])]),Y(re,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Q(()=>[n(R)?(c(),d("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:ne(Z,["self"])},[Y(re,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:Q(()=>[n(R)?(c(),d("div",so,[e("div",{class:"flex items-center justify-between mb-6"},[t[56]||(t[56]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#027368]/20 to-[#027368]/10 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-[#027368]",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("h3",{class:"text-xl font-serif font-bold text-neutral-800"},"Detalle del Pago")],-1)),e("button",{onClick:Z,class:"p-2 hover:bg-neutral-100 rounded-lg transition-colors"},[...t[55]||(t[55]=[e("svg",{class:"w-5 h-5 text-neutral-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M18 6 6 18"}),e("path",{d:"m6 6 12 12"})],-1)])])]),n(h)?(c(),d("div",no,[e("div",ao,[e("div",lo,l(G(n(h).paciente_nombre)),1),e("div",null,[e("p",io,l(n(h).paciente_nombre),1),e("p",co,l(n(h).tipo_bono),1)])]),e("div",uo,[e("div",po,[t[57]||(t[57]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Monto Total",-1)),e("p",fo,l(N(n(h).monto_total))+"‚Ç¨",1)]),e("div",mo,[t[58]||(t[58]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Fecha de Pago",-1)),e("p",go,l(ee(n(h).fecha_pago)),1)]),e("div",xo,[t[59]||(t[59]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Sesiones Totales",-1)),e("p",vo,l(n(h).sesiones_totales),1)]),e("div",ho,[t[60]||(t[60]=e("p",{class:"text-xs text-neutral-500 uppercase font-semibold mb-1"},"Sesiones Restantes",-1)),e("p",{class:M(["text-2xl font-bold",{"text-red-600":n(h).sesiones_restantes===0,"text-orange-600":n(h).sesiones_restantes===1,"text-amber-600":n(h).sesiones_restantes===2,"text-[#027368]":n(h).sesiones_restantes>2}])},l(n(h).sesiones_restantes),3)])]),e("div",{class:"flex justify-end pt-4"},[e("button",{onClick:Z,class:"px-6 py-2.5 bg-neutral-200 hover:bg-neutral-300 text-neutral-800 rounded-xl transition-colors font-semibold"}," Cerrar ")])])):b("",!0)])):b("",!0)]),_:1})])):b("",!0)]),_:1})])}}},Eo=_e(bo,[["__scopeId","data-v-efdf5c5d"]]);export{Eo as default};
