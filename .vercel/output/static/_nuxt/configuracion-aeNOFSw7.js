import{e as Q,p as Z,B as X,r as b,g as J,c,a as e,l as s,i as y,k as i,v as l,d as g,t as d,K as N,F as z,y as I,h as x,A as C,ah as A,o as p,X as K}from"#entry";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"min-h-screen bg-gray-50"},W={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ee={key:0,class:"flex flex-col items-center justify-center py-16"},oe={key:1,class:"space-y-6"},se={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},te={class:"p-6"},ne={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},re={class:"border border-blue-200 bg-blue-50 rounded-lg p-4"},ae={class:"relative"},ie={class:"border border-green-200 bg-green-50 rounded-lg p-4"},le={class:"relative"},de={class:"border border-purple-200 bg-purple-50 rounded-lg p-4"},ue={class:"relative"},ce={class:"mt-4 p-3 bg-gray-100 rounded-lg"},pe={class:"text-sm text-gray-600"},ge={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},me={class:"p-6 space-y-6"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fe={class:"relative"},ve={class:"bg-gray-50 rounded-lg p-4"},xe={class:"flex items-center justify-between"},ye={class:"text-2xl font-bold text-gray-900"},_e={class:"mt-3 pt-3 border-t border-gray-200"},we={class:"grid grid-cols-3 gap-2 text-sm"},ke={class:"text-center p-2 bg-blue-50 rounded"},he={class:"font-bold text-blue-900"},Ue={class:"text-center p-2 bg-green-50 rounded"},Ce={class:"font-bold text-green-900"},Ve={class:"text-center p-2 bg-purple-50 rounded"},Ee={class:"font-bold text-purple-900"},je={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},Me={class:"p-6"},Re={class:"grid grid-cols-2 sm:grid-cols-3 gap-3"},Se=["value"],Pe={class:"text-2xl"},Be={key:0,class:"w-5 h-5 text-violet-600 absolute top-2 right-2",fill:"currentColor",viewBox:"0 0 20 20"},qe={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},Ne={class:"p-6 space-y-6"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ie={key:0,class:"mt-1 text-xs text-red-600"},Ae={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fe={class:"space-y-2"},Le={class:"p-4 bg-indigo-50 rounded-lg border border-indigo-200"},Te={class:"flex items-start gap-3"},Ge={class:"text-sm text-indigo-800"},He={class:"list-disc list-inside space-y-1 text-indigo-700"},$e={class:"flex justify-end"},Qe=["disabled"],Ze={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Xe={key:1,class:"w-4 h-4 text-green-300",fill:"currentColor",viewBox:"0 0 20 20"},Je={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},Ke={class:"p-6 space-y-4"},Ye={class:"flex items-start justify-between mb-4"},Oe={class:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4"},We=["onUpdate:modelValue"],eo=["onUpdate:modelValue"],oo=["onUpdate:modelValue"],so=["onUpdate:modelValue"],to=["onClick"],no={class:"flex items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-100"},ro={class:"text-gray-700"},ao={key:0},io={class:"text-emerald-600"},lo={key:0,class:"text-center py-8 text-gray-500"},uo={class:"mt-4 p-4 bg-amber-50 rounded-lg border border-amber-200"},co={class:"flex flex-wrap gap-2"},po={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},go={class:"p-6 space-y-4"},mo={class:"border border-blue-200 rounded-lg p-4 bg-blue-50/50"},bo={class:"flex items-center justify-between mb-3"},fo={class:"flex items-center gap-2"},vo={class:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded"},xo={class:"grid grid-cols-2 gap-4"},yo={class:"mt-2 text-xs text-blue-600"},_o={class:"border border-green-200 rounded-lg p-4 bg-green-50/50"},wo={class:"flex items-center justify-between mb-3"},ko={class:"flex items-center gap-2"},ho={class:"px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded"},Uo={class:"grid grid-cols-2 gap-4"},Co={class:"mt-2 text-xs text-green-600"},Vo={class:"border border-purple-200 rounded-lg p-4 bg-purple-50/50"},Eo={class:"flex items-center justify-between mb-3"},jo={class:"flex items-center gap-2"},Mo={class:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-medium rounded"},Ro={class:"grid grid-cols-2 gap-4"},So={class:"mt-2 text-xs text-purple-600"},Po={class:"flex items-center justify-between pt-4"},Bo={key:0,class:"text-sm text-gray-500"},qo={class:"flex items-center gap-3"},No={key:0,class:"text-sm text-emerald-600 flex items-center gap-1"},zo=["disabled"],Io={key:0,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},Ao={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Do=Q({__name:"configuracion",setup(Fo){const j=Z(),B=X(),M=b(!0),_=b(!1),V=b(!1),E=b(null),w=b(null),k=b(!1),h=b(!1),m=b(null),a=b({nif:"",razon_social:"",direccion:"",codigo_postal:"",ciudad:"",provincia:"",regimen_iva:"exento",numero_colegiado:""}),n=b({precio_sesion_base:50,duracion_sesion_minutos:60,porcentaje_comision:30,metodos_pago_aceptados:["efectivo","transferencia","bizum"],precios_frecuencia:{semanal:40,quincenal:50,unica:60},plantillas_bonos:[],configuracion_bonos:{semanal:{sesiones:4,precio:160,descuento_porcentaje:0},quincenal:{sesiones:4,precio:200,descuento_porcentaje:0},mensual:{sesiones:4,precio:240,descuento_porcentaje:0}}}),D=[{value:"efectivo",label:"Efectivo",icon:"ðŸ’µ"},{value:"transferencia",label:"Transferencia",icon:"ðŸ¦"},{value:"bizum",label:"Bizum",icon:"ðŸ“±"},{value:"tarjeta",label:"Tarjeta",icon:"ðŸ’³"},{value:"paypal",label:"PayPal",icon:"ðŸ…¿ï¸"},{value:"otro",label:"Otro",icon:"ðŸ“‹"}],f=r=>!r||isNaN(r)?"0.00":r.toFixed(2),R=r=>!r||isNaN(r)?0:r*(1-n.value.porcentaje_comision/100),F=()=>{n.value.plantillas_bonos.push({nombre:"",sesiones:4,precio:160,frecuencia:"semanal"})},L=r=>{n.value.plantillas_bonos.splice(r,1)},S=(r,o,t,v)=>{n.value.plantillas_bonos.some(U=>U.nombre===r)||n.value.plantillas_bonos.push({nombre:r,sesiones:o,precio:t,frecuencia:v})},q=()=>{const r=a.value.nif.toUpperCase().replace(/[^A-Z0-9]/g,"");if(!r)return m.value=null,!0;if(r.length!==9)return m.value="El NIF debe tener 9 caracteres",!1;if(/^[0-9]{8}[A-Z]$/.test(r)){const u="TRWAGMYFPDXBNJZSQVHLCKE",U=parseInt(r.substring(0,8)),P=u[U%23];return r[8]!==P?(m.value="La letra del DNI no es correcta",!1):(m.value=null,!0)}if(/^[XYZ][0-9]{7}[A-Z]$/.test(r)){let u=r.substring(1,8);r[0]==="X"?u="0"+u:r[0]==="Y"?u="1"+u:r[0]==="Z"&&(u="2"+u);const U="TRWAGMYFPDXBNJZSQVHLCKE",P=parseInt(u),$=U[P%23];return r[8]!==$?(m.value="La letra del NIE no es correcta",!1):(m.value=null,!0)}return/^[ABCDEFGHJKLMNPQRSUVW][0-9]{7}[A-J0-9]$/.test(r)?(m.value=null,!0):(m.value="Formato de NIF/DNI/NIE no valido",!1)};async function T(){if(!w.value){alert("Error: No se pudo identificar el terapeuta");return}if(!(a.value.nif&&!q()))try{k.value=!0,h.value=!1;const{error:r}=await j.from("terapeutas").update({datos_fiscales:{nif:a.value.nif.toUpperCase().replace(/[^A-Z0-9]/g,""),razon_social:a.value.razon_social,direccion:a.value.direccion,codigo_postal:a.value.codigo_postal,ciudad:a.value.ciudad,provincia:a.value.provincia,regimen_iva:a.value.regimen_iva,numero_colegiado:a.value.numero_colegiado},updated_at:new Date().toISOString()}).eq("id",w.value);if(r)throw r;h.value=!0,setTimeout(()=>{h.value=!1},3e3)}catch(r){console.error("Error al guardar datos fiscales:",r),alert(`Error al guardar: ${r.message}`)}finally{k.value=!1}}async function G(){try{if(M.value=!0,!B.value?.email){console.warn("No hay usuario logueado");return}const{data:r,error:o}=await j.from("terapeutas").select("id, precio_sesion_base, duracion_sesion_minutos, porcentaje_comision, metodos_pago_aceptados, configuracion_bonos, precios_frecuencia, plantillas_bonos, datos_fiscales, updated_at").eq("email",B.value.email).single();if(o){console.error("Error al cargar terapeuta:",o),o.code==="PGRST116"&&console.log("Terapeuta no encontrado, usando valores por defecto");return}if(r){if(w.value=r.id,r.precio_sesion_base!==null&&(n.value.precio_sesion_base=r.precio_sesion_base),r.duracion_sesion_minutos!==null&&(n.value.duracion_sesion_minutos=r.duracion_sesion_minutos),r.porcentaje_comision!==null&&(n.value.porcentaje_comision=r.porcentaje_comision),r.metodos_pago_aceptados&&(n.value.metodos_pago_aceptados=r.metodos_pago_aceptados),r.configuracion_bonos&&(n.value.configuracion_bonos={...n.value.configuracion_bonos,...r.configuracion_bonos}),r.precios_frecuencia&&(n.value.precios_frecuencia={...n.value.precios_frecuencia,...r.precios_frecuencia}),r.plantillas_bonos&&(n.value.plantillas_bonos=r.plantillas_bonos),r.datos_fiscales){const t=r.datos_fiscales;a.value={nif:t.nif||"",razon_social:t.razon_social||"",direccion:t.direccion||"",codigo_postal:t.codigo_postal||"",ciudad:t.ciudad||"",provincia:t.provincia||"",regimen_iva:t.regimen_iva||"exento",numero_colegiado:t.numero_colegiado||""}}r.updated_at&&(E.value=new Date(r.updated_at).toLocaleString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}))}}catch(r){console.error("Error al cargar configuracion:",r)}finally{M.value=!1}}async function H(){if(!w.value){alert("Error: No se pudo identificar el terapeuta");return}try{_.value=!0,V.value=!1;const r=n.value.precios_frecuencia.semanal,o=n.value.precios_frecuencia.quincenal;n.value.configuracion_bonos.semanal.descuento_porcentaje=Math.round((r*n.value.configuracion_bonos.semanal.sesiones-n.value.configuracion_bonos.semanal.precio)/(r*n.value.configuracion_bonos.semanal.sesiones)*100),n.value.configuracion_bonos.quincenal.descuento_porcentaje=Math.round((o*n.value.configuracion_bonos.quincenal.sesiones-n.value.configuracion_bonos.quincenal.precio)/(o*n.value.configuracion_bonos.quincenal.sesiones)*100);const{error:t}=await j.from("terapeutas").update({precio_sesion_base:n.value.precio_sesion_base,duracion_sesion_minutos:n.value.duracion_sesion_minutos,metodos_pago_aceptados:n.value.metodos_pago_aceptados,configuracion_bonos:n.value.configuracion_bonos,precios_frecuencia:n.value.precios_frecuencia,plantillas_bonos:n.value.plantillas_bonos,updated_at:new Date().toISOString()}).eq("id",w.value);if(t)throw t;V.value=!0,E.value=new Date().toLocaleString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),setTimeout(()=>{V.value=!1},3e3)}catch(r){console.error("Error al guardar configuracion:",r),alert(`Error al guardar: ${r.message}`)}finally{_.value=!1}}return J(()=>{G()}),(r,o)=>(p(),c("div",O,[e("div",W,[o[96]||(o[96]=e("header",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 tracking-tight"}," Configuracion "),e("p",{class:"text-gray-500 mt-1"}," Ajustes de tarifas, pagos y preferencias ")],-1)),s(M)?(p(),c("div",ee,[...o[24]||(o[24]=[e("div",{class:"w-10 h-10 border-3 border-gray-200 border-t-violet-600 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-gray-500"},"Cargando configuracion...",-1)])])):(p(),c("div",oe,[e("section",se,[o[36]||(o[36]=y('<div class="px-6 py-4 border-b border-gray-200 flex items-center gap-3" data-v-796792a9><div class="w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center" data-v-796792a9><svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-796792a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14.121 15.536c-1.171 1.952-3.07 1.952-4.242 0-1.172-1.953-1.172-5.119 0-7.072 1.171-1.952 3.07-1.952 4.242 0M8 10.5h4m-4 3h4m9-1.5a9 9 0 11-18 0 9 9 0 0118 0z" data-v-796792a9></path></svg></div><div data-v-796792a9><h2 class="text-lg font-semibold text-gray-900" data-v-796792a9>Precios por Frecuencia</h2><p class="text-sm text-gray-500" data-v-796792a9>Configura el precio de cada sesion segun la frecuencia del paciente</p></div></div>',1)),e("div",te,[e("div",ne,[e("div",re,[o[26]||(o[26]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"w-3 h-3 rounded-full bg-blue-500"}),e("span",{class:"font-semibold text-blue-900"},"Semanal")],-1)),e("div",ae,[i(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>s(n).precios_frecuencia.semanal=t),type:"number",min:"0",step:"0.01",class:"w-full pl-4 pr-12 py-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg font-bold text-blue-900 bg-white"},null,512),[[l,s(n).precios_frecuencia.semanal,void 0,{number:!0}]]),o[25]||(o[25]=e("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-blue-600 font-medium"},"EUR",-1))]),o[27]||(o[27]=e("p",{class:"mt-2 text-xs text-blue-700"},"Pacientes con cita cada semana",-1))]),e("div",ie,[o[29]||(o[29]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"w-3 h-3 rounded-full bg-green-500"}),e("span",{class:"font-semibold text-green-900"},"Quincenal")],-1)),e("div",le,[i(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>s(n).precios_frecuencia.quincenal=t),type:"number",min:"0",step:"0.01",class:"w-full pl-4 pr-12 py-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg font-bold text-green-900 bg-white"},null,512),[[l,s(n).precios_frecuencia.quincenal,void 0,{number:!0}]]),o[28]||(o[28]=e("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-green-600 font-medium"},"EUR",-1))]),o[30]||(o[30]=e("p",{class:"mt-2 text-xs text-green-700"},"Pacientes con cita cada 2 semanas",-1))]),e("div",de,[o[32]||(o[32]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"w-3 h-3 rounded-full bg-purple-500"}),e("span",{class:"font-semibold text-purple-900"},"Sesion Unica")],-1)),e("div",ue,[i(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>s(n).precios_frecuencia.unica=t),type:"number",min:"0",step:"0.01",class:"w-full pl-4 pr-12 py-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-lg font-bold text-purple-900 bg-white"},null,512),[[l,s(n).precios_frecuencia.unica,void 0,{number:!0}]]),o[31]||(o[31]=e("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-purple-600 font-medium"},"EUR",-1))]),o[33]||(o[33]=e("p",{class:"mt-2 text-xs text-purple-700"},"Sesiones puntuales o esporadicas",-1))])]),e("div",ce,[e("p",pe,[o[34]||(o[34]=e("strong",null,"Precio base por defecto:",-1)),g(" "+d(f(s(n).precio_sesion_base))+" EUR ",1),o[35]||(o[35]=e("span",{class:"text-gray-400 ml-2"},"(usado cuando no se especifica frecuencia)",-1))])])])]),e("section",ge,[o[46]||(o[46]=y('<div class="px-6 py-4 border-b border-gray-200 flex items-center gap-3" data-v-796792a9><div class="w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center" data-v-796792a9><svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-796792a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" data-v-796792a9></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" data-v-796792a9></path></svg></div><div data-v-796792a9><h2 class="text-lg font-semibold text-gray-900" data-v-796792a9>Configuracion General</h2><p class="text-sm text-gray-500" data-v-796792a9>Ajustes generales de sesiones</p></div></div>',1)),e("div",me,[e("div",be,[e("div",null,[o[38]||(o[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Precio base por defecto ",-1)),e("div",fe,[i(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>s(n).precio_sesion_base=t),type:"number",min:"0",step:"0.01",class:"w-full pl-4 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500",placeholder:"50.00"},null,512),[[l,s(n).precio_sesion_base,void 0,{number:!0}]]),o[37]||(o[37]=e("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium"},"EUR",-1))]),o[39]||(o[39]=e("p",{class:"mt-1.5 text-xs text-gray-500"}," Precio por defecto si no hay frecuencia asignada ",-1))]),e("div",null,[o[41]||(o[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Duracion estandar de sesion ",-1)),i(e("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>s(n).duracion_sesion_minutos=t),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500"},[...o[40]||(o[40]=[e("option",{value:30},"30 minutos",-1),e("option",{value:45},"45 minutos",-1),e("option",{value:60},"60 minutos (recomendado)",-1),e("option",{value:90},"90 minutos",-1),e("option",{value:120},"2 horas",-1)])],512),[[N,s(n).duracion_sesion_minutos,void 0,{number:!0}]])])]),e("div",ve,[e("div",xe,[o[42]||(o[42]=e("div",null,[e("p",{class:"text-sm font-medium text-gray-700"},"Comision de la plataforma"),e("p",{class:"text-xs text-gray-500 mt-0.5"},"Porcentaje que retiene Terapli por cada sesion")],-1)),e("span",ye,d(s(n).porcentaje_comision)+"%",1)]),e("div",_e,[e("div",we,[e("div",ke,[o[43]||(o[43]=e("p",{class:"text-xs text-blue-600"},"Semanal (40 EUR)",-1)),e("p",he,d(f(R(s(n).precios_frecuencia.semanal)))+" EUR",1)]),e("div",Ue,[o[44]||(o[44]=e("p",{class:"text-xs text-green-600"},"Quincenal (50 EUR)",-1)),e("p",Ce,d(f(R(s(n).precios_frecuencia.quincenal)))+" EUR",1)]),e("div",Ve,[o[45]||(o[45]=e("p",{class:"text-xs text-purple-600"},"Unica (60 EUR)",-1)),e("p",Ee,d(f(R(s(n).precios_frecuencia.unica)))+" EUR",1)])])])])])]),e("section",je,[o[48]||(o[48]=y('<div class="px-6 py-4 border-b border-gray-200 flex items-center gap-3" data-v-796792a9><div class="w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center" data-v-796792a9><svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-796792a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" data-v-796792a9></path></svg></div><div data-v-796792a9><h2 class="text-lg font-semibold text-gray-900" data-v-796792a9>Metodos de Pago</h2><p class="text-sm text-gray-500" data-v-796792a9>Selecciona los metodos que aceptas de tus pacientes</p></div></div>',1)),e("div",Me,[e("div",Re,[(p(),c(z,null,I(D,t=>e("label",{key:t.value,class:C(["relative flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all",s(n).metodos_pago_aceptados.includes(t.value)?"border-violet-500 bg-violet-50":"border-gray-200 hover:border-gray-300"])},[i(e("input",{type:"checkbox",value:t.value,"onUpdate:modelValue":o[5]||(o[5]=v=>s(n).metodos_pago_aceptados=v),class:"sr-only"},null,8,Se),[[K,s(n).metodos_pago_aceptados]]),e("span",Pe,d(t.icon),1),e("span",{class:C(["text-sm font-medium",s(n).metodos_pago_aceptados.includes(t.value)?"text-violet-900":"text-gray-700"])},d(t.label),3),s(n).metodos_pago_aceptados.includes(t.value)?(p(),c("svg",Be,[...o[47]||(o[47]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):x("",!0)],2)),64))])])]),e("section",qe,[o[67]||(o[67]=y('<div class="px-6 py-4 border-b border-gray-200 flex items-center gap-3" data-v-796792a9><div class="w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center" data-v-796792a9><svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-796792a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-796792a9></path></svg></div><div data-v-796792a9><h2 class="text-lg font-semibold text-gray-900" data-v-796792a9>Datos Fiscales</h2><p class="text-sm text-gray-500" data-v-796792a9>Informacion para emitir facturas a tus pacientes</p></div></div>',1)),e("div",Ne,[e("div",ze,[e("div",null,[o[49]||(o[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" NIF / DNI "),e("span",{class:"text-red-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":o[6]||(o[6]=t=>s(a).nif=t),type:"text",placeholder:"12345678A",class:C(["w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 uppercase",s(m)?"border-red-300 bg-red-50":"border-gray-300"]),onBlur:q},null,34),[[l,s(a).nif]]),s(m)?(p(),c("p",Ie,d(s(m)),1)):x("",!0)]),e("div",null,[o[50]||(o[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Nombre o Razon Social "),e("span",{class:"text-red-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":o[7]||(o[7]=t=>s(a).razon_social=t),type:"text",placeholder:"Tu nombre completo o razon social",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[l,s(a).razon_social]])])]),e("div",null,[o[51]||(o[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Direccion fiscal ",-1)),i(e("input",{"onUpdate:modelValue":o[8]||(o[8]=t=>s(a).direccion=t),type:"text",placeholder:"Calle, numero, piso...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[l,s(a).direccion]])]),e("div",Ae,[e("div",null,[o[52]||(o[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Codigo Postal ",-1)),i(e("input",{"onUpdate:modelValue":o[9]||(o[9]=t=>s(a).codigo_postal=t),type:"text",placeholder:"28001",maxlength:"5",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[l,s(a).codigo_postal]])]),e("div",null,[o[53]||(o[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Ciudad ",-1)),i(e("input",{"onUpdate:modelValue":o[10]||(o[10]=t=>s(a).ciudad=t),type:"text",placeholder:"Madrid",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[l,s(a).ciudad]])]),e("div",null,[o[54]||(o[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Provincia ",-1)),i(e("input",{"onUpdate:modelValue":o[11]||(o[11]=t=>s(a).provincia=t),type:"text",placeholder:"Madrid",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[l,s(a).provincia]])])]),e("div",De,[e("div",null,[o[55]||(o[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Numero de Colegiado "),e("span",{class:"text-gray-400 font-normal"},"(opcional)")],-1)),i(e("input",{"onUpdate:modelValue":o[12]||(o[12]=t=>s(a).numero_colegiado=t),type:"text",placeholder:"Ej: M-12345",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[l,s(a).numero_colegiado]]),o[56]||(o[56]=e("p",{class:"mt-1 text-xs text-gray-500"},"Aparecera en tus facturas",-1))]),e("div",null,[o[59]||(o[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Regimen de IVA ",-1)),e("div",Fe,[e("label",{class:C(["flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-all",s(a).regimen_iva==="exento"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"])},[i(e("input",{type:"radio","onUpdate:modelValue":o[13]||(o[13]=t=>s(a).regimen_iva=t),value:"exento",class:"w-4 h-4 text-indigo-600 focus:ring-indigo-500"},null,512),[[A,s(a).regimen_iva]]),o[57]||(o[57]=e("div",null,[e("span",{class:"text-sm font-medium text-gray-900"},"Exento de IVA"),e("p",{class:"text-xs text-gray-500"},"Servicios sanitarios (Art. 20.1.3 LIVA)")],-1))],2),e("label",{class:C(["flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-all",s(a).regimen_iva==="general"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"])},[i(e("input",{type:"radio","onUpdate:modelValue":o[14]||(o[14]=t=>s(a).regimen_iva=t),value:"general",class:"w-4 h-4 text-indigo-600 focus:ring-indigo-500"},null,512),[[A,s(a).regimen_iva]]),o[58]||(o[58]=e("div",null,[e("span",{class:"text-sm font-medium text-gray-900"},"Regimen General (21% IVA)"),e("p",{class:"text-xs text-gray-500"},"Para otros servicios no sanitarios")],-1))],2)])])]),e("div",Le,[e("div",Te,[o[64]||(o[64]=e("svg",{class:"w-5 h-5 text-indigo-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",Ge,[o[63]||(o[63]=e("p",{class:"font-medium mb-1"},"Sobre la facturacion:",-1)),e("ul",He,[e("li",null,[o[60]||(o[60]=e("strong",null,"Particulares:",-1)),g(" "+d(s(a).regimen_iva==="exento"?"IVA exento por servicios sanitarios":"IVA 21%"),1)]),o[61]||(o[61]=e("li",null,[e("strong",null,"Empresas:"),g(" IVA 21% + Retencion IRPF 15%")],-1)),o[62]||(o[62]=e("li",null,"Las facturas se numeran automaticamente",-1))])])])]),e("div",$e,[e("button",{onClick:T,disabled:s(k),class:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center gap-2"},[s(k)?(p(),c("svg",Ze,[...o[65]||(o[65]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):s(h)?(p(),c("svg",Xe,[...o[66]||(o[66]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):x("",!0),g(" "+d(s(h)?"Guardado":s(k)?"Guardando...":"Guardar datos fiscales"),1)],8,Qe)])])]),e("section",Je,[e("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},[o[69]||(o[69]=y('<div class="flex items-center gap-3" data-v-796792a9><div class="w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center" data-v-796792a9><svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-796792a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z" data-v-796792a9></path></svg></div><div data-v-796792a9><h2 class="text-lg font-semibold text-gray-900" data-v-796792a9>Plantillas de Bonos</h2><p class="text-sm text-gray-500" data-v-796792a9>Crea bonos que puedes asignar a tus pacientes</p></div></div>',1)),e("button",{onClick:F,class:"px-3 py-1.5 bg-amber-100 text-amber-700 rounded-lg text-sm font-medium hover:bg-amber-200 transition-colors flex items-center gap-1"},[...o[68]||(o[68]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),g(" Nueva Plantilla ",-1)])])]),e("div",Ke,[(p(!0),c(z,null,I(s(n).plantillas_bonos,(t,v)=>(p(),c("div",{key:v,class:"border border-gray-200 rounded-lg p-4"},[e("div",Ye,[e("div",Oe,[e("div",null,[o[70]||(o[70]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Nombre",-1)),i(e("input",{"onUpdate:modelValue":u=>t.nombre=u,type:"text",placeholder:"Ej: Bono 4 sesiones",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500"},null,8,We),[[l,t.nombre]])]),e("div",null,[o[71]||(o[71]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Sesiones",-1)),i(e("input",{"onUpdate:modelValue":u=>t.sesiones=u,type:"number",min:"1",max:"50",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500"},null,8,eo),[[l,t.sesiones,void 0,{number:!0}]])]),e("div",null,[o[72]||(o[72]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Precio Total (EUR)",-1)),i(e("input",{"onUpdate:modelValue":u=>t.precio=u,type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500"},null,8,oo),[[l,t.precio,void 0,{number:!0}]])]),e("div",null,[o[74]||(o[74]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Frecuencia",-1)),i(e("select",{"onUpdate:modelValue":u=>t.frecuencia=u,class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500"},[...o[73]||(o[73]=[e("option",{value:"semanal"},"Semanal",-1),e("option",{value:"quincenal"},"Quincenal",-1),e("option",{value:"mensual"},"Mensual",-1),e("option",{value:"cualquiera"},"Cualquier frecuencia",-1)])],8,so),[[N,t.frecuencia]])])]),e("button",{onClick:u=>L(v),class:"ml-4 p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Eliminar plantilla"},[...o[75]||(o[75]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,to)]),e("div",no,[e("span",null,[o[76]||(o[76]=g(" Precio por sesion: ",-1)),e("strong",ro,d(f(t.precio/t.sesiones))+" EUR",1)]),t.sesiones>0?(p(),c("span",ao,[o[77]||(o[77]=g(" Ahorro vs sesion unica: ",-1)),e("strong",io,d(f(s(n).precios_frecuencia.unica*t.sesiones-t.precio))+" EUR",1)])):x("",!0)])]))),128)),s(n).plantillas_bonos.length===0?(p(),c("div",lo,[...o[78]||(o[78]=[e("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})],-1),e("p",null,"No tienes plantillas de bonos configuradas",-1),e("p",{class:"text-sm"},"Crea una plantilla para poder asignarla a tus pacientes",-1)])])):x("",!0),e("div",uo,[o[79]||(o[79]=e("p",{class:"text-sm font-medium text-amber-800 mb-2"},"Plantillas sugeridas:",-1)),e("div",co,[e("button",{onClick:o[15]||(o[15]=t=>S("4 sesiones semanales",4,160,"semanal")),class:"px-3 py-1.5 bg-white border border-amber-300 text-amber-700 rounded-lg text-xs font-medium hover:bg-amber-100 transition-colors"}," + 4 sesiones semanales (160 EUR) "),e("button",{onClick:o[16]||(o[16]=t=>S("8 sesiones quincenales",8,380,"quincenal")),class:"px-3 py-1.5 bg-white border border-amber-300 text-amber-700 rounded-lg text-xs font-medium hover:bg-amber-100 transition-colors"}," + 8 sesiones quincenales (380 EUR) "),e("button",{onClick:o[17]||(o[17]=t=>S("10 sesiones",10,500,"cualquiera")),class:"px-3 py-1.5 bg-white border border-amber-300 text-amber-700 rounded-lg text-xs font-medium hover:bg-amber-100 transition-colors"}," + 10 sesiones flex (500 EUR) ")])])])]),e("section",po,[o[92]||(o[92]=y('<div class="px-6 py-4 border-b border-gray-200 flex items-center gap-3" data-v-796792a9><div class="w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center" data-v-796792a9><svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-796792a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" data-v-796792a9></path></svg></div><div data-v-796792a9><h2 class="text-lg font-semibold text-gray-900" data-v-796792a9>Tipos de Bono Estandar</h2><p class="text-sm text-gray-500" data-v-796792a9>Configuracion de bonos por tipo de frecuencia</p></div></div>',1)),e("div",go,[e("div",mo,[e("div",bo,[e("div",fo,[o[80]||(o[80]=e("span",{class:"w-3 h-3 rounded-full bg-blue-500"},null,-1)),o[81]||(o[81]=e("span",{class:"font-semibold text-blue-900"},"Bono Semanal",-1)),e("span",vo,d(s(n).configuracion_bonos.semanal.sesiones)+" sesiones ",1)])]),e("div",xo,[e("div",null,[o[82]||(o[82]=e("label",{class:"block text-xs font-medium text-blue-700 mb-1"},"Sesiones",-1)),i(e("input",{"onUpdate:modelValue":o[18]||(o[18]=t=>s(n).configuracion_bonos.semanal.sesiones=t),type:"number",min:"1",max:"10",class:"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[l,s(n).configuracion_bonos.semanal.sesiones,void 0,{number:!0}]])]),e("div",null,[o[83]||(o[83]=e("label",{class:"block text-xs font-medium text-blue-700 mb-1"},"Precio (EUR)",-1)),i(e("input",{"onUpdate:modelValue":o[19]||(o[19]=t=>s(n).configuracion_bonos.semanal.precio=t),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[l,s(n).configuracion_bonos.semanal.precio,void 0,{number:!0}]])])]),e("p",yo,d(f(s(n).configuracion_bonos.semanal.precio/s(n).configuracion_bonos.semanal.sesiones))+" EUR/sesion ",1)]),e("div",_o,[e("div",wo,[e("div",ko,[o[84]||(o[84]=e("span",{class:"w-3 h-3 rounded-full bg-green-500"},null,-1)),o[85]||(o[85]=e("span",{class:"font-semibold text-green-900"},"Bono Quincenal",-1)),e("span",ho,d(s(n).configuracion_bonos.quincenal.sesiones)+" sesiones ",1)])]),e("div",Uo,[e("div",null,[o[86]||(o[86]=e("label",{class:"block text-xs font-medium text-green-700 mb-1"},"Sesiones",-1)),i(e("input",{"onUpdate:modelValue":o[20]||(o[20]=t=>s(n).configuracion_bonos.quincenal.sesiones=t),type:"number",min:"1",max:"10",class:"w-full px-3 py-2 border border-green-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500"},null,512),[[l,s(n).configuracion_bonos.quincenal.sesiones,void 0,{number:!0}]])]),e("div",null,[o[87]||(o[87]=e("label",{class:"block text-xs font-medium text-green-700 mb-1"},"Precio (EUR)",-1)),i(e("input",{"onUpdate:modelValue":o[21]||(o[21]=t=>s(n).configuracion_bonos.quincenal.precio=t),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-green-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500"},null,512),[[l,s(n).configuracion_bonos.quincenal.precio,void 0,{number:!0}]])])]),e("p",Co,d(f(s(n).configuracion_bonos.quincenal.precio/s(n).configuracion_bonos.quincenal.sesiones))+" EUR/sesion ",1)]),e("div",Vo,[e("div",Eo,[e("div",jo,[o[88]||(o[88]=e("span",{class:"w-3 h-3 rounded-full bg-purple-500"},null,-1)),o[89]||(o[89]=e("span",{class:"font-semibold text-purple-900"},"Bono Mensual",-1)),e("span",Mo,d(s(n).configuracion_bonos.mensual.sesiones)+" sesiones ",1)])]),e("div",Ro,[e("div",null,[o[90]||(o[90]=e("label",{class:"block text-xs font-medium text-purple-700 mb-1"},"Sesiones",-1)),i(e("input",{"onUpdate:modelValue":o[22]||(o[22]=t=>s(n).configuracion_bonos.mensual.sesiones=t),type:"number",min:"1",max:"20",class:"w-full px-3 py-2 border border-purple-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},null,512),[[l,s(n).configuracion_bonos.mensual.sesiones,void 0,{number:!0}]])]),e("div",null,[o[91]||(o[91]=e("label",{class:"block text-xs font-medium text-purple-700 mb-1"},"Precio (EUR)",-1)),i(e("input",{"onUpdate:modelValue":o[23]||(o[23]=t=>s(n).configuracion_bonos.mensual.precio=t),type:"number",min:"0",step:"0.01",class:"w-full px-3 py-2 border border-purple-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},null,512),[[l,s(n).configuracion_bonos.mensual.precio,void 0,{number:!0}]])])]),e("p",So,d(f(s(n).configuracion_bonos.mensual.precio/s(n).configuracion_bonos.mensual.sesiones))+" EUR/sesion ",1)])])]),e("div",Po,[s(E)?(p(),c("p",Bo," Ultima actualizacion: "+d(s(E)),1)):x("",!0),e("div",qo,[s(V)?(p(),c("span",No,[...o[93]||(o[93]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),g(" Guardado ",-1)])])):x("",!0),e("button",{onClick:H,disabled:s(_),class:"px-6 py-3 bg-violet-600 text-white rounded-lg font-medium hover:bg-violet-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[s(_)?(p(),c("svg",Io,[...o[94]||(o[94]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):(p(),c("svg",Ao,[...o[95]||(o[95]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),g(" "+d(s(_)?"Guardando...":"Guardar Cambios"),1)],8,zo)])])]))])]))}}),Go=Y(Do,[["__scopeId","data-v-796792a9"]]);export{Go as default};
