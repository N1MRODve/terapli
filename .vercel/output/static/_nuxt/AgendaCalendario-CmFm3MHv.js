import{u as ct,_ as vt}from"./ModalNuevaCitaEnhanced-0gzeMHiK.js";import{M as mt}from"./ModalDetallesCita-D0zYq1YQ.js";import{e as gt,p as ft,r as d,x,g as pt,N as Se,D as bt,I as xt,c as s,o as n,a as t,b as Fe,J as R,h as f,d as z,t as i,z as X,F as I,y as T,A as p,k as Z,v as Me,i as yt,l as ne,E as D,j as S,T as Q,K as Ne,w as ht,M as wt}from"#entry";import{s as kt}from"./interval-BzLCLO6P.js";import{_ as Ct}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _t={class:"agenda-calendario min-h-screen bg-gray-50/50"},St={class:"bg-white border-b border-gray-100 px-6 py-4"},Mt={class:"flex items-center justify-between gap-4"},Dt={class:"flex items-center gap-3"},$t={class:"flex flex-col items-center"},jt={class:"text-xl font-bold text-gray-800 tracking-tight"},zt={key:0,class:"flex items-center gap-2 mt-1"},Et={class:"w-32 h-1.5 bg-gray-200 rounded-full overflow-hidden"},At={class:"text-xs text-gray-500 font-medium"},Ht={class:"flex items-center gap-4"},Bt={class:"flex items-center bg-gray-100 rounded-full p-1"},Lt=["onClick"],Vt={class:"bg-white border-b border-gray-100 px-6 py-3"},It={class:"flex items-center gap-4"},Tt={class:"flex-1 relative"},Ft={class:"bg-white border-b border-gray-100 px-6 py-4"},Nt={class:"flex flex-wrap items-center gap-3 mb-4"},Pt={class:"text-sm"},Rt={class:"text-sm"},Kt={class:"text-sm"},Ot={class:"text-sm"},Ut={key:0,class:"flex items-center justify-center h-full"},Yt={key:1,class:"min-w-max"},Gt={class:"text-xs font-medium text-gray-400 uppercase tracking-wider"},qt={key:0,class:"w-6 h-0.5 bg-violet-500 mx-auto mt-1 rounded-full"},Jt={class:"absolute -left-16 -top-2.5 flex items-center"},Xt={class:"px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-md shadow-sm whitespace-nowrap"},Zt=["onClick"],Qt={key:0,class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},Wt=["onClick","onKeydown","aria-label"],eo={class:"absolute -top-1 -right-1 flex items-center gap-0.5 opacity-0 group-hover/card:opacity-100 focus-within:opacity-100 transition-opacity z-40"},to=["onClick","onKeydown","disabled","title","aria-label"],oo={key:0,class:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24"},ao={key:1,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},lo=["onClick","onKeydown","aria-label"],ro=["onClick","onKeydown","aria-label"],no=["onClick","onKeydown","aria-label"],so={class:"flex flex-col h-full min-h-[34px]"},io=["title"],uo={class:"text-[10px] text-gray-500 font-medium mt-auto"},co={class:"absolute left-full ml-2 top-0 hidden group-hover/card:block z-50 pointer-events-none"},vo={class:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 shadow-xl whitespace-nowrap max-w-xs"},mo={class:"font-bold text-sm"},go={class:"text-gray-300 mt-1"},fo={class:"text-gray-400 mt-0.5 capitalize"},po={key:0,class:"text-gray-400"},bo={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-modal-enter"},xo={class:"p-6 space-y-5"},yo={class:"bg-gray-50 rounded-xl p-4"},ho={class:"space-y-3"},wo={class:"flex items-center gap-3"},ko={class:"font-medium text-gray-900"},Co={class:"flex items-center gap-3"},_o={class:"font-medium text-gray-900"},So={class:"text-sm text-gray-500"},Mo={class:"px-6 py-4 border-t border-gray-100 bg-gray-50 flex items-center justify-end gap-3"},Do=["disabled"],$o={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},jo={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-modal-enter"},zo={class:"px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50"},Eo={class:"flex items-center justify-between"},Ao={class:"text-sm text-gray-500 mt-0.5"},Ho={class:"p-6 space-y-5"},Bo={class:"bg-gray-50 rounded-xl p-4"},Lo={class:"flex items-center gap-3"},Vo={class:"font-medium text-gray-900"},Io={class:"text-sm text-gray-500"},To=["min"],Fo={class:"grid grid-cols-2 gap-4"},No=["value"],Po=["value"],Ro={class:"px-6 py-4 border-t border-gray-100 bg-gray-50 flex items-center justify-end gap-3"},Ko=["disabled"],Oo={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Uo={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-modal-enter"},Yo={class:"p-6 space-y-5"},Go={class:"bg-gray-50 rounded-xl p-4"},qo={class:"space-y-3"},Jo={class:"flex items-center gap-3"},Xo={class:"font-medium text-gray-900"},Zo={class:"flex items-center gap-3"},Qo={class:"font-medium text-gray-900"},Wo={class:"text-sm text-gray-500"},ea={class:"flex items-center gap-3"},ta={class:"font-medium text-gray-900 capitalize"},oa={class:"px-6 py-4 border-t border-gray-100 bg-gray-50 flex items-center justify-end gap-3"},aa=["disabled"],la={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},ra={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},na={key:0,class:"fixed bottom-6 right-6 z-[100] max-w-sm",role:"alert","aria-live":"polite"},sa={key:0,class:"w-5 h-5 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20"},ia={key:1,class:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20"},da={key:2,class:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},ua={class:"text-sm font-medium flex-1"},De=44,K=9,W=21,se=30,ca=gt({__name:"AgendaCalendario",props:{modoCoordinadora:{type:Boolean,default:!1}},emits:["nueva-cita","ver-cita"],setup(Pe,{emit:va}){const ie=Pe,{citas:$,loading:Re,loadAllAppointments:Ke,loadTerapeutaAppointments:Oe,changeAppointmentStatus:$e,moveAppointment:Ue,deleteAppointment:Ye,refreshAppointments:de}=ct(),Ge=ft(),h=d("semana"),E=d(new Date),ee=d(""),ue=d(!1),w=d(["pendiente","confirmada","realizada","cancelada"]),qe=d([]),je=d(null),O=d(!1),ce=d(null),ve=d(null),me=d(!1),te=d(null),A=d(null),F=d(null),N=d(null),ge=d(!1),k=d(null),oe=d(""),fe=d(!1),C=d(null),j=d(""),_=d(""),H=d(""),pe=d(!1),y=d(null),P=d(null),ze=d(""),M=d("info"),ae=d(!1),g=(o,e="info")=>{ze.value=o,M.value=e,ae.value=!0,setTimeout(()=>{ae.value=!1},4e3)},Je=x(()=>{const o=[];for(let e=K;e<=W;e++)o.push(`${String(e).padStart(2,"0")}:00`),e<W&&o.push(`${String(e).padStart(2,"0")}:30`);return o}),B=x(()=>{const o=new Date(E.value),e=[],r=new Date,v=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;if(h.value==="dia"){const a=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`;e.push({fecha:a,diaSemana:o.toLocaleDateString("es-ES",{weekday:"long"}).toUpperCase(),numeroDia:o.getDate(),mes:o.toLocaleDateString("es-ES",{month:"short"}),esHoy:a===v})}else if(h.value==="5dias")for(let a=0;a<5;a++){const m=new Date(o);m.setDate(o.getDate()+a);const u=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`;e.push({fecha:u,diaSemana:m.toLocaleDateString("es-ES",{weekday:"long"}).toUpperCase(),numeroDia:m.getDate(),mes:m.toLocaleDateString("es-ES",{month:"short"}),esHoy:u===v})}else if(h.value==="semana"){const a=o.getDay(),m=new Date(o);m.setDate(o.getDate()-(a===6?0:a+1));for(let u=0;u<7;u++){const l=new Date(m);l.setDate(m.getDate()+u);const c=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`;e.push({fecha:c,diaSemana:l.toLocaleDateString("es-ES",{weekday:"long"}).toUpperCase(),numeroDia:l.getDate(),mes:l.toLocaleDateString("es-ES",{month:"short"}),esHoy:c===v})}}return e}),U=x(()=>B.value.some(o=>o.esHoy));x(()=>B.value.findIndex(o=>o.esHoy));const Xe=x(()=>{const o=E.value,e=o.toLocaleDateString("es-ES",{month:"long"}),r=o.getFullYear(),v=new Date(o.getFullYear(),0,1),a=Math.floor((o.getTime()-v.getTime())/(1440*60*1e3)),m=Math.ceil((a+v.getDay()+1)/7);return`${e.charAt(0).toUpperCase()+e.slice(1)} De ${r} — Semana ${m}`}),Ze=x(()=>{let o=$.value;if(ie.modoCoordinadora&&je.value&&(o=o.filter(e=>e.terapeuta_id===je.value)),w.value.length>0&&w.value.length<4&&(o=o.filter(e=>w.value.includes(e.estado))),ee.value.trim()){const e=ee.value.toLowerCase();o=o.filter(r=>{const v=(r.paciente?.nombre_completo||"").toLowerCase(),a=(r.observaciones||"").toLowerCase();return v.includes(e)||a.includes(e)})}return o}),le=x(()=>({pendiente:$.value.filter(o=>o.estado==="pendiente").length,confirmada:$.value.filter(o=>o.estado==="confirmada").length,realizada:$.value.filter(o=>o.estado==="realizada"||o.estado==="completada").length,cancelada:$.value.filter(o=>o.estado==="cancelada").length})),be=(o,e)=>Ze.value.filter(r=>r.fecha_cita!==o?!1:r.hora_inicio?.substring(0,5)===e),Qe=o=>{const r=(o.duracion_minutos||60)/se*De;return Math.max(r-4,40)},L=d(new Date),We=d(null),xe=d(null),et=d(null),V=x(()=>{const o=L.value,e=o.getHours(),r=o.getMinutes();return e<K||e>=W?null:((e-K)*60+r)/se*De}),tt=x(()=>L.value.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!1})),ye=(o,e)=>{const r=new Date,v=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;if(e!==v)return!1;const[a,m]=o.split(":").map(Number),u=L.value,l=u.getHours()*60+u.getMinutes();return a*60+m+se<=l},he=(o,e)=>{const r=new Date,v=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;if(e!==v)return!1;const[a,m]=o.split(":").map(Number),u=L.value,l=u.getHours()*60+u.getMinutes(),c=a*60+m,ut=c+se;return l>=c&&l<ut},Ee=x(()=>{const o=L.value,e=o.getHours(),r=o.getMinutes();if(e<K)return 0;if(e>=W)return 100;const v=(e-K)*60+r,a=(W-K)*60;return Math.round(v/a*100)}),ot=async()=>{E.value=new Date,await Se(),we()},we=()=>{if(!xe.value||V.value===null)return;const o=xe.value,e=o.clientHeight,r=V.value-e/2+De;o.scrollTo({top:Math.max(0,r),behavior:"smooth"})},Ae=o=>{const e=new Date(E.value);h.value==="dia"?e.setDate(e.getDate()+o):h.value==="5dias"?e.setDate(e.getDate()+o*5):e.setDate(e.getDate()+o*7),E.value=e},at=()=>{E.value=new Date},re=o=>{const e=w.value.indexOf(o);e>-1?w.value.splice(e,1):w.value.push(o)},He=o=>{const e={pendiente:{bg:"bg-amber-50",border:"border-l-amber-400",text:"text-amber-700",dot:"bg-amber-400"},confirmada:{bg:"bg-emerald-50",border:"border-l-emerald-400",text:"text-emerald-700",dot:"bg-emerald-400"},realizada:{bg:"bg-blue-50",border:"border-l-blue-400",text:"text-blue-700",dot:"bg-blue-400"},completada:{bg:"bg-blue-50",border:"border-l-blue-400",text:"text-blue-700",dot:"bg-blue-400"},cancelada:{bg:"bg-red-50",border:"border-l-red-400",text:"text-red-700",dot:"bg-red-400"}};return e[o]||e.pendiente},lt=(o,e)=>{ce.value=o,ve.value=e,O.value=!0},ke=o=>{te.value=o,me.value=!0},rt=async()=>{if(!ie.modoCoordinadora)return;const{data:o}=await Ge.from("terapeutas").select("id, nombre_completo").eq("activo",!0).order("nombre_completo");qe.value=(o||[]).map(e=>({id:e.id,nombre:e.nombre_completo}))},b=o=>o?.substring(0,5)||"",Ce=o=>o?new Date(o+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):"",Y=x(()=>{const o=[];for(let e=9;e<=21;e++)o.push(`${String(e).padStart(2,"0")}:00`),e<21&&o.push(`${String(e).padStart(2,"0")}:30`);return o}),nt=x(()=>{if(!_.value)return Y.value;const o=Y.value.indexOf(_.value);return o===-1?Y.value:[...Y.value.slice(o+1),"22:00"]}),Be=async(o,e)=>{if(e.stopPropagation(),!A.value){A.value=o;try{const r=await $e(o,"confirmada");r.success?g("Cita confirmada correctamente","success"):g(r.error||"Error al confirmar la cita","error")}catch(r){g(r.message||"Error al confirmar la cita","error")}finally{A.value=null}}},Le=(o,e)=>{e.stopPropagation();const r=$.value.find(v=>v.id===o);if(!r){g("Cita no encontrada","error");return}k.value=r,oe.value="",ge.value=!0},st=async()=>{if(!(!k.value||F.value)){F.value=k.value.id;try{const o=await $e(k.value.id,"cancelada");o.success?(g("Cita cancelada correctamente","success"),G()):g(o.error||"Error al cancelar la cita","error")}catch(o){g(o.message||"Error al cancelar la cita","error")}finally{F.value=null}}},G=()=>{ge.value=!1,k.value=null,oe.value=""},Ve=(o,e)=>{e.stopPropagation();const r=$.value.find(v=>v.id===o);if(!r){g("Cita no encontrada","error");return}C.value=r,j.value=r.fecha_cita,_.value=b(r.hora_inicio),H.value=b(r.hora_fin),fe.value=!0},it=async()=>{if(!(!C.value||N.value)){if(!j.value||!_.value||!H.value){g("Por favor completa todos los campos","error");return}N.value=C.value.id;try{const o=await Ue(C.value.id,j.value,_.value,H.value);if(o.success){const e=new Date(j.value+"T00:00:00").toLocaleDateString("es-ES",{day:"numeric",month:"short"});g(`Cita reprogramada a ${e} ${_.value}`,"success"),q()}else g(o.error||"Error al reprogramar la cita","error")}catch(o){g(o.message||"Error al reprogramar la cita","error")}finally{N.value=null}}},q=()=>{fe.value=!1,C.value=null,j.value="",_.value="",H.value=""},Ie=(o,e)=>{e.stopPropagation();const r=$.value.find(v=>v.id===o);if(!r){g("Cita no encontrada","error");return}y.value=r,pe.value=!0},dt=async()=>{if(!(!y.value||P.value)){P.value=y.value.id;try{const o=await Ye(y.value.id);o.success?(g("Cita eliminada correctamente","success"),J()):g(o.error||"Error al eliminar la cita","error")}catch(o){g(o.message||"Error al eliminar la cita","error")}finally{P.value=null}}},J=()=>{pe.value=!1,y.value=null};let _e=null;const Te=()=>{document.hidden||(L.value=new Date)};return pt(async()=>{ie.modoCoordinadora?(await Ke(),await rt()):await Oe(),_e=kt(()=>{L.value=new Date},6e4),document.addEventListener("visibilitychange",Te),await Se(),U.value&&V.value!==null&&setTimeout(()=>{we()},300)}),bt(()=>{_e&&clearInterval(_e),document.removeEventListener("visibilitychange",Te)}),xt([h,E],async()=>{await Se(),U.value&&V.value!==null&&setTimeout(()=>{we()},100)}),(o,e)=>{const r=vt,v=mt;return n(),s("div",_t,[t("div",St,[t("div",Mt,[t("div",Dt,[t("button",{onClick:e[0]||(e[0]=a=>Ae(-1)),class:"w-9 h-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 hover:border-gray-300 transition-all","aria-label":"Semana anterior"},[...e[19]||(e[19]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),t("button",{onClick:at,class:"px-4 py-2 rounded-full border-2 border-violet-500 text-violet-600 font-semibold text-sm hover:bg-violet-50 transition-all"}," Hoy "),U.value&&V.value!==null?(n(),s("button",{key:0,onClick:ot,class:"px-3 py-2 rounded-full bg-red-500 text-white font-semibold text-sm hover:bg-red-600 transition-all flex items-center gap-1.5 shadow-sm",title:"Ir a la hora actual"},[...e[20]||(e[20]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),z(" Ahora ",-1)])])):f("",!0),t("button",{onClick:e[1]||(e[1]=a=>Ae(1)),class:"w-9 h-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 hover:border-gray-300 transition-all","aria-label":"Semana siguiente"},[...e[21]||(e[21]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])]),t("div",$t,[t("h1",jt,i(Xe.value),1),U.value?(n(),s("div",zt,[t("div",Et,[t("div",{class:"h-full bg-gradient-to-r from-violet-500 to-violet-400 rounded-full transition-all duration-1000",style:X({width:`${Ee.value}%`})},null,4)]),t("span",At,i(Ee.value)+"%",1)])):f("",!0)]),t("div",Ht,[t("div",Bt,[(n(),s(I,null,T([{key:"dia",label:"Día"},{key:"5dias",label:"5 Días"},{key:"semana",label:"Semana"},{key:"mes",label:"Mes"}],a=>t("button",{key:a.key,onClick:m=>h.value=a.key,class:p(["px-4 py-1.5 rounded-full text-sm font-medium transition-all",h.value===a.key?"bg-violet-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900"])},i(a.label),11,Lt)),64))]),t("button",{onClick:e[2]||(e[2]=a=>O.value=!0),class:"flex items-center gap-2 px-5 py-2.5 bg-violet-500 text-white font-semibold rounded-full hover:bg-violet-600 shadow-sm hover:shadow transition-all"},[...e[22]||(e[22]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),z(" Nueva Cita ",-1)])])])])]),t("div",Vt,[t("div",It,[t("div",Tt,[e[23]||(e[23]=t("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[t("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),Z(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>ee.value=a),type:"text",placeholder:"Buscar por paciente, terapeuta, notas...",class:"w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-400 transition-all"},null,512),[[Me,ee.value]])]),t("button",{onClick:e[4]||(e[4]=a=>ue.value=!ue.value),class:p(["flex items-center gap-2 px-5 py-3 border border-gray-200 rounded-xl text-gray-600 font-medium hover:bg-gray-50 hover:border-gray-300 transition-all",{"bg-violet-50 border-violet-300 text-violet-600":ue.value}])},[...e[24]||(e[24]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),z(" Filtros ",-1)])],2)])]),t("div",Ft,[e[33]||(e[33]=t("p",{class:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3"},"Estado",-1)),t("div",Nt,[t("button",{onClick:e[5]||(e[5]=a=>re("pendiente")),class:p(["flex items-center gap-2 px-4 py-2 rounded-full border transition-all",w.value.includes("pendiente")?"bg-amber-50 border-amber-200 text-amber-700":"bg-gray-50 border-gray-200 text-gray-400"])},[e[25]||(e[25]=t("span",{class:"w-2 h-2 rounded-full bg-amber-400"},null,-1)),e[26]||(e[26]=t("span",{class:"font-medium"},"Pendientes",-1)),t("span",Pt,i(le.value.pendiente),1)],2),t("button",{onClick:e[6]||(e[6]=a=>re("confirmada")),class:p(["flex items-center gap-2 px-4 py-2 rounded-full border transition-all",w.value.includes("confirmada")?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-gray-50 border-gray-200 text-gray-400"])},[e[27]||(e[27]=t("span",{class:"w-2 h-2 rounded-full bg-emerald-400"},null,-1)),e[28]||(e[28]=t("span",{class:"font-medium"},"Confirmadas",-1)),t("span",Rt,i(le.value.confirmada),1)],2),t("button",{onClick:e[7]||(e[7]=a=>re("realizada")),class:p(["flex items-center gap-2 px-4 py-2 rounded-full border transition-all",w.value.includes("realizada")?"bg-blue-50 border-blue-200 text-blue-700":"bg-gray-50 border-gray-200 text-gray-400"])},[e[29]||(e[29]=t("span",{class:"w-2 h-2 rounded-full bg-blue-400"},null,-1)),e[30]||(e[30]=t("span",{class:"font-medium"},"Realizadas",-1)),t("span",Kt,i(le.value.realizada),1)],2),t("button",{onClick:e[8]||(e[8]=a=>re("cancelada")),class:p(["flex items-center gap-2 px-4 py-2 rounded-full border transition-all",w.value.includes("cancelada")?"bg-red-50 border-red-200 text-red-700":"bg-gray-50 border-gray-200 text-gray-400"])},[e[31]||(e[31]=t("span",{class:"w-2 h-2 rounded-full bg-red-400"},null,-1)),e[32]||(e[32]=t("span",{class:"font-medium"},"Canceladas",-1)),t("span",Ot,i(le.value.cancelada),1)],2)]),e[34]||(e[34]=yt('<div class="flex items-center gap-6 text-xs font-medium text-gray-500" data-v-9641b6b4><div class="flex items-center gap-1.5" data-v-9641b6b4><span class="w-2 h-2 rounded-full bg-amber-400" data-v-9641b6b4></span> PENDIENTE </div><div class="flex items-center gap-1.5" data-v-9641b6b4><span class="w-2 h-2 rounded-full bg-emerald-400" data-v-9641b6b4></span> CONFIRMADA </div><div class="flex items-center gap-1.5" data-v-9641b6b4><span class="w-2 h-2 rounded-full bg-blue-400" data-v-9641b6b4></span> REALIZADA </div><div class="flex items-center gap-1.5" data-v-9641b6b4><span class="w-2 h-2 rounded-full bg-red-400" data-v-9641b6b4></span> CANCELADA </div></div>',1))]),t("div",{ref_key:"scrollContainerRef",ref:xe,class:"flex-1 overflow-auto scroll-smooth",style:{height:"calc(100vh - 320px)"}},[ne(Re)?(n(),s("div",Ut,[...e[35]||(e[35]=[t("div",{class:"flex items-center gap-3 text-gray-500"},[t("svg",{class:"w-6 h-6 animate-spin",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]),z(" Cargando agenda... ")],-1)])])):(n(),s("div",Yt,[t("div",{class:"sticky top-0 z-20 bg-white border-b border-gray-200 grid",style:X({gridTemplateColumns:`70px repeat(${B.value.length}, 1fr)`})},[e[36]||(e[36]=t("div",{class:"border-r border-gray-100"},null,-1)),(n(!0),s(I,null,T(B.value,a=>(n(),s("div",{key:a.fecha,class:p(["px-4 py-3 text-center border-r border-gray-100 last:border-r-0",{"bg-violet-50/50":a.esHoy}])},[t("p",Gt,i(a.diaSemana),1),t("p",{class:p(["text-2xl font-bold mt-1",a.esHoy?"text-violet-600":"text-gray-800"])},i(a.numeroDia),3),a.esHoy?(n(),s("div",qt)):f("",!0)],2))),128))],4),t("div",{ref_key:"gridHorasRef",ref:We,class:"relative"},[V.value!==null&&U.value?(n(),s("div",{key:0,ref_key:"nowIndicatorRef",ref:et,class:"absolute z-30 flex items-center pointer-events-none",style:X({top:`${V.value}px`,left:"70px",right:"0"})},[e[37]||(e[37]=t("div",{class:"absolute -left-1.5 w-3 h-3 bg-red-500 rounded-full shadow-sm ring-2 ring-red-200"},null,-1)),t("div",Jt,[t("span",Xt,i(tt.value),1)]),e[38]||(e[38]=t("div",{class:"flex-1 h-0.5 bg-red-500 shadow-sm"},null,-1))],4)):f("",!0),(n(!0),s(I,null,T(Je.value,(a,m)=>(n(),s("div",{key:a,class:"grid border-b border-gray-100",style:X({gridTemplateColumns:`70px repeat(${B.value.length}, 1fr)`})},[t("div",{class:p(["px-3 py-2 text-xs font-medium text-right border-r border-gray-100 h-11 flex items-start justify-end",[he(a,B.value.find(u=>u.esHoy)?.fecha||"")?"text-red-500 font-semibold":"text-gray-400"]])},i(a),3),(n(!0),s(I,null,T(B.value,u=>(n(),s("div",{key:`${u.fecha}-${a}`,class:p(["relative border-r border-gray-100 last:border-r-0 h-11 transition-colors cursor-pointer group",[u.esHoy?"bg-violet-50/20":"",ye(a,u.fecha)?"bg-gray-100/60":"",he(a,u.fecha)?"bg-red-50/30 ring-1 ring-inset ring-red-100":"",!ye(a,u.fecha)&&!he(a,u.fecha)?"hover:bg-violet-50/30":"hover:bg-gray-200/40"]]),onClick:l=>be(u.fecha,a).length===0?lt(u.fecha,a):null},[be(u.fecha,a).length===0&&!ye(a,u.fecha)?(n(),s("div",Qt,[...e[39]||(e[39]=[t("div",{class:"w-6 h-6 rounded-full bg-violet-500/80 text-white flex items-center justify-center"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])],-1)])])):f("",!0),(n(!0),s(I,null,T(be(u.fecha,a),l=>(n(),s("div",{key:l.id,onClick:S(c=>ke(l.id),["stop"]),onKeydown:[D(S(c=>ke(l.id),["stop"]),["enter"]),D(S(c=>ke(l.id),["prevent","stop"]),["space"])],role:"button",tabindex:"0","aria-label":`Cita ${l.estado} de ${l.paciente?.nombre_completo||"paciente"}, ${b(l.hora_inicio)} a ${b(l.hora_fin)}`,class:p(["absolute inset-x-0.5 top-0.5 p-2 rounded-lg border-l-4 cursor-pointer hover:shadow-lg hover:z-30 transition-all z-10 group/card overflow-hidden",[He(l.estado).bg,He(l.estado).border]]),style:X({height:`${Qe(l)}px`})},[t("div",eo,[l.estado==="pendiente"?(n(),s("button",{key:0,onClick:c=>Be(l.id,c),onKeydown:D(S(c=>Be(l.id,c),["stop"]),["enter"]),class:p(["w-6 h-6 rounded-full bg-emerald-500 text-white flex items-center justify-center hover:bg-emerald-600 hover:scale-110 shadow-md transition-all focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-1",{"animate-pulse":A.value===l.id}]),disabled:A.value===l.id,title:A.value===l.id?"Confirmando...":"Confirmar cita","aria-label":`Confirmar cita de ${l.paciente?.nombre_completo||"paciente"}`,type:"button"},[A.value===l.id?(n(),s("svg",oo,[...e[40]||(e[40]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):(n(),s("svg",ao,[...e[41]||(e[41]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])]))],42,to)):f("",!0),l.estado!=="cancelada"&&l.estado!=="realizada"&&l.estado!=="completada"?(n(),s("button",{key:1,onClick:c=>Ve(l.id,c),onKeydown:D(S(c=>Ve(l.id,c),["stop"]),["enter"]),class:"w-6 h-6 rounded-full bg-blue-500 text-white flex items-center justify-center hover:bg-blue-600 hover:scale-110 shadow-md transition-all focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-1",title:"Reprogramar cita","aria-label":`Reprogramar cita de ${l.paciente?.nombre_completo||"paciente"}`,type:"button"},[...e[42]||(e[42]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])],40,lo)):f("",!0),l.estado!=="cancelada"&&l.estado!=="realizada"&&l.estado!=="completada"?(n(),s("button",{key:2,onClick:c=>Le(l.id,c),onKeydown:D(S(c=>Le(l.id,c),["stop"]),["enter"]),class:"w-6 h-6 rounded-full bg-red-500 text-white flex items-center justify-center hover:bg-red-600 hover:scale-110 shadow-md transition-all focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1",title:"Cancelar cita","aria-label":`Cancelar cita de ${l.paciente?.nombre_completo||"paciente"}`,type:"button"},[...e[43]||(e[43]=[t("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],40,ro)):f("",!0),t("button",{onClick:c=>Ie(l.id,c),onKeydown:D(S(c=>Ie(l.id,c),["stop"]),["enter"]),class:"w-6 h-6 rounded-full bg-gray-600 text-white flex items-center justify-center hover:bg-gray-700 hover:scale-110 shadow-md transition-all focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-1",title:"Eliminar cita","aria-label":`Eliminar cita de ${l.paciente?.nombre_completo||"paciente"}`,type:"button"},[...e[44]||(e[44]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],40,no)]),t("div",so,[t("p",{class:p(["text-sm font-bold text-gray-900 leading-tight",{"line-clamp-2":h.value==="semana","line-clamp-1":h.value==="5dias"}]),title:l.paciente?.nombre_completo||"Sin paciente"},i(l.paciente?.nombre_completo||"Sin paciente"),11,io),t("p",uo,i(b(l.hora_inicio))+"–"+i(b(l.hora_fin)),1)]),t("div",co,[t("div",vo,[t("p",mo,i(l.paciente?.nombre_completo||"Sin paciente"),1),t("p",go,i(b(l.hora_inicio))+" - "+i(b(l.hora_fin)),1),t("p",fo,i(l.estado),1),l.modalidad?(n(),s("p",po,i(l.modalidad==="online"?"Online":"Presencial"),1)):f("",!0)])])],46,Wt))),128))],10,Zt))),128))],4))),128))],512)]))],512),Fe(r,{"is-open":O.value,"fecha-inicial":ce.value||void 0,"hora-inicial":ve.value||void 0,onCreated:e[9]||(e[9]=a=>{O.value=!1,ne(de)()}),onClose:e[10]||(e[10]=a=>{O.value=!1,ce.value=null,ve.value=null})},null,8,["is-open","fecha-inicial","hora-inicial"]),(n(),R(Q,{to:"body"},[me.value&&te.value?(n(),R(v,{key:0,"cita-id":te.value,onClose:e[11]||(e[11]=a=>{me.value=!1,te.value=null}),onCitaActualizada:e[12]||(e[12]=a=>ne(de)()),onActualizado:e[13]||(e[13]=a=>ne(de)())},null,8,["cita-id"])):f("",!0)])),(n(),R(Q,{to:"body"},[ge.value&&k.value?(n(),s("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:S(G,["self"]),onKeydown:D(G,["escape"]),role:"dialog","aria-modal":"true","aria-labelledby":"modal-cancelar-titulo"},[t("div",bo,[t("div",{class:"px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-red-50 to-rose-50"},[t("div",{class:"flex items-center justify-between"},[e[46]||(e[46]=t("div",null,[t("h2",{id:"modal-cancelar-titulo",class:"text-lg font-semibold text-gray-900"},"Cancelar Cita"),t("p",{class:"text-sm text-gray-500 mt-0.5"},"Esta acción no se puede deshacer")],-1)),t("button",{onClick:G,class:"w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-white transition-all focus:outline-none focus:ring-2 focus:ring-red-400","aria-label":"Cerrar modal"},[...e[45]||(e[45]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),t("div",xo,[t("div",yo,[e[50]||(e[50]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3"},"Resumen de la cita",-1)),t("div",ho,[t("div",wo,[e[48]||(e[48]=t("div",{class:"w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),t("div",null,[t("p",ko,i(k.value.paciente?.nombre_completo||"Paciente"),1),e[47]||(e[47]=t("p",{class:"text-sm text-gray-500"},"Paciente",-1))])]),t("div",Co,[e[49]||(e[49]=t("div",{class:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),t("div",null,[t("p",_o,i(Ce(k.value.fecha_cita)),1),t("p",So,i(b(k.value.hora_inicio))+" - "+i(b(k.value.hora_fin)),1)])])])]),t("div",null,[e[51]||(e[51]=t("label",{for:"motivo-cancelacion",class:"block text-sm font-medium text-gray-700 mb-2"},[z(" Motivo de cancelación "),t("span",{class:"text-gray-400"},"(opcional)")],-1)),Z(t("textarea",{id:"motivo-cancelacion","onUpdate:modelValue":e[14]||(e[14]=a=>oe.value=a),rows:"3",placeholder:"Ej: Solicitud del paciente, reagendamiento...",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500/30 focus:border-red-400 transition-all resize-none"},null,512),[[Me,oe.value]])]),e[52]||(e[52]=t("div",{class:"flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-200"},[t("svg",{class:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),t("p",{class:"text-sm text-amber-800"}," Al cancelar esta cita, el paciente podría recibir una notificación. ")],-1))]),t("div",Mo,[t("button",{onClick:G,class:"px-5 py-2.5 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300"}," Volver "),t("button",{onClick:st,disabled:F.value!==null,class:"px-5 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-red-400"},[F.value?(n(),s("svg",$o,[...e[53]||(e[53]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):f("",!0),z(" "+i(F.value?"Cancelando...":"Cancelar cita"),1)],8,Do)])])],32)):f("",!0)])),(n(),R(Q,{to:"body"},[fe.value&&C.value?(n(),s("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:S(q,["self"]),onKeydown:D(q,["escape"]),role:"dialog","aria-modal":"true","aria-labelledby":"modal-reprogramar-titulo"},[t("div",jo,[t("div",zo,[t("div",Eo,[t("div",null,[e[54]||(e[54]=t("h2",{id:"modal-reprogramar-titulo",class:"text-lg font-semibold text-gray-900"},"Reprogramar Cita",-1)),t("p",Ao,i(C.value.paciente?.nombre_completo||"Paciente"),1)]),t("button",{onClick:q,class:"w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-white transition-all focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"Cerrar modal"},[...e[55]||(e[55]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),t("div",Ho,[t("div",Bo,[e[57]||(e[57]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-2"},"Cita actual",-1)),t("div",Lo,[e[56]||(e[56]=t("div",{class:"w-10 h-10 rounded-lg bg-gray-200 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),t("div",null,[t("p",Vo,i(Ce(C.value.fecha_cita)),1),t("p",Io,i(b(C.value.hora_inicio))+" - "+i(b(C.value.hora_fin)),1)])])]),e[61]||(e[61]=t("div",{class:"flex justify-center"},[t("div",{class:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})])])],-1)),t("div",null,[e[58]||(e[58]=t("label",{for:"nueva-fecha",class:"block text-sm font-medium text-gray-700 mb-2"},"Nueva fecha",-1)),Z(t("input",{id:"nueva-fecha",type:"date","onUpdate:modelValue":e[15]||(e[15]=a=>j.value=a),min:new Date().toISOString().split("T")[0],class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all"},null,8,To),[[Me,j.value]])]),t("div",Fo,[t("div",null,[e[59]||(e[59]=t("label",{for:"nueva-hora-inicio",class:"block text-sm font-medium text-gray-700 mb-2"},"Hora inicio",-1)),Z(t("select",{id:"nueva-hora-inicio","onUpdate:modelValue":e[16]||(e[16]=a=>_.value=a),class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all"},[(n(!0),s(I,null,T(Y.value,a=>(n(),s("option",{key:a,value:a},i(a),9,No))),128))],512),[[Ne,_.value]])]),t("div",null,[e[60]||(e[60]=t("label",{for:"nueva-hora-fin",class:"block text-sm font-medium text-gray-700 mb-2"},"Hora fin",-1)),Z(t("select",{id:"nueva-hora-fin","onUpdate:modelValue":e[17]||(e[17]=a=>H.value=a),class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all"},[(n(!0),s(I,null,T(nt.value,a=>(n(),s("option",{key:a,value:a},i(a),9,Po))),128))],512),[[Ne,H.value]])])])]),t("div",Ro,[t("button",{onClick:q,class:"px-5 py-2.5 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300"}," Cancelar "),t("button",{onClick:it,disabled:!j.value||!_.value||!H.value||N.value!==null,class:"px-5 py-2.5 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-blue-400"},[N.value?(n(),s("svg",Oo,[...e[62]||(e[62]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):f("",!0),z(" "+i(N.value?"Reprogramando...":"Confirmar"),1)],8,Ko)])])],32)):f("",!0)])),(n(),R(Q,{to:"body"},[pe.value&&y.value?(n(),s("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:S(J,["self"]),onKeydown:D(J,["escape"]),role:"dialog","aria-modal":"true","aria-labelledby":"modal-eliminar-titulo"},[t("div",Uo,[t("div",{class:"px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-slate-50"},[t("div",{class:"flex items-center justify-between"},[e[64]||(e[64]=t("div",null,[t("h2",{id:"modal-eliminar-titulo",class:"text-lg font-semibold text-gray-900"},"Eliminar Cita"),t("p",{class:"text-sm text-gray-500 mt-0.5"},"Esta acción eliminará la cita permanentemente")],-1)),t("button",{onClick:J,class:"w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-white transition-all focus:outline-none focus:ring-2 focus:ring-gray-400","aria-label":"Cerrar modal"},[...e[63]||(e[63]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),t("div",Yo,[t("div",Go,[e[70]||(e[70]=t("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3"},"Cita a eliminar",-1)),t("div",qo,[t("div",Jo,[e[66]||(e[66]=t("div",{class:"w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),t("div",null,[t("p",Xo,i(y.value.paciente?.nombre_completo||"Paciente"),1),e[65]||(e[65]=t("p",{class:"text-sm text-gray-500"},"Paciente",-1))])]),t("div",Zo,[e[67]||(e[67]=t("div",{class:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),t("div",null,[t("p",Qo,i(Ce(y.value.fecha_cita)),1),t("p",Wo,i(b(y.value.hora_inicio))+" - "+i(b(y.value.hora_fin)),1)])]),t("div",ea,[e[69]||(e[69]=t("div",{class:"w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[t("p",ta,i(y.value.estado),1),e[68]||(e[68]=t("p",{class:"text-sm text-gray-500"},"Estado actual",-1))])])])]),e[71]||(e[71]=t("div",{class:"flex items-start gap-3 p-4 bg-red-50 rounded-xl border border-red-200"},[t("svg",{class:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),t("div",{class:"text-sm text-red-800"},[t("p",{class:"font-semibold"},"Esta acción no se puede deshacer"),t("p",{class:"mt-1"},"La cita se eliminará permanentemente del sistema. Si la cita tiene un bono asociado, la sesión se reintegrará automáticamente.")])],-1))]),t("div",oa,[t("button",{onClick:J,class:"px-5 py-2.5 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300"}," Cancelar "),t("button",{onClick:dt,disabled:P.value!==null,class:"px-5 py-2.5 bg-gray-700 text-white font-medium rounded-xl hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-gray-500"},[P.value?(n(),s("svg",la,[...e[72]||(e[72]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):(n(),s("svg",ra,[...e[73]||(e[73]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])])),z(" "+i(P.value?"Eliminando...":"Eliminar cita"),1)],8,aa)])])],32)):f("",!0)])),(n(),R(Q,{to:"body"},[Fe(wt,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"transform translate-y-4 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform translate-y-4 opacity-0"},{default:ht(()=>[ae.value?(n(),s("div",na,[t("div",{class:p(["flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg border",{"bg-emerald-50 border-emerald-200 text-emerald-800":M.value==="success","bg-red-50 border-red-200 text-red-800":M.value==="error","bg-blue-50 border-blue-200 text-blue-800":M.value==="info"}])},[t("div",{class:p(["w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",{"bg-emerald-100":M.value==="success","bg-red-100":M.value==="error","bg-blue-100":M.value==="info"}])},[M.value==="success"?(n(),s("svg",sa,[...e[74]||(e[74]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):M.value==="error"?(n(),s("svg",ia,[...e[75]||(e[75]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])])):(n(),s("svg",da,[...e[76]||(e[76]=[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])]))],2),t("p",ua,i(ze.value),1),t("button",{onClick:e[18]||(e[18]=a=>ae.value=!1),class:"w-6 h-6 rounded-full flex items-center justify-center hover:bg-black/5 transition-colors","aria-label":"Cerrar notificación"},[...e[77]||(e[77]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])],2)])):f("",!0)]),_:1})]))])}}}),xa=Object.assign(Ct(ca,[["__scopeId","data-v-9641b6b4"]]),{__name:"AgendaCalendario"});export{xa as _};
