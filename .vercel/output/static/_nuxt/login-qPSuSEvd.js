import{e as D,p as E,J as k,f as A,r as c,g as F,c as b,a as e,b as u,j as B,h as C,k as x,v as M,l as t,m as h,n as I,t as w,D as g,Q as S,o as p}from"#entry";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"min-h-screen bg-gradient-to-br from-[#F9F7F3] to-[#E8DFD8] flex items-center justify-center p-4"},j={class:"max-w-md w-full"},N={class:"text-center mb-8"},R={class:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-[#D8AFA0] to-[#C49484] mb-4 shadow-lg"},U={class:"bg-white rounded-2xl shadow-xl p-8 border border-[#E8DFD8]"},q={class:"relative"},O={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},T=["disabled"],z={class:"relative"},G={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},J=["type","disabled"],K=["disabled"],Q={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-3"},W={class:"text-sm text-red-700"},$=["disabled"],H=D({__name:"login",setup(L){const f=E(),v=k(),{signOut:y}=A(),i=c(""),d=c(""),m=c(!1),a=c(!1),r=c(""),_=async()=>{if(!i.value||!d.value){r.value="Por favor completa todos los campos";return}a.value=!0,r.value="";try{const{data:n,error:s}=await f.auth.signInWithPassword({email:i.value,password:d.value});if(s){console.error("Error de autenticación:",s),s.message.includes("Invalid login credentials")?r.value="Credenciales incorrectas. Verifica tu email y contraseña.":s.message.includes("Email not confirmed")?r.value="Tu email aún no ha sido confirmado. Revisa tu correo.":r.value="Error al iniciar sesión. Intenta nuevamente.",a.value=!1;return}if(!n.user){r.value="No se pudo autenticar el usuario",a.value=!1;return}const o=n.user.user_metadata||{},l=n.user.app_metadata||{};if((o.rol||l.rol)!=="coordinacion"){r.value="No tienes permisos de coordinación. Este panel es exclusivo para personal autorizado.",await y(),a.value=!1;return}await v.push("/coordinacion/dashboard")}catch(n){console.error("Error inesperado:",n),r.value="Ocurrió un error inesperado. Por favor intenta nuevamente.",a.value=!1}};return F(async()=>{const{data:{user:n}}=await f.auth.getUser();if(n){const s=n.user_metadata||{},o=n.app_metadata||{};(s.rol||o.rol)==="coordinacion"&&v.push("/coordinacion/dashboard")}}),(n,s)=>{const o=S("Icon");return p(),b("div",P,[e("div",j,[e("div",N,[e("div",R,[u(o,{name:"heroicons:calendar-days",class:"w-10 h-10 text-white"})]),s[3]||(s[3]=e("h1",{class:"text-3xl font-lora font-bold text-[#5D4A44] mb-2"}," Panel de Coordinación ",-1)),s[4]||(s[4]=e("p",{class:"text-[#8B7470]"}," Gestión de citas y comunicación con pacientes ",-1))]),e("div",U,[e("form",{onSubmit:B(_,["prevent"]),class:"space-y-6"},[e("div",null,[s[5]||(s[5]=e("label",{for:"email",class:"block text-sm font-medium text-[#5D4A44] mb-2"}," Correo electrónico ",-1)),e("div",q,[e("div",O,[u(o,{name:"heroicons:envelope",class:"w-5 h-5 text-[#8B7470]"})]),x(e("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=l=>h(i)?i.value=l:null),type:"email",required:"",placeholder:"tu-email@ejemplo.com",class:"w-full pl-10 pr-4 py-3 border border-[#E8DFD8] rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent transition-all",disabled:t(a)},null,8,T),[[M,t(i)]])])]),e("div",null,[s[6]||(s[6]=e("label",{for:"password",class:"block text-sm font-medium text-[#5D4A44] mb-2"}," Contraseña ",-1)),e("div",z,[e("div",G,[u(o,{name:"heroicons:lock-closed",class:"w-5 h-5 text-[#8B7470]"})]),x(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=l=>h(d)?d.value=l:null),type:t(m)?"text":"password",required:"",placeholder:"••••••••",class:"w-full pl-10 pr-12 py-3 border border-[#E8DFD8] rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent transition-all",disabled:t(a)},null,8,J),[[I,t(d)]]),e("button",{type:"button",onClick:s[2]||(s[2]=l=>m.value=!t(m)),class:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:t(a)},[u(o,{name:t(m)?"heroicons:eye-slash":"heroicons:eye",class:"w-5 h-5 text-[#8B7470] hover:text-[#5D4A44] transition-colors"},null,8,["name"])],8,K)])]),t(r)?(p(),b("div",Q,[u(o,{name:"heroicons:exclamation-circle",class:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e("p",W,w(t(r)),1)])):C("",!0),e("button",{type:"submit",disabled:t(a)||!t(i)||!t(d),class:"w-full py-3 px-4 bg-gradient-to-r from-[#D8AFA0] to-[#C49484] text-white font-medium rounded-lg hover:shadow-lg transform hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center space-x-2"},[t(a)?(p(),g(o,{key:0,name:"heroicons:arrow-path",class:"w-5 h-5 animate-spin"})):(p(),g(o,{key:1,name:"heroicons:arrow-right-on-rectangle",class:"w-5 h-5"})),e("span",null,w(t(a)?"Verificando...":"Iniciar sesión"),1)],8,$)],32),s[7]||(s[7]=e("div",{class:"mt-6 pt-6 border-t border-[#E8DFD8]"},[e("p",{class:"text-xs text-center text-[#8B7470]"}," Este panel es exclusivo para personal de coordinación. "),e("p",{class:"text-xs text-center text-[#8B7470] mt-2"}," Si necesitas ayuda, contacta a tu administrador. ")],-1))]),s[8]||(s[8]=e("div",{class:"mt-8 text-center text-sm text-[#8B7470]"},[e("p",null,"Psicóloga Karem · Sistema de gestión clínica")],-1))])])}}}),ee=V(H,[["__scopeId","data-v-1de7f2fa"]]);export{ee as default};
