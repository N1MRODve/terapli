import{c,o as u,a as e,e as z,p as Y,r as l,x as V,g as J,E as K,t as i,F as Q,l as s,b as r,h as w,A as W,q as d}from"#entry";import{s as X}from"./interval-BzLCLO6P.js";import{r as E}from"./CalendarDaysIcon-C0vq0F4x.js";import{r as I}from"./CheckCircleIcon-Bi0YyG7H.js";import{r as B}from"./CurrencyDollarIcon-Dge-tWFD.js";import{r as Z}from"./BellAlertIcon-D9Txc_Yy.js";import{r as T}from"./ClockIcon-CQZt9cKZ.js";import{r as ee}from"./ExclamationTriangleIcon-BreoAuwB.js";import{r as te}from"./UserGroupIcon-Byc3y-S3.js";import{r as oe}from"./TicketIcon-DRclOuRO.js";function f(H,g){return u(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}const se={class:"min-h-screen bg-gray-50 p-4 sm:p-6"},re={class:"max-w-7xl mx-auto"},ae={class:"mb-6"},ne={class:"text-sm text-gray-600"},ie={key:0,class:"flex items-center justify-center py-20"},le={"aria-label":"Accesos rÃ¡pidos",class:"mb-6"},de={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},ce={class:"flex items-center gap-3"},ue={class:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-blue-100 transition-colors"},ge={class:"flex items-center gap-3"},me={class:"w-10 h-10 bg-emerald-50 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-emerald-100 transition-colors"},be={class:"flex items-center gap-3"},pe={class:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-purple-100 transition-colors"},xe={"aria-label":"Panel de control",class:"mb-6"},ve={key:0,class:"bg-white border border-gray-200 rounded-lg p-6 text-center"},fe={class:"w-12 h-12 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-3"},he={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ye={class:"flex items-start justify-between mb-3"},we={class:"w-10 h-10 bg-red-50 rounded-lg flex items-center justify-center"},Te={class:"text-2xl font-bold text-gray-900 mb-1"},ke={class:"flex items-center gap-1 text-xs text-gray-500"},Ce={class:"flex items-start justify-between mb-3"},_e={class:"w-10 h-10 bg-orange-50 rounded-lg flex items-center justify-center"},$e={class:"text-2xl font-bold text-gray-900 mb-1"},je={class:"flex items-center gap-1 text-xs text-gray-500"},De={class:"flex items-start justify-between mb-3"},Se={class:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center"},Pe={class:"text-2xl font-bold text-gray-900 mb-1"},Ve={class:"text-xs text-gray-500 font-mono"},Ee={"aria-label":"Vista rÃ¡pida del dÃ­a"},Ie={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Be={class:"flex items-center justify-between mb-3"},He={class:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center group-hover:bg-blue-100 transition-colors"},qe={class:"text-2xl font-bold text-gray-900 mb-1"},Ae={class:"inline-block px-2 py-1 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded text-xs font-semibold"},Fe={class:"flex items-center justify-between mb-3"},Ne={class:"w-10 h-10 bg-amber-50 rounded-lg flex items-center justify-center group-hover:bg-amber-100 transition-colors"},Oe={class:"text-2xl font-bold text-gray-900 mb-1"},Ge={class:"flex items-center justify-between mb-3"},Re={class:"w-10 h-10 bg-emerald-50 rounded-lg flex items-center justify-center group-hover:bg-emerald-100 transition-colors"},Ue={class:"text-2xl font-bold text-gray-900 mb-1"},Me={class:"flex items-center justify-between mb-3"},Le={class:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center group-hover:bg-purple-100 transition-colors"},ze={class:"text-2xl font-bold text-gray-900 mb-1"},st=z({__name:"dashboard",setup(H){const g=Y(),h=l(!0),k=l(0),C=l(0),p=l(0),_=l(0),x=l(0),$=l(0),j=l(0),b=l([]),v=l([]),q=V(()=>new Date().toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),A=o=>o.toLocaleString("es-ES",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}),F=V(()=>b.value.length>0||v.value.length>0||x.value>0),D=async()=>{try{h.value=!0;const t=new Date().toISOString().split("T")[0],a=new Date,S=new Date(a.getTime()+14400*1e3),P=new Date(a.getTime()+1440*60*1e3),{data:N,count:O}=await g.from("citas").select("*",{count:"exact"}).eq("fecha_cita",t);k.value=O||0,C.value=N?.filter(n=>n.estado==="confirmada").length||0;const{count:G}=await g.from("citas").select("*",{count:"exact",head:!0}).eq("estado","pendiente").gte("fecha_cita",t);p.value=G||0;const{data:R}=await g.from("citas").select("*").eq("estado","pendiente").gte("fecha_cita",t).lte("fecha_cita",S.toISOString().split("T")[0]);b.value=(R||[]).filter(n=>{const m=new Date(`${n.fecha_cita}T${n.hora_inicio}`);return m>=a&&m<=S});const{data:U}=await g.from("citas").select("*").eq("estado","pendiente").gte("fecha_cita",t).lte("fecha_cita",P.toISOString().split("T")[0]);v.value=(U||[]).filter(n=>{const m=new Date(`${n.fecha_cita}T${n.hora_inicio}`);return m>=a&&m<=P&&!b.value.find(y=>y.id===n.id)});const{count:M}=await g.from("pacientes").select("*",{count:"exact",head:!0});_.value=M||0;const{count:L}=await g.from("bonos").select("*",{count:"exact",head:!0}).in("estado",["activo","pendiente"]).gt("sesiones_restantes",0);j.value=L||0;try{const{data:n}=await g.from("pagos").select("monto, estado").in("estado",["pendiente","confirmado_paciente"]);n&&(x.value=n.length,$.value=n.reduce((m,y)=>m+(parseFloat(y.monto)||0),0))}catch(n){console.error("Error al cargar pagos:",n)}}catch(o){console.error("Error al cargar datos del dashboard:",o)}finally{h.value=!1}};return J(()=>{D();const o=X(D,12e4);K(()=>clearInterval(o))}),(o,t)=>(u(),c("div",se,[e("div",re,[e("div",ae,[t[10]||(t[10]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1"}," Â¡Bienvenida! ðŸ‘‹ ",-1)),e("p",ne,i(q.value),1)]),h.value?(u(),c("div",ie,[...t[11]||(t[11]=[e("div",{class:"text-center"},[e("div",{class:"w-16 h-16 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"}),e("p",{class:"text-gray-600 text-sm"},"Cargando informaciÃ³n...")],-1)])])):(u(),c(Q,{key:1},[e("section",le,[e("div",de,[e("button",{onClick:t[0]||(t[0]=a=>("navigateTo"in o?o.navigateTo:s(d))("/coordinadora/agenda")),class:"bg-white border-2 border-blue-200 rounded-lg p-4 hover:border-blue-400 hover:shadow-md transition-all duration-200 text-left group","aria-label":"Ir a la agenda"},[e("div",ce,[e("div",ue,[r(s(E),{class:"w-5 h-5 text-blue-600","aria-hidden":"true"})]),t[12]||(t[12]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Agenda"),e("p",{class:"text-xs text-gray-500"},"Gestionar citas")],-1))])]),e("button",{onClick:t[1]||(t[1]=a=>("navigateTo"in o?o.navigateTo:s(d))("/coordinadora/confirmaciones")),class:"bg-white border-2 border-emerald-200 rounded-lg p-4 hover:border-emerald-400 hover:shadow-md transition-all duration-200 text-left group","aria-label":"Ir a confirmaciones"},[e("div",ge,[e("div",me,[r(s(I),{class:"w-5 h-5 text-emerald-600","aria-hidden":"true"})]),t[13]||(t[13]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Confirmaciones"),e("p",{class:"text-xs text-gray-500"},"Confirmar citas")],-1))])]),e("button",{onClick:t[2]||(t[2]=a=>("navigateTo"in o?o.navigateTo:s(d))("/coordinadora/pagos")),class:"bg-white border-2 border-purple-200 rounded-lg p-4 hover:border-purple-400 hover:shadow-md transition-all duration-200 text-left group","aria-label":"Ir a pagos"},[e("div",be,[e("div",pe,[r(s(B),{class:"w-5 h-5 text-purple-600","aria-hidden":"true"})]),t[14]||(t[14]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-900"},"Pagos"),e("p",{class:"text-xs text-gray-500"},"Gestionar pagos")],-1))])])])]),e("section",xe,[t[25]||(t[25]=e("h2",{class:"text-lg font-bold text-gray-900 mb-3"},"Panel de Control",-1)),F.value?(u(),c("div",he,[b.value.length>0?(u(),c("div",{key:0,onClick:t[3]||(t[3]=a=>("navigateTo"in o?o.navigateTo:s(d))("/coordinadora/confirmaciones")),class:"bg-white border-2 border-red-200 rounded-lg p-4 cursor-pointer hover:border-red-400 hover:shadow-md transition-all duration-200",role:"button","aria-label":"Ver citas urgentes en menos de 4 horas",tabindex:"0"},[e("div",ye,[e("div",we,[r(s(Z),{class:"w-5 h-5 text-red-600","aria-hidden":"true"})]),t[17]||(t[17]=e("span",{class:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-semibold"},"URGENTE",-1))]),e("h3",Te,i(b.value.length),1),t[19]||(t[19]=e("p",{class:"text-sm text-gray-700 font-medium mb-2"},"Citas en menos de 4 horas",-1)),e("div",ke,[r(s(T),{class:"w-3.5 h-3.5","aria-hidden":"true"}),t[18]||(t[18]=e("span",null,"Confirmar ahora",-1))])])):w("",!0),v.value.length>0?(u(),c("div",{key:1,onClick:t[4]||(t[4]=a=>("navigateTo"in o?o.navigateTo:s(d))("/coordinadora/confirmaciones")),class:"bg-white border-2 border-orange-200 rounded-lg p-4 cursor-pointer hover:border-orange-400 hover:shadow-md transition-all duration-200",role:"button","aria-label":"Ver citas en las prÃ³ximas 24 horas",tabindex:"0"},[e("div",Ce,[e("div",_e,[r(s(ee),{class:"w-5 h-5 text-orange-600","aria-hidden":"true"})]),t[20]||(t[20]=e("span",{class:"px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs font-semibold"},"HOY",-1))]),e("h3",$e,i(v.value.length),1),t[22]||(t[22]=e("p",{class:"text-sm text-gray-700 font-medium mb-2"},"Citas en 24 horas",-1)),e("div",je,[r(s(T),{class:"w-3.5 h-3.5","aria-hidden":"true"}),t[21]||(t[21]=e("span",null,"Confirmar hoy",-1))])])):w("",!0),x.value>0?(u(),c("div",{key:2,onClick:t[5]||(t[5]=a=>("navigateTo"in o?o.navigateTo:s(d))("/coordinadora/pagos")),class:"bg-white border-2 border-purple-200 rounded-lg p-4 cursor-pointer hover:border-purple-400 hover:shadow-md transition-all duration-200",role:"button","aria-label":"Ver pagos pendientes de confirmaciÃ³n",tabindex:"0"},[e("div",De,[e("div",Se,[r(s(B),{class:"w-5 h-5 text-purple-600","aria-hidden":"true"})]),t[23]||(t[23]=e("span",{class:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs font-semibold"},"PAGOS",-1))]),e("h3",Pe,i(x.value),1),t[24]||(t[24]=e("p",{class:"text-sm text-gray-700 font-medium mb-2"},"Pagos por confirmar",-1)),e("div",Ve,i(A($.value)),1)])):w("",!0)])):(u(),c("div",ve,[e("div",fe,[r(s(I),{class:"w-6 h-6 text-emerald-600"})]),t[15]||(t[15]=e("h3",{class:"text-base font-semibold text-gray-900 mb-1"},"Â¡Todo al dÃ­a!",-1)),t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"}," No tienes acciones urgentes pendientes. ",-1))]))]),e("section",Ee,[t[32]||(t[32]=e("h2",{class:"text-lg font-bold text-gray-900 mb-3"},"Vista RÃ¡pida del DÃ­a",-1)),e("div",Ie,[e("button",{onClick:t[6]||(t[6]=a=>("navigateTo"in o?o.navigateTo:s(d))("/coordinadora/agenda")),class:"bg-white border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all duration-200 text-left group","aria-label":"Ver agenda de citas de hoy"},[e("div",Be,[e("div",He,[r(s(E),{class:"w-5 h-5 text-blue-600","aria-hidden":"true"})]),r(s(f),{class:"w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors","aria-hidden":"true"})]),e("h3",qe,i(k.value),1),t[26]||(t[26]=e("p",{class:"text-sm text-gray-600 font-medium mb-2"},"Citas hoy",-1)),e("span",Ae,i(C.value)+" confirmadas ",1)]),e("button",{onClick:t[7]||(t[7]=a=>("navigateTo"in o?o.navigateTo:s(d))("/coordinadora/confirmaciones")),class:"bg-white border border-gray-200 rounded-lg p-4 hover:border-amber-300 hover:shadow-md transition-all duration-200 text-left group","aria-label":"Ver citas sin confirmar"},[e("div",Fe,[e("div",Ne,[r(s(T),{class:"w-5 h-5 text-amber-600","aria-hidden":"true"})]),r(s(f),{class:"w-4 h-4 text-gray-400 group-hover:text-amber-600 transition-colors","aria-hidden":"true"})]),e("h3",Oe,i(p.value),1),t[27]||(t[27]=e("p",{class:"text-sm text-gray-600 font-medium mb-2"},"Sin confirmar",-1)),e("span",{class:W(["text-xs font-semibold",p.value>0?"text-amber-600":"text-emerald-600"])},i(p.value>0?"Requiere seguimiento":"âœ“ Todo confirmado"),3)]),e("button",{onClick:t[8]||(t[8]=a=>("navigateTo"in o?o.navigateTo:s(d))("/coordinadora/pacientes")),class:"bg-white border border-gray-200 rounded-lg p-4 hover:border-emerald-300 hover:shadow-md transition-all duration-200 text-left group","aria-label":"Ver lista de pacientes"},[e("div",Ge,[e("div",Re,[r(s(te),{class:"w-5 h-5 text-emerald-600","aria-hidden":"true"})]),r(s(f),{class:"w-4 h-4 text-gray-400 group-hover:text-emerald-600 transition-colors","aria-hidden":"true"})]),e("h3",Ue,i(_.value),1),t[28]||(t[28]=e("p",{class:"text-sm text-gray-600 font-medium mb-2"},"Pacientes",-1)),t[29]||(t[29]=e("span",{class:"text-xs text-gray-500"},"En seguimiento",-1))]),e("button",{onClick:t[9]||(t[9]=a=>("navigateTo"in o?o.navigateTo:s(d))("/coordinadora/bonos")),class:"bg-white border border-gray-200 rounded-lg p-4 hover:border-purple-300 hover:shadow-md transition-all duration-200 text-left group","aria-label":"Ver bonos activos"},[e("div",Me,[e("div",Le,[r(s(oe),{class:"w-5 h-5 text-purple-600","aria-hidden":"true"})]),r(s(f),{class:"w-4 h-4 text-gray-400 group-hover:text-purple-600 transition-colors","aria-hidden":"true"})]),e("h3",ze,i(j.value),1),t[30]||(t[30]=e("p",{class:"text-sm text-gray-600 font-medium mb-2"},"Bonos activos",-1)),t[31]||(t[31]=e("span",{class:"text-xs text-gray-500"},"Con sesiones",-1))])])])],64))])]))}});export{st as default};
