import{_ as P}from"./CIxdp835.js";import{e as V,ag as O,M as R,m as q,L as G,f as K,r as p,s as _,g as Q,C as W,D as J,c as l,a as e,b as n,t as a,k as r,F as w,x as D,h,w as f,T as M,O as X,o as c,d as y,Q as Y,z as F,i as j}from"#entry";import{_ as Z}from"./DlAUqK2U.js";const ee={class:"min-h-screen bg-[#F9F7F3]"},te={class:"bg-white shadow-sm border-b border-[#E8DFD8]"},se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},oe={class:"flex justify-between items-center h-16"},ne={class:"flex items-center space-x-3"},ae={class:"text-xs text-[#8B7470]"},re={class:"hidden md:flex items-center space-x-1"},ie={class:"flex items-center space-x-3"},le={key:0,class:"absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center"},ce={class:"w-8 h-8 rounded-full bg-gradient-to-br from-[#D8AFA0] to-[#C49484] flex items-center justify-center"},de={class:"text-white text-sm font-semibold"},ue={class:"md:hidden border-t border-[#E8DFD8] bg-white px-4 py-3"},me={class:"flex overflow-x-auto space-x-2 pb-2"},xe={class:"max-h-96 overflow-y-auto"},pe={class:"text-sm font-medium text-[#5D4A44]"},he={class:"text-xs text-[#8B7470] mt-1"},fe={class:"text-xs text-[#A89B97] mt-2"},be={key:0,class:"p-8 text-center text-[#8B7470]"},ge={class:"p-4 border-b border-[#E8DFD8]"},ve={class:"font-semibold text-[#5D4A44]"},_e={class:"text-sm text-[#8B7470]"},we={class:"p-2"},De={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ye=V({__name:"coordinacion",setup(Fe){const C=O(),x=R(),S=q();G();const{signOut:U}=K(),u=p(!1),m=p(!1),b=p([]),g=p(0),v=_(()=>x.value?.user_metadata?.nombre||"Coordinaci贸n"),I=_(()=>x.value?.email||""),$=_(()=>v.value.split(" ").map(t=>t[0]).join("").toUpperCase().substring(0,2)),A=[{path:"/coordinacion/dashboard",label:"Dashboard",icon:"heroicons:home"},{path:"/coordinacion/agenda",label:"Agenda",icon:"heroicons:calendar"},{path:"/coordinacion/pagos",label:"Pagos",icon:"heroicons:credit-card"},{path:"/coordinacion/mensajes",label:"Mensajes",icon:"heroicons:chat-bubble-left-right"}],k=o=>C.path===o||C.path.startsWith(o+"/"),L=()=>{u.value=!u.value,m.value=!1},T=()=>{m.value=!m.value,u.value=!1},z=o=>{const t=new Date(o),d=new Date().getTime()-t.getTime(),s=Math.floor(d/6e4),N=Math.floor(d/36e5),B=Math.floor(d/864e5);return s<1?"Ahora":s<60?`Hace ${s} min`:N<24?`Hace ${N} h`:B<7?`Hace ${B} d`:t.toLocaleDateString("es-ES",{day:"numeric",month:"short"})},H=async()=>{try{await U()}catch(o){console.error("Error al cerrar sesi贸n:",o)}},E=async()=>{if(x.value)try{const{data:o,error:t}=await S.from("notificaciones").select("*").eq("usuario_id",x.value.id).order("created_at",{ascending:!1}).limit(10);!t&&o&&(b.value=o,g.value=o.filter(i=>!i.visto).length)}catch(o){console.error("Error al cargar notificaciones:",o)}};return Q(()=>{E();const o=W(E,3e4);J(()=>{clearInterval(o)})}),(o,t)=>{const i=Y("Icon"),d=P;return c(),l("div",ee,[e("header",te,[e("div",se,[e("div",oe,[e("div",ne,[t[5]||(t[5]=e("div",{class:"w-10 h-10 rounded-full bg-gradient-to-br from-[#D8AFA0] to-[#C49484] flex items-center justify-center"},[e("span",{class:"text-white font-semibold text-lg"},"B")],-1)),e("div",null,[t[4]||(t[4]=e("h1",{class:"text-xl font-lora font-semibold text-[#5D4A44]"},"Panel de Coordinaci贸n",-1)),e("p",ae,"Hola, "+a(r(v))+" ",1)])]),e("nav",re,[(c(),l(w,null,D(A,s=>n(d,{key:s.path,to:s.path,class:F(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",k(s.path)?"bg-[#D8AFA0] text-white":"text-[#5D4A44] hover:bg-[#E8DFD8]"])},{default:f(()=>[n(i,{name:s.icon,class:"w-4 h-4 inline-block mr-2"},null,8,["name"]),y(" "+a(s.label),1)]),_:2},1032,["to","class"])),64))]),e("div",ie,[e("button",{onClick:L,class:"relative p-2 rounded-lg hover:bg-[#E8DFD8] transition-colors"},[n(i,{name:"heroicons:bell",class:"w-5 h-5 text-[#5D4A44]"}),r(g)>0?(c(),l("span",le,a(r(g)),1)):h("",!0)]),e("button",{onClick:T,class:"flex items-center space-x-2 p-2 rounded-lg hover:bg-[#E8DFD8] transition-colors"},[e("div",ce,[e("span",de,a(r($)),1)]),n(i,{name:"heroicons:chevron-down",class:"w-4 h-4 text-[#5D4A44]"})])])])]),e("nav",ue,[e("div",me,[(c(),l(w,null,D(A,s=>n(d,{key:s.path,to:s.path,class:F(["flex items-center px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors",k(s.path)?"bg-[#D8AFA0] text-white":"text-[#5D4A44] hover:bg-[#E8DFD8]"])},{default:f(()=>[n(i,{name:s.icon,class:"w-4 h-4 mr-2"},null,8,["name"]),y(" "+a(s.label),1)]),_:2},1032,["to","class"])),64))])])]),n(M,{name:"fade"},{default:f(()=>[r(u)?(c(),l("div",{key:0,class:"fixed inset-0 z-40",onClick:t[1]||(t[1]=s=>u.value=!1)},[e("div",{class:"absolute top-20 right-4 w-80 bg-white rounded-xl shadow-2xl border border-[#E8DFD8] overflow-hidden",onClick:t[0]||(t[0]=j(()=>{},["stop"]))},[t[7]||(t[7]=e("div",{class:"p-4 bg-gradient-to-r from-[#D8AFA0] to-[#C49484]"},[e("h3",{class:"text-white font-semibold"},"Notificaciones")],-1)),e("div",xe,[(c(!0),l(w,null,D(r(b),s=>(c(),l("div",{key:s.id,class:F(["p-4 border-b border-[#E8DFD8] hover:bg-[#F9F7F3] transition-colors cursor-pointer",{"bg-blue-50":!s.visto}])},[e("p",pe,a(s.titulo),1),e("p",he,a(s.mensaje),1),e("p",fe,a(z(s.created_at)),1)],2))),128)),r(b).length===0?(c(),l("div",be,[n(i,{name:"heroicons:bell-slash",class:"w-12 h-12 mx-auto mb-2 opacity-30"}),t[6]||(t[6]=e("p",{class:"text-sm"},"No tienes notificaciones",-1))])):h("",!0)])])])):h("",!0)]),_:1}),n(M,{name:"fade"},{default:f(()=>[r(m)?(c(),l("div",{key:0,class:"fixed inset-0 z-40",onClick:t[3]||(t[3]=s=>m.value=!1)},[e("div",{class:"absolute top-20 right-4 w-64 bg-white rounded-xl shadow-2xl border border-[#E8DFD8] overflow-hidden",onClick:t[2]||(t[2]=j(()=>{},["stop"]))},[e("div",ge,[e("p",ve,a(r(v)),1),e("p",_e,a(r(I)),1),t[8]||(t[8]=e("span",{class:"inline-block mt-2 px-3 py-1 bg-[#D8AFA0] text-white text-xs rounded-full"}," Coordinaci贸n ",-1))]),e("div",we,[e("button",{onClick:H,class:"w-full text-left px-4 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50 transition-colors flex items-center"},[n(i,{name:"heroicons:arrow-right-on-rectangle",class:"w-4 h-4 mr-2"}),t[9]||(t[9]=y(" Cerrar sesi贸n ",-1))])])])])):h("",!0)]),_:1}),e("main",De,[X(o.$slots,"default",{},void 0,!0)]),t[10]||(t[10]=e("footer",{class:"mt-12 py-6 border-t border-[#E8DFD8] text-center text-sm text-[#8B7470]"},[e("p",null,"Panel de Coordinaci贸n Cl铆nica 路 Psic贸loga Karem"),e("p",{class:"mt-1"},"Gesti贸n de citas, pagos y comunicaci贸n con pacientes")],-1))])}}}),Ee=Z(ye,[["__scopeId","data-v-06e2a812"]]);export{Ee as default};
