import{_ as Ue}from"./DashboardCard-DEi6X8fH.js";import{r as p,I as he,c as l,o as r,a as e,h as g,d as k,l as s,t as n,k as Y,v as ue,E as be,j as ve,m as W,O as Le,e as Ge,p as Oe,B as He,al as Ke,L as Ye,x,g as We,b as v,w as h,F as z,y as T,z as _e,A as w,K as ye}from"#entry";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Qe}from"./ModalNuevaCita-DgVuIw_4.js";import{M as Je}from"./ModalDetallesCita-T6pc8qhN.js";import{u as Xe}from"./useCitas-9Z4e1_ch.js";import"./CheckCircleIcon-Bi0YyG7H.js";import"./CalendarIcon-mZ3toP8Y.js";import"./TicketIcon-DRclOuRO.js";import"./MagnifyingGlassIcon-B5My0XuL.js";import"./XCircleIcon-DIGsvT-h.js";import"./UserIcon-G1mM6o1b.js";import"./ExclamationTriangleIcon-BreoAuwB.js";import"./UserGroupIcon-Byc3y-S3.js";import"./ClockIcon-CQZt9cKZ.js";import"./DocumentTextIcon-Dp_75vtG.js";import"./PhoneIcon-B4J2dtua.js";import"./CheckBadgeIcon-CuVUaEjS.js";import"./PaymentMethodSelector-DGmnaSg8.js";import"./useToast-Cq0GyJHs.js";import"./ModalNuevoBono-BgkR4bFj.js";import"./useBonos-DDT1LxKM.js";import"./XMarkIcon-DWNj0d99.js";import"./PencilIcon-QJyqa3i7.js";import"./CalendarDaysIcon-C0vq0F4x.js";import"./ChevronDownIcon-BwiNUDLV.js";import"./PlusIcon-UqRq4KLf.js";const Ze={class:"bg-white rounded-xl shadow-sm border border-[#E2E8F0]/40 p-6"},et={class:"flex items-center justify-between mb-4"},tt={key:0,class:"min-h-[200px]"},st={key:0,class:"prose prose-sm max-w-none text-cafe/80 whitespace-pre-wrap"},ot={key:1,class:"text-center py-8"},at={key:1},nt=["onKeydown"],lt={class:"mt-2 flex items-center justify-between text-xs text-cafe/60"},rt={key:0},it={class:"mt-4 flex items-center gap-3"},dt=["disabled"],ct={key:0},pt={key:1},ut=["disabled"],xt={key:2,class:"mt-4 pt-4 border-t border-gray-100"},ft={class:"text-xs text-cafe/50"},mt={__name:"NotasPrivadas",props:{pacienteId:{type:String,required:!0},contenido:{type:String,default:""},ultimaActualizacion:{type:String,default:null}},emits:["guardar","actualizar"],setup(q,{emit:S}){const $=q,oe=S,C=p(!1),E=p(!1),f=p($.contenido),j=p($.contenido),A=p(null);he(()=>$.contenido,b=>{C.value||(f.value=b,j.value=b)});const d=()=>{C.value=!0,Le(()=>{A.value?.focus()})},u=()=>{f.value=j.value,C.value=!1},y=async()=>{if(!E.value){E.value=!0;try{await oe("guardar",{pacienteId:$.pacienteId,contenido:f.value}),j.value=f.value,C.value=!1;const b=event?.target;b&&(b.textContent="‚úì Guardado",setTimeout(()=>{b.textContent="üíæ Guardar cambios"},2e3))}catch(b){console.error("Error al guardar notas:",b),alert("Hubo un error al guardar las notas. Por favor, int√©ntalo de nuevo.")}finally{E.value=!1}}},I=b=>b?new Date(b).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return(b,m)=>(r(),l("div",Ze,[e("div",et,[m[1]||(m[1]=e("h3",{class:"font-serif text-lg font-semibold text-cafe flex items-center gap-2"},[e("span",{class:"text-xl"},"üìù"),k(" Notas Cl√≠nicas Privadas ")],-1)),s(C)?g("",!0):(r(),l("button",{key:0,onClick:d,class:"px-3 py-1.5 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors"}," ‚úèÔ∏è Editar "))]),m[5]||(m[5]=e("div",{class:"mb-4 p-3 bg-rosa/20 border border-rosa rounded-lg"},[e("p",{class:"text-xs text-cafe/70 flex items-start gap-2"},[e("span",{class:"text-purple-600"},"üîí"),e("span",null," Esta informaci√≥n es estrictamente confidencial y solo visible para ti como terapeuta. Cumple con los est√°ndares de protecci√≥n de datos cl√≠nicos. ")])],-1)),s(C)?(r(),l("div",at,[Y(e("textarea",{ref_key:"textareaRef",ref:A,"onUpdate:modelValue":m[0]||(m[0]=V=>W(f)?f.value=V:null),placeholder:`Anota observaciones, reflexiones o aspectos a seguir trabajando...

‚Ä¢ Progreso observado en la sesi√≥n
‚Ä¢ Temas pendientes de abordar
‚Ä¢ Estrategias que funcionan
‚Ä¢ Aspectos que requieren atenci√≥n`,class:"w-full min-h-[300px] px-4 py-3 bg-base-bg rounded-lg border border-purple-600/30 focus:border-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-300/20 transition-all text-cafe resize-y",onKeydown:[be(ve(y,["meta"]),["enter"]),be(ve(y,["ctrl"]),["enter"])]},null,40,nt),[[ue,s(f)]]),e("div",lt,[m[4]||(m[4]=e("span",null," üí° Presiona Cmd/Ctrl + Enter para guardar r√°pidamente ",-1)),q.ultimaActualizacion?(r(),l("span",rt," √öltima actualizaci√≥n: "+n(I(q.ultimaActualizacion)),1)):g("",!0)]),e("div",it,[e("button",{onClick:y,disabled:s(E),class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[s(E)?(r(),l("span",ct,"‚è≥")):(r(),l("span",pt,"üíæ")),e("span",null,n(s(E)?"Guardando...":"Guardar cambios"),1)],8,dt),e("button",{onClick:u,disabled:s(E),class:"px-4 py-2 bg-white border border-cafe/20 text-cafe rounded-lg hover:bg-gray-50 transition-colors"}," Cancelar ",8,ut)])])):(r(),l("div",tt,[s(f)?(r(),l("div",st,n(s(f)),1)):(r(),l("div",ot,[m[2]||(m[2]=e("span",{class:"text-5xl mb-3 block opacity-40"},"üìã",-1)),m[3]||(m[3]=e("p",{class:"text-cafe/50 italic"}," A√∫n no hay notas registradas para este paciente ",-1)),e("button",{onClick:d,class:"mt-4 px-4 py-2 text-sm bg-purple-600/10 text-purple-600 rounded-lg hover:bg-purple-600/20 transition-colors"}," A√±adir primera nota ")]))])),!s(C)&&q.ultimaActualizacion?(r(),l("div",xt,[e("p",ft," √öltima modificaci√≥n: "+n(I(q.ultimaActualizacion)),1)])):g("",!0)]))}},gt=we(mt,[["__scopeId","data-v-b66842cb"]]),bt={class:"pb-20"},vt={key:0,class:"text-center py-12"},_t={key:1,class:"text-center py-12"},yt={class:"text-cafe/60 mb-4"},ht={key:2},wt={class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6"},kt={class:"flex items-start gap-4"},Ct={class:"text-3xl font-serif font-bold text-cafe mb-2"},Dt={class:"flex flex-wrap items-center gap-3 mb-3"},Pt={class:"text-cafe/60 text-sm flex items-center gap-1"},St={class:"space-y-1 text-sm"},$t={key:0,class:"text-cafe/70 flex items-center gap-2"},Et={key:1,class:"text-cafe/70 flex items-center gap-2"},At={key:2,class:"text-cafe/70 flex items-center gap-2"},zt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},Tt={class:"space-y-3"},jt={class:"flex items-center justify-between p-3 bg-base-bg rounded-lg"},Nt={class:"font-bold text-cafe text-lg"},Bt={class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},Ft={class:"font-bold text-green-600 text-lg"},Mt={class:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg"},qt={class:"font-bold text-yellow-600 text-lg"},It={class:"flex items-center justify-between p-3 bg-blue-50 rounded-lg"},Vt={class:"font-bold text-blue-600 text-lg"},Rt={key:0,class:"space-y-4"},Ut={class:"p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg"},Lt={class:"text-sm font-bold text-purple-900"},Gt={class:"text-center p-4 bg-gradient-to-br from-purple-600/10 to-rosa/20 rounded-xl"},Ot={class:"text-4xl font-bold text-purple-600 mb-1"},Ht={class:"text-sm text-cafe/70"},Kt={class:"space-y-2"},Yt={class:"flex justify-between text-sm"},Wt={class:"font-medium text-cafe"},Qt={class:"w-full bg-gray-200 rounded-full h-2.5"},Jt={class:"pt-3 border-t space-y-2 text-sm"},Xt={class:"flex justify-between"},Zt={class:"font-medium text-cafe"},es={class:"flex justify-between"},ts={class:"font-medium text-cafe"},ss={class:"flex justify-between"},os={class:"font-medium text-cafe"},as={class:"flex justify-between"},ns={key:1,class:"text-center py-8"},ls={class:"text-xs text-cafe/40 mb-4"},rs={class:"space-y-3"},is={class:"p-3 bg-base-bg rounded-lg"},ds={class:"text-sm font-medium text-cafe"},cs={class:"p-3 bg-base-bg rounded-lg"},ps={class:"text-sm font-medium text-cafe"},us={key:0,class:"p-4 bg-gradient-to-br from-purple-600/20 to-rosa/20 border-2 border-purple-600/40 rounded-lg"},xs={class:"text-base font-bold text-cafe mb-3"},fs={class:"flex items-center gap-2 flex-wrap"},ms={class:"text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full font-medium flex items-center gap-1"},gs={key:0,class:"mt-3 pt-3 border-t border-purple-600/20"},bs={class:"text-xs text-cafe"},vs={key:1,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},_s={class:"p-3 bg-base-bg rounded-lg"},ys={class:"text-sm font-medium text-cafe"},hs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},ws={class:"flex items-center justify-between mb-4"},ks=["value"],Cs={class:"grid grid-cols-2 gap-3"},Ds={class:"p-3 bg-gradient-to-br from-purple-50 to-rosa/20 rounded-lg text-center"},Ps={class:"text-3xl font-bold text-purple-600"},Ss={class:"p-3 bg-red-50 rounded-lg text-center"},$s={class:"text-3xl font-bold text-red-500"},Es={class:"p-3 bg-yellow-50 rounded-lg text-center"},As={class:"text-2xl font-bold text-yellow-600"},zs={class:"p-3 bg-green-50 rounded-lg text-center"},Ts={class:"text-2xl font-bold text-green-600"},js={class:"flex items-center justify-between mb-4"},Ns=["value"],Bs={key:0},Fs={class:"text-4xl font-bold text-red-600 mb-2"},Ms={class:"text-xs text-red-500 mt-1"},qs={key:1},Is={class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-4"},Vs={class:"flex items-center gap-3 flex-wrap"},Rs={class:"flex items-center gap-2"},Us={class:"flex items-center gap-2"},Ls={key:0,class:"overflow-x-auto"},Gs={class:"w-full text-sm"},Os={class:"px-4 py-3 text-cafe/60"},Hs={class:"px-4 py-3"},Ks={class:"font-medium text-cafe"},Ys={class:"text-xs text-cafe/60"},Ws={class:"px-4 py-3"},Qs={class:"px-4 py-3"},Js={class:"px-4 py-3 text-right font-medium text-cafe"},Xs={class:"px-4 py-3"},Zs={key:0,class:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-green-100 text-green-700"},eo={key:1,class:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-red-100 text-red-700"},to={key:2,class:"text-xs text-cafe/50"},so={key:1,class:"text-center py-12"},oo={class:"mb-6"},ao={class:"border-b border-gray-200"},no={class:"-mb-px flex space-x-8 overflow-x-auto"},lo=["onClick"],ro={class:"mr-2"},io={key:0,class:"ml-2 px-2 py-0.5 text-xs rounded-full bg-purple-600 text-white"},co={class:"space-y-6"},po={key:0},uo={key:0,class:"space-y-3"},xo={class:"flex items-start justify-between gap-4"},fo={class:"flex-1"},mo={class:"flex items-center gap-2 mb-2"},go={class:"text-lg font-semibold text-cafe"},bo={class:"text-base font-medium text-purple-600"},vo={class:"flex flex-wrap items-center gap-2 mb-2"},_o={key:0,class:"text-sm text-cafe/60 mt-2"},yo=["onClick"],ho={key:1,class:"text-center py-12"},wo={key:1},ko={key:0,class:"space-y-3"},Co={class:"flex items-start justify-between gap-4"},Do={class:"flex-1"},Po={class:"flex items-center gap-2 mb-2"},So={class:"text-base font-semibold text-cafe"},$o={class:"text-sm text-cafe/60"},Eo={class:"flex items-center gap-2 mb-2"},Ao={key:0,class:"text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100"},zo={key:1,class:"text-sm text-cafe/60 mt-2"},To={key:1,class:"text-center py-12"},jo={key:2},No={key:0,class:"space-y-3"},Bo={class:"flex items-start justify-between gap-4"},Fo={class:"flex-1"},Mo={class:"flex items-center gap-2 mb-2"},qo={class:"text-base font-semibold text-cafe"},Io={class:"text-base font-medium text-purple-600"},Vo={class:"flex items-center gap-2 mb-2"},Ro={key:0,class:"text-sm text-cafe/60 mt-2"},Uo={class:"flex gap-2"},Lo=["onClick"],Go=["onClick"],Oo={key:1,class:"text-center py-12"},Ho={key:3},Ko={key:0,class:"space-y-3"},Yo={class:"flex items-start justify-between gap-4"},Wo={class:"flex-1"},Qo={class:"flex items-center gap-2 mb-2"},Jo={class:"text-base font-semibold text-cafe"},Xo={class:"text-sm text-cafe/60"},Zo={class:"flex flex-wrap items-center gap-2"},ea={key:1,class:"text-center py-12"},ta={class:"mt-6"},sa=Ge({__name:"[id]",setup(q){const S=Oe(),$=He(),{getCitas:oe}=Xe(),C=Ke(),E=Ye(),f=x(()=>C.params.id||""),j=p(!0),A=p(null),d=p(null),u=p(null),y=p([]),I=p(""),b=p(null),m=p([]),V=new Date().getFullYear(),Q=p(V),J=p(V),N=p(""),B=p(""),xe=x(()=>{const o=[];for(let t=V;t>=V-4;t--)o.push(t);return o}),R=p("proximas"),ae=p(!1),ne=p(null),le=p(!1),re=p(null),ke=x(()=>[{id:"proximas",nombre:"Pr√≥ximas Sesiones",icono:"üìÖ",badge:F.value.proximas||null},{id:"completadas",nombre:"Completadas",icono:"‚úÖ",badge:F.value.completadas||null},{id:"pendientes",nombre:"Pendientes",icono:"‚è≥",badge:F.value.pendientes||null},{id:"anteriores",nombre:"Historial",icono:"üìö",badge:null}]),X=async()=>{j.value=!0,A.value=null;try{if(!$.value){A.value="Usuario no autenticado";return}const{data:o,error:t}=await S.from("pacientes").select("*").eq("id",f.value).single();if(t)throw t;const i=o.nombre_completo||o.email||"Sin nombre";d.value={...o,nombre_completo:i,email:o.email||"",telefono:o.telefono||""};const c=await oe();y.value=c.filter(P=>P.paciente_id===f.value),await Ce(),await De(),await Pe()}catch(o){console.error("Error al cargar paciente:",o),A.value=o.message||"Error desconocido"}finally{j.value=!1}},Ce=async()=>{try{const{data:o,error:t}=await S.from("bonos").select("*").eq("paciente_id",f.value).in("estado",["activo","pendiente"]).gt("sesiones_restantes",0).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(t){console.warn("[Bonos] Error en consulta:",t.message);return}if(o){const i=o.sesiones_totales||0,c=o.sesiones_restantes||0,P=i-c;u.value={...o,sesiones_usadas:P,sesiones_disponibles:c,porcentaje_uso:i>0?Math.round(P/i*100):0},console.info(`[Bonos] Bono activo cargado para paciente: ${o.tipo} (${c}/${i} disponibles)`)}else u.value=null,console.info("[Bonos] No se encontr√≥ bono activo para este paciente")}catch(o){console.warn("[Bonos] Error inesperado:",o)}},De=async()=>{try{const{data:o,error:t}=await S.from("pagos").select("*").eq("paciente_id",f.value).order("created_at",{ascending:!1});if(t){console.warn("[Pagos] Error al cargar:",t.message);return}m.value=o||[],console.info(`[Pagos] Cargados ${m.value.length} pagos para el paciente`)}catch(o){console.warn("[Pagos] Error inesperado:",o)}},Pe=async()=>{try{const{data:o}=await S.from("notas_terapeuticas").select("contenido, updated_at").eq("paciente_id",f.value).eq("terapeuta_id",$.value?.id).order("updated_at",{ascending:!1}).limit(1).maybeSingle();o&&(I.value=o.contenido||"",b.value=o.updated_at)}catch(o){console.error("Error al cargar notas:",o)}},Se=async({pacienteId:o,contenido:t})=>{try{const{data:i}=await S.from("notas_terapeuticas").select("id").eq("paciente_id",o).eq("terapeuta_id",$.value?.id).maybeSingle();i?await S.from("notas_terapeuticas").update({contenido:t,updated_at:new Date().toISOString()}).eq("id",i.id):await S.from("notas_terapeuticas").insert({paciente_id:o,terapeuta_id:$.value?.id,contenido:t}),I.value=t,b.value=new Date().toISOString()}catch(i){throw console.error("Error al guardar notas:",i),i}},O=x(()=>{const o=new Date;return y.value.filter(t=>["pendiente","confirmada"].includes(t.estado)&&new Date(t.fecha_cita)>=o).sort((t,i)=>new Date(t.fecha_cita).getTime()-new Date(i.fecha_cita).getTime())}),H=x(()=>y.value.filter(o=>o.estado==="realizada").sort((o,t)=>new Date(t.fecha_cita).getTime()-new Date(o.fecha_cita).getTime())),ie=x(()=>y.value.filter(o=>o.estado==="pendiente").sort((o,t)=>new Date(o.fecha_cita).getTime()-new Date(t.fecha_cita).getTime())),fe=x(()=>y.value.sort((o,t)=>new Date(t.fecha_cita).getTime()-new Date(o.fecha_cita).getTime())),F=x(()=>({total:y.value.length,completadas:H.value.length,pendientes:ie.value.length,proximas:O.value.length})),Z=x(()=>{const o=Q.value,t=y.value.filter(a=>new Date(a.fecha_cita).getFullYear()===o),i=t.length,c=t.filter(a=>a.estado==="realizada").length,P=t.filter(a=>a.estado==="cancelada").length,_=t.filter(a=>["pendiente","confirmada"].includes(a.estado)).length;return{total:i,realizadas:c,canceladas:P,programadas:_}}),ee=x(()=>{const o=J.value,t=m.value.filter(_=>new Date(_.created_at||_.fecha).getFullYear()===o&&_.estado==="pendiente"),i=y.value.filter(_=>new Date(_.fecha_cita).getFullYear()===o&&_.estado==="realizada"&&!_.pagado),c=t.reduce((_,a)=>_+(a.monto||0),0),P=i.reduce((_,a)=>_+(a.precio_sesion||0),0);return{totalPendiente:c+P,cantidadPendientes:t.length+i.length,haDeuda:c+P>0}}),de=x(()=>{let o=[...y.value];if(N.value){const t=new Date(N.value);o=o.filter(i=>new Date(i.fecha_cita)>=t)}if(B.value){const t=new Date(B.value);o=o.filter(i=>new Date(i.fecha_cita)<=t)}return o.sort((t,i)=>new Date(i.fecha_cita).getTime()-new Date(t.fecha_cita).getTime())}),$e=x(()=>{const o=H.value;return o.length>0?o[o.length-1].fecha_cita:null}),Ee=x(()=>{const o=H.value;return o.length>0?o[0].fecha_cita:null}),D=x(()=>O.value.length>0?O.value[0]:null),U=x(()=>d.value?.nombre_completo||"Sin nombre"),Ae=x(()=>{if(!U.value)return"?";const o=U.value.split(" ");return o.length>=2&&o[0]&&o[1]?`${o[0][0]}${o[1][0]}`.toUpperCase():U.value.substring(0,2).toUpperCase()}),ze=x(()=>{const o=["#D8AFA0","#C89B8A","#B7C6B0","#A8C5B5","#D4A5A5","#C4B5A0"],t=f.value.charCodeAt(0)%o.length;return o[t]}),Te=x(()=>d.value?d.value.activo?d.value.metadata?.en_pausa?"En pausa":"En proceso":"Finalizado":""),je=x(()=>d.value?d.value.activo?d.value.metadata?.en_pausa?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700":"bg-gray-100 text-gray-600":""),ce=x(()=>d.value?.tipo_bono?{a_demanda:"A Demanda (1 sesi√≥n)",quincenal:"Quincenal (2 sesiones/mes)",semanal:"Semanal (4 sesiones/mes)"}[d.value.tipo_bono]||d.value.tipo_bono:""),M=o=>{if(!o)return"";try{return new Date(o+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}catch{return o}},Ne=(o,t)=>{if(!o)return"";try{return new Date(o+"T"+(t||"00:00:00")).toLocaleString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return o}},te=o=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(o||0),Be=o=>{if(!o)return"";const t=new Date(o),c=Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24));return c<30?`${c} d√≠as`:c<365?`${Math.floor(c/30)} meses`:`${Math.floor(c/365)} a√±os`},L=o=>({presencial:"üè•",online:"üíª",telefonica:"üìû"})[o]||"üìã",K=o=>({presencial:"bg-green-100 text-green-700",online:"bg-purple-600/20 text-purple-600",telefonica:"bg-blue-100 text-blue-700"})[o]||"bg-gray-100 text-gray-700",pe=o=>({pendiente:"bg-yellow-100 text-yellow-700",confirmada:"bg-green-100 text-green-700",realizada:"bg-blue-100 text-blue-700",cancelada:"bg-red-100 text-red-700"})[o]||"bg-gray-100 text-gray-700",me=()=>{E.push(`/terapeuta/pacientes/${f.value}/bonos`)},Fe=()=>{const o=d.value?.telefono;if(!o){alert("Este paciente no tiene tel√©fono registrado");return}const t=o.replace(/\D/g,""),i=encodeURIComponent(`Hola ${U.value}, ¬øc√≥mo est√°s?`),c=`https://wa.me/${t}?text=${i}`;window.open(c,"_blank")},se=()=>{d.value&&(ne.value={id:d.value.id,nombre:U.value,email:d.value.email,telefono:d.value.telefono,frecuencia:d.value.frecuencia||"semanal",area_acompanamiento:d.value.area_de_acompanamiento},ae.value=!0)},Me=()=>{ae.value=!1,ne.value=null},qe=()=>{X()},ge=o=>{re.value=o,le.value=!0},Ie=()=>{le.value=!1,re.value=null},Ve=async o=>{try{const{data:t,error:i}=await S.rpc("confirmar_cita_y_descontar_bono",{p_cita_id:o});if(i)throw i;if(!t.success){console.error("Error en la confirmaci√≥n:",t.error),alert(t.error||"Error al confirmar la cita");return}let c=`Cita confirmada con ${t.paciente_nombre||"paciente"}`;t.bono_id&&(c+=`
Sesiones restantes en bono: ${t.sesiones_restantes}`,t.bono_agotado?c+=`
‚ö†Ô∏è BONO AGOTADO`:t.sesiones_restantes<=2&&(c+=`
‚ö†Ô∏è Pocas sesiones restantes`)),alert(c),await X()}catch(t){console.error("Error al confirmar cita:",t),alert("Error al confirmar la cita: "+t.message)}},Re=()=>{alert("Funci√≥n de editar en desarrollo")};return We(()=>{X()}),he(()=>C.params.id,()=>{C.params.id&&X()}),(o,t)=>{const i=Ue,c=gt,P=Qe,_=Je;return r(),l("div",bt,[e("button",{onClick:t[0]||(t[0]=a=>o.$router.push("/terapeuta/pacientes")),class:"mb-6 flex items-center gap-2 text-cafe hover:text-purple-600 transition-colors"},[...t[7]||(t[7]=[e("span",null,"‚Üê",-1),e("span",null,"Volver a lista de pacientes",-1)])]),s(j)?(r(),l("div",vt,[...t[8]||(t[8]=[e("div",{class:"animate-spin w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"},null,-1),e("p",{class:"text-cafe/60"},"Cargando informaci√≥n del paciente...",-1)])])):s(A)?(r(),l("div",_t,[v(i,null,{default:h(()=>[t[9]||(t[9]=e("span",{class:"text-6xl mb-4 block"},"‚ùå",-1)),t[10]||(t[10]=e("h3",{class:"text-xl font-serif font-semibold text-cafe mb-2"}," No se pudo cargar la informaci√≥n ",-1)),e("p",yt,n(s(A)),1),e("button",{onClick:t[1]||(t[1]=a=>o.$router.push("/terapeuta/pacientes")),class:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors"}," Volver a la lista ")]),_:1})])):s(d)?(r(),l("div",ht,[v(i,{class:"mb-6"},{default:h(()=>[e("div",wt,[e("div",kt,[e("div",{class:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0",style:_e({backgroundColor:s(ze)})},n(s(Ae)),5),e("div",null,[e("h1",Ct,n(s(U)),1),e("div",Dt,[e("span",{class:w(["px-3 py-1 text-sm font-medium rounded-full",s(je)])},n(s(Te)),3),e("span",Pt,[t[11]||(t[11]=e("span",null,"üìß",-1)),e("span",null,n(s(d).email),1)])]),e("div",St,[s(d).telefono?(r(),l("div",$t,[t[12]||(t[12]=e("span",null,"üì±",-1)),e("span",null,n(s(d).telefono),1)])):g("",!0),s(d).area_de_acompanamiento?(r(),l("div",Et,[t[14]||(t[14]=e("span",null,"üéØ",-1)),e("span",null,[t[13]||(t[13]=e("strong",null,"√Årea:",-1)),k(" "+n(s(d).area_de_acompanamiento),1)])])):g("",!0),s(d).tipo_bono?(r(),l("div",At,[t[16]||(t[16]=e("span",null,"üé´",-1)),e("span",null,[t[15]||(t[15]=e("strong",null,"Tipo de Bono:",-1)),k(" "+n(s(ce)),1)])])):g("",!0)])])]),e("div",{class:"flex flex-wrap gap-2"},[e("button",{onClick:me,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2"},[...t[17]||(t[17]=[e("span",null,"üé´",-1),e("span",null,"Gestionar Bonos",-1)])]),e("button",{onClick:Fe,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2"},[...t[18]||(t[18]=[e("span",null,"üí¨",-1),e("span",null,"WhatsApp",-1)])]),e("button",{onClick:se,class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-sm flex items-center gap-2"},[...t[19]||(t[19]=[e("span",null,"üìÖ",-1),e("span",null,"Agendar sesi√≥n",-1)])]),e("button",{onClick:Re,class:"px-4 py-2 bg-white border border-purple-600/30 text-purple-600 rounded-lg hover:bg-purple-600/5 transition-colors text-sm flex items-center gap-2"},[...t[20]||(t[20]=[e("span",null,"‚úèÔ∏è",-1),e("span",null,"Editar",-1)])])])])]),_:1}),e("div",zt,[v(i,null,{default:h(()=>[t[25]||(t[25]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üìä"),k(" Resumen ")],-1)),e("div",Tt,[e("div",jt,[t[21]||(t[21]=e("span",{class:"text-sm text-cafe/70"},"Total sesiones",-1)),e("span",Nt,n(s(F).total),1)]),e("div",Bt,[t[22]||(t[22]=e("span",{class:"text-sm text-cafe/70"},"Completadas",-1)),e("span",Ft,n(s(F).completadas),1)]),e("div",Mt,[t[23]||(t[23]=e("span",{class:"text-sm text-cafe/70"},"Pendientes",-1)),e("span",qt,n(s(F).pendientes),1)]),e("div",It,[t[24]||(t[24]=e("span",{class:"text-sm text-cafe/70"},"Pr√≥ximas",-1)),e("span",Vt,n(s(F).proximas),1)])])]),_:1}),v(i,null,{default:h(()=>[t[35]||(t[35]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üé´"),k(" Bono Contratado ")],-1)),s(u)?(r(),l("div",Rt,[e("div",Ut,[t[26]||(t[26]=e("div",{class:"text-xs text-purple-700 font-medium mb-1"},"Tipo de Bono",-1)),e("div",Lt,n(s(ce)),1)]),e("div",Gt,[e("div",Ot,n(s(u).sesiones_disponibles),1),e("div",Ht," de "+n(s(u).sesiones_totales)+" sesiones disponibles ",1)]),e("div",Kt,[e("div",Yt,[t[27]||(t[27]=e("span",{class:"text-cafe/70"},"Progreso",-1)),e("span",Wt,n(s(u).porcentaje_uso)+"%",1)]),e("div",Qt,[e("div",{class:"h-2.5 rounded-full bg-gradient-to-r from-purple-600 to-rosa transition-all",style:_e({width:`${s(u).porcentaje_uso}%`})},null,4)])]),e("div",Jt,[e("div",Xt,[t[28]||(t[28]=e("span",{class:"text-cafe/70"},"Sesiones usadas:",-1)),e("span",Zt,n(s(u).sesiones_usadas),1)]),e("div",es,[t[29]||(t[29]=e("span",{class:"text-cafe/70"},"Monto total:",-1)),e("span",ts,n(te(s(u).monto_total||s(u).precio)),1)]),e("div",ss,[t[30]||(t[30]=e("span",{class:"text-cafe/70"},"Precio por sesi√≥n:",-1)),e("span",os,n(te(s(u).precio_por_sesion||(s(u).monto_total||s(u).precio)/s(u).sesiones_totales)),1)]),e("div",as,[t[31]||(t[31]=e("span",{class:"text-cafe/70"},"Estado:",-1)),e("span",{class:w(["font-medium capitalize",{"text-green-600":s(u).estado==="activo","text-yellow-600":s(u).estado==="pendiente","text-gray-600":s(u).estado==="vencido"}])},n(s(u).estado),3)])])])):(r(),l("div",ns,[t[33]||(t[33]=e("span",{class:"text-5xl mb-3 block opacity-40"},"üé´",-1)),t[34]||(t[34]=e("p",{class:"text-sm text-cafe/50 mb-2"},"No hay bono activo",-1)),e("p",ls,[t[32]||(t[32]=k(" Tipo de bono del paciente: ",-1)),e("strong",null,n(s(ce)||"No definido"),1)]),e("button",{onClick:me,class:"mt-2 text-sm text-purple-600 hover:text-cafe transition-colors font-medium"}," Gestionar bonos ‚Üí ")]))]),_:1}),v(i,null,{default:h(()=>[t[44]||(t[44]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üìã"),k(" Datos del Proceso ")],-1)),e("div",rs,[e("div",is,[t[36]||(t[36]=e("div",{class:"text-xs text-cafe/60 mb-1"},"Primera sesi√≥n",-1)),e("div",ds,n(M(s($e))||"Sin registro"),1)]),e("div",cs,[t[37]||(t[37]=e("div",{class:"text-xs text-cafe/60 mb-1"},"√öltima sesi√≥n",-1)),e("div",ps,n(M(s(Ee))||"Sin registro"),1)]),s(D)?(r(),l("div",us,[t[39]||(t[39]=e("div",{class:"text-xs font-medium text-purple-600 mb-2 flex items-center gap-1"},[e("span",null,"üìÖ"),e("span",null,"Pr√≥xima sesi√≥n agendada")],-1)),e("div",xs,n(Ne(s(D).fecha_cita,s(D).hora_inicio)),1),e("div",fs,[e("span",ms,n(L(s(D).modalidad))+" "+n(s(D).modalidad),1),e("span",{class:w(["text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full capitalize font-medium",{"text-green-600 border-green-300":s(D).estado==="confirmada","text-yellow-600 border-yellow-300":s(D).estado==="pendiente","text-blue-600 border-blue-300":s(D).estado==="programada"}])},n(s(D).estado),3)]),s(D).notas?(r(),l("div",gs,[t[38]||(t[38]=e("div",{class:"text-xs text-cafe/70 mb-1"},"Notas:",-1)),e("div",bs,n(s(D).notas),1)])):g("",!0)])):(r(),l("div",vs,[e("div",{class:"text-center"},[t[40]||(t[40]=e("span",{class:"text-3xl mb-2 block"},"‚è∞",-1)),t[41]||(t[41]=e("div",{class:"text-sm font-medium text-yellow-800 mb-1"},"No hay sesi√≥n agendada",-1)),t[42]||(t[42]=e("div",{class:"text-xs text-yellow-700"},"Recuerda agendar la pr√≥xima sesi√≥n",-1)),e("button",{onClick:se,class:"mt-3 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-xs font-medium"}," Agendar ahora ")])])),e("div",_s,[t[43]||(t[43]=e("div",{class:"text-xs text-cafe/60 mb-1"},"En proceso desde",-1)),e("div",ys,n(Be(s(d).created_at)),1)])])]),_:1})]),e("div",hs,[v(i,null,{default:h(()=>[e("div",ws,[t[45]||(t[45]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2"},[e("span",{class:"text-2xl"},"üìä"),k(" Sesiones ")],-1)),Y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>W(Q)?Q.value=a:null),class:"px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[(r(!0),l(z,null,T(s(xe),a=>(r(),l("option",{key:a,value:a},n(a),9,ks))),128))],512),[[ye,s(Q)]])]),e("div",Cs,[e("div",Ds,[e("div",Ps,n(s(Z).total),1),t[46]||(t[46]=e("div",{class:"text-xs text-cafe/70"},"Total",-1))]),e("div",Ss,[e("div",$s,n(s(Z).canceladas),1),t[47]||(t[47]=e("div",{class:"text-xs text-cafe/70"},"Cancelaciones",-1))]),e("div",Es,[e("div",As,n(s(Z).programadas),1),t[48]||(t[48]=e("div",{class:"text-xs text-cafe/70"},"Programadas",-1))]),e("div",zs,[e("div",Ts,n(s(Z).realizadas),1),t[49]||(t[49]=e("div",{class:"text-xs text-cafe/70"},"Realizadas",-1))])])]),_:1}),v(i,null,{default:h(()=>[e("div",js,[t[50]||(t[50]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2"},[e("span",{class:"text-2xl"},"üí≥"),k(" Deuda ")],-1)),Y(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>W(J)?J.value=a:null),class:"px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[(r(!0),l(z,null,T(s(xe),a=>(r(),l("option",{key:a,value:a},n(a),9,Ns))),128))],512),[[ye,s(J)]])]),e("div",{class:w(["p-6 rounded-xl text-center",s(ee).haDeuda?"bg-gradient-to-br from-red-50 to-orange-50 border-2 border-red-200":"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200"])},[s(ee).haDeuda?(r(),l("div",Bs,[e("div",Fs,n(te(s(ee).totalPendiente)),1),t[51]||(t[51]=e("div",{class:"text-sm text-red-700"},"Pendiente de cobro",-1)),e("div",Ms,n(s(ee).cantidadPendientes)+" sesi√≥n(es) sin cobrar",1)])):(r(),l("div",qs,[...t[52]||(t[52]=[e("div",{class:"text-4xl mb-2"},"‚úÖ",-1),e("div",{class:"text-lg font-semibold text-green-700"},"Sin deuda",-1),e("div",{class:"text-sm text-green-600"},"Todos los pagos al d√≠a",-1)])]))],2)]),_:1})]),v(i,{class:"mb-6"},{default:h(()=>[e("div",Is,[t[55]||(t[55]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2"},[e("span",{class:"text-2xl"},"üìã"),k(" Historial de Sesiones ")],-1)),e("div",Vs,[e("div",Rs,[t[53]||(t[53]=e("label",{class:"text-sm text-cafe/70"},"Desde:",-1)),Y(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>W(N)?N.value=a:null),type:"date",class:"px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500"},null,512),[[ue,s(N)]])]),e("div",Us,[t[54]||(t[54]=e("label",{class:"text-sm text-cafe/70"},"Hasta:",-1)),Y(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>W(B)?B.value=a:null),type:"date",class:"px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500"},null,512),[[ue,s(B)]])]),s(N)||s(B)?(r(),l("button",{key:0,onClick:t[6]||(t[6]=a=>{N.value="",B.value=""}),class:"px-3 py-1.5 text-sm text-purple-600 hover:text-purple-800 transition-colors"}," Limpiar filtros ")):g("",!0)])]),s(de).length>0?(r(),l("div",Ls,[e("table",Gs,[t[56]||(t[56]=e("thead",null,[e("tr",{class:"bg-gradient-to-r from-purple-50 to-rosa/20 text-cafe"},[e("th",{class:"px-4 py-3 text-left font-semibold rounded-tl-lg"},"#"),e("th",{class:"px-4 py-3 text-left font-semibold"},"Fecha"),e("th",{class:"px-4 py-3 text-left font-semibold"},"Modalidad"),e("th",{class:"px-4 py-3 text-left font-semibold"},"Estado"),e("th",{class:"px-4 py-3 text-right font-semibold"},"Precio"),e("th",{class:"px-4 py-3 text-left font-semibold rounded-tr-lg"},"Pago")])],-1)),e("tbody",null,[(r(!0),l(z,null,T(s(de),(a,G)=>(r(),l("tr",{key:a.id,class:"border-b border-gray-100 hover:bg-rosa/10 transition-colors"},[e("td",Os,n(s(de).length-G),1),e("td",Hs,[e("div",Ks,n(M(a.fecha_cita)),1),e("div",Ys,n(a.hora_inicio)+" - "+n(a.hora_fin),1)]),e("td",Ws,[e("span",{class:w(["inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full",K(a.modalidad)])},n(L(a.modalidad))+" "+n(a.modalidad),3)]),e("td",Qs,[e("span",{class:w(["px-2 py-1 text-xs rounded-full capitalize",pe(a.estado)])},n(a.estado),3)]),e("td",Js,n(te(a.precio_sesion||0)),1),e("td",Xs,[a.pagado?(r(),l("span",Zs," ‚úì Pagado ")):a.estado==="realizada"?(r(),l("span",eo," ‚è≥ Pendiente ")):(r(),l("span",to," - "))])]))),128))])])])):(r(),l("div",so,[...t[57]||(t[57]=[e("span",{class:"text-5xl mb-3 block opacity-40"},"üìã",-1),e("p",{class:"text-cafe/60"},"No hay sesiones en el per√≠odo seleccionado",-1)])]))]),_:1}),e("div",oo,[e("div",ao,[e("nav",no,[(r(!0),l(z,null,T(s(ke),a=>(r(),l("button",{key:a.id,onClick:G=>R.value=a.id,class:w(["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors",s(R)===a.id?"border-purple-600 text-purple-600":"border-transparent text-cafe/60 hover:text-cafe hover:border-gray-300"])},[e("span",ro,n(a.icono),1),e("span",null,n(a.nombre),1),a.badge?(r(),l("span",io,n(a.badge),1)):g("",!0)],10,lo))),128))])])]),e("div",co,[s(R)==="proximas"?(r(),l("div",po,[v(i,null,{default:h(()=>[e("div",{class:"flex items-center justify-between mb-4"},[t[58]||(t[58]=e("h3",{class:"text-lg font-serif font-semibold text-cafe"},"Pr√≥ximas Sesiones Agendadas",-1)),e("button",{onClick:se,class:"text-sm text-purple-600 hover:text-cafe transition-colors"}," + Nueva sesi√≥n ")]),s(O).length>0?(r(),l("div",uo,[(r(!0),l(z,null,T(s(O),a=>(r(),l("div",{key:a.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[e("div",xo,[e("div",fo,[e("div",mo,[e("span",go,n(M(a.fecha_cita)),1),e("span",bo,n(a.hora_inicio)+" - "+n(a.hora_fin),1)]),e("div",vo,[e("span",{class:w(["px-2 py-0.5 text-xs rounded-full",K(a.modalidad)])},n(L(a.modalidad))+" "+n(a.modalidad),3),e("span",{class:w(["px-2 py-0.5 text-xs rounded-full capitalize",pe(a.estado)])},n(a.estado),3)]),a.observaciones?(r(),l("p",_o,n(a.observaciones),1)):g("",!0)]),e("button",{onClick:G=>ge(a.id),class:"px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors"}," Ver detalles ",8,yo)])]))),128))])):(r(),l("div",ho,[t[59]||(t[59]=e("span",{class:"text-6xl mb-3 block opacity-40"},"üìÖ",-1)),t[60]||(t[60]=e("p",{class:"text-cafe/60 mb-4"},"No hay sesiones pr√≥ximas agendadas",-1)),e("button",{onClick:se,class:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors"}," Agendar primera sesi√≥n ")]))]),_:1})])):g("",!0),s(R)==="completadas"?(r(),l("div",wo,[v(i,null,{default:h(()=>[t[64]||(t[64]=e("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Historial de Sesiones Completadas",-1)),s(H).length>0?(r(),l("div",ko,[(r(!0),l(z,null,T(s(H),a=>(r(),l("div",{key:a.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[e("div",Co,[e("div",Do,[e("div",Po,[e("span",So,n(M(a.fecha_cita)),1),e("span",$o,n(a.hora_inicio)+" - "+n(a.hora_fin),1),t[61]||(t[61]=e("span",{class:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700"}," ‚úì Realizada ",-1))]),e("div",Eo,[e("span",{class:w(["px-2 py-0.5 text-xs rounded-full",K(a.modalidad)])},n(L(a.modalidad))+" "+n(a.modalidad),3)]),a.notas_terapeuta?(r(),l("p",Ao,[t[62]||(t[62]=e("strong",{class:"text-cafe"},"Notas:",-1)),k(" "+n(a.notas_terapeuta),1)])):a.observaciones?(r(),l("p",zo,n(a.observaciones),1)):g("",!0)])])]))),128))])):(r(),l("div",To,[...t[63]||(t[63]=[e("span",{class:"text-6xl mb-3 block opacity-40"},"üìù",-1),e("p",{class:"text-cafe/60"},"A√∫n no hay sesiones completadas",-1)])]))]),_:1})])):g("",!0),s(R)==="pendientes"?(r(),l("div",jo,[v(i,null,{default:h(()=>[t[68]||(t[68]=e("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Sesiones Pendientes de Confirmaci√≥n",-1)),s(ie).length>0?(r(),l("div",No,[(r(!0),l(z,null,T(s(ie),a=>(r(),l("div",{key:a.id,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[e("div",Bo,[e("div",Fo,[e("div",Mo,[t[65]||(t[65]=e("span",{class:"text-lg"},"‚è≥",-1)),e("span",qo,n(M(a.fecha_cita)),1),e("span",Io,n(a.hora_inicio)+" - "+n(a.hora_fin),1)]),e("div",Vo,[e("span",{class:w(["px-2 py-0.5 text-xs rounded-full",K(a.modalidad)])},n(L(a.modalidad))+" "+n(a.modalidad),3),t[66]||(t[66]=e("span",{class:"px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700"}," Pendiente de confirmar ",-1))]),a.observaciones?(r(),l("p",Ro,n(a.observaciones),1)):g("",!0)]),e("div",Uo,[e("button",{onClick:G=>Ve(a.id),class:"px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," ‚úì Confirmar ",8,Lo),e("button",{onClick:G=>ge(a.id),class:"px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors"}," Ver ",8,Go)])])]))),128))])):(r(),l("div",Oo,[...t[67]||(t[67]=[e("span",{class:"text-6xl mb-3 block opacity-40"},"‚úÖ",-1),e("p",{class:"text-cafe/60"},"No hay sesiones pendientes de confirmaci√≥n",-1)])]))]),_:1})])):g("",!0),s(R)==="anteriores"?(r(),l("div",Ho,[v(i,null,{default:h(()=>[t[70]||(t[70]=e("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"}," Historial Completo de Sesiones ",-1)),s(fe).length>0?(r(),l("div",Ko,[(r(!0),l(z,null,T(s(fe),a=>(r(),l("div",{key:a.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[e("div",Yo,[e("div",Wo,[e("div",Qo,[e("span",Jo,n(M(a.fecha_cita)),1),e("span",Xo,n(a.hora_inicio)+" - "+n(a.hora_fin),1)]),e("div",Zo,[e("span",{class:w(["px-2 py-0.5 text-xs rounded-full",K(a.modalidad)])},n(L(a.modalidad))+" "+n(a.modalidad),3),e("span",{class:w(["px-2 py-0.5 text-xs rounded-full capitalize",pe(a.estado)])},n(a.estado),3)])])])]))),128))])):(r(),l("div",ea,[...t[69]||(t[69]=[e("span",{class:"text-6xl mb-3 block opacity-40"},"üìö",-1),e("p",{class:"text-cafe/60"},"No hay sesiones registradas",-1)])]))]),_:1})])):g("",!0)]),e("div",ta,[v(i,null,{default:h(()=>[t[71]||(t[71]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üìù"),k(" Notas Cl√≠nicas Privadas ")],-1)),v(c,{"paciente-id":s(f),contenido:s(I),"ultima-actualizacion":s(b)||void 0,onGuardar:Se},null,8,["paciente-id","contenido","ultima-actualizacion"])]),_:1})])])):g("",!0),v(P,{mostrar:s(ae),"paciente-preseleccionado":s(ne),onCerrar:Me,onCitaCreada:qe},null,8,["mostrar","paciente-preseleccionado"]),v(_,{"is-open":s(le),"cita-id":s(re),onClose:Ie},null,8,["is-open","cita-id"])])}}}),Aa=we(sa,[["__scopeId","data-v-626e6619"]]);export{Aa as default};
