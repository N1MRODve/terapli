import{_ as Ee}from"./DashboardCard-Bz37sU-g.js";import{r as f,I as le,c as l,o as r,a as e,h as g,d as E,l as o,t as a,k as Ae,v as De,E as oe,j as ae,m as Pe,N as je,e as Ne,p as Te,B as ze,x as m,g as Be,b as v,w as k,F as R,y as L,ai as Me,L as qe,z as ne,A as C}from"#entry";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Ie}from"./ModalNuevaCita-Cd6_FHUU.js";import{M as Fe}from"./ModalDetallesCita-D0zYq1YQ.js";import{u as Re}from"./useCitas-9Z4e1_ch.js";import"./CheckCircleIcon-Bi0YyG7H.js";import"./CalendarIcon-mZ3toP8Y.js";import"./TicketIcon-DRclOuRO.js";import"./MagnifyingGlassIcon-B5My0XuL.js";import"./XCircleIcon-DIGsvT-h.js";import"./UserIcon-G1mM6o1b.js";import"./ExclamationTriangleIcon-BreoAuwB.js";import"./UserGroupIcon-Byc3y-S3.js";import"./ClockIcon-CQZt9cKZ.js";import"./DocumentTextIcon-Dp_75vtG.js";import"./PhoneIcon-B4J2dtua.js";import"./CheckBadgeIcon-CuVUaEjS.js";import"./PaymentMethodSelector-DGmnaSg8.js";import"./useToast-Cq0GyJHs.js";import"./XMarkIcon-DWNj0d99.js";import"./PencilIcon-QJyqa3i7.js";import"./CalendarDaysIcon-C0vq0F4x.js";import"./ChevronDownIcon-BwiNUDLV.js";import"./PlusIcon-UqRq4KLf.js";const Le={class:"bg-white rounded-xl shadow-sm border border-[#E2E8F0]/40 p-6"},Ve={class:"flex items-center justify-between mb-4"},Ge={key:0,class:"min-h-[200px]"},Ue={key:0,class:"prose prose-sm max-w-none text-cafe/80 whitespace-pre-wrap"},Oe={key:1,class:"text-center py-8"},He={key:1},Ke=["onKeydown"],We={class:"mt-2 flex items-center justify-between text-xs text-cafe/60"},Qe={key:0},Je={class:"mt-4 flex items-center gap-3"},Xe=["disabled"],Ye={key:0},Ze={key:1},et=["disabled"],tt={key:2,class:"mt-4 pt-4 border-t border-gray-100"},st={class:"text-xs text-cafe/50"},ot={__name:"NotasPrivadas",props:{pacienteId:{type:String,required:!0},contenido:{type:String,default:""},ultimaActualizacion:{type:String,default:null}},emits:["guardar","actualizar"],setup(j,{emit:S}){const $=j,O=S,_=f(!1),h=f(!1),x=f($.contenido),D=f($.contenido),A=f(null);le(()=>$.contenido,b=>{_.value||(x.value=b,D.value=b)});const d=()=>{_.value=!0,je(()=>{A.value?.focus()})},p=()=>{x.value=D.value,_.value=!1},w=async()=>{if(!h.value){h.value=!0;try{await O("guardar",{pacienteId:$.pacienteId,contenido:x.value}),D.value=x.value,_.value=!1;const b=event?.target;b&&(b.textContent="‚úì Guardado",setTimeout(()=>{b.textContent="üíæ Guardar cambios"},2e3))}catch(b){console.error("Error al guardar notas:",b),alert("Hubo un error al guardar las notas. Por favor, int√©ntalo de nuevo.")}finally{h.value=!1}}},N=b=>b?new Date(b).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return(b,c)=>(r(),l("div",Le,[e("div",Ve,[c[1]||(c[1]=e("h3",{class:"font-serif text-lg font-semibold text-cafe flex items-center gap-2"},[e("span",{class:"text-xl"},"üìù"),E(" Notas Cl√≠nicas Privadas ")],-1)),o(_)?g("",!0):(r(),l("button",{key:0,onClick:d,class:"px-3 py-1.5 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors"}," ‚úèÔ∏è Editar "))]),c[5]||(c[5]=e("div",{class:"mb-4 p-3 bg-rosa/20 border border-rosa rounded-lg"},[e("p",{class:"text-xs text-cafe/70 flex items-start gap-2"},[e("span",{class:"text-purple-600"},"üîí"),e("span",null," Esta informaci√≥n es estrictamente confidencial y solo visible para ti como terapeuta. Cumple con los est√°ndares de protecci√≥n de datos cl√≠nicos. ")])],-1)),o(_)?(r(),l("div",He,[Ae(e("textarea",{ref_key:"textareaRef",ref:A,"onUpdate:modelValue":c[0]||(c[0]=B=>Pe(x)?x.value=B:null),placeholder:`Anota observaciones, reflexiones o aspectos a seguir trabajando...

‚Ä¢ Progreso observado en la sesi√≥n
‚Ä¢ Temas pendientes de abordar
‚Ä¢ Estrategias que funcionan
‚Ä¢ Aspectos que requieren atenci√≥n`,class:"w-full min-h-[300px] px-4 py-3 bg-base-bg rounded-lg border border-purple-600/30 focus:border-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-300/20 transition-all text-cafe resize-y",onKeydown:[oe(ae(w,["meta"]),["enter"]),oe(ae(w,["ctrl"]),["enter"])]},null,40,Ke),[[De,o(x)]]),e("div",We,[c[4]||(c[4]=e("span",null," üí° Presiona Cmd/Ctrl + Enter para guardar r√°pidamente ",-1)),j.ultimaActualizacion?(r(),l("span",Qe," √öltima actualizaci√≥n: "+a(N(j.ultimaActualizacion)),1)):g("",!0)]),e("div",Je,[e("button",{onClick:w,disabled:o(h),class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[o(h)?(r(),l("span",Ye,"‚è≥")):(r(),l("span",Ze,"üíæ")),e("span",null,a(o(h)?"Guardando...":"Guardar cambios"),1)],8,Xe),e("button",{onClick:p,disabled:o(h),class:"px-4 py-2 bg-white border border-cafe/20 text-cafe rounded-lg hover:bg-gray-50 transition-colors"}," Cancelar ",8,et)])])):(r(),l("div",Ge,[o(x)?(r(),l("div",Ue,a(o(x)),1)):(r(),l("div",Oe,[c[2]||(c[2]=e("span",{class:"text-5xl mb-3 block opacity-40"},"üìã",-1)),c[3]||(c[3]=e("p",{class:"text-cafe/50 italic"}," A√∫n no hay notas registradas para este paciente ",-1)),e("button",{onClick:d,class:"mt-4 px-4 py-2 text-sm bg-purple-600/10 text-purple-600 rounded-lg hover:bg-purple-600/20 transition-colors"}," A√±adir primera nota ")]))])),!o(_)&&j.ultimaActualizacion?(r(),l("div",tt,[e("p",st," √öltima modificaci√≥n: "+a(N(j.ultimaActualizacion)),1)])):g("",!0)]))}},at=re(ot,[["__scopeId","data-v-b66842cb"]]),nt={class:"pb-20"},lt={key:0,class:"text-center py-12"},rt={key:1,class:"text-center py-12"},it={class:"text-cafe/60 mb-4"},dt={key:2},ct={class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6"},ut={class:"flex items-start gap-4"},pt={class:"text-3xl font-serif font-bold text-cafe mb-2"},mt={class:"flex flex-wrap items-center gap-3 mb-3"},xt={class:"text-cafe/60 text-sm flex items-center gap-1"},ft={class:"space-y-1 text-sm"},bt={key:0,class:"text-cafe/70 flex items-center gap-2"},gt={key:1,class:"text-cafe/70 flex items-center gap-2"},vt={key:2,class:"text-cafe/70 flex items-center gap-2"},_t={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},yt={class:"space-y-3"},ht={class:"flex items-center justify-between p-3 bg-base-bg rounded-lg"},wt={class:"font-bold text-cafe text-lg"},kt={class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},Ct={class:"font-bold text-green-600 text-lg"},St={class:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg"},$t={class:"font-bold text-yellow-600 text-lg"},Et={class:"flex items-center justify-between p-3 bg-blue-50 rounded-lg"},At={class:"font-bold text-blue-600 text-lg"},Dt={key:0,class:"space-y-4"},Pt={class:"p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg"},jt={class:"text-sm font-bold text-purple-900"},Nt={class:"text-center p-4 bg-gradient-to-br from-purple-600/10 to-rosa/20 rounded-xl"},Tt={class:"text-4xl font-bold text-purple-600 mb-1"},zt={class:"text-sm text-cafe/70"},Bt={class:"space-y-2"},Mt={class:"flex justify-between text-sm"},qt={class:"font-medium text-cafe"},It={class:"w-full bg-gray-200 rounded-full h-2.5"},Ft={class:"pt-3 border-t space-y-2 text-sm"},Rt={class:"flex justify-between"},Lt={class:"font-medium text-cafe"},Vt={class:"flex justify-between"},Gt={class:"font-medium text-cafe"},Ut={class:"flex justify-between"},Ot={class:"font-medium text-cafe"},Ht={class:"flex justify-between"},Kt={key:1,class:"text-center py-8"},Wt={class:"text-xs text-cafe/40 mb-4"},Qt={class:"space-y-3"},Jt={class:"p-3 bg-base-bg rounded-lg"},Xt={class:"text-sm font-medium text-cafe"},Yt={class:"p-3 bg-base-bg rounded-lg"},Zt={class:"text-sm font-medium text-cafe"},es={key:0,class:"p-4 bg-gradient-to-br from-purple-600/20 to-rosa/20 border-2 border-purple-600/40 rounded-lg"},ts={class:"text-base font-bold text-cafe mb-3"},ss={class:"flex items-center gap-2 flex-wrap"},os={class:"text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full font-medium flex items-center gap-1"},as={key:0,class:"mt-3 pt-3 border-t border-purple-600/20"},ns={class:"text-xs text-cafe"},ls={key:1,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},rs={class:"p-3 bg-base-bg rounded-lg"},is={class:"text-sm font-medium text-cafe"},ds={class:"mb-6"},cs={class:"border-b border-gray-200"},us={class:"-mb-px flex space-x-8 overflow-x-auto"},ps=["onClick"],ms={class:"mr-2"},xs={key:0,class:"ml-2 px-2 py-0.5 text-xs rounded-full bg-purple-600 text-white"},fs={class:"space-y-6"},bs={key:0},gs={key:0,class:"space-y-3"},vs={class:"flex items-start justify-between gap-4"},_s={class:"flex-1"},ys={class:"flex items-center gap-2 mb-2"},hs={class:"text-lg font-semibold text-cafe"},ws={class:"text-base font-medium text-purple-600"},ks={class:"flex flex-wrap items-center gap-2 mb-2"},Cs={key:0,class:"text-sm text-cafe/60 mt-2"},Ss=["onClick"],$s={key:1,class:"text-center py-12"},Es={key:1},As={key:0,class:"space-y-3"},Ds={class:"flex items-start justify-between gap-4"},Ps={class:"flex-1"},js={class:"flex items-center gap-2 mb-2"},Ns={class:"text-base font-semibold text-cafe"},Ts={class:"text-sm text-cafe/60"},zs={class:"flex items-center gap-2 mb-2"},Bs={key:0,class:"text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100"},Ms={key:1,class:"text-sm text-cafe/60 mt-2"},qs={key:1,class:"text-center py-12"},Is={key:2},Fs={key:0,class:"space-y-3"},Rs={class:"flex items-start justify-between gap-4"},Ls={class:"flex-1"},Vs={class:"flex items-center gap-2 mb-2"},Gs={class:"text-base font-semibold text-cafe"},Us={class:"text-base font-medium text-purple-600"},Os={class:"flex items-center gap-2 mb-2"},Hs={key:0,class:"text-sm text-cafe/60 mt-2"},Ks={class:"flex gap-2"},Ws=["onClick"],Qs=["onClick"],Js={key:1,class:"text-center py-12"},Xs={key:3},Ys={key:0,class:"space-y-3"},Zs={class:"flex items-start justify-between gap-4"},eo={class:"flex-1"},to={class:"flex items-center gap-2 mb-2"},so={class:"text-base font-semibold text-cafe"},oo={class:"text-sm text-cafe/60"},ao={class:"flex flex-wrap items-center gap-2"},no={key:1,class:"text-center py-12"},lo={class:"mt-6"},ro=Ne({__name:"[id]",setup(j){const S=Te(),$=ze(),{getCitas:O}=Re(),_=m(()=>Me()),h=m(()=>qe()),x=m(()=>_.value?_.value.params.id:""),D=f(!0),A=f(null),d=f(null),p=f(null),w=f([]),N=f(""),b=f(null),c=f("proximas"),B=f(!1),H=f(null),K=f(!1),W=f(null),ie=m(()=>[{id:"proximas",nombre:"Pr√≥ximas Sesiones",icono:"üìÖ",badge:P.value.proximas||null},{id:"completadas",nombre:"Completadas",icono:"‚úÖ",badge:P.value.completadas||null},{id:"pendientes",nombre:"Pendientes",icono:"‚è≥",badge:P.value.pendientes||null},{id:"anteriores",nombre:"Historial",icono:"üìö",badge:null}]),V=async()=>{D.value=!0,A.value=null;try{if(!$.value){A.value="Usuario no autenticado";return}const{data:s,error:t}=await S.from("pacientes").select("*").eq("id",x.value).single();if(t)throw t;const i=s.nombre||s.email||"Sin nombre";d.value={...s,nombre_completo:i,email:s.email||"",telefono:s.telefono||""};const u=await O();w.value=u.filter(F=>F.paciente_id===x.value),await de(),await ce()}catch(s){console.error("Error al cargar paciente:",s),A.value=s.message||"Error desconocido"}finally{D.value=!1}},de=async()=>{try{const{data:s,error:t}=await S.from("bonos").select("*").eq("paciente_id",x.value).eq("estado","activo").maybeSingle();if(t){console.warn("[Bonos] Error en consulta:",t.message);return}if(s){const i=s.sesiones_usadas||0,u=s.sesiones_totales||0,F=u-i;p.value={...s,sesiones_disponibles:F,porcentaje_uso:u>0?Math.round(i/u*100):0}}}catch(s){console.warn("[Bonos] Error inesperado:",s)}},ce=async()=>{try{const{data:s}=await S.from("notas_terapeuticas").select("contenido, updated_at").eq("paciente_id",x.value).eq("terapeuta_id",$.value?.id).order("updated_at",{ascending:!1}).limit(1).maybeSingle();s&&(N.value=s.contenido||"",b.value=s.updated_at)}catch(s){console.error("Error al cargar notas:",s)}},ue=async({pacienteId:s,contenido:t})=>{try{const{data:i}=await S.from("notas_terapeuticas").select("id").eq("paciente_id",s).eq("terapeuta_id",$.value?.id).maybeSingle();i?await S.from("notas_terapeuticas").update({contenido:t,updated_at:new Date().toISOString()}).eq("id",i.id):await S.from("notas_terapeuticas").insert({paciente_id:s,terapeuta_id:$.value?.id,contenido:t}),N.value=t,b.value=new Date().toISOString()}catch(i){throw console.error("Error al guardar notas:",i),i}},M=m(()=>{const s=new Date;return w.value.filter(t=>["pendiente","confirmada"].includes(t.estado)&&new Date(t.fecha_cita)>=s).sort((t,i)=>new Date(t.fecha_cita).getTime()-new Date(i.fecha_cita).getTime())}),q=m(()=>w.value.filter(s=>s.estado==="realizada").sort((s,t)=>new Date(t.fecha_cita).getTime()-new Date(s.fecha_cita).getTime())),Q=m(()=>w.value.filter(s=>s.estado==="pendiente").sort((s,t)=>new Date(s.fecha_cita).getTime()-new Date(t.fecha_cita).getTime())),Y=m(()=>w.value.sort((s,t)=>new Date(t.fecha_cita).getTime()-new Date(s.fecha_cita).getTime())),P=m(()=>({total:w.value.length,completadas:q.value.length,pendientes:Q.value.length,proximas:M.value.length})),pe=m(()=>{const s=q.value;return s.length>0?s[s.length-1].fecha_cita:null}),me=m(()=>{const s=q.value;return s.length>0?s[0].fecha_cita:null}),y=m(()=>M.value.length>0?M.value[0]:null),T=m(()=>d.value?.nombre_completo||"Sin nombre"),xe=m(()=>{if(!T.value)return"?";const s=T.value.split(" ");return s.length>=2&&s[0]&&s[1]?`${s[0][0]}${s[1][0]}`.toUpperCase():T.value.substring(0,2).toUpperCase()}),fe=m(()=>{const s=["#D8AFA0","#C89B8A","#B7C6B0","#A8C5B5","#D4A5A5","#C4B5A0"],t=x.value.charCodeAt(0)%s.length;return s[t]}),be=m(()=>d.value?d.value.activo?d.value.metadata?.en_pausa?"En pausa":"En proceso":"Finalizado":""),ge=m(()=>d.value?d.value.activo?d.value.metadata?.en_pausa?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700":"bg-gray-100 text-gray-600":""),J=m(()=>d.value?.tipo_bono?{a_demanda:"A Demanda (1 sesi√≥n)",quincenal:"Quincenal (2 sesiones/mes)",semanal:"Semanal (4 sesiones/mes)"}[d.value.tipo_bono]||d.value.tipo_bono:""),z=s=>{if(!s)return"";try{return new Date(s+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}catch{return s}},ve=(s,t)=>{if(!s)return"";try{return new Date(s+"T"+(t||"00:00:00")).toLocaleString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return s}},Z=s=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(s||0),_e=s=>{if(!s)return"";const t=new Date(s),u=Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24));return u<30?`${u} d√≠as`:u<365?`${Math.floor(u/30)} meses`:`${Math.floor(u/365)} a√±os`},I=s=>({presencial:"üè•",online:"üíª",telefonica:"üìû"})[s]||"üìã",G=s=>({presencial:"bg-green-100 text-green-700",online:"bg-purple-600/20 text-purple-600",telefonica:"bg-blue-100 text-blue-700"})[s]||"bg-gray-100 text-gray-700",ee=s=>({pendiente:"bg-yellow-100 text-yellow-700",confirmada:"bg-green-100 text-green-700",realizada:"bg-blue-100 text-blue-700",cancelada:"bg-red-100 text-red-700"})[s]||"bg-gray-100 text-gray-700",te=()=>{h.value&&h.value.push(`/terapeuta/pacientes/${x.value}/bonos`)},ye=()=>{const s=d.value?.telefono;if(!s){alert("Este paciente no tiene tel√©fono registrado");return}const t=s.replace(/\D/g,""),i=encodeURIComponent(`Hola ${T.value}, ¬øc√≥mo est√°s?`),u=`https://wa.me/${t}?text=${i}`;window.open(u,"_blank")},U=()=>{d.value&&(H.value={id:d.value.id,nombre:T.value,email:d.value.email,telefono:d.value.telefono,frecuencia:d.value.frecuencia||"semanal",area_acompanamiento:d.value.area_de_acompanamiento},B.value=!0)},he=()=>{B.value=!1,H.value=null},we=()=>{V()},se=s=>{W.value=s,K.value=!0},ke=()=>{K.value=!1,W.value=null},Ce=async s=>{try{const{data:t,error:i}=await S.rpc("confirmar_cita_y_descontar_bono",{p_cita_id:s});if(i)throw i;if(!t.success){console.error("Error en la confirmaci√≥n:",t.error),alert(t.error||"Error al confirmar la cita");return}let u=`Cita confirmada con ${t.paciente_nombre||"paciente"}`;t.bono_id&&(u+=`
Sesiones restantes en bono: ${t.sesiones_restantes}`,t.bono_agotado?u+=`
‚ö†Ô∏è BONO AGOTADO`:t.sesiones_restantes<=2&&(u+=`
‚ö†Ô∏è Pocas sesiones restantes`)),alert(u),await V()}catch(t){console.error("Error al confirmar cita:",t),alert("Error al confirmar la cita: "+t.message)}},Se=()=>{alert("Funci√≥n de editar en desarrollo")};return Be(()=>{V()}),le(()=>_.value?.params.id,()=>{_.value?.params.id&&V()}),(s,t)=>{const i=Ee,u=at,F=Ie,$e=Fe;return r(),l("div",nt,[e("button",{onClick:t[0]||(t[0]=n=>s.$router.push("/terapeuta/pacientes")),class:"mb-6 flex items-center gap-2 text-cafe hover:text-purple-600 transition-colors"},[...t[2]||(t[2]=[e("span",null,"‚Üê",-1),e("span",null,"Volver a lista de pacientes",-1)])]),o(D)?(r(),l("div",lt,[...t[3]||(t[3]=[e("div",{class:"animate-spin w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"},null,-1),e("p",{class:"text-cafe/60"},"Cargando informaci√≥n del paciente...",-1)])])):o(A)?(r(),l("div",rt,[v(i,null,{default:k(()=>[t[4]||(t[4]=e("span",{class:"text-6xl mb-4 block"},"‚ùå",-1)),t[5]||(t[5]=e("h3",{class:"text-xl font-serif font-semibold text-cafe mb-2"}," No se pudo cargar la informaci√≥n ",-1)),e("p",it,a(o(A)),1),e("button",{onClick:t[1]||(t[1]=n=>s.$router.push("/terapeuta/pacientes")),class:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors"}," Volver a la lista ")]),_:1})])):o(d)?(r(),l("div",dt,[v(i,{class:"mb-6"},{default:k(()=>[e("div",ct,[e("div",ut,[e("div",{class:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0",style:ne({backgroundColor:o(fe)})},a(o(xe)),5),e("div",null,[e("h1",pt,a(o(T)),1),e("div",mt,[e("span",{class:C(["px-3 py-1 text-sm font-medium rounded-full",o(ge)])},a(o(be)),3),e("span",xt,[t[6]||(t[6]=e("span",null,"üìß",-1)),e("span",null,a(o(d).email),1)])]),e("div",ft,[o(d).telefono?(r(),l("div",bt,[t[7]||(t[7]=e("span",null,"üì±",-1)),e("span",null,a(o(d).telefono),1)])):g("",!0),o(d).area_de_acompanamiento?(r(),l("div",gt,[t[9]||(t[9]=e("span",null,"üéØ",-1)),e("span",null,[t[8]||(t[8]=e("strong",null,"√Årea:",-1)),E(" "+a(o(d).area_de_acompanamiento),1)])])):g("",!0),o(d).tipo_bono?(r(),l("div",vt,[t[11]||(t[11]=e("span",null,"üé´",-1)),e("span",null,[t[10]||(t[10]=e("strong",null,"Tipo de Bono:",-1)),E(" "+a(o(J)),1)])])):g("",!0)])])]),e("div",{class:"flex flex-wrap gap-2"},[e("button",{onClick:te,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2"},[...t[12]||(t[12]=[e("span",null,"üé´",-1),e("span",null,"Gestionar Bonos",-1)])]),e("button",{onClick:ye,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2"},[...t[13]||(t[13]=[e("span",null,"üí¨",-1),e("span",null,"WhatsApp",-1)])]),e("button",{onClick:U,class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-sm flex items-center gap-2"},[...t[14]||(t[14]=[e("span",null,"üìÖ",-1),e("span",null,"Agendar sesi√≥n",-1)])]),e("button",{onClick:Se,class:"px-4 py-2 bg-white border border-purple-600/30 text-purple-600 rounded-lg hover:bg-purple-600/5 transition-colors text-sm flex items-center gap-2"},[...t[15]||(t[15]=[e("span",null,"‚úèÔ∏è",-1),e("span",null,"Editar",-1)])])])])]),_:1}),e("div",_t,[v(i,null,{default:k(()=>[t[20]||(t[20]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üìä"),E(" Resumen ")],-1)),e("div",yt,[e("div",ht,[t[16]||(t[16]=e("span",{class:"text-sm text-cafe/70"},"Total sesiones",-1)),e("span",wt,a(o(P).total),1)]),e("div",kt,[t[17]||(t[17]=e("span",{class:"text-sm text-cafe/70"},"Completadas",-1)),e("span",Ct,a(o(P).completadas),1)]),e("div",St,[t[18]||(t[18]=e("span",{class:"text-sm text-cafe/70"},"Pendientes",-1)),e("span",$t,a(o(P).pendientes),1)]),e("div",Et,[t[19]||(t[19]=e("span",{class:"text-sm text-cafe/70"},"Pr√≥ximas",-1)),e("span",At,a(o(P).proximas),1)])])]),_:1}),v(i,null,{default:k(()=>[t[30]||(t[30]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üé´"),E(" Bono Contratado ")],-1)),o(p)?(r(),l("div",Dt,[e("div",Pt,[t[21]||(t[21]=e("div",{class:"text-xs text-purple-700 font-medium mb-1"},"Tipo de Bono",-1)),e("div",jt,a(o(J)),1)]),e("div",Nt,[e("div",Tt,a(o(p).sesiones_disponibles),1),e("div",zt," de "+a(o(p).sesiones_totales)+" sesiones disponibles ",1)]),e("div",Bt,[e("div",Mt,[t[22]||(t[22]=e("span",{class:"text-cafe/70"},"Progreso",-1)),e("span",qt,a(o(p).porcentaje_uso)+"%",1)]),e("div",It,[e("div",{class:"h-2.5 rounded-full bg-gradient-to-r from-purple-600 to-rosa transition-all",style:ne({width:`${o(p).porcentaje_uso}%`})},null,4)])]),e("div",Ft,[e("div",Rt,[t[23]||(t[23]=e("span",{class:"text-cafe/70"},"Sesiones usadas:",-1)),e("span",Lt,a(o(p).sesiones_usadas),1)]),e("div",Vt,[t[24]||(t[24]=e("span",{class:"text-cafe/70"},"Monto total:",-1)),e("span",Gt,a(Z(o(p).monto_total||o(p).precio)),1)]),e("div",Ut,[t[25]||(t[25]=e("span",{class:"text-cafe/70"},"Precio por sesi√≥n:",-1)),e("span",Ot,a(Z((o(p).monto_total||o(p).precio)/o(p).sesiones_totales)),1)]),e("div",Ht,[t[26]||(t[26]=e("span",{class:"text-cafe/70"},"Estado:",-1)),e("span",{class:C(["font-medium capitalize",{"text-green-600":o(p).estado==="activo","text-yellow-600":o(p).estado==="pendiente","text-gray-600":o(p).estado==="vencido"}])},a(o(p).estado),3)])])])):(r(),l("div",Kt,[t[28]||(t[28]=e("span",{class:"text-5xl mb-3 block opacity-40"},"üé´",-1)),t[29]||(t[29]=e("p",{class:"text-sm text-cafe/50 mb-2"},"No hay bono activo",-1)),e("p",Wt,[t[27]||(t[27]=E(" Tipo de bono del paciente: ",-1)),e("strong",null,a(o(J)||"No definido"),1)]),e("button",{onClick:te,class:"mt-2 text-sm text-purple-600 hover:text-cafe transition-colors font-medium"}," Gestionar bonos ‚Üí ")]))]),_:1}),v(i,null,{default:k(()=>[t[39]||(t[39]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üìã"),E(" Datos del Proceso ")],-1)),e("div",Qt,[e("div",Jt,[t[31]||(t[31]=e("div",{class:"text-xs text-cafe/60 mb-1"},"Primera sesi√≥n",-1)),e("div",Xt,a(z(o(pe))||"Sin registro"),1)]),e("div",Yt,[t[32]||(t[32]=e("div",{class:"text-xs text-cafe/60 mb-1"},"√öltima sesi√≥n",-1)),e("div",Zt,a(z(o(me))||"Sin registro"),1)]),o(y)?(r(),l("div",es,[t[34]||(t[34]=e("div",{class:"text-xs font-medium text-purple-600 mb-2 flex items-center gap-1"},[e("span",null,"üìÖ"),e("span",null,"Pr√≥xima sesi√≥n agendada")],-1)),e("div",ts,a(ve(o(y).fecha_cita,o(y).hora_inicio)),1),e("div",ss,[e("span",os,a(I(o(y).modalidad))+" "+a(o(y).modalidad),1),e("span",{class:C(["text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full capitalize font-medium",{"text-green-600 border-green-300":o(y).estado==="confirmada","text-yellow-600 border-yellow-300":o(y).estado==="pendiente","text-blue-600 border-blue-300":o(y).estado==="programada"}])},a(o(y).estado),3)]),o(y).notas?(r(),l("div",as,[t[33]||(t[33]=e("div",{class:"text-xs text-cafe/70 mb-1"},"Notas:",-1)),e("div",ns,a(o(y).notas),1)])):g("",!0)])):(r(),l("div",ls,[e("div",{class:"text-center"},[t[35]||(t[35]=e("span",{class:"text-3xl mb-2 block"},"‚è∞",-1)),t[36]||(t[36]=e("div",{class:"text-sm font-medium text-yellow-800 mb-1"},"No hay sesi√≥n agendada",-1)),t[37]||(t[37]=e("div",{class:"text-xs text-yellow-700"},"Recuerda agendar la pr√≥xima sesi√≥n",-1)),e("button",{onClick:U,class:"mt-3 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-xs font-medium"}," Agendar ahora ")])])),e("div",rs,[t[38]||(t[38]=e("div",{class:"text-xs text-cafe/60 mb-1"},"En proceso desde",-1)),e("div",is,a(_e(o(d).created_at)),1)])])]),_:1})]),e("div",ds,[e("div",cs,[e("nav",us,[(r(!0),l(R,null,L(o(ie),n=>(r(),l("button",{key:n.id,onClick:X=>c.value=n.id,class:C(["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors",o(c)===n.id?"border-purple-600 text-purple-600":"border-transparent text-cafe/60 hover:text-cafe hover:border-gray-300"])},[e("span",ms,a(n.icono),1),e("span",null,a(n.nombre),1),n.badge?(r(),l("span",xs,a(n.badge),1)):g("",!0)],10,ps))),128))])])]),e("div",fs,[o(c)==="proximas"?(r(),l("div",bs,[v(i,null,{default:k(()=>[e("div",{class:"flex items-center justify-between mb-4"},[t[40]||(t[40]=e("h3",{class:"text-lg font-serif font-semibold text-cafe"},"Pr√≥ximas Sesiones Agendadas",-1)),e("button",{onClick:U,class:"text-sm text-purple-600 hover:text-cafe transition-colors"}," + Nueva sesi√≥n ")]),o(M).length>0?(r(),l("div",gs,[(r(!0),l(R,null,L(o(M),n=>(r(),l("div",{key:n.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[e("div",vs,[e("div",_s,[e("div",ys,[e("span",hs,a(z(n.fecha_cita)),1),e("span",ws,a(n.hora_inicio)+" - "+a(n.hora_fin),1)]),e("div",ks,[e("span",{class:C(["px-2 py-0.5 text-xs rounded-full",G(n.modalidad)])},a(I(n.modalidad))+" "+a(n.modalidad),3),e("span",{class:C(["px-2 py-0.5 text-xs rounded-full capitalize",ee(n.estado)])},a(n.estado),3)]),n.observaciones?(r(),l("p",Cs,a(n.observaciones),1)):g("",!0)]),e("button",{onClick:X=>se(n.id),class:"px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors"}," Ver detalles ",8,Ss)])]))),128))])):(r(),l("div",$s,[t[41]||(t[41]=e("span",{class:"text-6xl mb-3 block opacity-40"},"üìÖ",-1)),t[42]||(t[42]=e("p",{class:"text-cafe/60 mb-4"},"No hay sesiones pr√≥ximas agendadas",-1)),e("button",{onClick:U,class:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors"}," Agendar primera sesi√≥n ")]))]),_:1})])):g("",!0),o(c)==="completadas"?(r(),l("div",Es,[v(i,null,{default:k(()=>[t[46]||(t[46]=e("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Historial de Sesiones Completadas",-1)),o(q).length>0?(r(),l("div",As,[(r(!0),l(R,null,L(o(q),n=>(r(),l("div",{key:n.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[e("div",Ds,[e("div",Ps,[e("div",js,[e("span",Ns,a(z(n.fecha_cita)),1),e("span",Ts,a(n.hora_inicio)+" - "+a(n.hora_fin),1),t[43]||(t[43]=e("span",{class:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700"}," ‚úì Realizada ",-1))]),e("div",zs,[e("span",{class:C(["px-2 py-0.5 text-xs rounded-full",G(n.modalidad)])},a(I(n.modalidad))+" "+a(n.modalidad),3)]),n.notas_terapeuta?(r(),l("p",Bs,[t[44]||(t[44]=e("strong",{class:"text-cafe"},"Notas:",-1)),E(" "+a(n.notas_terapeuta),1)])):n.observaciones?(r(),l("p",Ms,a(n.observaciones),1)):g("",!0)])])]))),128))])):(r(),l("div",qs,[...t[45]||(t[45]=[e("span",{class:"text-6xl mb-3 block opacity-40"},"üìù",-1),e("p",{class:"text-cafe/60"},"A√∫n no hay sesiones completadas",-1)])]))]),_:1})])):g("",!0),o(c)==="pendientes"?(r(),l("div",Is,[v(i,null,{default:k(()=>[t[50]||(t[50]=e("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Sesiones Pendientes de Confirmaci√≥n",-1)),o(Q).length>0?(r(),l("div",Fs,[(r(!0),l(R,null,L(o(Q),n=>(r(),l("div",{key:n.id,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[e("div",Rs,[e("div",Ls,[e("div",Vs,[t[47]||(t[47]=e("span",{class:"text-lg"},"‚è≥",-1)),e("span",Gs,a(z(n.fecha_cita)),1),e("span",Us,a(n.hora_inicio)+" - "+a(n.hora_fin),1)]),e("div",Os,[e("span",{class:C(["px-2 py-0.5 text-xs rounded-full",G(n.modalidad)])},a(I(n.modalidad))+" "+a(n.modalidad),3),t[48]||(t[48]=e("span",{class:"px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700"}," Pendiente de confirmar ",-1))]),n.observaciones?(r(),l("p",Hs,a(n.observaciones),1)):g("",!0)]),e("div",Ks,[e("button",{onClick:X=>Ce(n.id),class:"px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," ‚úì Confirmar ",8,Ws),e("button",{onClick:X=>se(n.id),class:"px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors"}," Ver ",8,Qs)])])]))),128))])):(r(),l("div",Js,[...t[49]||(t[49]=[e("span",{class:"text-6xl mb-3 block opacity-40"},"‚úÖ",-1),e("p",{class:"text-cafe/60"},"No hay sesiones pendientes de confirmaci√≥n",-1)])]))]),_:1})])):g("",!0),o(c)==="anteriores"?(r(),l("div",Xs,[v(i,null,{default:k(()=>[t[52]||(t[52]=e("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"}," Historial Completo de Sesiones ",-1)),o(Y).length>0?(r(),l("div",Ys,[(r(!0),l(R,null,L(o(Y),n=>(r(),l("div",{key:n.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[e("div",Zs,[e("div",eo,[e("div",to,[e("span",so,a(z(n.fecha_cita)),1),e("span",oo,a(n.hora_inicio)+" - "+a(n.hora_fin),1)]),e("div",ao,[e("span",{class:C(["px-2 py-0.5 text-xs rounded-full",G(n.modalidad)])},a(I(n.modalidad))+" "+a(n.modalidad),3),e("span",{class:C(["px-2 py-0.5 text-xs rounded-full capitalize",ee(n.estado)])},a(n.estado),3)])])])]))),128))])):(r(),l("div",no,[...t[51]||(t[51]=[e("span",{class:"text-6xl mb-3 block opacity-40"},"üìö",-1),e("p",{class:"text-cafe/60"},"No hay sesiones registradas",-1)])]))]),_:1})])):g("",!0)]),e("div",lo,[v(i,null,{default:k(()=>[t[53]||(t[53]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üìù"),E(" Notas Cl√≠nicas Privadas ")],-1)),v(u,{"paciente-id":o(x),contenido:o(N),"ultima-actualizacion":o(b)||void 0,onGuardar:ue},null,8,["paciente-id","contenido","ultima-actualizacion"])]),_:1})])])):g("",!0),v(F,{mostrar:o(B),"paciente-preseleccionado":o(H),onCerrar:he,onCitaCreada:we},null,8,["mostrar","paciente-preseleccionado"]),v($e,{"is-open":o(K),"cita-id":o(W),onClose:ke},null,8,["is-open","cita-id"])])}}}),zo=re(ro,[["__scopeId","data-v-a1147d9a"]]);export{zo as default};
