import{af as h,ag as l,n as p}from"#entry";import{u as f}from"./DfvkngRd.js";import"./BbZO5sJf.js";const v=h(async(i,m)=>{let e,s;const{user:u,getUserRole:c,loadUserProfile:d}=f();if(!u.value){console.warn("[auth-role] No hay usuario autenticado, omitiendo verificaciÃ³n de rol");return}[e,s]=l(()=>d()),await e,s();const a=([e,s]=l(()=>c()),e=await e,s(),e);if(!a){console.error("[auth-role] No se pudo determinar el rol del usuario");return}console.log("[auth-role] Usuario con rol:",a,"accediendo a:",i.path);const n={psicologa:"/terapeuta",terapeuta:"/terapeuta",coordinadora:"/coordinadora",admin:"/admin",paciente:"/paciente"},t=n[a];if(!t){console.error(`[auth-role] Rol desconocido: ${a}`);return}const r=i.path;if(r.startsWith(t)||["/login","/contacto","/legal","/"].some(o=>r===o||r.startsWith(o)))return;if(Object.values(n).filter(o=>o!==t).some(o=>r.startsWith(o)))return console.log(`[auth-role] Usuario con rol '${a}' redirigido de ${r} a ${t}/dashboard`),p(`${t}/dashboard`)});export{v as default};
