import{_ as E}from"./nuxt-link-C2FRAMUz.js";import{u as j}from"./usePacientes-DxI2ZoZB.js";import{e as M,r as h,x as y,g as z,c as r,l as e,a as t,h as d,t as a,A as _,z as b,b as w,w as k,F as A,y as N,i as S,o as i,d as D}from"#entry";const V={class:"max-w-4xl mx-auto space-y-6 px-4 py-8"},H={key:0,class:"flex flex-col items-center justify-center min-h-[40vh]"},L={key:1},P={key:0,class:"bg-white rounded-xl shadow-sm border border-[#E2E8F0]/30 p-6 mb-8"},T={class:"flex items-center justify-between mb-4"},q={class:"text-xl font-serif font-medium text-[#2D3748]"},$={class:"text-sm text-[#2D3748] opacity-70 font-sans"},G={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-6"},I={class:"text-center"},Q={class:"text-4xl font-serif font-bold text-[#5550F2]"},R={class:"text-center"},J={class:"text-4xl font-serif font-bold text-[#2D3748]"},K={class:"text-center"},O={class:"text-4xl font-serif font-bold text-[#2D3748] opacity-50"},U={class:"space-y-2"},W={class:"flex justify-between text-xs font-sans text-[#2D3748] opacity-70"},X={class:"w-full bg-[#E2E8F0]/30 rounded-full h-3 overflow-hidden"},Y={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6"},Z={class:"flex items-center space-x-3 p-4 bg-[#F2F2F2] rounded-lg"},tt={class:"text-lg font-serif font-medium text-[#2D3748]"},st={class:"text-xs text-[#2D3748] opacity-50 font-sans"},et={class:"flex items-center space-x-3 p-4 bg-[#F2F2F2] rounded-lg"},ot={class:"text-lg font-serif font-medium text-[#2D3748]"},nt={key:0,class:"text-xs text-[#2D3748] opacity-50 font-sans"},at={key:0,class:"flex items-start space-x-3 p-4 bg-amber-50 border border-amber-200 rounded-lg mt-6"},rt={key:1,class:"flex items-start space-x-3 p-4 bg-red-50 border border-red-200 rounded-lg mt-6"},it={key:2,class:"pt-4 border-t border-[#E2E8F0]/30 mt-6"},lt={key:1,class:"space-y-4"},dt={class:"space-y-3"},ct={class:"flex items-center justify-between mb-3"},xt={class:"text-base font-sans font-medium text-[#2D3748]"},ut={class:"text-xs text-[#2D3748] opacity-70 font-sans"},mt={class:"text-right"},ft={class:"text-sm font-serif font-medium text-[#2D3748]"},pt={class:"w-full bg-[#E2E8F0]/30 rounded-full h-2"},_t={class:"flex items-center space-x-2 mt-2 text-xs text-[#2D3748] opacity-60 font-sans"},gt={key:0},vt={key:2,class:"flex flex-col items-center justify-center text-center py-16"},kt=M({__name:"bono",setup(ht){const{getBonos:F}=j(),u=h(!0),m=h([]),o=y(()=>m.value.find(n=>n.estado==="activo")),f=y(()=>m.value.filter(n=>n.estado!=="activo").sort((n,s)=>new Date(s.created_at).getTime()-new Date(n.created_at).getTime())),C=async()=>{u.value=!0;try{const n=await F();m.value=(n||[]).map(s=>({...s,estado:s.estado,sesiones_usadas:s.total_sesiones-s.sesiones_restantes}))}catch(n){console.error("Error al cargar bonos:",n)}finally{u.value=!1}},c=n=>n?new Date(n).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"",g=n=>{try{return new Intl.NumberFormat("es-ES",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}catch{return n}},p=n=>({activo:"Activo",agotado:"Agotado",expirado:"Expirado",cancelado:"Cancelado"})[n]||n,v=n=>({activo:"bg-green-100 text-green-800",agotado:"bg-red-100 text-red-800",expirado:"bg-gray-100 text-gray-800",cancelado:"bg-orange-100 text-orange-800"})[n]||"bg-gray-100 text-gray-800",B=(n,s)=>{const x=n/s*100;return x>50?"bg-[#5550F2]":x>25?"bg-amber-500":"bg-red-500"};return z(C),(n,s)=>{const x=E;return i(),r("div",V,[e(u)?(i(),r("div",H,[...s[0]||(s[0]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#5550F2]"},null,-1),t("p",{class:"mt-4 text-[#2D3748] opacity-70 font-sans"},"Cargando tu bono...",-1)])])):(i(),r("div",L,[s[17]||(s[17]=t("header",{class:"mb-8"},[t("h1",{class:"text-2xl sm:text-3xl font-serif font-medium text-[#2D3748]"}," Mi Bono "),t("p",{class:"text-sm text-[#2D3748] opacity-70 font-sans mt-1"}," Gestiona y consulta tu bono de sesiones ")],-1)),e(o)?(i(),r("section",P,[t("header",T,[t("div",null,[t("h2",q,"Bono de "+a(e(o).total_sesiones)+" Sesiones",1),t("p",$,"Contratado el "+a(c(e(o).created_at)),1)]),t("div",null,[t("span",{class:_([v(e(o).estado),"px-3 py-1 rounded-full text-xs font-sans font-medium"])},a(p(e(o).estado)),3)])]),t("div",G,[t("div",I,[t("p",Q,a(e(o).sesiones_restantes),1),s[1]||(s[1]=t("p",{class:"text-sm text-[#2D3748] opacity-70 font-sans mt-1"},"Disponibles",-1))]),t("div",R,[t("p",J,a(e(o).total_sesiones),1),s[2]||(s[2]=t("p",{class:"text-sm text-[#2D3748] opacity-70 font-sans mt-1"},"Totales",-1))]),t("div",K,[t("p",O,a(e(o).sesiones_usadas),1),s[3]||(s[3]=t("p",{class:"text-sm text-[#2D3748] opacity-70 font-sans mt-1"},"Completadas",-1))])]),t("div",U,[t("div",W,[s[4]||(s[4]=t("span",null,"Progreso del bono",-1)),t("span",null,a(Math.round(e(o).sesiones_usadas/e(o).total_sesiones*100))+"%",1)]),t("div",X,[t("div",{class:_(["h-full rounded-full transition-all duration-500",B(e(o).sesiones_restantes,e(o).total_sesiones)]),style:b({width:`${e(o).sesiones_usadas/e(o).total_sesiones*100}%`})},null,6)])]),t("div",Y,[t("div",Z,[s[6]||(s[6]=t("div",{class:"w-10 h-10 rounded-full bg-[#5550F2]/20 flex items-center justify-center flex-shrink-0"},[t("svg",{class:"w-5 h-5 text-[#5550F2]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[s[5]||(s[5]=t("p",{class:"text-xs text-[#2D3748] opacity-70 font-sans"},"Precio total",-1)),t("p",tt,a(g(e(o).precio_total))+"€",1),t("p",st,a(g(e(o).precio_total/e(o).total_sesiones))+"€ por sesión",1)])]),t("div",et,[s[8]||(s[8]=t("div",{class:"w-10 h-10 rounded-full bg-[#5550F2]/20 flex items-center justify-center flex-shrink-0"},[t("svg",{class:"w-5 h-5 text-[#5550F2]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[s[7]||(s[7]=t("p",{class:"text-xs text-[#2D3748] opacity-70 font-sans"},"Estado",-1)),t("p",ot,a(p(e(o).estado)),1),e(o).fecha_expiracion?(i(),r("p",nt,"Válido hasta "+a(c(e(o).fecha_expiracion)),1)):d("",!0)])])]),e(o).sesiones_restantes<=2&&e(o).sesiones_restantes>0?(i(),r("div",at,[...s[9]||(s[9]=[t("svg",{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),t("div",null,[t("p",{class:"text-sm font-sans font-medium text-amber-900"},"Quedan pocas sesiones"),t("p",{class:"text-xs font-sans text-amber-700 mt-1"},"Considera renovar tu bono pronto para mantener la continuidad.")],-1)])])):d("",!0),e(o).sesiones_restantes===0?(i(),r("div",rt,[...s[10]||(s[10]=[t("svg",{class:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("div",null,[t("p",{class:"text-sm font-sans font-medium text-red-900"},"Bono agotado"),t("p",{class:"text-xs font-sans text-red-700 mt-1"},"Has utilizado todas las sesiones. Contacta para adquirir uno nuevo.")],-1)])])):d("",!0),e(o).sesiones_restantes<=2?(i(),r("div",it,[w(x,{to:"/como-empezar",class:"block w-full text-center px-6 py-3 bg-[#5550F2] hover:bg-[#C89B8A] text-white rounded-lg font-sans font-medium transition-colors"},{default:k(()=>[...s[11]||(s[11]=[D("Renovar Bono",-1)])]),_:1})])):d("",!0)])):d("",!0),e(f).length>0?(i(),r("section",lt,[s[14]||(s[14]=t("h2",{class:"text-lg font-serif font-medium text-[#2D3748] mb-2"},"Historial de Bonos",-1)),t("div",dt,[(i(!0),r(A,null,N(e(f),l=>(i(),r("article",{key:l.id,class:"bg-white rounded-lg shadow-sm border border-[#E2E8F0]/30 p-4"},[t("div",ct,[t("div",null,[t("h3",xt,"Bono de "+a(l.total_sesiones)+" Sesiones",1),t("p",ut,a(c(l.created_at)),1)]),t("div",mt,[t("p",ft,a(l.sesiones_usadas)+"/"+a(l.total_sesiones),1),s[12]||(s[12]=t("p",{class:"text-xs text-[#2D3748] opacity-70 font-sans"},"sesiones",-1))])]),t("div",pt,[t("div",{class:"h-full bg-[#2D3748] opacity-30 rounded-full",style:b({width:`${l.sesiones_usadas/l.total_sesiones*100}%`})},null,4)]),t("div",_t,[t("span",{class:_(["px-2 py-0.5 rounded-full font-medium",v(l.estado)])},a(p(l.estado)),3),s[13]||(s[13]=t("span",null,"·",-1)),t("span",null,"Contratado: "+a(c(l.created_at)),1),l.fecha_expiracion?(i(),r("span",gt,"· Expira: "+a(c(l.fecha_expiracion)),1)):d("",!0)])]))),128))])])):d("",!0),!e(o)&&e(f).length===0?(i(),r("div",vt,[s[16]||(s[16]=S('<div class="w-20 h-20 rounded-full bg-[#E2E8F0]/30 flex items-center justify-center mb-4"><svg class="w-10 h-10 text-[#5550F2]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div><h3 class="text-xl font-serif font-medium text-[#2D3748] mb-2">No tienes bonos activos</h3><p class="text-sm text-[#2D3748] opacity-70 font-sans max-w-md mb-6">Adquiere un bono para comenzar tu proceso terapéutico.</p>',3)),w(x,{to:"/contacto",class:"px-6 py-3 bg-[#5550F2] hover:bg-[#C89B8A] text-white rounded-lg font-sans font-medium transition-colors"},{default:k(()=>[...s[15]||(s[15]=[D("Contactar",-1)])]),_:1})])):d("",!0)]))])}}});export{kt as default};
