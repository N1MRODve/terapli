import{_ as De}from"./nuxt-link-DGuQMQZ_.js";import{e as U,x as C,c as n,o as s,a as e,A as T,l as r,t as d,h as b,d as P,j as ie,z as Se,r as w,g as le,F as A,y as I,i as F,J as X,w as oe,ae as Be,p as ze,L as Te,B as Ve,D as He,b as H}from"#entry";import{u as Pe,M as Ae}from"./ModalDetallesCita-D0zYq1YQ.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PaymentMethodSelector-DGmnaSg8.js";import"./useToast-Cq0GyJHs.js";import"./XMarkIcon-DWNj0d99.js";import"./CheckCircleIcon-Bi0YyG7H.js";import"./PencilIcon-QJyqa3i7.js";import"./PhoneIcon-B4J2dtua.js";import"./CalendarDaysIcon-C0vq0F4x.js";import"./ClockIcon-CQZt9cKZ.js";import"./TicketIcon-DRclOuRO.js";import"./ChevronDownIcon-BwiNUDLV.js";import"./ExclamationTriangleIcon-BreoAuwB.js";import"./PlusIcon-UqRq4KLf.js";const Ee={class:"flex-shrink-0 w-20 text-center"},Le={class:"text-xl font-bold text-gray-900"},Ne={class:"flex-1 min-w-0"},Oe={class:"text-base font-semibold text-gray-900 truncate"},Re={class:"flex items-center gap-3 mt-1.5 text-sm text-gray-500"},qe={class:"inline-flex items-center gap-1.5"},Fe={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ie={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ue={key:2,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ke={key:0,class:"w-4 h-4 inline mr-0.5 -mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},Je={class:"flex items-center gap-2"},Ye=U({__name:"SessionCard",props:{id:{},fecha:{},hora:{},pacienteNombre:{},modalidad:{},estado:{},isNext:{type:Boolean}},emits:["click","confirmar"],setup(a,{emit:x}){const c=a,S=C(()=>{if(!c.fecha)return"";const y=new Date;y.setHours(0,0,0,0);const m=new Date(y);m.setDate(m.getDate()+1);const M=new Date(c.fecha+"T00:00:00");if(M.setHours(0,0,0,0),M.getTime()===y.getTime())return"Hoy";if(M.getTime()===m.getTime())return"Ma√±ana";const E=["Dom","Lun","Mar","Mi√©","Jue","Vie","S√°b"],V=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"];return`${E[M.getDay()]} ${M.getDate()} ${V[M.getMonth()]}`}),D=C(()=>{if(!c.fecha)return!1;const y=new Date().toISOString().split("T")[0];return c.fecha===y}),l=x,$={presencial:{label:"Presencial",type:"location"},online:{label:"Online",type:"video"},virtual:{label:"Online",type:"video"},telefonica:{label:"Telefono",type:"phone"}},f=C(()=>$[c.modalidad]||$.presencial);return(y,m)=>(s(),n("div",{onClick:m[1]||(m[1]=M=>l("click",a.id)),class:T(["relative flex items-center gap-4 p-4 bg-white rounded-lg border cursor-pointer transition-all duration-200 hover:shadow-md group",a.isNext?"border-gray-200 shadow-sm":"border-gray-200"])},[e("div",Ee,[e("p",{class:T(["text-xs font-semibold uppercase tracking-wide mb-0.5",r(D)?"text-violet-600":"text-gray-500"])},d(r(S)),3),e("p",Le,d(a.hora),1)]),m[8]||(m[8]=e("div",{class:"w-px h-12 bg-gray-200"},null,-1)),e("div",Ne,[e("p",Oe,d(a.pacienteNombre),1),e("div",Re,[e("span",qe,[r(f).type==="location"?(s(),n("svg",Fe,[...m[2]||(m[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)])])):r(f).type==="video"?(s(),n("svg",Ie,[...m[3]||(m[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])):r(f).type==="phone"?(s(),n("svg",Ue,[...m[4]||(m[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"},null,-1)])])):b("",!0),P(" "+d(r(f).label),1)]),m[6]||(m[6]=e("span",{class:"text-gray-300"},"|",-1)),e("span",{class:T(c.estado==="confirmada"?"text-emerald-600":"text-gray-500")},[c.estado==="confirmada"?(s(),n("svg",Ke,[...m[5]||(m[5]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):b("",!0),P(" "+d(c.estado==="pendiente"?"Pendiente":c.estado==="confirmada"?"Confirmada":c.estado==="realizada"?"Realizada":"Cancelada"),1)],2)])]),e("div",Je,[c.estado==="pendiente"?(s(),n("button",{key:0,onClick:m[0]||(m[0]=ie(M=>l("confirmar",a.id),["stop"])),class:"px-3 py-1.5 text-xs font-semibold border border-violet-600 text-violet-600 rounded-lg opacity-0 group-hover:opacity-100 hover:bg-violet-50 transition-all",title:"Confirmar cita"}," Confirmar ")):b("",!0),m[7]||(m[7]=e("button",{class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Ver detalles"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))])],2))}}),Ge=Object.assign(Ye,{__name:"DashboardSessionCard"}),Qe={class:"flex-shrink-0 w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 font-semibold text-sm"},We={class:"flex-1 min-w-0"},Xe={class:"font-semibold text-gray-900 truncate"},Ze={class:"flex items-center gap-3 mt-1 text-sm text-gray-500"},et={class:"flex items-center gap-1"},tt={key:0,class:"text-gray-400"},ot={key:0,class:"mt-2"},st={class:"flex items-center justify-between text-xs text-gray-500 mb-1"},at={class:"font-medium text-gray-700"},nt={class:"h-1.5 bg-gray-100 rounded-full overflow-hidden"},rt=U({__name:"PatientCard",props:{id:{},nombre:{},ultimaSesion:{},proximaCita:{},sesionesUsadas:{},sesionesTotales:{},estadoBono:{}},emits:["click"],setup(a,{emit:x}){const c=a,S=x,D=C(()=>{if(!c.nombre)return"?";const f=c.nombre.split(" ").filter(Boolean);return f.length>=2?(f[0][0]+f[1][0]).toUpperCase():f[0]?.substring(0,2).toUpperCase()||"?"}),l=C(()=>!c.sesionesTotales||c.sesionesTotales===0?0:Math.round((c.sesionesUsadas||0)/c.sesionesTotales*100)),$=C(()=>{if(!c.ultimaSesion)return"Sin sesiones";const f=new Date(c.ultimaSesion),m=Math.floor((new Date().getTime()-f.getTime())/(1e3*60*60*24));return m===0?"Hoy":m===1?"Ayer":m<7?`Hace ${m} dias`:f.toLocaleDateString("es-ES",{day:"numeric",month:"short"})});return(f,y)=>(s(),n("div",{onClick:y[0]||(y[0]=m=>S("click",a.id)),class:"flex items-center gap-4 p-4 bg-white rounded-lg border border-gray-200 cursor-pointer transition-all duration-200 hover:shadow-md hover:bg-gray-50 group"},[e("div",Qe,d(r(D)),1),e("div",We,[e("p",Xe,d(a.nombre),1),e("div",Ze,[e("span",et,[y[1]||(y[1]=e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),P(" "+d(r($)),1)]),a.estadoBono?(s(),n("span",tt,d(a.estadoBono==="activo"?"Bono activo":a.estadoBono==="por_agotar"?"Por agotar":a.estadoBono==="sin_bono"?"Sin bono":"Agotado"),1)):b("",!0)]),a.sesionesTotales&&a.sesionesTotales>0?(s(),n("div",ot,[e("div",st,[y[2]||(y[2]=e("span",null,"Sesiones",-1)),e("span",at,d(a.sesionesUsadas||0)+"/"+d(a.sesionesTotales),1)]),e("div",nt,[e("div",{class:"h-full rounded-full transition-all duration-500 bg-gray-400",style:Se({width:`${Math.min(r(l),100)}%`})},null,4)])])):b("",!0)]),y[3]||(y[3]=e("button",{class:"flex-shrink-0 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Ver perfil"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))]))}}),it=Object.assign(rt,{__name:"DashboardPatientCard"}),lt={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},dt={class:"flex items-center justify-between px-6 py-4 border-b border-gray-200"},ct={class:"flex items-center gap-3"},ut={class:"text-xs text-gray-500 capitalize"},mt=["disabled"],gt={class:"p-4 sm:p-6"},pt={key:0,class:"flex flex-col items-center justify-center py-8"},ht={class:"text-center mb-6"},vt={class:"text-4xl font-bold text-emerald-600"},ft={class:"text-sm text-gray-500 mt-1"},xt={key:0,class:"mb-6"},yt={class:"grid grid-cols-2 sm:grid-cols-3 gap-2"},bt={class:"text-lg"},kt={class:"flex-1 min-w-0"},wt={class:"text-sm font-medium text-gray-900 truncate capitalize"},_t={class:"text-xs text-gray-500"},Ct={key:1,class:"mb-4"},$t={class:"space-y-2"},Mt=["onClick"],jt={class:"flex items-center gap-3"},Dt={class:"text-sm font-medium text-gray-900"},St={class:"text-xs text-gray-500"},Bt={class:"text-right"},zt={class:"text-sm font-semibold text-emerald-700"},Tt={class:"text-xs text-gray-500 capitalize"},Vt={key:2},Ht={class:"space-y-2"},Pt=["onClick"],At={class:"flex items-center gap-3"},Et={class:"text-sm font-medium text-gray-900"},Lt={class:"text-xs text-gray-500"},Nt={class:"text-right"},Ot={class:"text-sm font-semibold text-amber-700"},Rt={key:0,class:"text-xs text-gray-500 text-center"},qt={key:3,class:"text-center py-6"},Ft=U({__name:"PaymentsTodayCard",emits:["abrirCita"],setup(a,{expose:x,emit:c}){const{getPaymentsOfDay:S,loading:D,resumenDia:l}=Pe(),$=w(!1);le(async()=>{await S()});const f=C(()=>{const j=l.value.pagos;return $.value?j:j.slice(0,3)}),y=C(()=>l.value.pendientes.slice(0,2)),m=C(()=>new Date().toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),M=C(()=>{const j=l.value.porMetodo;return Object.entries(j).filter(([p,v])=>v.cantidad>0).map(([p,v])=>({metodo:p,...v}))}),E=c;function V(j){E("abrirCita",j)}async function O(){await S()}return x({refrescar:O}),(j,p)=>(s(),n("div",lt,[e("div",dt,[e("div",ct,[p[2]||(p[2]=e("div",{class:"w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[p[1]||(p[1]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Pagos Hoy",-1)),e("p",ut,d(r(m)),1)])]),e("button",{onClick:O,disabled:r(D),class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors disabled:opacity-50",title:"Actualizar"},[(s(),n("svg",{class:T(["w-5 h-5",r(D)&&"animate-spin"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...p[3]||(p[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))],8,mt)]),e("div",gt,[r(D)?(s(),n("div",pt,[...p[4]||(p[4]=[e("div",{class:"w-8 h-8 border-2 border-gray-200 border-t-emerald-600 rounded-full animate-spin mb-2"},null,-1),e("p",{class:"text-sm text-gray-500"},"Cargando pagos...",-1)])])):(s(),n(A,{key:1},[e("div",ht,[e("p",vt,d(r(l).total.toFixed(2))+"‚Ç¨ ",1),e("p",ft,d(r(l).cantidadPagos)+" "+d(r(l).cantidadPagos===1?"pago":"pagos")+" registrados hoy ",1)]),r(M).length>0?(s(),n("div",xt,[p[5]||(p[5]=e("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3"}," Desglose por m√©todo ",-1)),e("div",yt,[(s(!0),n(A,null,I(r(M),v=>(s(),n("div",{key:v.metodo,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg"},[e("span",bt,d(v.metodo==="efectivo"?"üíµ":v.metodo==="transferencia"?"üè¶":v.metodo==="bizum"?"üì±":v.metodo==="tarjeta"?"üí≥":"‚ö°"),1),e("div",kt,[e("p",wt,d(v.metodo),1),e("p",_t,d(v.total.toFixed(2))+"‚Ç¨ ¬∑ "+d(v.cantidad),1)])]))),128))])])):b("",!0),r(l).pagos.length>0?(s(),n("div",Ct,[p[7]||(p[7]=e("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3"}," Pagos registrados ",-1)),e("div",$t,[(s(!0),n(A,null,I(r(f),v=>(s(),n("button",{key:v.id,onClick:R=>V(v.id),class:"w-full flex items-center justify-between px-3 py-2.5 bg-emerald-50 hover:bg-emerald-100 rounded-lg transition-colors text-left"},[e("div",jt,[p[6]||(p[6]=e("span",{class:"text-emerald-600"},"‚úì",-1)),e("div",null,[e("p",Dt,d(v.paciente_nombre),1),e("p",St,d(v.hora_inicio),1)])]),e("div",Bt,[e("p",zt,d((v.precio_sesion||0).toFixed(2))+"‚Ç¨",1),e("p",Tt,d(v.metodo_pago),1)])],8,Mt))),128)),r(l).pagos.length>3&&!r($)?(s(),n("button",{key:0,onClick:p[0]||(p[0]=v=>$.value=!0),class:"w-full py-2 text-sm font-medium text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 rounded-lg transition-colors"}," Ver "+d(r(l).pagos.length-3)+" m√°s ",1)):b("",!0)])])):b("",!0),r(l).pendientes.length>0?(s(),n("div",Vt,[p[10]||(p[10]=e("h3",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3"}," Pendientes de cobro ",-1)),e("div",Ht,[(s(!0),n(A,null,I(r(y),v=>(s(),n("button",{key:v.id,onClick:R=>V(v.id),class:"w-full flex items-center justify-between px-3 py-2.5 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors text-left"},[e("div",At,[p[8]||(p[8]=e("span",{class:"text-amber-600"},"‚è≥",-1)),e("div",null,[e("p",Et,d(v.paciente_nombre),1),e("p",Lt,d(v.hora_inicio),1)])]),e("div",Nt,[e("p",Ot,d((v.precio_sesion||50).toFixed(2))+"‚Ç¨",1),p[9]||(p[9]=e("p",{class:"text-xs text-amber-600"},"Cobrar",-1))])],8,Pt))),128)),r(l).pendientes.length>2?(s(),n("p",Rt," +"+d(r(l).pendientes.length-2)+" pendientes m√°s ",1)):b("",!0)])])):b("",!0),r(l).pagos.length===0&&r(l).pendientes.length===0?(s(),n("div",qt,[...p[11]||(p[11]=[F('<div class="w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3"><svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><p class="text-gray-600 font-medium">Sin pagos hoy</p><p class="text-sm text-gray-400 mt-1">Los cobros aparecer√°n aqu√≠</p>',3)])])):b("",!0)],64))])]))}}),It=Object.assign(Ft,{__name:"DashboardPaymentsTodayCard"}),Ut={key:0,class:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},Kt={key:1,class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Jt={key:2,class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Yt={key:3,class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Gt={key:4,class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qt={key:5,class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wt={class:"flex-1 min-w-0"},Xt={class:"flex items-center gap-2"},Zt={class:"font-medium text-gray-900 truncate"},eo={key:0,class:"flex-shrink-0 text-[11px] font-semibold uppercase tracking-wider text-red-500"},to={class:"text-sm flex items-center gap-2 mt-0.5 text-gray-500"},oo={key:0},so={key:1},ao={key:2},no={key:3},ro={key:4,class:"text-gray-300"},io={key:5,class:"font-medium text-gray-700"},lo={key:1,class:"text-sm leading-relaxed text-gray-700"},co=U({__name:"ReminderCard",props:{id:{},tipo:{},mensaje:{},paciente:{},fecha:{},hora:{},urgente:{type:Boolean},accion:{}},emits:["accion"],setup(a,{emit:x}){const c=x,S={confirmacion:"Confirmar",pago:"Ver pago",clinico:"Ver",bono:"Ver bono",general:"Ver"};return(D,l)=>(s(),n("div",{class:T(["flex items-center gap-3 p-4 bg-white rounded-lg border border-gray-200 transition-all duration-200 hover:shadow-sm cursor-pointer group",a.urgente?"border-l-[3px] border-l-red-500":""]),onClick:l[1]||(l[1]=$=>c("accion",{id:a.id,tipo:a.tipo,accion:a.accion}))},[e("div",{class:T(["relative flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center",a.urgente?"bg-red-50":"bg-gray-100"])},[a.urgente?(s(),n("svg",Ut,[...l[2]||(l[2]=[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])])):a.tipo==="confirmacion"?(s(),n("svg",Kt,[...l[3]||(l[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])])):a.tipo==="pago"?(s(),n("svg",Jt,[...l[4]||(l[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"},null,-1)])])):a.tipo==="clinico"?(s(),n("svg",Yt,[...l[5]||(l[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])):a.tipo==="bono"?(s(),n("svg",Gt,[...l[6]||(l[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"},null,-1)])])):(s(),n("svg",Qt,[...l[7]||(l[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"},null,-1)])]))],2),e("div",Wt,[a.paciente&&(a.fecha||a.hora)?(s(),n(A,{key:0},[e("div",Xt,[e("p",Zt,d(a.paciente),1),a.urgente?(s(),n("span",eo," URGENTE ")):b("",!0)]),e("p",to,[a.tipo==="confirmacion"?(s(),n("span",oo,"Confirmar cita")):a.tipo==="pago"?(s(),n("span",so,"Pago pendiente")):a.tipo==="bono"?(s(),n("span",ao,"Bono por agotar")):(s(),n("span",no,d(a.mensaje),1)),a.fecha||a.hora?(s(),n("span",ro,"|")):b("",!0),a.fecha||a.hora?(s(),n("span",io,d(a.fecha)+" "+d(a.hora),1)):b("",!0)])],64)):(s(),n("p",lo,d(a.mensaje),1))]),a.accion?(s(),n("button",{key:0,onClick:l[0]||(l[0]=ie($=>c("accion",{id:a.id,tipo:a.tipo,accion:a.accion}),["stop"])),class:T(["flex-shrink-0 px-3 py-1.5 text-xs font-semibold rounded-lg transition-all",a.urgente?"border border-red-500 text-red-500 hover:bg-red-50 opacity-100":"border border-gray-300 text-gray-600 hover:bg-gray-50 opacity-0 group-hover:opacity-100"])},d(S[a.tipo]||"Ver"),3)):b("",!0),l[8]||(l[8]=e("svg",{class:"w-4 h-4 flex-shrink-0 text-gray-400 opacity-50 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],2))}}),uo=Object.assign(de(co,[["__scopeId","data-v-6fd1e938"]]),{__name:"DashboardReminderCard"}),mo={key:0,class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},go={key:1,class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},po={key:2,class:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ho={key:3,class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vo={class:"text-sm font-medium mt-1 text-gray-500"},fo={key:0,class:"text-xs mt-0.5 text-gray-400"},xo={key:1,class:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity"},yo=U({__name:"MetricCard",props:{value:{},label:{},sublabel:{},iconType:{},highlight:{type:Boolean},to:{}},setup(a){return(x,c)=>(s(),X(Be(a.to?"NuxtLink":"div"),{to:a.to,class:T(["relative p-6 bg-white rounded-lg border border-gray-200 transition-all duration-200",a.to?"hover:shadow-md hover:border-gray-300 cursor-pointer group":""])},{default:oe(()=>[e("div",{class:T(["w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center mb-4 transition-transform",a.to?"group-hover:scale-105":""])},[a.iconType==="users"?(s(),n("svg",mo,[...c[0]||(c[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])])):a.iconType==="calendar"?(s(),n("svg",go,[...c[1]||(c[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])])):a.iconType==="check"?(s(),n("svg",po,[...c[2]||(c[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):a.iconType==="euro"?(s(),n("svg",ho,[...c[3]||(c[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14.121 15.536c-1.171 1.952-3.07 1.952-4.242 0-1.172-1.953-1.172-5.119 0-7.072 1.171-1.952 3.07-1.952 4.242 0M8 10.5h4m-4 3h4m9-1.5a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):b("",!0)],2),e("p",{class:T(["text-3xl font-bold tracking-tight",a.highlight?"text-violet-600":"text-gray-900"])},d(a.value),3),e("p",vo,d(a.label),1),a.sublabel?(s(),n("p",fo,d(a.sublabel),1)):b("",!0),a.to?(s(),n("div",xo,[...c[4]||(c[4]=[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):b("",!0)]),_:1},8,["to","class"]))}}),bo=Object.assign(yo,{__name:"DashboardMetricCard"}),ko={class:"dashboard-terapeuta min-h-screen bg-gray-50"},wo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},_o={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8"},Co={class:"text-gray-500 mt-1"},$o={class:"font-medium text-gray-700"},Mo={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8"},jo={class:"lg:col-span-2 bg-white rounded-lg border border-gray-200 overflow-hidden"},Do={class:"flex items-center justify-between px-6 py-4 border-b border-gray-200"},So={class:"flex items-center gap-3"},Bo={class:"text-sm text-gray-500"},zo={class:"p-4"},To={key:0,class:"flex flex-col items-center justify-center py-12"},Vo={key:1,class:"flex flex-col items-center justify-center py-12 text-center"},Ho={key:2,class:"space-y-3"},Po={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},Ao={class:"flex items-center justify-between px-6 py-4 border-b border-gray-200"},Eo={class:"p-4"},Lo={key:0,class:"flex flex-col items-center justify-center py-8"},No={key:1,class:"flex flex-col items-center justify-center py-8 text-center"},Oo={key:2,class:"space-y-3"},Ro={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8 mt-8"},qo={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},Fo={class:"flex items-center justify-between px-6 py-4 border-b border-gray-200"},Io={class:"p-4"},Uo={key:0,class:"flex flex-col items-center justify-center py-8"},Ko={key:1,class:"flex flex-col items-center justify-center py-8 text-center"},Jo={key:2,class:"space-y-2"},Yo={class:"mt-8"},Go={class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},Qo={class:"p-6"},Wo={class:"grid grid-cols-2 lg:grid-cols-4 gap-4"},Xo=U({__name:"dashboard",setup(a){const x=ze(),c=Te(),S=Ve(),D=w(null),l=w(!0),$=w(!0),f=w([]),y=w([]),m=w(0),M=w(0),E=w(0),V=w(!1),O=w(null),j=w(!1),p=w(!1),v=w(null),R=w(0),K=w(0),Z=w([]),Q=w(!0),ce=C(()=>new Date().toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"})),ue=C(()=>j.value?f.value:f.value.slice(0,5));function se(o,t){return o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate()}function me(o,t){const g=new Date(t);return g.setDate(g.getDate()+1),se(o,g)}function ge(o){return o.toLocaleDateString("es-ES",{weekday:"long"})}function pe(o){return o.toLocaleDateString("es-ES",{day:"numeric",month:"short"})}function he(o,t){const g=new Date,u=new Date(`${o}T${t}:00`),h=(u.getTime()-g.getTime())/(1e3*60*60);if(se(u,g))return`Hoy ${t}`;if(me(u,g))return`Ma√±ana ${t}`;if(h>0&&h<168){const k=ge(u);return`${k.charAt(0).toUpperCase()+k.slice(1)} ${t}`}return`${pe(u)} ${t}`}function ve(o,t){if(!o||!t)return!1;const g=new Date,h=(new Date(`${o}T${t}:00`).getTime()-g.getTime())/(1e3*60*60);return h>0&&h<24}const fe=C(()=>Z.value.map(o=>{let t=o.fechaCita&&o.horaCita?he(o.fechaCita,o.horaCita):void 0,g=o.tipo==="confirmacion"&&ve(o.fechaCita,o.horaCita),u="",h="";if(t){const k=t.split(" ");h=k.pop()||"",u=k.join(" ")}return{id:o.id,tipo:o.tipo,mensaje:o.mensaje,paciente:o.paciente,fecha:u,hora:h,urgente:g,accion:o.accion}})),J=C(()=>[...fe.value].sort((o,t)=>{if(o.urgente&&!t.urgente)return-1;if(!o.urgente&&t.urgente)return 1;const g=o.fecha||o.hora,u=t.fecha||t.hora;return g&&!u?-1:!g&&u?1:0})),xe=C(()=>p.value?J.value:J.value.slice(0,4)),ae=()=>{c.push("/terapeuta/agenda")},ye=()=>{c.push("/terapeuta/pacientes")},be=o=>{c.push(`/terapeuta/pacientes/${o}`)},ee=o=>{O.value=o,V.value=!0},ke=()=>{V.value=!1,O.value=null,Y()},ne=async o=>{try{const{error:t}=await x.from("citas").update({estado:"confirmada",updated_at:new Date().toISOString()}).eq("id",o);if(t)throw t;const g=f.value.findIndex(u=>u.id===o);g!==-1&&(f.value[g].estado="confirmada"),await W()}catch(t){console.error("Error al confirmar cita:",t),alert("Error al confirmar la cita")}};async function we(){try{const{data:o}=await x.auth.getUser();if(o.user){const{data:t}=await x.from("profiles").select("*").eq("id",o.user.id).single();D.value={nombre:t?.metadata?.nombre||"Karem",email:o.user.email}}}catch(o){console.error("Error al cargar perfil:",o),D.value={nombre:"Karem"}}}async function Y(){l.value=!0;try{const o=new Date;o.setHours(0,0,0,0);const t=new Date(o);t.setDate(t.getDate()+7);const{data:g,error:u}=await x.from("citas").select(`
        id,
        paciente_id,
        fecha_cita,
        hora_inicio,
        modalidad,
        estado,
        observaciones,
        pacientes (
          id,
          nombre_completo,
          email
        )
      `).in("estado",["pendiente","confirmada"]).gte("fecha_cita",o.toISOString().split("T")[0]).lte("fecha_cita",t.toISOString().split("T")[0]).order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0});if(u)throw u;f.value=(g||[]).map(h=>({id:h.id,fecha_cita:h.fecha_cita,hora_inicio:h.hora_inicio?h.hora_inicio.substring(0,5):"--:--",paciente_nombre:h.pacientes?.nombre_completo||h.pacientes?.email||"Paciente",modalidad:h.modalidad||"presencial",estado:h.estado||"pendiente",observaciones:h.observaciones}))}catch(o){console.error("Error al cargar sesiones:",o),f.value=[]}finally{l.value=!1}}async function _e(){$.value=!0;try{const{data:o,error:t}=await x.from("pacientes").select("id, nombre_completo, area_de_acompanamiento, updated_at, metadata").eq("activo",!0).order("updated_at",{ascending:!1}).limit(5);if(t)throw t;const g=await Promise.all((o||[]).map(async u=>{let h=0,k=0,B="sin_bono";try{const{data:_}=await x.from("bonos").select("sesiones_totales, sesiones_restantes, estado").eq("paciente_id",u.id).eq("estado","activo").single();_&&(k=_.sesiones_totales||0,h=k-(_.sesiones_restantes||0),_.sesiones_restantes<=0?B="agotado":_.sesiones_restantes<=2?B="por_agotar":B="activo")}catch{}return{id:u.id,nombre_completo:u.nombre_completo||"Sin nombre",ultima_sesion:u.updated_at,sesiones_usadas:h,sesiones_totales:k,estado_bono:B}}));y.value=g}catch(o){console.error("Error al cargar pacientes:",o),y.value=[]}finally{$.value=!1}}async function Ce(){try{const{count:o}=await x.from("pacientes").select("*",{count:"exact",head:!0}).eq("activo",!0);m.value=o||0;const t=new Date;t.setDate(1),t.setHours(0,0,0,0);const{count:g}=await x.from("citas").select("*",{count:"exact",head:!0}).gte("fecha_cita",t.toISOString().split("T")[0]);M.value=g||0;const{data:u}=await x.from("citas").select("estado").gte("fecha_cita",t.toISOString().split("T")[0]).in("estado",["realizada","completada","cancelada"]);if(u&&u.length>0){const h=u.filter(k=>k.estado==="realizada"||k.estado==="completada").length;E.value=Math.round(h/u.length*100)}else E.value=0}catch(o){console.error("Error al cargar m√©tricas:",o)}}async function W(){Q.value=!0;const o=[];try{const t=new Date,g=new Date(t);g.setHours(0,0,0,0);const u=g.toISOString().split("T")[0],h=new Date(g);h.setDate(g.getDate()+3);const k=h.toISOString().split("T")[0],{data:B}=await x.from("citas").select(`
        id,
        fecha_cita,
        hora_inicio,
        pacientes (
          nombre_completo
        )
      `).eq("estado","pendiente").gte("fecha_cita",u).lte("fecha_cita",k).order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0});B?.forEach(i=>{const z=i.hora_inicio?.substring(0,5)||"00:00",G=i.fecha_cita;if(G===u){const[te,N]=z.split(":").map(Number),q=new Date(t);if(q.setHours(te,N,0,0),q<t)return}o.push({id:i.id,tipo:"confirmacion",mensaje:`Confirmar cita de ${i.pacientes?.nombre_completo||"paciente"}`,paciente:i.pacientes?.nombre_completo||"Paciente",fechaCita:G,horaCita:z,accion:"confirmar"})});const{data:_}=await x.from("citas").select(`
        id,
        fecha_cita,
        hora_inicio,
        pacientes (
          nombre_completo
        )
      `).lt("fecha_cita",u).neq("estado","completada").neq("estado","cancelada").neq("estado","realizada").order("fecha_cita",{ascending:!1}).limit(3);_?.forEach(i=>{const z=new Date(i.fecha_cita).toLocaleDateString("es-ES",{day:"numeric",month:"short"});o.push({id:i.id,tipo:"clinico",mensaje:`Revisa la sesi√≥n pendiente de ${i.pacientes?.nombre_completo||"paciente"} del ${z}`,paciente:i.pacientes?.nombre_completo||"Paciente",accion:"ver"})});const{data:L}=await x.from("bonos").select(`
        id,
        sesiones_restantes,
        pacientes (
          nombre_completo
        )
      `).eq("estado","activo").lte("sesiones_restantes",2).gt("sesiones_restantes",0).limit(3);L?.forEach(i=>{o.push({id:i.id,tipo:"bono",mensaje:`El bono est√° por agotarse (quedan ${i.sesiones_restantes} sesiones)`,paciente:i.pacientes?.nombre_completo||"Paciente",accion:"ver"})}),Z.value=o.slice(0,8)}catch(t){console.error("Error al generar recordatorios:",t),Z.value=[]}finally{Q.value=!1}}async function $e(){try{if(!S.value?.email)return;const{data:o}=await x.from("terapeutas").select("id, porcentaje_comision").eq("email",S.value.email).single();if(!o)return;const g=(100-(o.porcentaje_comision||30))/100,{data:u}=await x.from("pacientes").select("id").eq("terapeuta_id",o.id);if(!u||u.length===0){R.value=0,K.value=0;return}const h=u.map(N=>N.id),{data:k}=await x.from("bonos").select("id, monto_total").eq("pagado",!0).in("paciente_id",h);let B=0,_=0;k&&k.length>0&&(_=k.length,B=k.reduce((N,q)=>N+(q.monto_total||0),0));const L=new Date;L.setDate(1),L.setHours(0,0,0,0);const{data:i}=await x.from("citas").select("id, precio_sesion").eq("estado_pago","pagado").in("paciente_id",h).gte("fecha_pago",L.toISOString());let z=0,G=0;i&&i.length>0&&(G=i.length,z=i.reduce((N,q)=>N+(q.precio_sesion||0),0));const te=B+z;R.value=te*g,K.value=_+G}catch(o){console.error("Error al cargar pagos confirmados:",o),R.value=0,K.value=0}}const Me=o=>o.toFixed(2),je=async o=>{o.tipo==="confirmacion"&&o.accion==="confirmar"&&o.id?(await ne(o.id),await W()):o.tipo==="clinico"&&o.id&&ee(o.id)};le(async()=>{await we(),await Y(),await _e(),await Ce(),await $e(),await W(),window.addEventListener("citas:actualizadas",re)}),He(()=>{window.removeEventListener("citas:actualizadas",re)});function re(o){console.log("üì° [Dashboard] Evento recibido:",o.detail),Y()}return(o,t)=>{const g=De,u=Ge,h=it,k=It,B=uo,_=bo,L=Ae;return s(),n("div",ko,[e("div",wo,[e("header",_o,[e("div",null,[t[4]||(t[4]=e("h1",{class:"text-3xl font-bold text-gray-900 tracking-tight"}," Dashboard ",-1)),e("p",Co,[t[3]||(t[3]=P(" Bienvenida de nuevo, ",-1)),e("span",$o,d(r(D)?.nombre||"Karem"),1)])]),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:ae,class:"inline-flex items-center gap-2 px-5 py-2.5 bg-violet-600 text-white rounded-lg font-medium hover:bg-violet-700 transition-colors"},[...t[5]||(t[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),P(" Nueva Cita ",-1)])]),e("button",{onClick:ye,class:"inline-flex items-center gap-2 px-5 py-2.5 bg-white text-gray-600 rounded-lg font-medium border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-colors"},[...t[6]||(t[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1),P(" Nuevo Paciente ",-1)])])])]),e("div",Mo,[e("section",jo,[e("div",Do,[e("div",So,[t[8]||(t[8]=e("div",{class:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",null,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Proximas Sesiones",-1)),e("p",Bo,d(r(ce)),1)])]),H(g,{to:"/terapeuta/agenda",class:"inline-flex items-center gap-1 text-sm font-medium text-violet-600 hover:text-violet-700 transition-colors"},{default:oe(()=>[...t[9]||(t[9]=[P(" Ver agenda ",-1),e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1})]),e("div",zo,[r(l)?(s(),n("div",To,[...t[10]||(t[10]=[e("div",{class:"w-8 h-8 border-2 border-gray-200 border-t-gray-600 rounded-full animate-spin mb-3"},null,-1),e("p",{class:"text-sm text-gray-500"},"Cargando sesiones...",-1)])])):r(f).length===0?(s(),n("div",Vo,[t[11]||(t[11]=F('<div class="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4" data-v-072de8e0><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-072de8e0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-072de8e0></path></svg></div><p class="text-gray-600 font-medium" data-v-072de8e0>No hay sesiones programadas</p><p class="text-sm text-gray-400 mt-1" data-v-072de8e0>Las pr√≥ximas citas aparecer√°n aqu√≠</p>',3)),e("button",{onClick:ae,class:"mt-4 px-4 py-2 text-sm font-medium text-violet-600 hover:text-violet-700 hover:bg-violet-50 rounded-lg transition-colors"}," + Agendar una cita ")])):(s(),n("div",Ho,[(s(!0),n(A,null,I(r(ue),(i,z)=>(s(),X(u,{key:i.id,id:i.id,fecha:i.fecha_cita,hora:i.hora_inicio,"paciente-nombre":i.paciente_nombre,modalidad:i.modalidad,estado:i.estado,"is-next":z===0,onClick:ee,onConfirmar:ne},null,8,["id","fecha","hora","paciente-nombre","modalidad","estado","is-next"]))),128)),r(f).length>5&&!r(j)?(s(),n("button",{key:0,onClick:t[0]||(t[0]=i=>j.value=!0),class:"w-full py-3 text-sm font-medium text-violet-600 hover:text-violet-700 hover:bg-violet-50 rounded-xl transition-colors flex items-center justify-center gap-2"},[e("span",null,"Ver "+d(r(f).length-5)+" sesiones m√°s",1),t[12]||(t[12]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])):b("",!0),r(j)&&r(f).length>5?(s(),n("button",{key:1,onClick:t[1]||(t[1]=i=>j.value=!1),class:"w-full py-3 text-sm font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-xl transition-colors flex items-center justify-center gap-2"},[...t[13]||(t[13]=[e("span",null,"Mostrar menos",-1),e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})],-1)])])):b("",!0)]))])]),e("section",Po,[e("div",Ao,[t[15]||(t[15]=F('<div class="flex items-center gap-3" data-v-072de8e0><div class="w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center" data-v-072de8e0><svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-072de8e0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" data-v-072de8e0></path></svg></div><h2 class="text-lg font-semibold text-gray-900" data-v-072de8e0>Pacientes</h2></div>',1)),H(g,{to:"/terapeuta/pacientes",class:"inline-flex items-center gap-1 text-sm font-medium text-violet-600 hover:text-violet-700 transition-colors"},{default:oe(()=>[...t[14]||(t[14]=[P(" Ver todos ",-1),e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1})]),e("div",Eo,[r($)?(s(),n("div",Lo,[...t[16]||(t[16]=[e("div",{class:"w-8 h-8 border-2 border-gray-200 border-t-gray-600 rounded-full animate-spin mb-2"},null,-1),e("p",{class:"text-sm text-gray-500"},"Cargando...",-1)])])):r(y).length===0?(s(),n("div",No,[...t[17]||(t[17]=[e("div",{class:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-3"},[e("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1),e("p",{class:"text-gray-500 text-sm"},"Sin pacientes activos",-1)])])):(s(),n("div",Oo,[(s(!0),n(A,null,I(r(y),i=>(s(),X(h,{key:i.id,id:i.id,nombre:i.nombre_completo,"ultima-sesion":i.ultima_sesion,"sesiones-usadas":i.sesiones_usadas,"sesiones-totales":i.sesiones_totales,"estado-bono":i.estado_bono,onClick:be},null,8,["id","nombre","ultima-sesion","sesiones-usadas","sesiones-totales","estado-bono"]))),128))]))])])]),e("div",Ro,[H(k,{ref_key:"paymentsTodayCardRef",ref:v,onAbrirCita:ee},null,512),e("section",qo,[e("div",Fo,[t[19]||(t[19]=F('<div class="flex items-center gap-3" data-v-072de8e0><div class="w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center" data-v-072de8e0><svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-072de8e0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" data-v-072de8e0></path></svg></div><h2 class="text-lg font-semibold text-gray-900" data-v-072de8e0>Recordatorios</h2></div>',1)),r(Q)?b("",!0):(s(),n("button",{key:0,onClick:W,class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Actualizar recordatorios"},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])]))]),e("div",Io,[r(Q)?(s(),n("div",Uo,[...t[20]||(t[20]=[e("div",{class:"w-8 h-8 border-2 border-gray-200 border-t-gray-600 rounded-full animate-spin mb-2"},null,-1),e("p",{class:"text-sm text-gray-500"},"Cargando...",-1)])])):r(J).length===0?(s(),n("div",Ko,[...t[21]||(t[21]=[F('<div class="w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-3" data-v-072de8e0><svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-072de8e0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-072de8e0></path></svg></div><p class="text-gray-600 font-medium" data-v-072de8e0>Todo al d√≠a</p><p class="text-sm text-gray-400 mt-1" data-v-072de8e0>No hay recordatorios pendientes</p>',3)])])):(s(),n("div",Jo,[(s(!0),n(A,null,I(r(xe),(i,z)=>(s(),X(B,{key:i.id||z,id:i.id,tipo:i.tipo,mensaje:i.mensaje,paciente:i.paciente,fecha:i.fecha,hora:i.hora,urgente:i.urgente,accion:i.accion,onAccion:je},null,8,["id","tipo","mensaje","paciente","fecha","hora","urgente","accion"]))),128)),r(J).length>4?(s(),n("button",{key:0,onClick:t[2]||(t[2]=i=>p.value=!r(p)),class:"w-full py-2 text-sm font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors"},d(r(p)?"Mostrar menos":`Ver ${r(J).length-4} m√°s`),1)):b("",!0)]))])])]),e("div",Yo,[e("section",Go,[t[22]||(t[22]=F('<div class="flex items-center gap-3 px-6 py-4 border-b border-gray-200" data-v-072de8e0><div class="w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center" data-v-072de8e0><svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-072de8e0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-072de8e0></path></svg></div><h2 class="text-lg font-semibold text-gray-900" data-v-072de8e0>Anal√≠tica del Profesional</h2></div>',1)),e("div",Qo,[e("div",Wo,[H(_,{value:r(m),label:"Pacientes activos","icon-type":"users"},null,8,["value"]),H(_,{value:r(M),label:"Sesiones este mes","icon-type":"calendar"},null,8,["value"]),H(_,{value:`${r(E)}%`,label:"Asistencia promedio","icon-type":"check"},null,8,["value"]),H(_,{value:`${Me(r(R))}‚Ç¨`,label:"Ingresos este mes",sublabel:`${r(K)} ${r(K)===1?"pago":"pagos"}`,"icon-type":"euro",highlight:!0,to:"/terapeuta/sesiones"},null,8,["value","sublabel"])])])])])]),H(L,{"is-open":r(V),"cita-id":r(O),onClose:ke,onCitaActualizada:Y,onActualizado:Y},null,8,["is-open","cita-id"])])}}}),hs=de(Xo,[["__scopeId","data-v-072de8e0"]]);export{hs as default};
