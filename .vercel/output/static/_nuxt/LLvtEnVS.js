import{_ as De}from"./CjCv-3zV.js";import{r as x,E as re,c as r,o as i,a as e,h as g,d as $,k as a,t as o,j as Ae,v as Ee,B as ae,i as oe,l as Pe,G as je,e as Te,ag as Ne,L as ze,m as Be,M as Me,s as b,g as qe,b as _,w,F as G,x as L,y as ne,z as k}from"#entry";import{_ as ie}from"./DlAUqK2U.js";import{_ as Ie}from"./ML1yDnzB.js";import{M as Re}from"./Iid-AZse.js";import{u as Fe}from"./CPLUyJxJ.js";import"./Bi0YyG7H.js";import"./mZ3toP8Y.js";import"./DRclOuRO.js";import"./B5My0XuL.js";import"./G1mM6o1b.js";import"./BreoAuwB.js";import"./Byc3y-S3.js";import"./CQZt9cKZ.js";import"./BaRJRhc1.js";import"./DWNj0d99.js";import"./Dyh9f5zH.js";const Ge={class:"bg-white rounded-xl shadow-sm border border-[#EAD5D3]/40 p-6"},Le={class:"flex items-center justify-between mb-4"},Ve={key:0,class:"min-h-[200px]"},Ue={key:0,class:"prose prose-sm max-w-none text-cafe/80 whitespace-pre-wrap"},Oe={key:1,class:"text-center py-8"},He={key:1},Ke=["onKeydown"],We={class:"mt-2 flex items-center justify-between text-xs text-cafe/60"},Qe={key:0},Je={class:"mt-4 flex items-center gap-3"},Xe=["disabled"],Ye={key:0},Ze={key:1},et=["disabled"],tt={key:2,class:"mt-4 pt-4 border-t border-gray-100"},st={class:"text-xs text-cafe/50"},at={__name:"NotasPrivadas",props:{pacienteId:{type:String,required:!0},contenido:{type:String,default:""},ultimaActualizacion:{type:String,default:null}},emits:["guardar","actualizar"],setup(P,{emit:B}){const j=P,C=B,v=x(!1),S=x(!1),m=x(j.contenido),A=x(j.contenido),D=x(null);re(()=>j.contenido,f=>{v.value||(m.value=f,A.value=f)});const d=()=>{v.value=!0,je(()=>{D.value?.focus()})},p=()=>{m.value=A.value,v.value=!1},h=async()=>{if(!S.value){S.value=!0;try{await C("guardar",{pacienteId:j.pacienteId,contenido:m.value}),A.value=m.value,v.value=!1;const f=event?.target;f&&(f.textContent="‚úì Guardado",setTimeout(()=>{f.textContent="üíæ Guardar cambios"},2e3))}catch(f){console.error("Error al guardar notas:",f),alert("Hubo un error al guardar las notas. Por favor, int√©ntalo de nuevo.")}finally{S.value=!1}}},T=f=>f?new Date(f).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return(f,c)=>(i(),r("div",Ge,[e("div",Le,[c[1]||(c[1]=e("h3",{class:"font-serif text-lg font-semibold text-cafe flex items-center gap-2"},[e("span",{class:"text-xl"},"üìù"),$(" Notas Cl√≠nicas Privadas ")],-1)),a(v)?g("",!0):(i(),r("button",{key:0,onClick:d,class:"px-3 py-1.5 text-sm bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors"}," ‚úèÔ∏è Editar "))]),c[5]||(c[5]=e("div",{class:"mb-4 p-3 bg-rosa/20 border border-rosa rounded-lg"},[e("p",{class:"text-xs text-cafe/70 flex items-start gap-2"},[e("span",{class:"text-terracota"},"üîí"),e("span",null," Esta informaci√≥n es estrictamente confidencial y solo visible para ti como terapeuta. Cumple con los est√°ndares de protecci√≥n de datos cl√≠nicos. ")])],-1)),a(v)?(i(),r("div",He,[Ae(e("textarea",{ref_key:"textareaRef",ref:D,"onUpdate:modelValue":c[0]||(c[0]=M=>Pe(m)?m.value=M:null),placeholder:`Anota observaciones, reflexiones o aspectos a seguir trabajando...

‚Ä¢ Progreso observado en la sesi√≥n
‚Ä¢ Temas pendientes de abordar
‚Ä¢ Estrategias que funcionan
‚Ä¢ Aspectos que requieren atenci√≥n`,class:"w-full min-h-[300px] px-4 py-3 bg-base-bg rounded-lg border border-terracota/30 focus:border-terracota focus:outline-none focus:ring-2 focus:ring-terracota/20 transition-all text-cafe resize-y",onKeydown:[ae(oe(h,["meta"]),["enter"]),ae(oe(h,["ctrl"]),["enter"])]},null,40,Ke),[[Ee,a(m)]]),e("div",We,[c[4]||(c[4]=e("span",null," üí° Presiona Cmd/Ctrl + Enter para guardar r√°pidamente ",-1)),P.ultimaActualizacion?(i(),r("span",Qe," √öltima actualizaci√≥n: "+o(T(P.ultimaActualizacion)),1)):g("",!0)]),e("div",Je,[e("button",{onClick:h,disabled:a(S),class:"px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[a(S)?(i(),r("span",Ye,"‚è≥")):(i(),r("span",Ze,"üíæ")),e("span",null,o(a(S)?"Guardando...":"Guardar cambios"),1)],8,Xe),e("button",{onClick:p,disabled:a(S),class:"px-4 py-2 bg-white border border-cafe/20 text-cafe rounded-lg hover:bg-gray-50 transition-colors"}," Cancelar ",8,et)])])):(i(),r("div",Ve,[a(m)?(i(),r("div",Ue,o(a(m)),1)):(i(),r("div",Oe,[c[2]||(c[2]=e("span",{class:"text-5xl mb-3 block opacity-40"},"üìã",-1)),c[3]||(c[3]=e("p",{class:"text-cafe/50 italic"}," A√∫n no hay notas registradas para este paciente ",-1)),e("button",{onClick:d,class:"mt-4 px-4 py-2 text-sm bg-terracota/10 text-terracota rounded-lg hover:bg-terracota/20 transition-colors"}," A√±adir primera nota ")]))])),!a(v)&&P.ultimaActualizacion?(i(),r("div",tt,[e("p",st," √öltima modificaci√≥n: "+o(T(P.ultimaActualizacion)),1)])):g("",!0)]))}},ot=ie(at,[["__scopeId","data-v-a439e157"]]),nt={class:"pb-20"},rt={key:0,class:"text-center py-12"},it={key:1,class:"text-center py-12"},lt={class:"text-cafe/60 mb-4"},dt={key:2},ct={class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6"},ut={class:"flex items-start gap-4"},pt={class:"text-3xl font-serif font-bold text-cafe mb-2"},mt={class:"flex flex-wrap items-center gap-3 mb-3"},xt={class:"text-cafe/60 text-sm flex items-center gap-1"},ft={class:"space-y-1 text-sm"},bt={key:0,class:"text-cafe/70 flex items-center gap-2"},gt={key:1,class:"text-cafe/70 flex items-center gap-2"},_t={key:2,class:"text-cafe/70 flex items-center gap-2"},vt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},yt={class:"space-y-3"},ht={class:"flex items-center justify-between p-3 bg-base-bg rounded-lg"},wt={class:"font-bold text-cafe text-lg"},kt={class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},Ct={class:"font-bold text-green-600 text-lg"},St={class:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg"},$t={class:"font-bold text-yellow-600 text-lg"},Dt={class:"flex items-center justify-between p-3 bg-blue-50 rounded-lg"},At={class:"font-bold text-blue-600 text-lg"},Et={key:0,class:"space-y-4"},Pt={class:"p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg"},jt={class:"text-sm font-bold text-purple-900"},Tt={class:"text-center p-4 bg-gradient-to-br from-terracota/10 to-rosa/20 rounded-xl"},Nt={class:"text-4xl font-bold text-terracota mb-1"},zt={class:"text-sm text-cafe/70"},Bt={class:"space-y-2"},Mt={class:"flex justify-between text-sm"},qt={class:"font-medium text-cafe"},It={class:"w-full bg-gray-200 rounded-full h-2.5"},Rt={class:"pt-3 border-t space-y-2 text-sm"},Ft={class:"flex justify-between"},Gt={class:"font-medium text-cafe"},Lt={class:"flex justify-between"},Vt={class:"font-medium text-cafe"},Ut={class:"flex justify-between"},Ot={class:"font-medium text-cafe"},Ht={class:"flex justify-between"},Kt={key:1,class:"text-center py-8"},Wt={class:"text-xs text-cafe/40 mb-4"},Qt={class:"space-y-3"},Jt={class:"p-3 bg-base-bg rounded-lg"},Xt={class:"text-sm font-medium text-cafe"},Yt={class:"p-3 bg-base-bg rounded-lg"},Zt={class:"text-sm font-medium text-cafe"},es={key:0,class:"p-4 bg-gradient-to-br from-terracota/20 to-rosa/20 border-2 border-terracota/40 rounded-lg"},ts={class:"text-base font-bold text-cafe mb-3"},ss={class:"flex items-center gap-2 flex-wrap"},as={class:"text-xs px-3 py-1.5 bg-white border border-terracota/30 rounded-full font-medium flex items-center gap-1"},os={key:0,class:"mt-3 pt-3 border-t border-terracota/20"},ns={class:"text-xs text-cafe"},rs={key:1,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},is={class:"p-3 bg-base-bg rounded-lg"},ls={class:"text-sm font-medium text-cafe"},ds={class:"mb-6"},cs={class:"border-b border-gray-200"},us={class:"-mb-px flex space-x-8 overflow-x-auto"},ps=["onClick"],ms={class:"mr-2"},xs={key:0,class:"ml-2 px-2 py-0.5 text-xs rounded-full bg-terracota text-white"},fs={class:"space-y-6"},bs={key:0},gs={key:0,class:"space-y-3"},_s={class:"flex items-start justify-between gap-4"},vs={class:"flex-1"},ys={class:"flex items-center gap-2 mb-2"},hs={class:"text-lg font-semibold text-cafe"},ws={class:"text-base font-medium text-terracota"},ks={class:"flex flex-wrap items-center gap-2 mb-2"},Cs={key:0,class:"text-sm text-cafe/60 mt-2"},Ss=["onClick"],$s={key:1,class:"text-center py-12"},Ds={key:1},As={key:0,class:"space-y-3"},Es={class:"flex items-start justify-between gap-4"},Ps={class:"flex-1"},js={class:"flex items-center gap-2 mb-2"},Ts={class:"text-base font-semibold text-cafe"},Ns={class:"text-sm text-cafe/60"},zs={class:"flex items-center gap-2 mb-2"},Bs={key:0,class:"text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100"},Ms={key:1,class:"text-sm text-cafe/60 mt-2"},qs={key:1,class:"text-center py-12"},Is={key:2},Rs={key:0,class:"space-y-3"},Fs={class:"flex items-start justify-between gap-4"},Gs={class:"flex-1"},Ls={class:"flex items-center gap-2 mb-2"},Vs={class:"text-base font-semibold text-cafe"},Us={class:"text-base font-medium text-terracota"},Os={class:"flex items-center gap-2 mb-2"},Hs={key:0,class:"text-sm text-cafe/60 mt-2"},Ks={class:"flex gap-2"},Ws=["onClick"],Qs=["onClick"],Js={key:1,class:"text-center py-12"},Xs={key:3},Ys={key:0,class:"space-y-3"},Zs={class:"flex items-start justify-between gap-4"},ea={class:"flex-1"},ta={class:"flex items-center gap-2 mb-2"},sa={class:"text-base font-semibold text-cafe"},aa={class:"text-sm text-cafe/60"},oa={class:"flex flex-wrap items-center gap-2"},na={key:1,class:"text-center py-12"},ra={class:"mt-6"},ia=Te({__name:"[id]",setup(P){const B=Ne(),j=ze(),C=Be(),v=Me(),{getCitas:S}=Fe(),m=b(()=>B.params.id),A=x(!0),D=x(null),d=x(null),p=x(null),h=x([]),T=x(""),f=x(null),c=x("proximas"),M=x(!1),H=x(null),K=x(!1),W=x(null),le=b(()=>[{id:"proximas",nombre:"Pr√≥ximas Sesiones",icono:"üìÖ",badge:E.value.proximas||null},{id:"completadas",nombre:"Completadas",icono:"‚úÖ",badge:E.value.completadas||null},{id:"pendientes",nombre:"Pendientes",icono:"‚è≥",badge:E.value.pendientes||null},{id:"anteriores",nombre:"Historial",icono:"üìö",badge:null}]),V=async()=>{A.value=!0,D.value=null;try{if(!v.value){D.value="Usuario no autenticado";return}const{data:s,error:t}=await C.from("pacientes").select("*").eq("id",m.value).single();if(t)throw t;const l=s.nombre||s.email||"Sin nombre";d.value={...s,nombre_completo:l,email:s.email||"",telefono:s.telefono||""};const u=await S();h.value=u.filter(F=>F.paciente_id===m.value),await de(),await ce()}catch(s){console.error("Error al cargar paciente:",s),D.value=s.message||"Error desconocido"}finally{A.value=!1}},de=async()=>{try{const{data:s,error:t}=await C.from("bonos").select("*").eq("paciente_id",m.value).eq("estado","activo").maybeSingle();if(t){console.warn("[Bonos] Error en consulta:",t.message);return}if(s){const l=s.sesiones_usadas||0,u=s.sesiones_totales||0,F=u-l;p.value={...s,sesiones_disponibles:F,porcentaje_uso:u>0?Math.round(l/u*100):0}}}catch(s){console.warn("[Bonos] Error inesperado:",s)}},ce=async()=>{try{const{data:s}=await C.from("notas_terapeuticas").select("contenido, updated_at").eq("paciente_id",m.value).eq("terapeuta_id",v.value?.id).order("updated_at",{ascending:!1}).limit(1).maybeSingle();s&&(T.value=s.contenido||"",f.value=s.updated_at)}catch(s){console.error("Error al cargar notas:",s)}},ue=async({pacienteId:s,contenido:t})=>{try{const{data:l}=await C.from("notas_terapeuticas").select("id").eq("paciente_id",s).eq("terapeuta_id",v.value?.id).maybeSingle();l?await C.from("notas_terapeuticas").update({contenido:t,updated_at:new Date().toISOString()}).eq("id",l.id):await C.from("notas_terapeuticas").insert({paciente_id:s,terapeuta_id:v.value?.id,contenido:t}),T.value=t,f.value=new Date().toISOString()}catch(l){throw console.error("Error al guardar notas:",l),l}},q=b(()=>{const s=new Date;return h.value.filter(t=>["pendiente","confirmada"].includes(t.estado)&&new Date(t.fecha_cita)>=s).sort((t,l)=>new Date(t.fecha_cita).getTime()-new Date(l.fecha_cita).getTime())}),I=b(()=>h.value.filter(s=>s.estado==="realizada").sort((s,t)=>new Date(t.fecha_cita).getTime()-new Date(s.fecha_cita).getTime())),Q=b(()=>h.value.filter(s=>s.estado==="pendiente").sort((s,t)=>new Date(s.fecha_cita).getTime()-new Date(t.fecha_cita).getTime())),Y=b(()=>h.value.sort((s,t)=>new Date(t.fecha_cita).getTime()-new Date(s.fecha_cita).getTime())),E=b(()=>({total:h.value.length,completadas:I.value.length,pendientes:Q.value.length,proximas:q.value.length})),pe=b(()=>{const s=I.value;return s.length>0?s[s.length-1].fecha_cita:null}),me=b(()=>{const s=I.value;return s.length>0?s[0].fecha_cita:null}),y=b(()=>q.value.length>0?q.value[0]:null),N=b(()=>d.value?.nombre_completo||"Sin nombre"),xe=b(()=>{if(!N.value)return"?";const s=N.value.split(" ");return s.length>=2&&s[0]&&s[1]?`${s[0][0]}${s[1][0]}`.toUpperCase():N.value.substring(0,2).toUpperCase()}),fe=b(()=>{const s=["#D8AFA0","#C89B8A","#B7C6B0","#A8C5B5","#D4A5A5","#C4B5A0"],t=m.value.charCodeAt(0)%s.length;return s[t]}),be=b(()=>d.value?d.value.activo?d.value.metadata?.en_pausa?"En pausa":"En proceso":"Finalizado":""),ge=b(()=>d.value?d.value.activo?d.value.metadata?.en_pausa?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700":"bg-gray-100 text-gray-600":""),J=b(()=>d.value?.tipo_bono?{a_demanda:"A Demanda (1 sesi√≥n)",quincenal:"Quincenal (2 sesiones/mes)",semanal:"Semanal (4 sesiones/mes)"}[d.value.tipo_bono]||d.value.tipo_bono:""),z=s=>{if(!s)return"";try{return new Date(s+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}catch{return s}},_e=(s,t)=>{if(!s)return"";try{return new Date(s+"T"+(t||"00:00:00")).toLocaleString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return s}},Z=s=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(s||0),ve=s=>{if(!s)return"";const t=new Date(s),u=Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24));return u<30?`${u} d√≠as`:u<365?`${Math.floor(u/30)} meses`:`${Math.floor(u/365)} a√±os`},R=s=>({presencial:"üè•",online:"üíª",telefonica:"üìû"})[s]||"üìã",U=s=>({presencial:"bg-green-100 text-green-700",online:"bg-terracota/20 text-terracota",telefonica:"bg-blue-100 text-blue-700"})[s]||"bg-gray-100 text-gray-700",ee=s=>({pendiente:"bg-yellow-100 text-yellow-700",confirmada:"bg-green-100 text-green-700",realizada:"bg-blue-100 text-blue-700",cancelada:"bg-red-100 text-red-700"})[s]||"bg-gray-100 text-gray-700",te=()=>{j.push(`/terapeuta/pacientes/${m.value}/bonos`)},ye=()=>{const s=d.value?.telefono;if(!s){alert("Este paciente no tiene tel√©fono registrado");return}const t=s.replace(/\D/g,""),l=encodeURIComponent(`Hola ${N.value}, ¬øc√≥mo est√°s?`),u=`https://wa.me/${t}?text=${l}`;window.open(u,"_blank")},O=()=>{d.value&&(H.value={id:d.value.id,nombre:N.value,email:d.value.email,telefono:d.value.telefono,frecuencia:d.value.frecuencia||"semanal",area_acompanamiento:d.value.area_de_acompanamiento},M.value=!0)},he=()=>{M.value=!1,H.value=null},we=()=>{V()},se=s=>{W.value=s,K.value=!0},ke=()=>{K.value=!1,W.value=null},Ce=async s=>{try{const{data:t,error:l}=await C.rpc("confirmar_cita_y_descontar_bono",{p_cita_id:s});if(l)throw l;if(!t.success){console.error("Error en la confirmaci√≥n:",t.error),alert(t.error||"Error al confirmar la cita");return}let u=`Cita confirmada con ${t.paciente_nombre||"paciente"}`;t.bono_id&&(u+=`
Sesiones restantes en bono: ${t.sesiones_restantes}`,t.bono_agotado?u+=`
‚ö†Ô∏è BONO AGOTADO`:t.sesiones_restantes<=2&&(u+=`
‚ö†Ô∏è Pocas sesiones restantes`)),alert(u),await V()}catch(t){console.error("Error al confirmar cita:",t),alert("Error al confirmar la cita: "+t.message)}},Se=()=>{alert("Funci√≥n de editar en desarrollo")};return qe(()=>{V()}),re(()=>B.params.id,()=>{B.params.id&&V()}),(s,t)=>{const l=De,u=ot,F=Ie,$e=Re;return i(),r("div",nt,[e("button",{onClick:t[0]||(t[0]=n=>s.$router.push("/terapeuta/pacientes")),class:"mb-6 flex items-center gap-2 text-cafe hover:text-terracota transition-colors"},[...t[2]||(t[2]=[e("span",null,"‚Üê",-1),e("span",null,"Volver a lista de pacientes",-1)])]),a(A)?(i(),r("div",rt,[...t[3]||(t[3]=[e("div",{class:"animate-spin w-12 h-12 border-4 border-terracota border-t-transparent rounded-full mx-auto mb-4"},null,-1),e("p",{class:"text-cafe/60"},"Cargando informaci√≥n del paciente...",-1)])])):a(D)?(i(),r("div",it,[_(l,null,{default:w(()=>[t[4]||(t[4]=e("span",{class:"text-6xl mb-4 block"},"‚ùå",-1)),t[5]||(t[5]=e("h3",{class:"text-xl font-serif font-semibold text-cafe mb-2"}," No se pudo cargar la informaci√≥n ",-1)),e("p",lt,o(a(D)),1),e("button",{onClick:t[1]||(t[1]=n=>s.$router.push("/terapeuta/pacientes")),class:"px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors"}," Volver a la lista ")]),_:1})])):a(d)?(i(),r("div",dt,[_(l,{class:"mb-6"},{default:w(()=>[e("div",ct,[e("div",ut,[e("div",{class:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0",style:ne({backgroundColor:a(fe)})},o(a(xe)),5),e("div",null,[e("h1",pt,o(a(N)),1),e("div",mt,[e("span",{class:k(["px-3 py-1 text-sm font-medium rounded-full",a(ge)])},o(a(be)),3),e("span",xt,[t[6]||(t[6]=e("span",null,"üìß",-1)),e("span",null,o(a(d).email),1)])]),e("div",ft,[a(d).telefono?(i(),r("div",bt,[t[7]||(t[7]=e("span",null,"üì±",-1)),e("span",null,o(a(d).telefono),1)])):g("",!0),a(d).area_de_acompanamiento?(i(),r("div",gt,[t[9]||(t[9]=e("span",null,"üéØ",-1)),e("span",null,[t[8]||(t[8]=e("strong",null,"√Årea:",-1)),$(" "+o(a(d).area_de_acompanamiento),1)])])):g("",!0),a(d).tipo_bono?(i(),r("div",_t,[t[11]||(t[11]=e("span",null,"üé´",-1)),e("span",null,[t[10]||(t[10]=e("strong",null,"Tipo de Bono:",-1)),$(" "+o(a(J)),1)])])):g("",!0)])])]),e("div",{class:"flex flex-wrap gap-2"},[e("button",{onClick:te,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2"},[...t[12]||(t[12]=[e("span",null,"üé´",-1),e("span",null,"Gestionar Bonos",-1)])]),e("button",{onClick:ye,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2"},[...t[13]||(t[13]=[e("span",null,"üí¨",-1),e("span",null,"WhatsApp",-1)])]),e("button",{onClick:O,class:"px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors text-sm flex items-center gap-2"},[...t[14]||(t[14]=[e("span",null,"üìÖ",-1),e("span",null,"Agendar sesi√≥n",-1)])]),e("button",{onClick:Se,class:"px-4 py-2 bg-white border border-terracota/30 text-terracota rounded-lg hover:bg-terracota/5 transition-colors text-sm flex items-center gap-2"},[...t[15]||(t[15]=[e("span",null,"‚úèÔ∏è",-1),e("span",null,"Editar",-1)])])])])]),_:1}),e("div",vt,[_(l,null,{default:w(()=>[t[20]||(t[20]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üìä"),$(" Resumen ")],-1)),e("div",yt,[e("div",ht,[t[16]||(t[16]=e("span",{class:"text-sm text-cafe/70"},"Total sesiones",-1)),e("span",wt,o(a(E).total),1)]),e("div",kt,[t[17]||(t[17]=e("span",{class:"text-sm text-cafe/70"},"Completadas",-1)),e("span",Ct,o(a(E).completadas),1)]),e("div",St,[t[18]||(t[18]=e("span",{class:"text-sm text-cafe/70"},"Pendientes",-1)),e("span",$t,o(a(E).pendientes),1)]),e("div",Dt,[t[19]||(t[19]=e("span",{class:"text-sm text-cafe/70"},"Pr√≥ximas",-1)),e("span",At,o(a(E).proximas),1)])])]),_:1}),_(l,null,{default:w(()=>[t[30]||(t[30]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üé´"),$(" Bono Contratado ")],-1)),a(p)?(i(),r("div",Et,[e("div",Pt,[t[21]||(t[21]=e("div",{class:"text-xs text-purple-700 font-medium mb-1"},"Tipo de Bono",-1)),e("div",jt,o(a(J)),1)]),e("div",Tt,[e("div",Nt,o(a(p).sesiones_disponibles),1),e("div",zt," de "+o(a(p).sesiones_totales)+" sesiones disponibles ",1)]),e("div",Bt,[e("div",Mt,[t[22]||(t[22]=e("span",{class:"text-cafe/70"},"Progreso",-1)),e("span",qt,o(a(p).porcentaje_uso)+"%",1)]),e("div",It,[e("div",{class:"h-2.5 rounded-full bg-gradient-to-r from-terracota to-rosa transition-all",style:ne({width:`${a(p).porcentaje_uso}%`})},null,4)])]),e("div",Rt,[e("div",Ft,[t[23]||(t[23]=e("span",{class:"text-cafe/70"},"Sesiones usadas:",-1)),e("span",Gt,o(a(p).sesiones_usadas),1)]),e("div",Lt,[t[24]||(t[24]=e("span",{class:"text-cafe/70"},"Monto total:",-1)),e("span",Vt,o(Z(a(p).monto_total||a(p).precio)),1)]),e("div",Ut,[t[25]||(t[25]=e("span",{class:"text-cafe/70"},"Precio por sesi√≥n:",-1)),e("span",Ot,o(Z((a(p).monto_total||a(p).precio)/a(p).sesiones_totales)),1)]),e("div",Ht,[t[26]||(t[26]=e("span",{class:"text-cafe/70"},"Estado:",-1)),e("span",{class:k(["font-medium capitalize",{"text-green-600":a(p).estado==="activo","text-yellow-600":a(p).estado==="pendiente","text-gray-600":a(p).estado==="vencido"}])},o(a(p).estado),3)])])])):(i(),r("div",Kt,[t[28]||(t[28]=e("span",{class:"text-5xl mb-3 block opacity-40"},"üé´",-1)),t[29]||(t[29]=e("p",{class:"text-sm text-cafe/50 mb-2"},"No hay bono activo",-1)),e("p",Wt,[t[27]||(t[27]=$(" Tipo de bono del paciente: ",-1)),e("strong",null,o(a(J)||"No definido"),1)]),e("button",{onClick:te,class:"mt-2 text-sm text-terracota hover:text-cafe transition-colors font-medium"}," Gestionar bonos ‚Üí ")]))]),_:1}),_(l,null,{default:w(()=>[t[39]||(t[39]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üìã"),$(" Datos del Proceso ")],-1)),e("div",Qt,[e("div",Jt,[t[31]||(t[31]=e("div",{class:"text-xs text-cafe/60 mb-1"},"Primera sesi√≥n",-1)),e("div",Xt,o(z(a(pe))||"Sin registro"),1)]),e("div",Yt,[t[32]||(t[32]=e("div",{class:"text-xs text-cafe/60 mb-1"},"√öltima sesi√≥n",-1)),e("div",Zt,o(z(a(me))||"Sin registro"),1)]),a(y)?(i(),r("div",es,[t[34]||(t[34]=e("div",{class:"text-xs font-medium text-terracota mb-2 flex items-center gap-1"},[e("span",null,"üìÖ"),e("span",null,"Pr√≥xima sesi√≥n agendada")],-1)),e("div",ts,o(_e(a(y).fecha_cita,a(y).hora_inicio)),1),e("div",ss,[e("span",as,o(R(a(y).modalidad))+" "+o(a(y).modalidad),1),e("span",{class:k(["text-xs px-3 py-1.5 bg-white border border-terracota/30 rounded-full capitalize font-medium",{"text-green-600 border-green-300":a(y).estado==="confirmada","text-yellow-600 border-yellow-300":a(y).estado==="pendiente","text-blue-600 border-blue-300":a(y).estado==="programada"}])},o(a(y).estado),3)]),a(y).notas?(i(),r("div",os,[t[33]||(t[33]=e("div",{class:"text-xs text-cafe/70 mb-1"},"Notas:",-1)),e("div",ns,o(a(y).notas),1)])):g("",!0)])):(i(),r("div",rs,[e("div",{class:"text-center"},[t[35]||(t[35]=e("span",{class:"text-3xl mb-2 block"},"‚è∞",-1)),t[36]||(t[36]=e("div",{class:"text-sm font-medium text-yellow-800 mb-1"},"No hay sesi√≥n agendada",-1)),t[37]||(t[37]=e("div",{class:"text-xs text-yellow-700"},"Recuerda agendar la pr√≥xima sesi√≥n",-1)),e("button",{onClick:O,class:"mt-3 px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors text-xs font-medium"}," Agendar ahora ")])])),e("div",is,[t[38]||(t[38]=e("div",{class:"text-xs text-cafe/60 mb-1"},"En proceso desde",-1)),e("div",ls,o(ve(a(d).created_at)),1)])])]),_:1})]),e("div",ds,[e("div",cs,[e("nav",us,[(i(!0),r(G,null,L(a(le),n=>(i(),r("button",{key:n.id,onClick:X=>c.value=n.id,class:k(["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors",a(c)===n.id?"border-terracota text-terracota":"border-transparent text-cafe/60 hover:text-cafe hover:border-gray-300"])},[e("span",ms,o(n.icono),1),e("span",null,o(n.nombre),1),n.badge?(i(),r("span",xs,o(n.badge),1)):g("",!0)],10,ps))),128))])])]),e("div",fs,[a(c)==="proximas"?(i(),r("div",bs,[_(l,null,{default:w(()=>[e("div",{class:"flex items-center justify-between mb-4"},[t[40]||(t[40]=e("h3",{class:"text-lg font-serif font-semibold text-cafe"},"Pr√≥ximas Sesiones Agendadas",-1)),e("button",{onClick:O,class:"text-sm text-terracota hover:text-cafe transition-colors"}," + Nueva sesi√≥n ")]),a(q).length>0?(i(),r("div",gs,[(i(!0),r(G,null,L(a(q),n=>(i(),r("div",{key:n.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[e("div",_s,[e("div",vs,[e("div",ys,[e("span",hs,o(z(n.fecha_cita)),1),e("span",ws,o(n.hora_inicio)+" - "+o(n.hora_fin),1)]),e("div",ks,[e("span",{class:k(["px-2 py-0.5 text-xs rounded-full",U(n.modalidad)])},o(R(n.modalidad))+" "+o(n.modalidad),3),e("span",{class:k(["px-2 py-0.5 text-xs rounded-full capitalize",ee(n.estado)])},o(n.estado),3)]),n.observaciones?(i(),r("p",Cs,o(n.observaciones),1)):g("",!0)]),e("button",{onClick:X=>se(n.id),class:"px-3 py-1.5 text-sm bg-white border border-terracota/30 text-terracota hover:bg-terracota hover:text-white rounded-lg transition-colors"}," Ver detalles ",8,Ss)])]))),128))])):(i(),r("div",$s,[t[41]||(t[41]=e("span",{class:"text-6xl mb-3 block opacity-40"},"üìÖ",-1)),t[42]||(t[42]=e("p",{class:"text-cafe/60 mb-4"},"No hay sesiones pr√≥ximas agendadas",-1)),e("button",{onClick:O,class:"px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors"}," Agendar primera sesi√≥n ")]))]),_:1})])):g("",!0),a(c)==="completadas"?(i(),r("div",Ds,[_(l,null,{default:w(()=>[t[46]||(t[46]=e("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Historial de Sesiones Completadas",-1)),a(I).length>0?(i(),r("div",As,[(i(!0),r(G,null,L(a(I),n=>(i(),r("div",{key:n.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[e("div",Es,[e("div",Ps,[e("div",js,[e("span",Ts,o(z(n.fecha_cita)),1),e("span",Ns,o(n.hora_inicio)+" - "+o(n.hora_fin),1),t[43]||(t[43]=e("span",{class:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700"}," ‚úì Realizada ",-1))]),e("div",zs,[e("span",{class:k(["px-2 py-0.5 text-xs rounded-full",U(n.modalidad)])},o(R(n.modalidad))+" "+o(n.modalidad),3)]),n.notas_terapeuta?(i(),r("p",Bs,[t[44]||(t[44]=e("strong",{class:"text-cafe"},"Notas:",-1)),$(" "+o(n.notas_terapeuta),1)])):n.observaciones?(i(),r("p",Ms,o(n.observaciones),1)):g("",!0)])])]))),128))])):(i(),r("div",qs,[...t[45]||(t[45]=[e("span",{class:"text-6xl mb-3 block opacity-40"},"üìù",-1),e("p",{class:"text-cafe/60"},"A√∫n no hay sesiones completadas",-1)])]))]),_:1})])):g("",!0),a(c)==="pendientes"?(i(),r("div",Is,[_(l,null,{default:w(()=>[t[50]||(t[50]=e("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Sesiones Pendientes de Confirmaci√≥n",-1)),a(Q).length>0?(i(),r("div",Rs,[(i(!0),r(G,null,L(a(Q),n=>(i(),r("div",{key:n.id,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[e("div",Fs,[e("div",Gs,[e("div",Ls,[t[47]||(t[47]=e("span",{class:"text-lg"},"‚è≥",-1)),e("span",Vs,o(z(n.fecha_cita)),1),e("span",Us,o(n.hora_inicio)+" - "+o(n.hora_fin),1)]),e("div",Os,[e("span",{class:k(["px-2 py-0.5 text-xs rounded-full",U(n.modalidad)])},o(R(n.modalidad))+" "+o(n.modalidad),3),t[48]||(t[48]=e("span",{class:"px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700"}," Pendiente de confirmar ",-1))]),n.observaciones?(i(),r("p",Hs,o(n.observaciones),1)):g("",!0)]),e("div",Ks,[e("button",{onClick:X=>Ce(n.id),class:"px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," ‚úì Confirmar ",8,Ws),e("button",{onClick:X=>se(n.id),class:"px-3 py-1.5 text-sm bg-white border border-terracota/30 text-terracota hover:bg-terracota hover:text-white rounded-lg transition-colors"}," Ver ",8,Qs)])])]))),128))])):(i(),r("div",Js,[...t[49]||(t[49]=[e("span",{class:"text-6xl mb-3 block opacity-40"},"‚úÖ",-1),e("p",{class:"text-cafe/60"},"No hay sesiones pendientes de confirmaci√≥n",-1)])]))]),_:1})])):g("",!0),a(c)==="anteriores"?(i(),r("div",Xs,[_(l,null,{default:w(()=>[t[52]||(t[52]=e("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"}," Historial Completo de Sesiones ",-1)),a(Y).length>0?(i(),r("div",Ys,[(i(!0),r(G,null,L(a(Y),n=>(i(),r("div",{key:n.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[e("div",Zs,[e("div",ea,[e("div",ta,[e("span",sa,o(z(n.fecha_cita)),1),e("span",aa,o(n.hora_inicio)+" - "+o(n.hora_fin),1)]),e("div",oa,[e("span",{class:k(["px-2 py-0.5 text-xs rounded-full",U(n.modalidad)])},o(R(n.modalidad))+" "+o(n.modalidad),3),e("span",{class:k(["px-2 py-0.5 text-xs rounded-full capitalize",ee(n.estado)])},o(n.estado),3)])])])]))),128))])):(i(),r("div",na,[...t[51]||(t[51]=[e("span",{class:"text-6xl mb-3 block opacity-40"},"üìö",-1),e("p",{class:"text-cafe/60"},"No hay sesiones registradas",-1)])]))]),_:1})])):g("",!0)]),e("div",ra,[_(l,null,{default:w(()=>[t[53]||(t[53]=e("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[e("span",{class:"text-2xl"},"üìù"),$(" Notas Cl√≠nicas Privadas ")],-1)),_(u,{"paciente-id":a(m),contenido:a(T),"ultima-actualizacion":a(f)||void 0,onGuardar:ue},null,8,["paciente-id","contenido","ultima-actualizacion"])]),_:1})])])):g("",!0),_(F,{mostrar:a(M),"paciente-preseleccionado":a(H),onCerrar:he,onCitaCreada:we},null,8,["mostrar","paciente-preseleccionado"]),_($e,{"is-open":a(K),"cita-id":a(W),onClose:ke},null,8,["is-open","cita-id"])])}}}),Sa=ie(ia,[["__scopeId","data-v-cc632d3a"]]);export{Sa as default};
