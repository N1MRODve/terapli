import{c as i,o as l,P as ve,n as T,e as X,z as m,a as e,j as b,t as r,k as o,A as se,r as x,I as ne,h as ee,d as E,l as W,m as z,v as J,K,Y as re,F as ae,i as le,p as Y,g as xe,q as fe,s as ye,b as N,w as H,al as we,L as he,J as _e,y as $e}from"#entry";import{u as Z,a as ke}from"./useBonos-BSiCGD07.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as De}from"./ModalNuevoBono-DZsr-zos.js";const Fe={__name:"DashboardCard",props:{customClass:{type:String,default:""}},setup(d){return(_,g)=>(l(),i("div",{class:T(["bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-300",d.customClass])},[ve(_.$slots,"default")],2))}},Ce={class:"relative flex items-start justify-between mb-6"},Be={class:"flex-1"},Pe={class:"flex items-center gap-4 mb-3"},Ae={class:"font-['Elms_Sans'] text-xl font-bold bg-gradient-to-r from-[#5550F2] to-[#027368] bg-clip-text text-transparent"},Me={class:"flex items-center gap-3 flex-wrap"},Ee={key:0,class:"inline-flex items-center px-3 py-1.5 rounded-xl text-xs font-sans font-semibold bg-gradient-to-r from-[#F2B33D]/20 to-[#F2B33D]/10 text-[#F2B33D] border border-[#F2B33D]/30 backdrop-blur-sm shadow-sm"},je={key:1,class:"inline-flex items-center px-3 py-1.5 rounded-xl text-xs font-sans font-semibold bg-gradient-to-r from-[#04BF9D]/20 to-[#027368]/10 text-[#027368] border border-[#04BF9D]/30 backdrop-blur-sm shadow-sm"},Se={class:"flex gap-3"},Te={class:"relative mb-6"},Re={class:"flex items-center justify-between mb-3"},Ve={class:"text-sm font-sans font-semibold bg-gradient-to-r from-[#5550F2] to-[#027368] bg-clip-text text-transparent"},Ne={class:"relative w-full bg-gradient-to-r from-gray-100 to-gray-50 rounded-full h-4 overflow-hidden shadow-inner"},ze={class:"flex justify-between mt-2 text-xs font-sans text-gray-600"},Ue={class:"font-semibold"},Ie={class:"relative grid grid-cols-2 gap-4 mb-6"},qe={class:"p-4 bg-white/70 backdrop-blur-sm rounded-xl border border-white/50 shadow-sm group-hover:shadow-md transition-all duration-300"},Le={class:"text-sm font-sans font-semibold text-gray-800 capitalize"},Oe={class:"p-4 bg-white/70 backdrop-blur-sm rounded-xl border border-white/50 shadow-sm group-hover:shadow-md transition-all duration-300"},Ge={class:"text-sm font-sans font-semibold text-gray-800 capitalize"},He={class:"p-3 bg-white rounded-lg border border-[#5550F2]/20"},Qe={class:"text-sm font-medium text-[#2D3748]"},Je={class:"p-3 bg-white rounded-lg border border-[#5550F2]/20"},Ke={key:0,class:"mb-4 p-3 bg-gradient-to-r from-[#5550F2]/10 to-[#ECC8BA]/10 rounded-lg"},Ye={class:"flex items-center justify-between text-sm"},We={key:0},Xe={class:"font-medium text-[#2D3748] ml-1"},Ze={key:1},eo={key:0,class:"mt-2 text-xs text-center text-[#2D3748]/60"},oo={key:1,class:"flex items-center gap-2 mb-4 p-2 bg-purple-50 border border-purple-200 rounded-lg"},to={key:2,class:"mb-4"},so={class:"text-sm text-[#2D3748]/80 p-2 bg-white rounded-lg border border-[#5550F2]/20"},no={class:"flex gap-2 pt-3 border-t border-[#5550F2]/20"},ro=X({__name:"BonoCard",props:{bono:{}},emits:["renovar","verPagos","editar"],setup(d){const _=d,{getEstadoColor:g,getEstadoTexto:j,calcularPorcentajeUso:L,puedeGestionarBonos:F,puedeConfirmarPagos:C}=Z(),{isCoordinadora:k}=ke(),f=m(()=>({quincenal:"Quincenal",mensual:"Mensual",semestral:"Semestral"})[_.bono.tipo]||_.bono.tipo||"Est√°ndar"),B=m(()=>g(_.bono.estado)),S=m(()=>j(_.bono.estado)),D=m(()=>({pendiente:"‚è≥",activo:"‚úÖ",completado:"‚úîÔ∏è",vencido:"‚ùå",cancelado:"üö´"})[_.bono.estado]||"üìã"),P=m(()=>({pendiente:"border-yellow-300",activo:"border-green-300",completado:"border-gray-300",vencido:"border-red-300",cancelado:"border-gray-400"})[_.bono.estado]||"border-gray-300"),y=m(()=>_.bono.sesiones_restantes??0),w=m(()=>(_.bono.sesiones_totales||0)-y.value),u=m(()=>L(_.bono)),t=m(()=>{const p=u.value;return p>=90?"bg-red-500":p>=70?"bg-orange-500":p>=50?"bg-yellow-500":"bg-gradient-to-r from-[#5550F2] to-[#ECC8BA]"}),h=m(()=>{if(!_.bono.fecha_fin)return null;const p=new Date,a=new Date(_.bono.fecha_fin);return Math.ceil((a.getTime()-p.getTime())/(1e3*60*60*24))}),R=m(()=>_.bono.estado!=="activo"||h.value===null?!1:h.value>=0&&h.value<=7),O=m(()=>_.bono.estado==="activo"&&y.value>0&&y.value<=2),M=m(()=>F.value||C.value),U=m(()=>F.value),Q=m(()=>k.value),V=p=>{if(!p)return"";try{return new Date(p+"T00:00:00").toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"})}catch{return p}},G=p=>p?new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(p):"$ 0";return(p,a)=>(l(),i("div",{class:T(["group bono-card bg-white/90 backdrop-blur-md border-2 rounded-2xl p-6 hover:shadow-xl transition-all duration-500 relative overflow-hidden hover:bg-white/95 hover:scale-[1.02]",[o(P),{"opacity-60":d.bono.estado==="cancelado"}]])},[a[20]||(a[20]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-[#5550F2]/5 via-transparent to-[#04BF9D]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"},null,-1)),a[21]||(a[21]=e("div",{class:"absolute -top-20 -right-20 w-40 h-40 bg-gradient-to-br from-[#F2B33D]/10 to-[#5550F2]/10 rounded-full blur-2xl opacity-0 group-hover:opacity-60 transition-all duration-700"},null,-1)),e("div",Ce,[e("div",Be,[e("div",Pe,[a[5]||(a[5]=e("div",{class:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#5550F2] to-[#027368] shadow-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[e("span",{class:"text-xl"},"üé´")],-1)),e("h3",Ae," Bono "+r(o(f)),1)]),e("div",Me,[e("span",{class:T(["inline-flex items-center px-4 py-2 rounded-xl text-xs font-sans font-semibold border backdrop-blur-sm shadow-sm",o(B)])},r(o(D))+" "+r(o(S)),3),o(R)?(l(),i("span",Ee," ‚ö†Ô∏è Vence pronto ")):b("",!0),o(O)?(l(),i("span",je," üìä Pocas sesiones ")):b("",!0)])]),e("div",Se,[o(M)?(l(),i("button",{key:0,onClick:a[0]||(a[0]=I=>p.$emit("verPagos",d.bono)),class:"p-3 hover:bg-gradient-to-br from-[#5550F2]/10 to-[#027368]/10 rounded-xl transition-all duration-300 backdrop-blur-sm border border-white/50 hover:shadow-lg hover:scale-110 group/btn",title:"Ver pagos"},[...a[6]||(a[6]=[e("span",{class:"text-lg group-hover/btn:scale-110 transition-transform duration-300"},"üí∞",-1)])])):b("",!0),o(U)?(l(),i("button",{key:1,onClick:a[1]||(a[1]=I=>p.$emit("renovar",d.bono)),class:"p-3 hover:bg-gradient-to-br from-[#04BF9D]/10 to-[#F2B33D]/10 rounded-xl transition-all duration-300 backdrop-blur-sm border border-white/50 hover:shadow-lg hover:scale-110 group/btn",title:"Renovar bono"},[...a[7]||(a[7]=[e("span",{class:"text-lg group-hover/btn:scale-110 transition-transform duration-300"},"üîÑ",-1)])])):b("",!0)])]),e("div",Te,[e("div",Re,[a[8]||(a[8]=e("span",{class:"text-sm font-sans text-gray-600 font-medium"},"Sesiones",-1)),e("span",Ve,r(o(y))+" / "+r(d.bono.sesiones_totales)+" disponibles ",1)]),e("div",Ne,[e("div",{class:T(["h-4 rounded-full transition-all duration-700 ease-out shadow-lg relative overflow-hidden",o(t)]),style:se({width:o(u)+"%"})},[...a[9]||(a[9]=[e("div",{class:"absolute inset-0 bg-gradient-to-r from-white/30 to-transparent"},null,-1),e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"},null,-1)])],6)]),e("div",ze,[e("span",null,r(o(w))+" usadas",1),e("span",Ue,r(o(u))+"% completado",1)])]),e("div",Ie,[e("div",qe,[a[10]||(a[10]=e("div",{class:"text-xs font-sans text-gray-500 uppercase tracking-wider mb-2"},"Tipo",-1)),e("div",Le,r(d.bono.tipo||"Est√°ndar"),1)]),e("div",Oe,[a[11]||(a[11]=e("div",{class:"text-xs font-sans text-gray-500 uppercase tracking-wider mb-2"},"Frecuencia",-1)),e("div",Ge,r(d.bono.frecuencia||"Semanal"),1)]),e("div",He,[a[12]||(a[12]=e("div",{class:"text-xs text-[#2D3748]/60 mb-1"},"Monto",-1)),e("div",Qe,r(G(d.bono.monto)),1)]),e("div",Je,[a[13]||(a[13]=e("div",{class:"text-xs text-[#2D3748]/60 mb-1"},"Pago",-1)),e("div",{class:T(["text-sm font-medium flex items-center gap-1",d.bono.pagado?"text-green-600":"text-orange-600"])},r(d.bono.pagado?"‚úì Pagado":"‚è≥ Pendiente"),3)])]),d.bono.fecha_inicio||d.bono.fecha_fin?(l(),i("div",Ke,[e("div",Ye,[d.bono.fecha_inicio?(l(),i("div",We,[a[14]||(a[14]=e("span",{class:"text-[#2D3748]/60"},"Inicio:",-1)),e("span",Xe,r(V(d.bono.fecha_inicio)),1)])):b("",!0),d.bono.fecha_fin?(l(),i("div",Ze,[a[15]||(a[15]=e("span",{class:"text-[#2D3748]/60"},"Vence:",-1)),e("span",{class:T(["font-medium ml-1",o(R)?"text-orange-600":"text-[#2D3748]"])},r(V(d.bono.fecha_fin)),3)])):b("",!0)]),o(h)!==null&&d.bono.estado==="activo"?(l(),i("div",eo,r(o(h)>0?`${o(h)} d√≠as restantes`:"Vencido"),1)):b("",!0)])):b("",!0),d.bono.renovacion_automatica?(l(),i("div",oo,[...a[16]||(a[16]=[e("span",{class:"text-sm"},"üîÑ",-1),e("span",{class:"text-xs text-purple-700 font-medium"},"Renovaci√≥n autom√°tica activada",-1)])])):b("",!0),d.bono.notas?(l(),i("div",to,[a[17]||(a[17]=e("div",{class:"text-xs text-[#2D3748]/60 mb-1"},"Notas",-1)),e("div",so,r(d.bono.notas),1)])):b("",!0),e("div",no,[o(M)?(l(),i("button",{key:0,onClick:a[2]||(a[2]=I=>p.$emit("verPagos",d.bono)),class:"flex-1 px-4 py-2 bg-[#5550F2] text-white rounded-lg hover:bg-[#C89B8A] transition-colors text-sm font-medium flex items-center justify-center gap-2"},[...a[18]||(a[18]=[e("span",null,"üí∞",-1),e("span",null,"Ver Pagos",-1)])])):b("",!0),o(U)&&d.bono.estado!=="activo"?(l(),i("button",{key:1,onClick:a[3]||(a[3]=I=>p.$emit("renovar",d.bono)),class:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm font-medium flex items-center justify-center gap-2"},[...a[19]||(a[19]=[e("span",null,"üîÑ",-1),e("span",null,"Renovar",-1)])])):b("",!0),o(Q)?(l(),i("button",{key:2,onClick:a[4]||(a[4]=I=>p.$emit("editar",d.bono)),class:"px-4 py-2 bg-white border border-[#5550F2]/30 text-[#2D3748] rounded-lg hover:bg-[#5550F2]/10 transition-colors text-sm font-medium"}," ‚úèÔ∏è ")):b("",!0)])],2))}}),ao=Object.assign(oe(ro,[["__scopeId","data-v-22bd053c"]]),{__name:"BonoCard"}),lo={class:"bg-white/95 backdrop-blur-md rounded-3xl shadow-2xl border border-white/50 max-w-4xl w-full max-h-[90vh] overflow-hidden relative"},io={class:"relative max-h-[90vh] overflow-y-auto"},uo={class:"sticky top-0 bg-white/90 backdrop-blur-md border-b border-gray-200/50 px-8 py-6 z-10"},co={key:0,class:"mt-6 p-6 bg-gradient-to-r from-[#5550F2]/5 via-[#027368]/5 to-[#04BF9D]/5 backdrop-blur-sm rounded-2xl border border-white/50 shadow-lg"},mo={class:"grid grid-cols-3 gap-6 text-sm"},bo={class:"text-center"},po={class:"font-sans font-semibold text-gray-800 capitalize text-lg"},go={class:"text-center"},vo={class:"font-['Elms_Sans'] font-bold bg-gradient-to-r from-[#F2B33D] to-[#5550F2] bg-clip-text text-transparent text-2xl"},xo={class:"text-center"},fo={class:"px-6 py-6 space-y-6"},yo={class:"p-4 bg-white border-2 border-[#5550F2]/30 rounded-xl"},wo={class:"grid grid-cols-3 gap-4 text-center"},ho={class:"text-2xl font-bold text-green-600"},_o={class:"text-2xl font-bold text-orange-600"},$o={class:"text-2xl font-bold text-[#2D3748]"},ko={class:"mt-4"},Do={class:"flex justify-between text-xs text-[#2D3748]/60 mb-1"},Fo={class:"w-full bg-gray-200 rounded-full h-2"},Co={key:0,class:"flex justify-end"},Bo={key:1,class:"p-5 bg-green-50 border-2 border-green-300 rounded-xl"},Po={class:"grid grid-cols-2 gap-4"},Ao={class:"relative"},Mo={key:0,class:"flex items-center gap-2 p-3 bg-white border border-green-300 rounded-lg"},Eo={class:"flex gap-3"},jo=["disabled"],So={class:"font-serif text-lg font-semibold text-[#2D3748] mb-4 flex items-center gap-2"},To={key:0,class:"text-center py-8"},Ro={key:1,class:"text-center py-12"},Vo={key:2,class:"space-y-3"},No={class:"flex items-start justify-between gap-4"},zo={class:"flex-1"},Uo={class:"flex items-center gap-3 mb-2"},Io={class:"space-y-1 text-sm text-[#2D3748]/70"},qo={class:"flex items-center gap-2"},Lo={class:"capitalize"},Oo={class:"flex items-center gap-2"},Go={key:0,class:"flex items-center gap-2"},Ho={key:0},Qo=["onClick","disabled"],Jo={key:2,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},Ko={class:"text-sm text-red-700 flex items-center gap-2"},Yo={key:3,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},Wo={class:"text-sm text-green-700 flex items-center gap-2"},Xo=X({__name:"ModalPagosBono",props:{mostrar:{type:Boolean},bono:{}},emits:["close","updated"],setup(d,{emit:_}){const g=d,j=_,{getPagosPorBono:L,registrarPago:F,confirmarPago:C,puedeGestionarBonos:k,puedeConfirmarPagos:f}=Z(),B=x([]),S=x(!1),D=x(!1),P=x(!1),y=x(null),w=x(""),u=x(""),t=x({monto:0,metodo:"",confirmado:!1}),h=m(()=>[...B.value].sort((c,n)=>new Date(n.fecha_pago).getTime()-new Date(c.fecha_pago).getTime())),R=m(()=>B.value.filter(c=>c.confirmado).reduce((c,n)=>c+(n.monto||0),0)),O=m(()=>{const c=g.bono?.monto||0;return Math.max(0,c-R.value)}),M=m(()=>{const c=g.bono?.monto||0;return c===0?0:Math.round(R.value/c*100)}),U=async()=>{if(g.bono?.id)try{S.value=!0,w.value="",B.value=await L(g.bono.id)}catch(c){console.error("[ModalPagosBono] Error al cargar pagos:",c),w.value="Error al cargar los pagos"}finally{S.value=!1}},Q=async()=>{if(!g.bono?.id||!t.value.monto||!t.value.metodo){w.value="Por favor completa todos los campos";return}try{P.value=!0,w.value="",u.value="",await F(g.bono.id,t.value.monto,t.value.metodo,t.value.confirmado),u.value="Pago registrado correctamente",D.value=!1,t.value={monto:0,metodo:"",confirmado:!1},await U(),j("updated"),setTimeout(()=>{u.value=""},3e3)}catch(c){console.error("[ModalPagosBono] Error al registrar pago:",c),w.value=c.message||"Error al registrar el pago"}finally{P.value=!1}},V=async c=>{try{y.value=c,w.value="",u.value="";const n=await C(c);u.value=n.mensaje||"Pago confirmado correctamente",await U(),j("updated"),setTimeout(()=>{u.value=""},3e3)}catch(n){console.error("[ModalPagosBono] Error al confirmar pago:",n),w.value=n.message||"Error al confirmar el pago"}finally{y.value=null}},G=()=>{w.value="",u.value="",D.value=!1,j("close")},p=c=>{if(!c)return"";try{return new Date(c).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"})}catch{return c}},a=c=>c?new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(c):"‚Ç¨ 0.00",I=c=>({efectivo:"Efectivo",transferencia:"Transferencia Bancaria",tarjeta:"Tarjeta de Cr√©dito/D√©bito",bizum:"Bizum",paypal:"PayPal"})[c]||c;return ne(()=>g.mostrar,c=>{c&&U()},{immediate:!0}),(c,n)=>d.mostrar?(l(),i("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:W(G,["self"])},[e("div",lo,[n[28]||(n[28]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-[#5550F2]/5 via-transparent to-[#04BF9D]/5 pointer-events-none"},null,-1)),n[29]||(n[29]=e("div",{class:"absolute -top-20 -right-20 w-40 h-40 bg-gradient-to-br from-[#F2B33D]/20 to-[#5550F2]/20 rounded-full blur-2xl"},null,-1)),e("div",io,[e("div",uo,[e("div",{class:"flex justify-between items-start"},[n[6]||(n[6]=ee('<div class="flex-1" data-v-5db71466><div class="flex items-center gap-4 mb-3" data-v-5db71466><div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-[#5550F2] to-[#027368] shadow-lg flex items-center justify-center" data-v-5db71466><span class="text-2xl" data-v-5db71466>üí∞</span></div><h2 class="text-3xl font-[&#39;Elms_Sans&#39;] font-bold bg-gradient-to-r from-[#5550F2] to-[#027368] bg-clip-text text-transparent" data-v-5db71466> Pagos del Bono </h2></div><p class="text-sm font-sans text-gray-600 ml-18" data-v-5db71466> Gestiona los pagos y confirma transacciones de forma segura </p></div>',1)),e("button",{onClick:G,class:"p-3 text-gray-500 hover:text-[#5550F2] hover:bg-gradient-to-br from-[#5550F2]/10 to-[#027368]/10 rounded-2xl transition-all duration-300 backdrop-blur-sm border border-white/50 hover:shadow-lg","aria-label":"Cerrar modal"},[...n[5]||(n[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),d.bono?(l(),i("div",co,[e("div",mo,[e("div",bo,[n[7]||(n[7]=e("div",{class:"text-xs font-sans text-gray-500 uppercase tracking-wider mb-2"},"Tipo",-1)),e("div",po,r(d.bono.tipo),1)]),e("div",go,[n[8]||(n[8]=e("div",{class:"text-xs font-sans text-gray-500 uppercase tracking-wider mb-2"},"Monto Total",-1)),e("div",vo,r(a(d.bono.monto)),1)]),e("div",xo,[n[9]||(n[9]=e("div",{class:"text-xs font-sans text-gray-500 uppercase tracking-wider mb-2"},"Estado",-1)),e("div",{class:T(["font-sans font-semibold text-lg capitalize",d.bono.pagado?"text-[#04BF9D]":"text-[#F2B33D]"])},r(d.bono.pagado?"‚úì Pagado":"‚è≥ Pendiente"),3)])])])):b("",!0)]),e("div",fo,[e("div",yo,[e("div",wo,[e("div",null,[e("div",ho,r(a(o(R))),1),n[10]||(n[10]=e("div",{class:"text-xs text-[#2D3748]/60 mt-1"},"Total Pagado",-1))]),e("div",null,[e("div",_o,r(a(o(O))),1),n[11]||(n[11]=e("div",{class:"text-xs text-[#2D3748]/60 mt-1"},"Pendiente",-1))]),e("div",null,[e("div",$o,r(o(B).length),1),n[12]||(n[12]=e("div",{class:"text-xs text-[#2D3748]/60 mt-1"},"Transacciones",-1))])]),e("div",ko,[e("div",Do,[n[13]||(n[13]=e("span",null,"Progreso de pago",-1)),e("span",null,r(o(M))+"%",1)]),e("div",Fo,[e("div",{class:T(["h-2 rounded-full transition-all duration-500",o(M)>=100?"bg-green-500":"bg-gradient-to-r from-[#5550F2] to-[#ECC8BA]"]),style:se({width:Math.min(o(M),100)+"%"})},null,6)])])]),o(k)?(l(),i("div",Co,[e("button",{onClick:n[0]||(n[0]=v=>D.value=!o(D)),class:"px-4 py-2 bg-[#5550F2] text-white rounded-lg hover:bg-[#C89B8A] transition-colors font-medium flex items-center gap-2"},[e("span",null,r(o(D)?"‚úï":"+"),1),e("span",null,r(o(D)?"Cancelar":"Registrar Pago"),1)])])):b("",!0),o(D)?(l(),i("div",Bo,[n[19]||(n[19]=e("h3",{class:"font-serif text-lg font-semibold text-[#2D3748] mb-4 flex items-center gap-2"},[e("span",null,"üí≥"),E(" Registrar Nuevo Pago ")],-1)),e("form",{onSubmit:W(Q,["prevent"]),class:"space-y-4"},[e("div",Po,[e("div",null,[n[15]||(n[15]=e("label",{class:"block text-sm font-medium text-[#2D3748] mb-2"},[E(" Monto "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ao,[n[14]||(n[14]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-[#2D3748]/60"},"‚Ç¨",-1)),z(e("input",{"onUpdate:modelValue":n[1]||(n[1]=v=>o(t).monto=v),type:"number",min:"0",step:"0.01",required:"",placeholder:"0.00",class:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#5550F2] bg-white"},null,512),[[J,o(t).monto,void 0,{number:!0}]])])]),e("div",null,[n[17]||(n[17]=e("label",{class:"block text-sm font-medium text-[#2D3748] mb-2"},[E(" M√©todo de Pago "),e("span",{class:"text-red-500"},"*")],-1)),z(e("select",{"onUpdate:modelValue":n[2]||(n[2]=v=>o(t).metodo=v),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#5550F2] bg-white"},[...n[16]||(n[16]=[ee('<option value="" data-v-5db71466>Seleccionar m√©todo</option><option value="efectivo" data-v-5db71466>üíµ Efectivo</option><option value="transferencia" data-v-5db71466>üè¶ Transferencia</option><option value="tarjeta" data-v-5db71466>üí≥ Tarjeta</option><option value="bizum" data-v-5db71466>üì± Bizum</option><option value="paypal" data-v-5db71466>üÖøÔ∏è PayPal</option>',6)])],512),[[K,o(t).metodo]])])]),o(f)?(l(),i("div",Mo,[z(e("input",{"onUpdate:modelValue":n[3]||(n[3]=v=>o(t).confirmado=v),type:"checkbox",id:"confirmar-pago",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[re,o(t).confirmado]]),n[18]||(n[18]=e("label",{for:"confirmar-pago",class:"text-sm text-[#2D3748] cursor-pointer"}," ‚úì Confirmar pago inmediatamente (ya verificado) ",-1))])):b("",!0),e("div",Eo,[e("button",{type:"button",onClick:n[4]||(n[4]=v=>D.value=!1),class:"flex-1 px-4 py-2 bg-white border border-gray-300 text-[#2D3748] rounded-lg hover:bg-gray-50 transition-colors"}," Cancelar "),e("button",{type:"submit",class:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-medium disabled:opacity-50",disabled:o(P)},r(o(P)?"Registrando...":"Guardar Pago"),9,jo)])],32)])):b("",!0),e("div",null,[e("h3",So,[n[20]||(n[20]=e("span",null,"üìú",-1)),E(" Historial de Pagos ("+r(o(B).length)+") ",1)]),o(S)?(l(),i("div",To,[...n[21]||(n[21]=[e("div",{class:"animate-spin w-10 h-10 border-4 border-[#5550F2] border-t-transparent rounded-full mx-auto mb-3"},null,-1),e("p",{class:"text-[#2D3748]/60"},"Cargando pagos...",-1)])])):o(B).length===0?(l(),i("div",Ro,[...n[22]||(n[22]=[e("span",{class:"text-6xl mb-3 block opacity-40"},"üí∏",-1),e("p",{class:"text-[#2D3748]/60"},"No hay pagos registrados a√∫n",-1)])])):(l(),i("div",Vo,[(l(!0),i(ae,null,le(o(h),v=>(l(),i("div",{key:v.id,class:T(["p-4 border-2 rounded-lg transition-all",v.confirmado?"bg-green-50 border-green-300":"bg-yellow-50 border-yellow-300"])},[e("div",No,[e("div",zo,[e("div",Uo,[e("span",{class:T(["text-2xl font-bold",v.confirmado?"text-green-600":"text-yellow-600"])},r(a(v.monto)),3),e("span",{class:T(["px-2 py-1 rounded-full text-xs font-medium capitalize",v.confirmado?"bg-green-200 text-green-800":"bg-yellow-200 text-yellow-800"])},r(v.confirmado?"‚úì Confirmado":"‚è≥ Pendiente"),3)]),e("div",Io,[e("div",qo,[n[23]||(n[23]=e("span",null,"üí≥",-1)),e("span",Lo,r(I(v.metodo_pago)),1)]),e("div",Oo,[n[24]||(n[24]=e("span",null,"üìÖ",-1)),e("span",null,r(p(v.fecha_pago)),1)]),v.confirmado&&v.fecha_confirmacion?(l(),i("div",Go,[n[25]||(n[25]=e("span",null,"‚úÖ",-1)),e("span",null,"Confirmado el "+r(p(v.fecha_confirmacion)),1)])):b("",!0)])]),o(f)&&!v.confirmado?(l(),i("div",Ho,[e("button",{onClick:te=>V(v.id),class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium",disabled:o(y)===v.id},r(o(y)===v.id?"Confirmando...":"‚úì Confirmar"),9,Qo)])):b("",!0)])],2))),128))]))]),o(w)?(l(),i("div",Jo,[e("p",Ko,[n[26]||(n[26]=e("span",null,"‚ùå",-1)),E(" "+r(o(w)),1)])])):b("",!0),o(u)?(l(),i("div",Yo,[e("p",Wo,[n[27]||(n[27]=e("span",null,"‚úÖ",-1)),E(" "+r(o(u)),1)])])):b("",!0)]),e("div",{class:"sticky bottom-0 bg-[#F2F2F2] border-t border-[#5550F2]/30 px-6 py-4"},[e("button",{onClick:G,class:"w-full px-6 py-3 bg-[#2D3748] text-white rounded-lg hover:bg-[#4A3A34] transition-colors font-medium"}," Cerrar ")])])])])):b("",!0)}}),Zo=Object.assign(oe(Xo,[["__scopeId","data-v-5db71466"]]),{__name:"ModalPagosBono"}),et={class:"bg-[#F2F2F2] rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},ot={class:"px-6 py-6 space-y-6"},tt={class:"p-5 bg-gradient-to-r from-gray-100 to-gray-50 border-2 border-gray-300 rounded-xl"},st={class:"grid grid-cols-2 gap-4 text-sm"},nt={class:"p-3 bg-white rounded-lg"},rt={class:"font-medium text-[#2D3748] capitalize"},at={class:"p-3 bg-white rounded-lg"},lt={class:"font-medium text-[#2D3748] capitalize"},it={class:"p-3 bg-white rounded-lg"},dt={class:"font-medium text-[#2D3748]"},ut={class:"p-3 bg-white rounded-lg"},ct={class:"font-medium text-[#2D3748]"},mt={class:"p-3 bg-white rounded-lg"},bt={class:"font-bold text-[#5550F2] text-lg"},pt={class:"p-3 bg-white rounded-lg"},gt={class:"p-5 bg-gradient-to-r from-purple-50 to-indigo-50 border-2 border-purple-300 rounded-xl"},vt={class:"mb-5 p-3 bg-white border border-purple-200 rounded-lg"},xt={class:"flex items-center gap-3 cursor-pointer"},ft={key:0,class:"space-y-4"},yt={class:"grid grid-cols-2 gap-4"},wt={class:"relative"},ht={class:"p-3 bg-purple-100 rounded-lg text-sm"},_t={class:"flex justify-between mb-1"},$t={class:"font-bold text-purple-700"},kt={class:"flex justify-between"},Dt={class:"font-medium text-[#2D3748]/60"},Ft={key:1,class:"p-4 bg-green-50 border border-green-300 rounded-lg"},Ct={class:"text-sm text-green-700 flex items-center gap-2"},Bt={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},Pt={class:"text-sm text-red-700 flex items-center gap-2"},At={class:"flex gap-3 pt-4 border-t border-[#5550F2]/30"},Mt=["disabled"],Et=["disabled"],jt={key:0},St={key:1},Tt=X({__name:"ModalRenovacionBono",props:{mostrar:{type:Boolean},bono:{}},emits:["close","renovated"],setup(d,{emit:_}){const g=d,j=_,{renovarBono:L}=Z(),F=x(!0),C=x(!1),k=x(""),f=x({sesiones_nuevas:g.bono?.sesiones_totales||0,monto_nuevo:g.bono?.monto||0,motivo:""}),B=m(()=>({pendiente:"text-yellow-600",activo:"text-green-600",completado:"text-gray-600",vencido:"text-red-600",cancelado:"text-gray-500"})[g.bono?.estado]||"text-gray-600"),S=m(()=>!g.bono?.sesiones_totales||!g.bono?.monto?"0.00":(g.bono.monto/g.bono.sesiones_totales).toFixed(2)),D=m(()=>!f.value.sesiones_nuevas||!f.value.monto_nuevo?"0.00":(f.value.monto_nuevo/f.value.sesiones_nuevas).toFixed(2)),P=()=>{C.value||(k.value="",j("close"))},y=async()=>{if(!g.bono?.id){k.value="Bono no v√°lido";return}try{C.value=!0,k.value="";const u=F.value?null:f.value.sesiones_nuevas,t=F.value?null:f.value.monto_nuevo,h=await L(g.bono.id,f.value.motivo||"Renovaci√≥n manual solicitada",u,t);j("renovated",h),j("close"),f.value={sesiones_nuevas:g.bono?.sesiones_totales||0,monto_nuevo:g.bono?.monto||0,motivo:""},F.value=!0}catch(u){console.error("[ModalRenovacionBono] Error al renovar:",u),k.value=u.message||"Error al renovar el bono. Int√©ntalo de nuevo."}finally{C.value=!1}},w=u=>u?new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(u):"‚Ç¨ 0.00";return ne(()=>g.bono,u=>{u&&(f.value.sesiones_nuevas=u.sesiones_totales||0,f.value.monto_nuevo=u.monto||0)},{immediate:!0}),(u,t)=>d.mostrar?(l(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:W(P,["self"])},[e("div",et,[e("div",{class:"sticky top-0 bg-[#F2F2F2] border-b border-[#5550F2]/30 px-6 py-4 flex justify-between items-center"},[t[5]||(t[5]=e("div",null,[e("h2",{class:"text-2xl font-serif text-[#2D3748] font-semibold flex items-center gap-2"},[e("span",{class:"text-2xl"},"üîÑ"),E(" Renovar Bono ")]),e("p",{class:"text-sm text-[#2D3748]/60 mt-1"}," Crea una nueva renovaci√≥n basada en el bono actual ")],-1)),e("button",{onClick:P,class:"text-[#2D3748] hover:text-[#5550F2] transition-colors","aria-label":"Cerrar modal"},[...t[4]||(t[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",ot,[e("div",tt,[t[12]||(t[12]=e("h3",{class:"font-serif text-lg font-semibold text-[#2D3748] mb-4 flex items-center gap-2"},[e("span",null,"üìã"),E(" Bono Actual ")],-1)),e("div",st,[e("div",nt,[t[6]||(t[6]=e("div",{class:"text-[#2D3748]/60 mb-1"},"Tipo",-1)),e("div",rt,r(d.bono.tipo),1)]),e("div",at,[t[7]||(t[7]=e("div",{class:"text-[#2D3748]/60 mb-1"},"Frecuencia",-1)),e("div",lt,r(d.bono.frecuencia),1)]),e("div",it,[t[8]||(t[8]=e("div",{class:"text-[#2D3748]/60 mb-1"},"Sesiones Totales",-1)),e("div",dt,r(d.bono.sesiones_totales),1)]),e("div",ut,[t[9]||(t[9]=e("div",{class:"text-[#2D3748]/60 mb-1"},"Sesiones Restantes",-1)),e("div",ct,r(d.bono.sesiones_restantes||0),1)]),e("div",mt,[t[10]||(t[10]=e("div",{class:"text-[#2D3748]/60 mb-1"},"Monto",-1)),e("div",bt,r(w(d.bono.monto)),1)]),e("div",pt,[t[11]||(t[11]=e("div",{class:"text-[#2D3748]/60 mb-1"},"Estado",-1)),e("div",{class:T(["font-medium capitalize",o(B)])},r(d.bono.estado),3)])])]),e("form",{onSubmit:W(y,["prevent"]),class:"space-y-5"},[e("div",gt,[t[22]||(t[22]=e("h3",{class:"font-serif text-lg font-semibold text-[#2D3748] mb-4 flex items-center gap-2"},[e("span",null,"‚ú®"),E(" Datos del Nuevo Bono ")],-1)),e("div",vt,[e("label",xt,[z(e("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>Y(F)?F.value=h:null),type:"checkbox",class:"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"},null,512),[[re,o(F)]]),t[13]||(t[13]=e("div",null,[e("div",{class:"text-sm font-medium text-[#2D3748]"}," Mantener los mismos valores del bono original "),e("div",{class:"text-xs text-[#2D3748]/60 mt-1"}," Si lo desmarcas, podr√°s personalizar las sesiones y el monto ")],-1))])]),o(F)?(l(),i("div",Ft,[e("p",Ct,[t[19]||(t[19]=e("span",null,"‚úì",-1)),t[20]||(t[20]=E(" Se duplicar√°n los valores originales: ",-1)),e("strong",null,r(d.bono.sesiones_totales)+" sesiones",1),t[21]||(t[21]=E(" por ",-1)),e("strong",null,r(w(d.bono.monto)),1)])])):(l(),i("div",ft,[e("div",yt,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-[#2D3748] mb-2"}," Sesiones Totales ",-1)),z(e("input",{"onUpdate:modelValue":t[1]||(t[1]=h=>o(f).sesiones_nuevas=h),type:"number",min:"1",max:"100",required:"",class:"w-full px-4 py-2 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white"},null,512),[[J,o(f).sesiones_nuevas,void 0,{number:!0}]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-[#2D3748] mb-2"}," Monto Total ",-1)),e("div",wt,[t[15]||(t[15]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-[#2D3748]/60"},"‚Ç¨",-1)),z(e("input",{"onUpdate:modelValue":t[2]||(t[2]=h=>o(f).monto_nuevo=h),type:"number",min:"0",step:"0.01",required:"",placeholder:"0.00",class:"w-full pl-8 pr-4 py-2 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white"},null,512),[[J,o(f).monto_nuevo,void 0,{number:!0}]])])])]),e("div",ht,[e("div",_t,[t[17]||(t[17]=e("span",{class:"text-[#2D3748]/70"},"Precio por sesi√≥n (nuevo):",-1)),e("span",$t,"‚Ç¨"+r(o(D)),1)]),e("div",kt,[t[18]||(t[18]=e("span",{class:"text-[#2D3748]/70"},"Precio por sesi√≥n (original):",-1)),e("span",Dt,"‚Ç¨"+r(o(S)),1)])])]))]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-[#2D3748] mb-2"}," Motivo de la Renovaci√≥n (Opcional) ",-1)),z(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=h=>o(f).motivo=h),rows:"3",placeholder:"Explica por qu√© se renueva este bono...",class:"w-full px-4 py-2 border border-[#5550F2]/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#5550F2] resize-none"},null,512),[[J,o(f).motivo]])]),t[25]||(t[25]=ee('<div class="p-4 bg-blue-50 border-2 border-blue-300 rounded-lg"><h4 class="font-medium text-blue-900 mb-2 flex items-center gap-2"><span>‚ÑπÔ∏è</span> Informaci√≥n Importante </h4><ul class="text-sm text-blue-800 space-y-1.5"><li class="flex items-start gap-2"><span class="mt-0.5">‚Ä¢</span><span>El bono actual se marcar√° como <strong>completado</strong></span></li><li class="flex items-start gap-2"><span class="mt-0.5">‚Ä¢</span><span>Se crear√° un <strong>nuevo bono</strong> con estado <strong>pendiente</strong> hasta que se confirme el pago</span></li><li class="flex items-start gap-2"><span class="mt-0.5">‚Ä¢</span><span>La fecha de inicio ser√° <strong>hoy</strong> y la de vencimiento se calcular√° autom√°ticamente</span></li><li class="flex items-start gap-2"><span class="mt-0.5">‚Ä¢</span><span>Se guardar√° un registro en el historial de renovaciones</span></li></ul></div>',1)),o(k)?(l(),i("div",Bt,[e("p",Pt,[t[24]||(t[24]=e("span",null,"‚ùå",-1)),E(" "+r(o(k)),1)])])):b("",!0),e("div",At,[e("button",{type:"button",onClick:P,class:"flex-1 px-6 py-3 bg-white border border-[#5550F2]/30 text-[#2D3748] rounded-lg hover:bg-[#5550F2]/10 transition-colors font-medium",disabled:o(C)}," Cancelar ",8,Mt),e("button",{type:"submit",class:"flex-1 px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:o(C)},[o(C)?(l(),i("span",jt,"‚è≥")):(l(),i("span",St,"üîÑ")),e("span",null,r(o(C)?"Renovando...":"Confirmar Renovaci√≥n"),1)],8,Et)])],32)])])])):b("",!0)}}),Rt=Object.assign(Tt,{__name:"ModalRenovacionBono"}),Vt={class:"bonos-container pb-20"},Nt={class:"mb-6"},zt={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},Ut={class:"text-3xl font-['Lora'] font-bold text-[#5D4A44] mb-2 flex items-center gap-3"},It={key:0,class:"text-center py-16"},qt={key:1,class:"text-center py-16"},Lt={class:"text-[#5D4A44]/60 mb-4"},Ot={key:2},Gt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},Ht={class:"flex items-center justify-between"},Qt={class:"text-3xl font-bold text-purple-700"},Jt={class:"flex items-center justify-between"},Kt={class:"text-3xl font-bold text-green-700"},Yt={class:"flex items-center justify-between"},Wt={class:"text-3xl font-bold text-orange-700"},Xt={class:"flex items-center justify-between"},Zt={class:"text-3xl font-bold text-yellow-700"},es={class:"mb-6"},os={class:"flex flex-col md:flex-row gap-4"},ts={class:"flex-1"},ss={class:"flex-1"},ns={class:"flex-1"},rs={key:0,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},as={key:1,class:"text-center py-16"},ls={class:"text-xl font-['Lora'] font-semibold text-[#5D4A44] mb-2"},is={class:"text-[#5D4A44]/60 mb-6"},ds={key:2,class:"mt-8 space-y-3"},us={key:0,class:"p-4 bg-orange-50 border-2 border-orange-300 rounded-lg"},cs={class:"flex items-start gap-3"},ms={class:"flex-1"},bs={class:"font-medium text-orange-900 mb-1"},ps={key:1,class:"p-4 bg-blue-50 border-2 border-blue-300 rounded-lg"},gs={class:"flex items-start gap-3"},vs={class:"flex-1"},xs={class:"font-medium text-blue-900 mb-1"},fs=X({__name:"bonos",setup(d){const _=xe(),{userProfile:g}=fe(),j=m(()=>we());m(()=>he());const{getBonosPorPaciente:L,calcularMetricas:F,puedeGestionarBonos:C}=Z(),k=m(()=>j.value?j.value.params.id:""),f=m(()=>g.value?.id||""),B=x(!0),S=x(null),D=x([]),P=x(""),y=x({total:0,activos:0,completados:0,vencidos:0,pendientes:0,proximosAVencer:0,pocasSesiones:0}),w=x("todos"),u=x("todos"),t=x("reciente"),h=x(!1),R=x(!1),O=x(!1),M=x(null),U=m(()=>{let $=[...D.value];return w.value!=="todos"&&($=$.filter(s=>s.estado===w.value)),u.value!=="todos"&&($=$.filter(s=>s.tipo===u.value)),t.value==="reciente"?$.sort((s,A)=>new Date(A.created_at).getTime()-new Date(s.created_at).getTime()):t.value==="antiguo"?$.sort((s,A)=>new Date(s.created_at).getTime()-new Date(A.created_at).getTime()):t.value==="vencimiento"&&$.sort((s,A)=>s.fecha_fin?A.fecha_fin?new Date(s.fecha_fin).getTime()-new Date(A.fecha_fin).getTime():-1:1),$}),Q=m(()=>y.value.proximosAVencer>0||y.value.pocasSesiones>0),V=async()=>{try{B.value=!0,S.value=null;const{data:$,error:s}=await _.from("pacientes").select("nombre, email").eq("id",k.value).single();if(s)throw s;P.value=$?.nombre||$?.email||"Paciente",D.value=await L(k.value),y.value=await F(k.value)}catch($){console.error("[BonosPage] Error al cargar bonos:",$),S.value=$.message||"Error al cargar los bonos"}finally{B.value=!1}},G=()=>{w.value="todos",u.value="todos",t.value="reciente"},p=()=>{k.value?(console.log("[Bonos/[id]] Navegando a ficha del paciente:",k.value),$e(`/terapeuta/pacientes/${k.value}`)):console.error("[Bonos/[id]] ERROR: No se encontr√≥ ID del paciente")},a=()=>{h.value=!0},I=()=>{h.value=!1},c=async()=>{await V()},n=$=>{M.value=$,R.value=!0},v=()=>{R.value=!1,M.value=null},te=async()=>{await V()},ie=$=>{M.value=$,O.value=!0},de=()=>{O.value=!1,M.value=null},ue=async()=>{await V()},ce=$=>{console.log("Editar bono:",$),alert("Funci√≥n de edici√≥n en desarrollo")};return ye(()=>{V()}),($,s)=>{const A=Fe,me=ao,be=De,pe=Zo,ge=Rt;return l(),i("div",Vt,[e("button",{onClick:p,class:"mb-6 flex items-center gap-2 text-[#5D4A44] hover:text-[#D8AFA0] transition-colors"},[...s[4]||(s[4]=[e("span",null,"‚Üê",-1),e("span",null,"Volver a ficha del paciente",-1)])]),e("header",Nt,[e("div",zt,[e("div",null,[e("h1",Ut,[s[5]||(s[5]=e("span",{class:"text-4xl"},"üé´",-1)),E(" Bonos de "+r(o(P)),1)]),s[6]||(s[6]=e("p",{class:"text-[#5D4A44]/60"}," Gestiona los bonos, pagos y renovaciones del paciente ",-1))]),o(C)?(l(),i("button",{key:0,onClick:a,class:"px-6 py-3 bg-[#D8AFA0] text-white rounded-lg hover:bg-[#C89B8A] transition-colors font-medium flex items-center gap-2 shadow-lg"},[...s[7]||(s[7]=[e("span",{class:"text-xl"},"+",-1),e("span",null,"Nuevo Bono",-1)])])):b("",!0)])]),o(B)?(l(),i("div",It,[...s[8]||(s[8]=[e("div",{class:"animate-spin w-16 h-16 border-4 border-[#D8AFA0] border-t-transparent rounded-full mx-auto mb-4"},null,-1),e("p",{class:"text-[#5D4A44]/60"},"Cargando bonos...",-1)])])):o(S)?(l(),i("div",qt,[N(A,null,{default:H(()=>[s[9]||(s[9]=e("span",{class:"text-7xl mb-4 block"},"‚ùå",-1)),s[10]||(s[10]=e("h3",{class:"text-xl font-['Lora'] font-semibold text-[#5D4A44] mb-2"}," Error al cargar bonos ",-1)),e("p",Lt,r(o(S)),1),e("button",{onClick:V,class:"px-6 py-3 bg-[#D8AFA0] text-white rounded-lg hover:bg-[#C89B8A] transition-colors"}," Intentar de nuevo ")]),_:1})])):(l(),i("div",Ot,[e("section",Gt,[N(A,{class:"bg-gradient-to-br from-purple-50 to-indigo-50 border-2 border-purple-200"},{default:H(()=>[e("div",Ht,[e("div",null,[s[11]||(s[11]=e("p",{class:"text-sm text-purple-600 font-medium mb-1"},"Total Bonos",-1)),e("p",Qt,r(o(y).total),1)]),s[12]||(s[12]=e("span",{class:"text-4xl"},"üé´",-1))])]),_:1}),N(A,{class:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200"},{default:H(()=>[e("div",Jt,[e("div",null,[s[13]||(s[13]=e("p",{class:"text-sm text-green-600 font-medium mb-1"},"Activos",-1)),e("p",Kt,r(o(y).activos),1)]),s[14]||(s[14]=e("span",{class:"text-4xl"},"‚úÖ",-1))])]),_:1}),N(A,{class:"bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-orange-200"},{default:H(()=>[e("div",Yt,[e("div",null,[s[15]||(s[15]=e("p",{class:"text-sm text-orange-600 font-medium mb-1"},"Por Vencer",-1)),e("p",Wt,r(o(y).proximosAVencer),1)]),s[16]||(s[16]=e("span",{class:"text-4xl"},"‚ö†Ô∏è",-1))])]),_:1}),N(A,{class:"bg-gradient-to-br from-yellow-50 to-amber-50 border-2 border-yellow-200"},{default:H(()=>[e("div",Xt,[e("div",null,[s[17]||(s[17]=e("p",{class:"text-sm text-yellow-600 font-medium mb-1"},"Pendientes",-1)),e("p",Zt,r(o(y).pendientes),1)]),s[18]||(s[18]=e("span",{class:"text-4xl"},"‚è≥",-1))])]),_:1})]),e("section",es,[N(A,null,{default:H(()=>[e("div",os,[e("div",ts,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-[#5D4A44] mb-2"}," Filtrar por Estado ",-1)),z(e("select",{"onUpdate:modelValue":s[0]||(s[0]=q=>Y(w)?w.value=q:null),class:"w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] bg-white"},[...s[19]||(s[19]=[e("option",{value:"todos"},"Todos los estados",-1),e("option",{value:"activo"},"‚úÖ Activos",-1),e("option",{value:"pendiente"},"‚è≥ Pendientes",-1),e("option",{value:"completado"},"‚úîÔ∏è Completados",-1),e("option",{value:"vencido"},"‚ùå Vencidos",-1),e("option",{value:"cancelado"},"üö´ Cancelados",-1)])],512),[[K,o(w)]])]),e("div",ss,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-[#5D4A44] mb-2"}," Filtrar por Tipo ",-1)),z(e("select",{"onUpdate:modelValue":s[1]||(s[1]=q=>Y(u)?u.value=q:null),class:"w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] bg-white"},[...s[21]||(s[21]=[e("option",{value:"todos"},"Todos los tipos",-1),e("option",{value:"quincenal"},"Quincenal",-1),e("option",{value:"mensual"},"Mensual",-1),e("option",{value:"semestral"},"Semestral",-1)])],512),[[K,o(u)]])]),e("div",ns,[s[24]||(s[24]=e("label",{class:"block text-sm font-medium text-[#5D4A44] mb-2"}," Ordenar por ",-1)),z(e("select",{"onUpdate:modelValue":s[2]||(s[2]=q=>Y(t)?t.value=q:null),class:"w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] bg-white"},[...s[23]||(s[23]=[e("option",{value:"reciente"},"M√°s recientes",-1),e("option",{value:"antiguo"},"M√°s antiguos",-1),e("option",{value:"vencimiento"},"Por vencimiento",-1)])],512),[[K,o(t)]])])])]),_:1})]),o(U).length>0?(l(),i("section",rs,[(l(!0),i(ae,null,le(o(U),q=>(l(),_e(me,{key:q.id,bono:q,onRenovar:ie,onVerPagos:n,onEditar:ce},null,8,["bono"]))),128))])):(l(),i("section",as,[N(A,null,{default:H(()=>[s[25]||(s[25]=e("span",{class:"text-7xl mb-4 block opacity-40"},"üé´",-1)),e("h3",ls,r(o(D).length===0?"No hay bonos registrados":"No hay bonos con estos filtros"),1),e("p",is,r(o(D).length===0?"Crea el primer bono para este paciente":"Intenta cambiar los filtros para ver m√°s bonos"),1),o(D).length===0&&o(C)?(l(),i("button",{key:0,onClick:a,class:"px-8 py-3 bg-[#D8AFA0] text-white rounded-lg hover:bg-[#C89B8A] transition-colors font-medium"}," + Crear Primer Bono ")):(l(),i("button",{key:1,onClick:G,class:"px-8 py-3 bg-[#5D4A44] text-white rounded-lg hover:bg-[#4A3A34] transition-colors font-medium"}," Limpiar Filtros "))]),_:1})])),o(Q)?(l(),i("section",ds,[o(y).proximosAVencer>0?(l(),i("div",us,[e("div",cs,[s[27]||(s[27]=e("span",{class:"text-2xl"},"‚ö†Ô∏è",-1)),e("div",ms,[e("h4",bs,r(o(y).proximosAVencer)+" bono(s) pr√≥ximo(s) a vencer ",1),s[26]||(s[26]=e("p",{class:"text-sm text-orange-700"}," Hay bonos que vencer√°n en los pr√≥ximos 7 d√≠as. Considera renovarlos. ",-1))]),e("button",{onClick:s[3]||(s[3]=q=>w.value="activo"),class:"text-sm text-orange-700 hover:text-orange-900 underline"}," Ver bonos activos ")])])):b("",!0),o(y).pocasSesiones>0?(l(),i("div",ps,[e("div",gs,[s[29]||(s[29]=e("span",{class:"text-2xl"},"üìä",-1)),e("div",vs,[e("h4",xs,r(o(y).pocasSesiones)+" bono(s) con pocas sesiones ",1),s[28]||(s[28]=e("p",{class:"text-sm text-blue-700"}," Algunos bonos tienen 2 o menos sesiones restantes. ",-1))])])])):b("",!0)])):b("",!0)])),N(be,{mostrar:o(h),"paciente-id":o(k),"paciente-nombre":o(P),"psicologa-id":o(f),onClose:I,onCreated:c},null,8,["mostrar","paciente-id","paciente-nombre","psicologa-id"]),N(pe,{mostrar:o(R),bono:o(M),onClose:v,onUpdated:te},null,8,["mostrar","bono"]),N(ge,{mostrar:o(O),bono:o(M),onClose:de,onRenovated:ue},null,8,["mostrar","bono"])])}}}),$s=oe(fs,[["__scopeId","data-v-dd12cc0e"]]);export{$s as default};
