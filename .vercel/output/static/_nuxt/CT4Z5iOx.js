import{_ as ue}from"./CIxdp835.js";import{_ as xe}from"./Cne4U9Z1.js";import{c as m,o as c,a as e,m as _e,M as he,r as p,g as ge,H as X,h as b,b as u,k as r,w as L,t as l,F as Y,x as ee,q as ve,z as _,J as be,d as te,y as we}from"#entry";import{_ as ye}from"./DlAUqK2U.js";import{r as V}from"./CQZt9cKZ.js";import{r as se}from"./mZ3toP8Y.js";import{r as oe}from"./BSBtNZZQ.js";import{r as ae}from"./Bi0YyG7H.js";import"./CPLUyJxJ.js";function Ce(O,h){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}function ke(O,h){return c(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}const $e={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-8"},Pe={class:"px-8 py-6 border-b border-gray-100"},Se={class:"flex items-center justify-between"},De={class:"flex items-center gap-3"},je={class:"w-12 h-12 bg-arena rounded-xl flex items-center justify-center"},Ee={class:"px-8 py-6"},Te={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Le={class:"bg-arena/30 rounded-xl p-4 hover:shadow-sm transition-shadow"},Me={class:"flex items-center gap-3"},He={class:"w-10 h-10 bg-terracota/10 rounded-lg flex items-center justify-center flex-shrink-0"},Ie={class:"flex-1 min-w-0"},Ue={class:"text-2xl font-semibold text-cafe"},Re={class:"bg-orange-50/50 rounded-xl p-4 hover:shadow-sm transition-shadow"},Ne={class:"flex items-center gap-3"},Ae={class:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0"},qe={class:"flex-1 min-w-0"},Be={class:"text-2xl font-semibold text-cafe"},Ve={class:"bg-verde/10 rounded-xl p-4 hover:shadow-sm transition-shadow"},Oe={class:"flex items-center gap-3"},We={class:"w-10 h-10 bg-verde/20 rounded-lg flex items-center justify-center flex-shrink-0"},ze={class:"flex-1 min-w-0"},Fe={class:"text-lg font-semibold text-cafe truncate"},Ze={class:"bg-green-50/50 rounded-xl p-4 hover:shadow-sm transition-shadow"},Ge={class:"flex items-center gap-3"},Ke={class:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0"},Je={class:"flex-1 min-w-0"},Qe={class:"text-2xl font-semibold text-cafe"},Xe={key:0,class:"text-center py-12"},Ye={key:1,class:"space-y-3"},et={class:"flex items-stretch"},tt={class:"flex-1 p-5"},st={class:"flex items-center gap-4"},ot={class:"flex-shrink-0"},at={class:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4 items-center"},nt={class:"md:col-span-2"},rt={class:"flex items-center gap-2 mb-1"},it={class:"font-semibold text-cafe"},lt={key:0,class:"px-2 py-0.5 bg-terracota/10 text-terracota text-xs font-medium rounded-full"},dt={key:1,class:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full animate-pulse"},ct={class:"text-sm text-cafe/60"},mt={class:"text-sm font-medium text-cafe mb-0.5"},ft={class:"text-sm text-cafe/60"},pt={class:"capitalize"},ut={class:"text-right"},xt={class:"flex-shrink-0 flex items-center gap-2"},_t={class:"relative"},ht=["onClick","title"],gt={key:1,class:"absolute -top-1 -right-1 flex h-3 w-3"},vt=["onClick"],bt=["onClick"],wt={key:2,class:"text-center py-16"},yt={class:"inline-flex flex-col items-center gap-4"},Ct={class:"w-20 h-20 bg-verde/10 rounded-2xl flex items-center justify-center"},kt={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-8"},$t={class:"px-8 py-6 border-b border-gray-100"},Pt={class:"flex items-center justify-between"},St={class:"flex items-center gap-3"},Dt={class:"w-12 h-12 bg-verde/10 rounded-xl flex items-center justify-center"},jt={class:"px-8 py-6"},Et={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Tt={class:"bg-verde/10 rounded-xl p-4 hover:shadow-sm transition-shadow"},Lt={class:"flex items-center gap-3"},Mt={class:"w-10 h-10 bg-verde/20 rounded-lg flex items-center justify-center flex-shrink-0"},Ht={class:"flex-1 min-w-0"},It={class:"text-2xl font-semibold text-cafe"},Ut={class:"bg-blue-50/50 rounded-xl p-4 hover:shadow-sm transition-shadow"},Rt={class:"flex items-center gap-3"},Nt={class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0"},At={class:"flex-1 min-w-0"},qt={class:"text-2xl font-semibold text-cafe"},Bt={class:"bg-purple-50/50 rounded-xl p-4 hover:shadow-sm transition-shadow"},Vt={class:"flex items-center gap-3"},Ot={class:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0"},Wt={class:"flex-1 min-w-0"},zt={class:"text-2xl font-semibold text-cafe"},Ft={class:"bg-amber-50/50 rounded-xl p-4 hover:shadow-sm transition-shadow"},Zt={class:"flex items-center gap-3"},Gt={class:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0"},Kt={class:"flex-1 min-w-0"},Jt={class:"text-2xl font-semibold text-cafe"},Qt={key:0},Xt={class:"space-y-3"},Yt={class:"flex items-stretch"},es={class:"flex-1 p-5"},ts={class:"flex items-center gap-4"},ss={class:"flex-shrink-0 relative"},os={class:"w-12 h-12 rounded-full bg-verde flex items-center justify-center text-white font-semibold shadow-sm"},as={class:"flex-1 grid grid-cols-1 lg:grid-cols-6 gap-3 items-center"},ns={class:"lg:col-span-2"},rs={class:"flex items-center gap-2 mb-1"},is={class:"font-semibold text-cafe"},ls={key:0,class:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded-full animate-pulse"},ds={class:"text-sm text-cafe/60"},cs={class:"text-sm font-medium text-cafe mb-0.5"},ms={class:"text-sm text-cafe/60"},fs={class:"capitalize"},ps={key:0,class:"flex flex-col gap-1"},us={class:"flex items-center gap-1.5"},xs={class:"flex items-center gap-1"},_s={class:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden"},hs={key:1,class:"text-xs text-cafe/40 italic"},gs={class:"flex-shrink-0 flex items-center gap-2"},vs={key:0,class:"relative"},bs=["onClick","title"],ws={key:0,class:"absolute -top-1 -right-1 flex h-3 w-3"},ys=["onClick"],Cs={key:1,class:"text-center py-16"},ks={class:"inline-flex flex-col items-center gap-4"},$s={key:0,class:"fixed top-4 right-4 z-[70] animate-[slideIn_0.3s_ease-out]"},Ps={class:"flex items-start gap-3"},Ss={class:"text-2xl"},Ds={class:"flex-1"},js={class:"text-sm text-cafe/70"},Es={__name:"confirmaciones",setup(O){const h=_e();he();const W=p(!0),w=p([]),M=p(0),H=p("--"),I=p(0),U=p(!1),z=p(null),j=p(null),F=p("");p(!1);const C=p([]),R=p(0),N=p(0);p(0),p(0);const Z=p(0),x=p({visible:!1,tipo:"success",titulo:"",mensaje:""}),y=(o,t,a="success")=>{x.value={visible:!0,tipo:a,titulo:o,mensaje:t},setTimeout(()=>{x.value.visible=!1},5e3)},G=o=>o?o.split(" ").map(t=>t[0]).join("").toUpperCase().substring(0,2):"PA",A=o=>{if(!o)return"Sin fecha";const t=new Date(o),a=new Date,d=new Date(a);return d.setDate(d.getDate()+1),a.setHours(0,0,0,0),d.setHours(0,0,0,0),t.setHours(0,0,0,0),t.getTime()===a.getTime()?"Hoy":t.getTime()===d.getTime()?"Ma√±ana":t.toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short"})},K=(o,t)=>{if(!o||!t)return"--";const a=new Date,s=new Date(`${o}T${t}`)-a;if(s<0)return"Pasada";const f=Math.floor(s/(1e3*60*60)),g=Math.floor(s%(1e3*60*60)/(1e3*60));if(f<1)return`${g}min`;if(f<24)return`${f}h ${g}min`;{const v=Math.floor(f/24);return`${v} d√≠a${v>1?"s":""}`}},ne=(o,t)=>{if(!o||!t)return!1;const a=new Date,s=new Date(`${o}T${t}`)-a;return s>0&&s<=864e5},re=(o,t)=>{if(!o||!t)return!1;const a=new Date,s=new Date(`${o}T${t}`)-a;return s>0&&s<=144e5},E=async()=>{try{const o=new Date;o.setHours(0,0,0,0);const t=o.toISOString().split("T")[0],{data:a,error:d}=await h.from("citas").select(`
        id,
        fecha_cita,
        hora_inicio,
        modalidad,
        estado,
        paciente_id,
        terapeuta_id
      `).eq("estado","pendiente").gte("fecha_cita",t).order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0}).limit(50);if(d)throw d;if(!a||a.length===0){w.value=[],M.value=0,H.value="--",I.value=0;return}const s=[...new Set(a.map(i=>i.paciente_id))],f=[...new Set(a.map(i=>i.terapeuta_id).filter(Boolean))],{data:g}=await h.from("pacientes").select("id, nombre_completo, telefono, email").in("id",s);let v=[];if(f.length>0){const{data:i}=await h.from("terapeutas").select("id, nombre_completo").in("id",f);v=i||[]}const k=new Map(g?.map(i=>[i.id,i])||[]),P=new Map(v.map(i=>[i.id,i]));if(w.value=a.map(i=>{const S=k.get(i.paciente_id),q=i.terapeuta_id?P.get(i.terapeuta_id):null,$=new Date(o);$.setDate($.getDate()+2);const B=$.toISOString().split("T")[0];return{id:i.id,fecha:i.fecha_cita,hora_inicio:i.hora_inicio,modalidad:i.modalidad,estado:i.estado,esUrgente:i.fecha_cita<B,listaParaConfirmar:ne(i.fecha_cita,i.hora_inicio),paciente:{nombre:S?.nombre_completo||"Sin nombre",telefono:S?.telefono,email:S?.email},terapeuta:{nombre:q?.nombre_completo||"Sin terapeuta"}}}),M.value=w.value.filter(i=>i.esUrgente).length,w.value.length>0){const i=w.value[0];H.value=K(i.fecha,i.hora_inicio)}I.value=w.value.filter(i=>i.listaParaConfirmar&&i.paciente?.telefono).length}catch(o){console.error("Error al cargar citas por confirmar:",o)}finally{W.value=!1}},ie=o=>{const t=o.paciente?.telefono;if(!t){y("Sin Tel√©fono","Este paciente no tiene tel√©fono registrado","error");return}const a=t.replace(/\D/g,""),d=o.paciente.nombre.split(" ")[0],s=o.terapeuta.nombre,f=A(o.fecha),g=o.hora_inicio,v=`Hola ${d}, te escribo desde el equipo de Psic√≥loga Karem Pe√±a.
Solo quer√≠a confirmar tu sesi√≥n programada para ${f} a las ${g} con ${s}.
¬øPodr√≠as confirmarme si podr√°s asistir?`,k=encodeURIComponent(v),P=`https://wa.me/${a}?text=${k}`;window.open(P,"_blank")},le=o=>{const t=o.paciente?.telefono;if(!t){y("Sin Tel√©fono","Este paciente no tiene tel√©fono registrado","error");return}const a=t.replace(/\D/g,""),d=o.paciente.nombre.split(" ")[0],s=o.terapeuta.nombre,f=o.hora_inicio,g=`Hola ${d}, te escribo desde el equipo de Psic√≥loga Karem Pe√±a.
Solo quer√≠a recordarte que tienes tu sesi√≥n hoy a las ${f} con ${s}.
¬°Te esperamos!`,v=encodeURIComponent(g),k=`https://wa.me/${a}?text=${v}`;window.open(k,"_blank")},de=async o=>{try{const{data:t,error:a}=await h.rpc("confirmar_cita_y_descontar_bono",{p_cita_id:o.id});if(a)throw a;if(!t.success){y("‚úó Error",t.error||"Error al confirmar la cita","error");return}let d=`Cita con ${t.paciente_nombre} confirmada.`;t.bono_id&&(d+=` Sesiones restantes en bono: ${t.sesiones_restantes}`,t.bono_agotado?d+=" ‚ö†Ô∏è BONO AGOTADO":t.sesiones_restantes<=2&&(d+=" ‚ö†Ô∏è Pocas sesiones")),y("‚úì Cita Confirmada",d,"success"),await Promise.all([E(),T()])}catch(t){console.error("Error al confirmar cita:",t),y("‚úó Error","Error al confirmar la cita","error")}},ce=o=>{z.value=o,j.value={id:o.id,fecha_cita:o.fecha,hora_inicio:o.hora_inicio,hora_fin:o.hora_fin||"00:00",bono_id:o.bono_id||null,paciente_nombre:o.paciente?.nombre||"Paciente",terapeuta_nombre:o.terapeuta?.nombre||"Sin asignar",modalidad:o.modalidad,estado:o.estado},F.value="",U.value=!0},J=()=>{U.value=!1,z.value=null,j.value=null,F.value=""},me=o=>{J(),o?.reintegrada;const t=o?.reintegrada?"Se devolvi√≥ 1 sesi√≥n al bono del paciente":"La sesi√≥n se descont√≥ del bono seg√∫n pol√≠tica de cancelaci√≥n";y("Cita Cancelada",t,"success"),E(),T()},T=async()=>{try{const o=new Date;o.setHours(0,0,0,0);const t=o.toISOString().split("T")[0],{data:a,error:d}=await h.from("citas").select(`
        id,
        fecha_cita,
        hora_inicio,
        modalidad,
        estado,
        paciente_id,
        terapeuta_id,
        bono_id
      `).eq("estado","confirmada").gte("fecha_cita",t).order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0}).limit(50);if(d)throw d;if(!a||a.length===0){C.value=[],N.value=0,R.value=0;return}const s=[...new Set(a.map(n=>n.paciente_id))],f=[...new Set(a.map(n=>n.terapeuta_id).filter(Boolean))],g=[...new Set(a.map(n=>n.bono_id).filter(Boolean))],{data:v}=await h.from("pacientes").select("id, nombre_completo, telefono").in("id",s);let k=[];if(g.length>0){const{data:n}=await h.from("bonos").select("id, sesiones_totales, sesiones_restantes, estado").in("id",g);k=n||[]}let P=[];if(f.length>0){const{data:n}=await h.from("terapeutas").select("id, nombre_completo").in("id",f);P=n||[]}const i=new Map(v?.map(n=>[n.id,n])||[]),S=new Map(P.map(n=>[n.id,n])),q=new Map(k.map(n=>[n.id,n]));C.value=a.map(n=>{const Q=i.get(n.paciente_id),pe=n.terapeuta_id?S.get(n.terapeuta_id):null,D=n.bono_id?q.get(n.bono_id):null;return{id:n.id,fecha:n.fecha_cita,hora_inicio:n.hora_inicio,modalidad:n.modalidad,estado:n.estado,listaParaRecordatorio:re(n.fecha_cita,n.hora_inicio),paciente:{nombre:Q?.nombre_completo||"Sin nombre",telefono:Q?.telefono},terapeuta:{nombre:pe?.nombre_completo||"Sin terapeuta"},bono:D?{id:D.id,sesiones_totales:D.sesiones_totales,sesiones_restantes:D.sesiones_restantes,estado:D.estado,tiene_bono:!0}:null}}),N.value=C.value.filter(n=>n.fecha===t).length;const $=new Date(o);$.setDate($.getDate()+7);const B=$.toISOString().split("T")[0];R.value=C.value.filter(n=>n.fecha<=B).length,Z.value=C.value.filter(n=>n.listaParaRecordatorio&&n.paciente?.telefono).length}catch(o){console.error("Error al cargar citas confirmadas:",o)}},fe=async o=>{let t=`¬øVolver la cita de ${o.paciente.nombre} a estado PENDIENTE?`;if(o.bono&&o.bono.tiene_bono&&(t+=`

‚úÖ Se devolver√° 1 sesi√≥n al bono`),!!confirm(t))try{const{data:a,error:d}=await h.rpc("revertir_confirmacion_y_devolver_sesion",{p_cita_id:o.id});if(d)throw d;if(!a.success){y("‚úó Error",a.error||"Error al revertir la confirmaci√≥n","error");return}y("‚Ü© Cita Revertida",`Cita de ${a.paciente_nombre} marcada como PENDIENTE`,"success"),await Promise.all([E(),T()])}catch(a){console.error("Error al revertir confirmaci√≥n:",a),y("‚úó Error","Error al revertir la confirmaci√≥n","error")}};return ge(()=>{E(),T()}),(o,t)=>{const a=ue,d=xe;return c(),m("div",null,[e("div",$e,[e("div",Pe,[e("div",Se,[e("div",De,[e("div",je,[u(r(V),{class:"w-7 h-7 text-terracota"})]),t[1]||(t[1]=e("div",null,[e("h2",{class:"text-xl font-semibold text-cafe"}," Citas pendientes de confirmaci√≥n "),e("p",{class:"text-sm text-cafe/60 mt-0.5"}," Gestiona las citas que requieren confirmaci√≥n con el paciente ")],-1))]),u(a,{to:"/coordinadora/agenda",class:"text-sm text-terracota hover:text-terracota/80 font-medium transition-colors flex items-center gap-1"},{default:L(()=>[...t[2]||(t[2]=[e("span",null,"Ver agenda completa",-1),e("span",null,"‚Üí",-1)])]),_:1})])]),e("div",Ee,[e("div",Te,[e("div",Le,[e("div",Me,[e("div",He,[u(r(V),{class:"w-6 h-6 text-terracota"})]),e("div",Ie,[e("p",Ue,l(r(w).length),1),t[3]||(t[3]=e("p",{class:"text-xs text-cafe/60 font-medium"},"Pendientes",-1))])])]),e("div",Re,[e("div",Ne,[e("div",Ae,[u(r(Ce),{class:"w-6 h-6 text-orange-600"})]),e("div",qe,[e("p",Be,l(r(M)),1),t[4]||(t[4]=e("p",{class:"text-xs text-cafe/60 font-medium"},"Urgentes",-1))])])]),e("div",Ve,[e("div",Oe,[e("div",We,[u(r(se),{class:"w-6 h-6 text-verde"})]),e("div",ze,[e("p",Fe,l(r(H)),1),t[5]||(t[5]=e("p",{class:"text-xs text-cafe/60 font-medium"},"Pr√≥xima cita",-1))])])]),e("div",Ze,[e("div",Ge,[e("div",Ke,[u(r(oe),{class:"w-6 h-6 text-green-600"})]),e("div",Je,[e("p",Qe,l(r(I)),1),t[6]||(t[6]=e("p",{class:"text-xs text-cafe/60 font-medium"},"Listas para confirmar",-1))])])])]),r(W)?(c(),m("div",Xe,[...t[7]||(t[7]=[e("div",{class:"inline-flex flex-col items-center gap-3"},[e("div",{class:"w-12 h-12 border-3 border-terracota/20 border-t-terracota rounded-full animate-spin"}),e("p",{class:"text-cafe/60 font-medium text-sm"},"Cargando citas...")],-1)])])):r(w).length>0?(c(),m("div",Ye,[(c(!0),m(Y,null,ee(r(w),s=>(c(),m("div",{key:s.id,class:"group bg-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-200 overflow-hidden"},[e("div",et,[e("div",{class:_(["w-1 flex-shrink-0",{"bg-terracota":s.esUrgente,"bg-verde":!s.esUrgente}])},null,2),e("div",tt,[e("div",st,[e("div",ot,[e("div",{class:_(["w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold shadow-sm",{"bg-terracota":s.esUrgente,"bg-cafe/80":!s.esUrgente}])},l(G(s.paciente.nombre)),3)]),e("div",at,[e("div",nt,[e("div",rt,[e("h4",it,l(s.paciente.nombre),1),s.esUrgente?(c(),m("span",lt," Urgente ")):b("",!0),s.listaParaConfirmar?(c(),m("span",dt,[...t[8]||(t[8]=[e("span",null,"üîî",-1),e("span",null,"Lista para confirmar",-1)])])):b("",!0)]),e("p",ct,l(s.terapeuta.nombre),1)]),e("div",null,[e("p",mt,l(A(s.fecha)),1),e("p",ft,l(s.hora_inicio),1)]),e("div",null,[e("span",{class:_(["inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium",{"bg-purple-50 text-purple-700":s.modalidad==="online","bg-verde/10 text-verde":s.modalidad==="presencial"}])},[e("span",null,l(s.modalidad==="online"?"üíª":"üè•"),1),e("span",pt,l(s.modalidad),1)],2)]),e("div",ut,[e("p",{class:_(["text-sm font-semibold",{"text-terracota":s.esUrgente,"text-cafe/70":!s.esUrgente}])},l(K(s.fecha,s.hora_inicio)),3),t[9]||(t[9]=e("p",{class:"text-xs text-cafe/50"},"restante",-1))])]),e("div",xt,[e("div",_t,[s.paciente.telefono?(c(),m("button",{key:0,onClick:f=>ie(s),class:_(["p-2.5 rounded-lg transition-colors",s.listaParaConfirmar?"bg-green-500 text-white hover:bg-green-600 animate-pulse":"bg-green-500/10 text-green-600 hover:bg-green-500 hover:text-white"]),title:s.listaParaConfirmar?"¬°Lista para confirmar! Enviar WhatsApp":"Enviar WhatsApp"},[...t[10]||(t[10]=[e("span",{class:"text-lg"},"üí¨",-1)])],10,ht)):b("",!0),s.listaParaConfirmar?(c(),m("span",gt,[...t[11]||(t[11]=[e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"},null,-1),e("span",{class:"relative inline-flex rounded-full h-3 w-3 bg-red-500"},null,-1)])])):b("",!0)]),e("button",{onClick:f=>de(s),class:"p-2.5 bg-verde/10 text-verde hover:bg-verde hover:text-white rounded-lg transition-colors",title:"Confirmar cita"},[...t[12]||(t[12]=[e("span",{class:"text-lg"},"‚úì",-1)])],8,vt),e("button",{onClick:f=>ce(s),class:"p-2.5 bg-red-50 text-red-600 hover:bg-red-500 hover:text-white rounded-lg transition-colors",title:"Cancelar cita"},[...t[13]||(t[13]=[e("span",{class:"text-lg"},"‚úï",-1)])],8,bt)])])])])]))),128))])):(c(),m("div",wt,[e("div",yt,[e("div",Ct,[u(r(ke),{class:"w-12 h-12 text-verde"})]),t[15]||(t[15]=e("div",{class:"space-y-1"},[e("h3",{class:"text-lg font-semibold text-cafe"}," No hay citas pendientes por confirmar "),e("p",{class:"text-sm text-cafe/60 max-w-sm"}," Todo est√° organizado, puedes revisar la agenda completa ")],-1)),u(a,{to:"/coordinadora/agenda",class:"mt-2 px-5 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors font-medium text-sm"},{default:L(()=>[...t[14]||(t[14]=[te(" Ver agenda ",-1)])]),_:1})])]))])]),e("div",kt,[e("div",$t,[e("div",Pt,[e("div",St,[e("div",Dt,[u(r(ae),{class:"w-7 h-7 text-verde"})]),t[16]||(t[16]=e("div",null,[e("h2",{class:"text-xl font-semibold text-cafe"}," Citas confirmadas "),e("p",{class:"text-sm text-cafe/60 mt-0.5"}," Citas ya confirmadas con los pacientes ")],-1))]),u(a,{to:"/coordinadora/agenda?estado=confirmada",class:"text-sm text-verde hover:text-verde/80 font-medium transition-colors flex items-center gap-1"},{default:L(()=>[...t[17]||(t[17]=[e("span",null,"Ver todas",-1),e("span",null,"‚Üí",-1)])]),_:1})])]),e("div",jt,[e("div",Et,[e("div",Tt,[e("div",Lt,[e("div",Mt,[u(r(ae),{class:"w-6 h-6 text-verde"})]),e("div",Ht,[e("p",It,l(r(C).length),1),t[18]||(t[18]=e("p",{class:"text-xs text-cafe/60 font-medium"},"Confirmadas",-1))])])]),e("div",Ut,[e("div",Rt,[e("div",Nt,[u(r(se),{class:"w-6 h-6 text-blue-600"})]),e("div",At,[e("p",qt,l(r(R)),1),t[19]||(t[19]=e("p",{class:"text-xs text-cafe/60 font-medium"},"Pr√≥ximos 7 d√≠as",-1))])])]),e("div",Bt,[e("div",Vt,[e("div",Ot,[u(r(V),{class:"w-6 h-6 text-purple-600"})]),e("div",Wt,[e("p",zt,l(r(N)),1),t[20]||(t[20]=e("p",{class:"text-xs text-cafe/60 font-medium"},"Hoy",-1))])])]),e("div",Ft,[e("div",Zt,[e("div",Gt,[u(r(oe),{class:"w-6 h-6 text-amber-600"})]),e("div",Kt,[e("p",Jt,l(r(Z)),1),t[21]||(t[21]=e("p",{class:"text-xs text-cafe/60 font-medium"},"Recordatorios listos",-1))])])])]),r(C).length>0?(c(),m("div",Qt,[e("div",Xt,[(c(!0),m(Y,null,ee(r(C),s=>(c(),m("div",{key:s.id,class:"group bg-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-200 overflow-hidden"},[e("div",Yt,[t[29]||(t[29]=e("div",{class:"w-1 bg-verde flex-shrink-0"},null,-1)),e("div",es,[e("div",ts,[e("div",ss,[e("div",os,l(G(s.paciente.nombre)),1),t[22]||(t[22]=e("div",{class:"absolute -bottom-1 -right-1 w-5 h-5 bg-white rounded-full flex items-center justify-center shadow-sm"},[e("span",{class:"text-verde text-xs"},"‚úì")],-1))]),e("div",as,[e("div",ns,[e("div",rs,[e("h4",is,l(s.paciente.nombre),1),s.listaParaRecordatorio?(c(),m("span",ls,[...t[23]||(t[23]=[e("span",null,"‚è∞",-1),e("span",null,"Enviar recordatorio",-1)])])):b("",!0)]),e("p",ds,l(s.terapeuta.nombre),1)]),e("div",null,[e("p",cs,l(A(s.fecha)),1),e("p",ms,l(s.hora_inicio),1)]),e("div",null,[e("span",{class:_(["inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium",{"bg-purple-50 text-purple-700":s.modalidad==="online","bg-verde/10 text-verde":s.modalidad==="presencial"}])},[e("span",null,l(s.modalidad==="online"?"üíª":"üè•"),1),e("span",fs,l(s.modalidad),1)],2)]),e("div",null,[s.bono?(c(),m("div",ps,[e("div",us,[t[24]||(t[24]=e("span",{class:"text-xs text-cafe/60"},"üé´ Bono:",-1)),e("span",{class:_(["text-xs font-semibold",{"text-red-600":s.bono.sesiones_restantes===0,"text-orange-600":s.bono.sesiones_restantes===1,"text-amber-600":s.bono.sesiones_restantes===2,"text-verde":s.bono.sesiones_restantes>2}])},l(s.bono.sesiones_restantes)+"/"+l(s.bono.sesiones_totales),3)]),e("div",xs,[e("div",_s,[e("div",{class:_(["h-full transition-all duration-300 rounded-full",{"bg-red-500":s.bono.sesiones_restantes===0,"bg-orange-500":s.bono.sesiones_restantes===1,"bg-amber-500":s.bono.sesiones_restantes===2,"bg-verde":s.bono.sesiones_restantes>2}]),style:we({width:`${s.bono.sesiones_restantes/s.bono.sesiones_totales*100}%`})},null,6)])]),s.bono.sesiones_restantes<=2?(c(),m("span",{key:0,class:_(["text-[10px] font-medium",{"text-red-600":s.bono.sesiones_restantes===0,"text-orange-600":s.bono.sesiones_restantes===1,"text-amber-600":s.bono.sesiones_restantes===2}])},l(s.bono.sesiones_restantes===0?"‚ö†Ô∏è Agotado":"‚ö†Ô∏è Renovar pronto"),3)):b("",!0)])):(c(),m("div",hs," Sin bono "))]),t[25]||(t[25]=e("div",{class:"text-right"},[e("span",{class:"inline-flex items-center gap-1 px-2.5 py-1 bg-verde/10 text-verde rounded-full text-xs font-medium"},[e("span",null,"‚úì"),e("span",null,"Confirmada")])],-1))]),e("div",gs,[s.paciente.telefono?(c(),m("div",vs,[e("button",{onClick:f=>le(s),class:_(["p-2.5 rounded-lg transition-colors",s.listaParaRecordatorio?"bg-blue-500 text-white hover:bg-blue-600 animate-pulse":"bg-blue-500/10 text-blue-600 hover:bg-blue-500 hover:text-white"]),title:s.listaParaRecordatorio?"¬°Lista para recordatorio! Enviar WhatsApp":"Enviar recordatorio por WhatsApp"},[...t[26]||(t[26]=[e("span",{class:"text-lg"},"üí¨",-1)])],10,bs),s.listaParaRecordatorio?(c(),m("span",ws,[...t[27]||(t[27]=[e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"},null,-1),e("span",{class:"relative inline-flex rounded-full h-3 w-3 bg-blue-500"},null,-1)])])):b("",!0)])):b("",!0),e("button",{onClick:f=>fe(s),class:"p-2.5 bg-orange-50 text-orange-600 hover:bg-orange-500 hover:text-white rounded-lg transition-colors",title:"Volver a pendiente"},[...t[28]||(t[28]=[e("span",{class:"text-lg"},"‚Ü∫",-1)])],8,ys)])])])])]))),128))])])):(c(),m("div",Cs,[e("div",ks,[t[31]||(t[31]=ve('<div class="w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center" data-v-6d26ebe1><span class="text-4xl" data-v-6d26ebe1>üìã</span></div><div class="space-y-1" data-v-6d26ebe1><h3 class="text-lg font-semibold text-cafe" data-v-6d26ebe1> No hay citas confirmadas </h3><p class="text-sm text-cafe/60 max-w-sm" data-v-6d26ebe1> Las citas confirmadas con los pacientes aparecer√°n aqu√≠ </p></div>',2)),u(a,{to:"/coordinadora/agenda",class:"mt-2 px-5 py-2 bg-verde text-white rounded-lg hover:bg-verde/90 transition-colors font-medium text-sm"},{default:L(()=>[...t[30]||(t[30]=[te(" Ver agenda completa ",-1)])]),_:1})])]))])]),r(j)?(c(),X(d,{key:0,cita:r(j),"is-open":r(U),onClose:J,onCancelada:me},null,8,["cita","is-open"])):b("",!0),(c(),X(be,{to:"body"},[r(x).visible?(c(),m("div",$s,[e("div",{class:_(["bg-white rounded-lg shadow-2xl border-l-4 p-4 min-w-[320px] max-w-md",{"border-green-500":r(x).tipo==="success","border-red-500":r(x).tipo==="error"}])},[e("div",Ps,[e("div",{class:_(["w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",{"bg-green-100":r(x).tipo==="success","bg-red-100":r(x).tipo==="error"}])},[e("span",Ss,l(r(x).tipo==="success"?"‚úì":"‚úó"),1)],2),e("div",Ds,[e("p",{class:_(["font-bold mb-1",{"text-green-700":r(x).tipo==="success","text-red-700":r(x).tipo==="error"}])},l(r(x).titulo),3),e("p",js,l(r(x).mensaje),1)]),e("button",{onClick:t[0]||(t[0]=s=>r(x).visible=!1),class:"text-cafe/40 hover:text-cafe/60 transition-colors"},[...t[32]||(t[32]=[e("span",{class:"text-xl"},"√ó",-1)])])])],2)])):b("",!0)]))])}}},qs=ye(Es,[["__scopeId","data-v-6d26ebe1"]]);export{qs as default};
