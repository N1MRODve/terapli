import{j as e,u as t,w as r,b as n,e as s,c as o,f as i,h as a,i as c,k as p,l,m as d}from"../nitro/nitro.mjs";import{renderToString as u}from"vue/server-renderer";import{createHead as f,propsToString as m,renderSSRHead as y}from"unhead/server";import{stringify as h,uneval as g}from"devalue";import{FlatMetaPlugin as T}from"unhead/plugins";import{walkResolver as b}from"unhead/utils";import{toValue as w,isRef as _,hasInjectionContext as R,inject as S,ref as v,watchEffect as $,getCurrentInstance as A,onBeforeUnmount as C,onDeactivated as L,onActivated as k}from"vue";function baseURL(){return t().app.baseURL}function buildAssetsURL(...r){return e(publicAssetsURL(),t().app.buildAssetsDir,...r)}function publicAssetsURL(...r){const n=t().app,s=n.cdnURL||n.baseURL;return r.length?e(s,...r):s}function getModuleDependencies(e,t){if(t._dependencies[e])return t._dependencies[e];const r=t._dependencies[e]={scripts:{},styles:{},preload:{},prefetch:{}};if(!t.manifest)return r;const n=t.manifest[e];if(!n)return r;n.file&&(r.preload[e]=n,(n.isEntry||n.sideEffects)&&(r.scripts[e]=n));for(const e of n.css||[])r.styles[e]=r.preload[e]=r.prefetch[e]=t.manifest[e];for(const e of n.assets||[])r.preload[e]=r.prefetch[e]=t.manifest[e];for(const e of n.imports||[]){const n=getModuleDependencies(e,t);for(const e in n.styles)r.styles[e]=n.styles[e];for(const e in n.preload)r.preload[e]=n.preload[e];for(const e in n.prefetch)r.prefetch[e]=n.prefetch[e]}const s={};for(const e in r.preload){const t=r.preload[e];t.preload&&(s[e]=t)}return r.preload=s,r}function getRequestDependencies(e,t){if(e._requestDependencies)return e._requestDependencies;const r=function(e,t){let r="";const n=[...e].sort();for(let e=0;e<n.length;e++)e>0&&(r+=","),r+=n[e];if(t._dependencySets[r])return t._dependencySets[r];const s={scripts:{},styles:{},preload:{},prefetch:{}};for(const r of e){const e=getModuleDependencies(r,t);for(const t in e.scripts)s.scripts[t]=e.scripts[t];for(const t in e.styles)s.styles[t]=e.styles[t];for(const t in e.preload)s.preload[t]=e.preload[t];for(const t in e.prefetch)s.prefetch[t]=e.prefetch[t];for(const e of t.manifest?.[r]?.dynamicImports||[]){const r=getModuleDependencies(e,t);for(const e in r.scripts)s.prefetch[e]=r.scripts[e];for(const e in r.styles)s.prefetch[e]=r.styles[e];for(const e in r.preload)s.prefetch[e]=r.preload[e]}}const o={};for(const e in s.prefetch){const t=s.prefetch[e];t.prefetch&&(o[e]=t)}s.prefetch=o;for(const e in s.preload)delete s.prefetch[e];for(const e in s.styles)delete s.preload[e],delete s.prefetch[e];return t._dependencySets[r]=s,s}(new Set(Array.from([...t._entrypoints,...e.modules||e._registeredComponents||[]])),t);return e._requestDependencies=r,r}function renderStyles(e,t){const{styles:r}=getRequestDependencies(e,t);let n="";for(const e in r){const s=r[e];n+=`<link rel="stylesheet" href="${t.buildAssetsURL(s.file)}" crossorigin>`}return n}function renderResourceHints(e,t){const{preload:r,prefetch:n}=getRequestDependencies(e,t);let s="";for(const e in r){const n=r[e],o=t.buildAssetsURL(n.file),i=n.module?"modulepreload":"preload",a="style"===n.resourceType||"font"===n.resourceType||"script"===n.resourceType||n.module?" crossorigin":"";n.resourceType&&n.mimeType?s+=`<link rel="${i}" as="${n.resourceType}" type="${n.mimeType}"${a} href="${o}">`:n.resourceType?s+=`<link rel="${i}" as="${n.resourceType}"${a} href="${o}">`:s+=`<link rel="${i}"${a} href="${o}">`}for(const e in n){const r=n[e],o=t.buildAssetsURL(r.file),i="style"===r.resourceType||"font"===r.resourceType||"script"===r.resourceType||r.module?" crossorigin":"";r.resourceType&&r.mimeType?s+=`<link rel="prefetch" as="${r.resourceType}" type="${r.mimeType}"${i} href="${o}">`:r.resourceType?s+=`<link rel="prefetch" as="${r.resourceType}"${i} href="${o}">`:s+=`<link rel="prefetch"${i} href="${o}">`}return s}function renderResourceHeaders(e,t){const{preload:r,prefetch:n}=getRequestDependencies(e,t),s=[];for(const e in r){const n=r[e];let o=`<${t.buildAssetsURL(n.file)}>; rel="${n.module?"modulepreload":"preload"}"`;n.resourceType&&(o+=`; as="${n.resourceType}"`),n.mimeType&&(o+=`; type="${n.mimeType}"`),("style"===n.resourceType||"font"===n.resourceType||"script"===n.resourceType||n.module)&&(o+="; crossorigin"),s.push(o)}for(const e in n){const r=n[e];let o=`<${t.buildAssetsURL(r.file)}>; rel="prefetch"`;r.resourceType&&(o+=`; as="${r.resourceType}"`),r.mimeType&&(o+=`; type="${r.mimeType}"`),("style"===r.resourceType||"font"===r.resourceType||"script"===r.resourceType||r.module)&&(o+="; crossorigin"),s.push(o)}return{link:s.join(", ")}}function getPreloadLinks(e,t){const{preload:r}=getRequestDependencies(e,t),n=[];for(const e in r){const s=r[e];n.push({rel:s.module?"modulepreload":"preload",as:s.resourceType,type:s.mimeType??null,crossorigin:"style"===s.resourceType||"font"===s.resourceType||"script"===s.resourceType||s.module?"":null,href:t.buildAssetsURL(s.file)})}return n}function getPrefetchLinks(e,t){const{prefetch:r}=getRequestDependencies(e,t),n=[];for(const e in r){const s=r[e];n.push({rel:"prefetch",as:s.resourceType,type:s.mimeType??null,crossorigin:"style"===s.resourceType||"font"===s.resourceType||"script"===s.resourceType||s.module?"":null,href:t.buildAssetsURL(s.file)})}return n}function renderScripts(e,t){const{scripts:r}=getRequestDependencies(e,t);let n="";for(const e in r){const s=r[e];s.module?n+=`<script type="module" src="${t.buildAssetsURL(s.file)}" crossorigin><\/script>`:n+=`<script src="${t.buildAssetsURL(s.file)}" defer crossorigin><\/script>`}return n}function createRenderer(e,t){const n=function({manifest:e,precomputed:t,buildAssetsURL:n}){if(!e&&!t)throw new Error("Either manifest or precomputed data must be provided");const s={buildAssetsURL:n||r,manifest:e,precomputed:t,updateManifest:updateManifest,_dependencies:{},_dependencySets:{},_entrypoints:[]};function updateManifest(e){const t=Object.entries(e);s.manifest=e,s._dependencies={},s._dependencySets={},s._entrypoints=t.filter(e=>e[1].isEntry).map(([e])=>e)}return t?(s._dependencies=t.dependencies,s._entrypoints=t.entrypoints):e&&updateManifest(e),s}(t);return{rendererContext:n,async renderToString(r){r._registeredComponents=r._registeredComponents||new Set;const s=await Promise.resolve(e).then(e=>"default"in e?e.default:e),o=await s(r),wrap=e=>()=>e(r,n);return{html:await t.renderToString(o,r),renderResourceHeaders:wrap(renderResourceHeaders),renderResourceHints:wrap(renderResourceHints),renderStyles:wrap(renderStyles),renderScripts:wrap(renderScripts)}}}}const VueResolver=(e,t)=>_(t)?w(t):t,j="usehead";function injectHead(){if(R()){const e=S(j);if(!e)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return e}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function useHead(e,t={}){const r=t.head||injectHead();return r.ssr?r.push(e||{},t):function(e,t,r={}){const n=v(!1);let s;$(()=>{const o=n.value?{}:b(t,VueResolver);s?s.patch(o):s=e.push(o,r)});A()&&(C(()=>{s.dispose()}),L(()=>{n.value=!0}),k(()=>{n.value=!1}));return s}(r,e,t)}function useSeoMeta(e={},t={}){(t.head||injectHead()).use(T);const{title:r,titleTemplate:n,...s}=e;return useHead({title:r,titleTemplate:n,_flatMeta:s},t)}function createHead(e={}){const t=f({...e,propResolvers:[VueResolver]});return t.install=function(e){return{install(t){t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide(j,e)}}.install}(t),t}const x={meta:[{name:"viewport",content:"width=device-width, initial-scale=1"},{charset:"utf-8"},{name:"description",content:"Teraplí: Sistema de gestión clínica moderna para terapeutas. Gestiona pacientes, citas, bonos y recursos de manera eficiente y segura."},{name:"robots",content:"noindex, nofollow"},{name:"geo.region",content:"ES-M"},{name:"geo.placename",content:"Ciempozuelos"},{name:"geo.position",content:"40.1524167;-3.6171837"},{name:"ICBM",content:"40.1524167, -3.6171837"},{property:"og:title",content:"Teraplí - Sistema de Gestión Clínica"},{property:"og:description",content:"Teraplí: Sistema de gestión clínica moderna para terapeutas. Gestiona pacientes, citas, bonos y recursos de manera eficiente y segura."},{property:"og:image",content:"https://terapli.com/og-image.jpg"},{property:"og:url",content:"https://terapli.com"},{property:"og:type",content:"website"},{property:"og:locale",content:"es_ES"},{property:"og:site_name",content:"Teraplí - Sistema de Gestión Clínica"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:"Teraplí - Sistema de Gestión Clínica"},{name:"twitter:description",content:"Teraplí: Sistema de gestión clínica moderna para terapeutas. Gestiona pacientes, citas, bonos y recursos de manera eficiente y segura."},{name:"twitter:image",content:"https://terapli.com/og-image.jpg"},{name:"keywords",content:"Teraplí, sistema gestión clínica, software terapeutas, gestión pacientes, agenda citas terapia, bonos terapia, psicoterapia digital"},{name:"author",content:"Teraplí Team"},{name:"robots",content:"index, follow"}],link:[{rel:"canonical",href:"https://terapli.com"},{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}],style:[],script:[{type:"application/ld+json",innerHTML:'{"@context":"https://schema.org","@type":"Psychologist","name":"Psicóloga Karem Peña","image":"https://psicologakarem.com/images/karem-pena-psicologa.jpg","@id":"https://psicologakarem.com","url":"https://psicologakarem.com","telephone":"+34722377290","priceRange":"€€","address":{"@type":"PostalAddress","streetAddress":"Calle del Dr. Rivas, 2, Número 8","addressLocality":"Ciempozuelos","postalCode":"28350","addressRegion":"Madrid","addressCountry":"ES"},"geo":{"@type":"GeoCoordinates","latitude":40.1524167,"longitude":-3.6171837},"openingHoursSpecification":[{"@type":"OpeningHoursSpecification","dayOfWeek":["Monday","Tuesday","Wednesday","Thursday","Friday"],"opens":"11:00","closes":"14:00"},{"@type":"OpeningHoursSpecification","dayOfWeek":["Monday","Tuesday","Wednesday","Thursday","Friday"],"opens":"18:00","closes":"22:00"}],"sameAs":["https://www.instagram.com/psicokarem","https://www.tiktok.com/@psicokarem","https://www.copc.cat/es/contacte/karem-eydelys-pena-de-rodriguez-138759"],"areaServed":[{"@type":"City","name":"Ciempozuelos"},{"@type":"AdministrativeArea","name":"Madrid Sur"}],"hasOfferCatalog":{"@type":"OfferCatalog","name":"Servicios de Psicoterapia","itemListElement":[{"@type":"Offer","itemOffered":{"@type":"Service","name":"Terapia Individual","description":"Acompañamiento psicológico personalizado para ansiedad, autoestima y bienestar emocional"}},{"@type":"Offer","itemOffered":{"@type":"Service","name":"Terapia de Pareja","description":"Psicoterapia de pareja para mejorar la comunicación y fortalecer el vínculo emocional"}},{"@type":"Service","name":"Terapia Online","description":"Sesiones de psicoterapia a distancia con la misma cercanía y confidencialidad"}]}}'}],noscript:[],htmlAttrs:{lang:"es"},charset:"utf-8",viewport:"width=device-width, initial-scale=1",title:"Teraplí - Sistema de Gestión Clínica"},U={id:"teleports"},H={id:"__nuxt-loader"},P=`<div${m({id:"__nuxt"})}>`,M="</div>",getClientManifest=()=>import("../build/client.manifest.mjs").then(e=>e.default||e).then(e=>"function"==typeof e?e():e),O=lazyCachedFunction(async()=>{const e=await getClientManifest();if(!e)throw new Error("client.manifest is not available");const t=await import("../build/server.mjs").then(e=>e.default||e);if(!t)throw new Error("Server bundle is not available");return createRenderer(t,{manifest:e,renderToString:async function(e,t){const r=await u(e,t);return P+r+M},buildAssetsURL:buildAssetsURL})}),D=lazyCachedFunction(async()=>{const e=await getClientManifest(),r=await import("../virtual/_virtual_spa-template.mjs").then(e=>e.template).catch(()=>"").then(e=>{{const t=`<div${m(H)}>`;return P+M+(e?t+e+"</div>":"")}}),n=createRenderer(()=>()=>{},{manifest:e,renderToString:()=>r,buildAssetsURL:buildAssetsURL}),s=await n.renderToString({});return{rendererContext:n.rendererContext,renderToString:e=>{const r=t(e.event);return e.modules||=new Set,e.payload.serverRendered=!1,e.config={public:r.public,app:r.app},Promise.resolve(s)}}});function lazyCachedFunction(e){let t=null;return()=>(null===t&&(t=e().catch(e=>{throw t=null,e})),t)}const z=lazyCachedFunction(()=>import("../build/styles.mjs").then(e=>e.default||e));function renderPayloadJsonScript(e){const t={type:"application/json",innerHTML:e.data?h(e.data,e.ssrContext._payloadReducers):"","data-nuxt-data":"nuxt-app","data-ssr":!e.ssrContext.noSSR,id:"__NUXT_DATA__"};e.src&&(t["data-src"]=e.src);return[t,{innerHTML:`window.__NUXT__={};window.__NUXT__.config=${g(e.ssrContext.config)}`}]}const E={disableDefaults:!0};const q={omitLineBreaks:!0},G=/^[A-Za-z]:\//;const N=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,F=/^\/([A-Za-z]:)?$/;function cwd(){return"undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd().replace(/\\/g,"/"):"/"}const resolve=function(...e){let t="",r=!1;for(let n=(e=e.map(e=>function(e=""){return e?e.replace(/\\/g,"/").replace(G,e=>e.toUpperCase()):e}(e))).length-1;n>=-1&&!r;n--){const s=n>=0?e[n]:cwd();s&&0!==s.length&&(t=`${s}/${t}`,r=isAbsolute(s))}return t=function(e,t){let r="",n=0,s=-1,o=0,i=null;for(let a=0;a<=e.length;++a){if(a<e.length)i=e[a];else{if("/"===i)break;i="/"}if("/"===i){if(s===a-1||1===o);else if(2===o){if(r.length<2||2!==n||"."!==r[r.length-1]||"."!==r[r.length-2]){if(r.length>2){const e=r.lastIndexOf("/");-1===e?(r="",n=0):(r=r.slice(0,e),n=r.length-1-r.lastIndexOf("/")),s=a,o=0;continue}if(r.length>0){r="",n=0,s=a,o=0;continue}}t&&(r+=r.length>0?"/..":"..",n=2)}else r.length>0?r+=`/${e.slice(s+1,a)}`:r=e.slice(s+1,a),n=a-s-1;s=a,o=0}else"."===i&&-1!==o?++o:o=-1}return r}(t,!r),r&&!isAbsolute(t)?`/${t}`:t.length>0?t:"."};const isAbsolute=function(e){return N.test(e)};globalThis.__buildAssetsURL=buildAssetsURL,globalThis.__publicAssetsURL=publicAssetsURL;const I=!!U.id,W=I?`<div${m(U)}>`:"",J=I?"</div>":"";let X;const Z=n(async e=>{const r=p(),n=e.path.startsWith("/__nuxt_error")?s(e):null;if(n&&!("__unenv__"in e.node.req))throw o({statusCode:404,statusMessage:"Page Not Found: /__nuxt_error"});const u=function(e){return{url:e.path,event:e,runtimeConfig:t(e),noSSR:e.context.nuxt?.noSSR||!1,head:createHead(E),error:!1,nuxt:void 0,payload:{},_payloadReducers:Object.create(null),modules:new Set}}(e),f={mode:"server"};if(u.head.push(x,f),n){if(n.statusCode&&=Number.parseInt(n.statusCode),"string"==typeof n.data)try{n.data=i(n.data)}catch{}!function(e,t){e.error=!0,e.payload={error:t},e.url=t.url}(u,n)}const m=a(e);!1===m.ssr&&(u.noSSR=!0);const h=await function(e){return e.noSSR?D():O()}(u);for(const e of await getClientManifest().then(e=>{const t=[];for(const r of Object.values(e))r._globalCSS&&t.push(r.src);return t}))u.modules.add(e);const g=await h.renderToString(u).catch(async e=>{if(u._renderResponse&&"skipping render"===e.message)return{};const t=!n&&u.payload?.error||e;throw await(u.nuxt?.hooks.callHook("app:error",t)),t}),T=u._renderResponse?[]:await async function(e){const t=await z(),r=new Set;for(const n of e)if(n in t&&t[n])for(const e of await t[n]())r.add(e);return Array.from(r).map(e=>({innerHTML:e}))}(u.modules??[]);if(await(u.nuxt?.hooks.callHook("app:rendered",{ssrContext:u,renderResult:g})),u._renderResponse)return u._renderResponse;if(u.payload?.error&&!n)throw u.payload.error;const b=m.noScripts,{styles:w,scripts:_}=getRequestDependencies(u,h.rendererContext);if(!b){let t=X;t||(t=buildAssetsURL("CwdOEPoi.js"),u.runtimeConfig.app.cdnURL||/^(?:\/|\.+\/)/.test(t)?X=t:(t=function(e,t){const r=resolve(e).replace(F,"$1").split("/"),n=resolve(t).replace(F,"$1").split("/");if(":"===n[0][1]&&":"===r[0][1]&&r[0]!==n[0])return n.join("/");const s=[...r];for(const e of s){if(n[0]!==e)break;r.shift(),n.shift()}return[...r.map(()=>".."),...n].join("/")}(e.path.replace(/\/[^/]+$/,"/"),c("/",t)),/^(?:\/|\.+\/)/.test(t)||(t=`./${t}`))),u.head.push({script:[{tagPosition:"head",tagPriority:-2,type:"importmap",innerHTML:JSON.stringify({imports:{"#entry":t}})}]},f)}T.length&&u.head.push({style:T});const R=[];for(const e of Object.values(w))R.push({rel:"stylesheet",href:h.rendererContext.buildAssetsURL(e.file),crossorigin:""});if(R.length&&u.head.push({link:R},f),b||(u.head.push({link:getPreloadLinks(u,h.rendererContext)},f),u.head.push({link:getPrefetchLinks(u,h.rendererContext)},f),u.head.push({script:renderPayloadJsonScript({ssrContext:u,data:u.payload})},{...f,tagPosition:"bodyClose",tagPriority:"high"})),!m.noScripts){const e="head";u.head.push({script:Object.values(_).map(t=>({type:t.module?"module":null,src:h.rendererContext.buildAssetsURL(t.file),defer:!t.module||null,tagPosition:e,crossorigin:""}))},f)}const{headTags:S,bodyTags:v,bodyTagsOpen:$,htmlAttrs:A,bodyAttrs:C}=await y(u.head,q),L={htmlAttrs:A?[A]:[],head:normalizeChunks([S]),bodyAttrs:C?[C]:[],bodyPrepend:normalizeChunks([$,u.teleports?.body]),body:[g.html,W+(I?joinTags([u.teleports?.[`#${U.id}`]]):"")+J],bodyAppend:[v]};return await r.hooks.callHook("render:html",L,{event:e}),{body:(k=L,`<!DOCTYPE html><html${joinAttrs(k.htmlAttrs)}><head>${joinTags(k.head)}</head><body${joinAttrs(k.bodyAttrs)}>${joinTags(k.bodyPrepend)}${joinTags(k.body)}${joinTags(k.bodyAppend)}</body></html>`),statusCode:d(e),statusMessage:l(e),headers:{"content-type":"text/html;charset=utf-8","x-powered-by":"Nuxt"}};var k});function normalizeChunks(e){const t=[];for(const r of e){const e=r?.trim();e&&t.push(e)}return t}function joinTags(e){return e.join("")}function joinAttrs(e){return 0===e.length?"":" "+e.join(" ")}const B=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{useHead as a,baseURL as b,j as h,B as r,useSeoMeta as u};
//# sourceMappingURL=renderer.mjs.map
