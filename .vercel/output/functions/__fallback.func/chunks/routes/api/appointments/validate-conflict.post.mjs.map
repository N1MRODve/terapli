{"version":3,"file":"validate-conflict.post.mjs","sources":["../../../../../../../../server/api/appointments/validate-conflict.post.ts"],"sourcesContent":null,"names":["validateConflict_post","defineEventHandler","async","event","config","useRuntimeConfig","supabaseUrl","public","supabaseKey","createError","statusCode","statusMessage","supabaseClient","createServerClient","cookies","get","name","getCookie","set","value","options","setCookie","remove","deleteCookie","data","user","error","userError","auth","getUser","profile","profileError","from","select","eq","id","single","isTerapeuta","rol","isAdmin","isCoordinadora","body","readBody","fecha_cita","hora_inicio","hora_fin","estado","previous_estado","terapeuta_id","stateValidation","validateStateTransition","valid","errorCode","details","query","neq","existingAppointments","queryError","console","validation","validateAppointment","message","formatValidationError"],"mappings":"gbAuBA,MAAAA,EAAAC,EAAAC,MAAAC,IACA,IAEA,MAAAC,EAAAC,IACAC,EAAAF,EAAAE,aAAAF,EAAAG,OAAAD,YACAE,EAAAJ,EAAAI,aAAAJ,EAAAG,OAAAC,YAEA,IAAAF,IAAAE,EACA,MAAAC,EAAA,CACAC,WAAA,IACAC,cAAA,4CAKA,MAAAC,QAAAC,EAAAA,mBACAP,EACAE,EACA,CACAM,QAAA,CACAC,IAAAC,GAAAC,EAAAd,EAAAa,GACAE,IAAA,CAAAF,EAAAG,EAAAC,IAAAC,EAAAlB,EAAAa,EAAAG,EAAAC,GACAE,OAAA,CAAAN,EAAAI,IAAAG,EAAApB,EAAAa,EAAAI,OAKAI,MAAAC,KAAAA,GAAAC,MAAAC,SAAAf,EAAAgB,KAAAC,UAEA,GAAAF,IAAAF,EACA,MAAAhB,EAAA,CACAC,WAAA,IACAC,cAAA,mBAKA,MAAAa,KAAAM,EAAAJ,MAAAK,SAAAnB,EACAoB,KAAA,YACAC,OAAA,OACAC,GAAA,KAAAT,EAAAU,IACAC,SAEA,GAAAL,IAAAD,EACA,MAAArB,EAAA,CACAC,WAAA,IACAC,cAAA,6CAIA,MAAA0B,EAAA,cAAAP,EAAAQ,IACAC,EAAA,UAAAT,EAAAQ,IACAE,EAAA,iBAAAV,EAAAQ,IAGA,IAAAD,IAAAE,IAAAC,EACA,MAAA/B,EAAA,CACAC,WAAA,IACAC,cAAA,WAAAmB,EAAAQ,iGAKA,MAAAG,QAAAC,EAAAvC,IACAgC,GACAA,EAAAQ,WACAA,EAAAC,YACAA,EAAAC,SACAA,EAAAC,OACAA,EAAAC,gBACAA,GACAN,EAGA,IAAAO,EAAAP,EAAAO,aAOA,IANAA,GAAAX,IAEAW,EAAAvB,EAAAU,KAIAQ,IAAAC,IAAAC,EACA,MAAApC,EAAA,CACAC,WAAA,IACAC,cAAA,kEAIA,IAAAqC,EACA,MAAAvC,EAAA,CACAC,WAAA,IACAC,cAAA,qDAMA,GAAA0B,GAAAW,IAAAvB,EAAAU,GACA,MAAA1B,EAAA,CACAC,WAAA,IACAC,cAAA,0DAKA,GAAAmC,GAAAC,EAAA,CACA,MAAAE,EAAAC,EAAAH,EAAAD,GACA,IAAAG,EAAAE,MACA,MAAA,CACAA,OAAA,EACAzB,MAAAuB,EAAAvB,MACA0B,UAAAH,EAAAG,UACAC,QAAAJ,EAAAI,QAGA,CAGA,IAAAC,EAAA1C,EACAoB,KAAA,SACAC,OAAA,+DACAC,GAAA,eAAAc,GACAd,GAAA,aAAAS,GACAY,IAAA,SAAA,aAGApB,IACAmB,EAAAA,EAAAC,IAAA,KAAApB,IAGA,MAAAX,KAAAgC,EAAA9B,MAAA+B,SAAAH,EAEA,GAAAG,EAEA,MADAC,QAAAhC,MAAA,qCAAA+B,GACAhD,EAAA,CACAC,WAAA,IACAC,cAAA,kCAKA,MAUAgD,EAAAC,EAVA,CACAzB,KACAQ,aACAC,cACAC,WACAG,eACAF,OAAAA,GAAA,aAMAU,GAAA,IAIA,OAAAG,EAAAR,MASA,CACAA,OAAA,EACAU,QAAA,qDAVA,CACAV,OAAA,EACAzB,MAAAoC,EAAAH,GACAP,UAAAO,EAAAP,UACAC,QAAAM,EAAAN,QASA,OAAA3B,GAIA,GAHAgC,QAAAhC,MAAA,8BAAAA,GAGAA,EAAAhB,WACA,MAAAgB,EAIA,MAAAjB,EAAA,CACAC,WAAA,IACAC,cAAAe,EAAAmC,SAAA,wCAEA"}