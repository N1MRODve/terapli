{"version":3,"file":"confirmar.post.mjs","sources":["../../../../../../../../server/api/pagos/confirmar.post.ts"],"sourcesContent":null,"names":["confirmar_post","defineEventHandler","async","event","console","log","getMethod","error","createError","statusCode","statusMessage","body","readBody","bodyError","bonoId","metodoPago","metodoFinal","trim","process","env","SUPABASE_URL","supabase","serverSupabaseClient","clientError","data","userData","userError","auth","getUser","user","id","profile","profileError","from","select","eq","single","rol","email","bonoActual","bonoError","code","estado_pago","existe","fechaPago","Date","toISOString","bonoActualizado","updateError","update","fecha_pago","metodo_pago","confirmado_por","updated_at","message","responseData","success","montoTotal","monto_total","confirmadoPor","details"],"mappings":"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"}