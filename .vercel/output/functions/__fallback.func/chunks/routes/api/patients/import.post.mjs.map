{"version":3,"file":"import.post.mjs","sources":["../../../../../../../../server/api/patients/import.post.ts"],"sourcesContent":null,"names":["import_post","defineEventHandler","async","event","form","readMultipartFormData","length","createError","statusCode","statusMessage","fileData","find","item","name","actionData","action","data","toString","extension","_a","filename","split","pop","toLowerCase","includes","parsedData","csvContent","Papa","parse","header","skipEmptyLines","workbook","XLSX.read","type","firstSheetName","SheetNames","worksheet","Sheets","XLSX.utils","sheet_to_json","config","useRuntimeConfig","supabaseUrl","public","supabaseKey","supabaseClient","createServerClient","cookies","get","getCookie","set","value","options","setCookie","remove","deleteCookie","user","error","userError","auth","getUser","profile","profileError","from","select","eq","id","single","isTerapeuta","rol","isAdmin","existingPatientsQuery","existingPatients","existingError","results","created","updated","skipped","errors","i","row","rowNumber","nombre_completo","trim","push","email","telefono","existingPatient","p","activoValue","activo","String","patientData","_b","_c","area_de_acompanamiento","_d","frecuencia","_e","metadata","notas","terapeuta_id","updateError","update","message","insertError","insert","success","total","console"],"mappings":"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"}