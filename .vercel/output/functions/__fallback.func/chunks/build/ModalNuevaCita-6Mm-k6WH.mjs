import{defineComponent as e,computed as a,ref as t,watch as s,nextTick as o,mergeProps as r,unref as d,createVNode as l,resolveDynamicComponent as i,useSSRContext as c}from"vue";import{ssrRenderAttrs as n,ssrInterpolate as v,ssrRenderComponent as u,ssrRenderAttr as p,ssrRenderList as m,ssrRenderClass as b,ssrRenderStyle as x,ssrIncludeBooleanAttr as f,ssrLooseContain as g,ssrLooseEqual as h,ssrRenderVNode as w}from"vue/server-renderer";import{u as y}from"./useCitas-DyEZH6RI.mjs";import{CheckCircleIcon as A,CalendarIcon as _,TicketIcon as D,MagnifyingGlassIcon as $,InformationCircleIcon as F,UserIcon as k,ExclamationTriangleIcon as C,UserGroupIcon as P,ClockIcon as j,DocumentTextIcon as S,ComputerDesktopIcon as M,BuildingOfficeIcon as B,PhoneIcon as E,CheckBadgeIcon as I,XCircleIcon as H}from"@heroicons/vue/24/outline";import{u as N}from"./useSupabaseClient-DykwVqLQ.mjs";import{a as z}from"./server.mjs";import{u as L}from"./useSupabase-DljD0dj8.mjs";import{_ as T}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";const q=e({__name:"ModalNuevaCita",__ssrInlineRender:!0,props:{modelValue:{type:Boolean,default:!1},mostrar:{type:Boolean,default:!1},fechaPreseleccionada:{type:String,default:""},horaPreseleccionada:{type:String,default:""},titulo:{type:String,default:""},pacientePreseleccionado:{type:Object,default:null},citaId:{type:String,default:null}},emits:["cerrar","citaCreada","actualizado","update:modelValue"],setup(e,{emit:c}){const T=e,{getCitasPorDia:q,verificarBonoActivo:V,sugerirProximoHorario:O}=y(),U=N();z(),a(()=>!!T.citaId),t(!1);const R=t(""),G=t(!1),Q=t(null),X=t(!1),J=t(!1),Y=t(!1),Z=t([]),K=t(null),W=t(!1),ee=t(!1),ae=t([]),te=t(!1),se=t(null),oe=t(!1),re=t(""),de=t(""),le=t("exito"),ie=t([]),ce=t({tiene_bono:!1,sesiones_restantes:0,sesiones_totales:0,tipo_bono:"",bono_id:void 0}),ne=t({paciente_id:"",paciente_nombre:"",terapeuta_id:"",terapeuta_nombre:"",fecha:T.fechaPreseleccionada||formatearFecha(new Date),fecha_manual:"",hora_inicio:T.horaPreseleccionada||"",hora_fin:"",duracion:"60",tipo:"presencial",estado:"pendiente",notas:"",descontar_de_bono:!1,bono_id:void 0}),ve=t(null);t(!1);const ue=t([]),pe=["11:00","11:30","12:00","12:30","13:00","13:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00"],me=[{valor:"presencial",nombre:"Presencial",componente:B,descripcion:"Sesi√≥n presencial en consultorio"},{valor:"online",nombre:"Online",componente:M,descripcion:"Videollamada por plataforma digital"},{valor:"telefonica",nombre:"Telef√≥nica",componente:E,descripcion:"Llamada telef√≥nica"}],be=[{valor:"confirmada",nombre:"Confirmada",componente:I,claseActivo:"border-emerald-500 bg-emerald-50 text-emerald-700",claseInactivo:"border-gray-300 hover:border-emerald-400 bg-white"},{valor:"pendiente",nombre:"Pendiente",componente:j,claseActivo:"border-amber-500 bg-amber-50 text-amber-700",claseInactivo:"border-gray-300 hover:border-amber-400 bg-white"},{valor:"cancelada",nombre:"Cancelada",componente:H,claseActivo:"border-red-500 bg-red-50 text-red-700",claseInactivo:"border-gray-300 hover:border-red-400 bg-white"},{valor:"completada",nombre:"Completada",componente:A,claseActivo:"border-blue-500 bg-blue-50 text-blue-700",claseInactivo:"border-gray-300 hover:border-blue-400 bg-white"}],xe=a(()=>formatearFecha(new Date)),fe=a(()=>{const e=new Date,a=[];a.push({label:"Hoy",fecha:formatearFecha(e)});const t=new Date(e);t.setDate(t.getDate()+1),a.push({label:"Ma√±ana",fecha:formatearFecha(t)});const s=["Lun","Mar","Mi√©","Jue","Vie"];let o=new Date(e),r=0;for(;r<5;){o.setDate(o.getDate()+1);const e=o.getDay();e>=1&&e<=5&&(a.push({label:`${s[e-1]} ${o.getDate()}`,fecha:formatearFecha(o)}),r++)}return a}),ge=a(()=>{if(!R.value)return[];const e=R.value.toLowerCase().trim();return e.length<2?[]:Z.value.filter(a=>a.nombre.toLowerCase().includes(e)||a.email.toLowerCase().includes(e))}),he=a(()=>{const e=ne.value.paciente_id,a=!ee.value||ne.value.terapeuta_id;return e&&a&&ne.value.fecha&&ne.value.hora_inicio&&ne.value.hora_fin&&ne.value.tipo&&ne.value.estado});function calcularHoraFin(){if(!ne.value.hora_inicio||!ne.value.duracion)return;const e=ne.value.hora_inicio.split(":").map(Number),a=e[0]||0,t=e[1]||0,s=parseInt(ne.value.duracion),o=new Date;o.setHours(a,t,0,0);const r=new Date(o.getTime()+6e4*s),d=String(r.getHours()).padStart(2,"0"),l=String(r.getMinutes()).padStart(2,"0");ne.value.hora_fin=`${d}:${l}`}function horaAMinutos(e){if(!e||!e.includes(":"))return 0;const[a,t]=e.split(":").map(Number);return 60*(a||0)+(t||0)}function formatearFecha(e){return e.toISOString().split("T")[0]||""}function formatearFechaLegible(e){return new Date(e+"T00:00:00").toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}async function verificarRolUsuario(){try{console.log("üîç Verificando rol de usuario...");const{userProfile:e}=L();if(!e.value)return console.warn("‚ö†Ô∏è No hay perfil cargado"),void(ee.value=!1);console.log("üë§ Usuario:",e.value.email),console.log("üé≠ Rol del perfil:",e.value.rol),ee.value="coordinadora"===e.value.rol,console.log(`‚úÖ ¬øEs coordinadora? ${ee.value}`),ee.value&&(console.log("üåü Usuario es coordinadora - cargando terapeutas"),await async function(){te.value=!0;try{const{data:e,error:a}=await U.from("terapeutas").select("id, nombre_completo, email, especialidad").eq("activo",!0).order("nombre_completo",{ascending:!0});if(a)return void console.error("Error al cargar terapeutas:",a);ae.value=e||[],console.log(`‚úÖ ${ae.value.length} terapeutas cargados`)}catch(e){console.error("Error al cargar terapeutas:",e)}finally{te.value=!1}}())}catch(e){console.error("‚ùå Error al verificar rol:",e),ee.value=!1}}return s([()=>ne.value.fecha,()=>ne.value.hora_inicio,()=>ne.value.hora_fin],()=>{ne.value.fecha&&ne.value.hora_inicio&&ne.value.hora_fin&&async function(){if(ne.value.fecha&&ne.value.hora_inicio&&ne.value.hora_fin)try{const e=(await q(ne.value.fecha)).filter(e=>"cancelada"!==e.estado&&"borrador"!==e.estado&&null!==e.estado&&e.id!==T.citaId),a=ne.value.hora_inicio,t=ne.value.hora_fin;J.value=e.some(e=>{const s=e.hora_inicio,o=e.hora_fin,r=horaAMinutos(a),d=horaAMinutos(t),l=horaAMinutos(s),i=horaAMinutos(o),c=r>=l&&r<i||d>l&&d<=i||r<=l&&d>=i||r===l&&d===i;return c&&console.log("‚ö†Ô∏è Conflicto detectado:",{nueva:`${a} - ${t}`,existente:`${s} - ${o}`,estado:e.estado,paciente:e.paciente_nombre||"Desconocido"}),c}),J.value&&console.warn("‚ö†Ô∏è Hay conflicto de horario")}catch(e){console.error("‚ùå Error al verificar conflicto:",e),J.value=!1}else J.value=!1}()}),s(()=>T.fechaPreseleccionada,e=>{e&&(ne.value.fecha=e)}),s(()=>T.horaPreseleccionada,e=>{e&&(ne.value.hora_inicio=e,calcularHoraFin())}),s(()=>T.mostrar,e=>{e&&(console.log("üéØ Modal abierto - verificando rol y cargando datos"),verificarRolUsuario(),async function(){var e,a,t;console.log("üìã Cargando pacientes..."),Y.value=!0;try{const{data:{user:s}}=await U.auth.getUser();if(!s)return void console.error("‚ùå No hay usuario autenticado");console.log("üë§ Usuario ID:",s.id);const{userProfile:o}=L();console.log("üé≠ Rol de usuario:",(null==(e=o.value)?void 0:e.rol)||"desconocido");let r=U.from("pacientes").select("\n        id,\n        nombre_completo,\n        email,\n        metadata\n      ").eq("activo",!0).order("created_at",{ascending:!1});"coordinadora"!==(null==(a=o.value)?void 0:a.rol)?(console.log("üë®‚Äç‚öïÔ∏è Filtrando por terapeuta_id:",s.id),r=r.eq("terapeuta_id",s.id)):console.log("üåü Coordinadora - cargando TODOS los pacientes");const{data:d,error:l}=await r;if(l)return void console.error("‚ùå Error al cargar pacientes:",l);Z.value=(d||[]).map(e=>{var a,t;return{id:e.id,nombre:e.nombre_completo||"Sin nombre",email:e.email||"",frecuencia:(null==(a=e.metadata)?void 0:a.frecuencia)||"No definida",area_acompanamiento:(null==(t=e.metadata)?void 0:t.area_de_acompanamiento)||""}}),console.log(`‚úÖ ${Z.value.length} pacientes cargados (rol: ${(null==(t=o.value)?void 0:t.rol)||"desconocido"})`),console.log("üìù Pacientes:",Z.value)}catch(e){console.error("‚ùå Error al cargar pacientes:",e)}finally{Y.value=!1}}(),T.pacientePreseleccionado&&o(()=>{!async function(e){Q.value=e,ne.value.paciente_id=e.id,ne.value.paciente_nombre=e.nombre,R.value=e.nombre,G.value=!1;const a=await V(e.id);if(ce.value=a,a.tiene_bono&&a.sesiones_restantes>0&&(ne.value.descontar_de_bono=!0,ne.value.bono_id=a.bono_id),e.frecuencia&&!T.fechaPreseleccionada){W.value=!0;try{const a=await O(e.id,e.frecuencia);a&&(ve.value=a.fecha,K.value=a.hora,ne.value.fecha=a.fecha,ne.value.hora_inicio=a.hora,calcularHoraFin(),console.log("üí° Horario sugerido:",a))}catch(e){console.error("Error al sugerir horario:",e)}finally{W.value=!1}}console.log("‚úÖ Paciente seleccionado:",e.nombre)}({id:T.pacientePreseleccionado.id,nombre:T.pacientePreseleccionado.nombre,email:T.pacientePreseleccionado.email,frecuencia:T.pacientePreseleccionado.frecuencia||"No definida",area_acompanamiento:T.pacientePreseleccionado.area_acompanamiento||""})}))}),(a,t,s,o)=>{e.modelValue||e.mostrar?(t(`<div${n(r({class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},o))} data-v-75e79c96><div class="bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-white/30" data-v-75e79c96><div class="sticky top-0 bg-gradient-to-r from-[#5550F2]/5 via-[#027368]/5 to-[#04BF9D]/5 backdrop-blur-md border-b border-neutral-200 px-6 py-4 flex justify-between items-center shadow-sm" data-v-75e79c96><div data-v-75e79c96><h2 class="text-2xl font-[&#39;Elms_Sans&#39;] text-neutral-800 font-semibold" data-v-75e79c96>${v(e.titulo||"Nueva Cita")}</h2>`),e.fechaPreseleccionada?t(`<p class="text-sm text-neutral-600 mt-1" data-v-75e79c96>${v(formatearFechaLegible(e.fechaPreseleccionada))} a las ${v(e.horaPreseleccionada)}</p>`):t("\x3c!----\x3e"),t('</div><button class="text-neutral-600 hover:text-[#027368] transition-colors p-2 hover:bg-white/50 rounded-lg" aria-label="Cerrar modal" data-v-75e79c96><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-75e79c96><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-75e79c96></path></svg></button></div><form class="px-6 py-6 space-y-6 bg-gradient-to-b from-white/50 to-transparent" data-v-75e79c96>'),T.pacientePreseleccionado&&d(Q)?(t('<div class="p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl shadow-sm" data-v-75e79c96><div class="flex items-center justify-between" data-v-75e79c96><div class="flex items-center gap-3" data-v-75e79c96><div class="w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0" data-v-75e79c96>'),t(u(d(A),{class:"w-7 h-7 text-white"},null,s)),t(`</div><div data-v-75e79c96><div class="text-xs font-semibold text-emerald-700 uppercase tracking-wide mb-1" data-v-75e79c96>Paciente Seleccionado</div><div class="font-bold text-emerald-900 text-lg" data-v-75e79c96>${v(d(Q).nombre)}</div><div class="text-sm text-emerald-700 flex items-center gap-1 mt-0.5" data-v-75e79c96><span data-v-75e79c96>${v(d(Q).email)}</span></div>`),d(Q).frecuencia?(t('<div class="mt-2 flex items-center gap-2 text-xs" data-v-75e79c96>'),t(u(d(_),{class:"w-4 h-4 text-emerald-600"},null,s)),t(`<span class="text-emerald-700" data-v-75e79c96>Frecuencia: <strong class="capitalize" data-v-75e79c96>${v(d(Q).frecuencia)}</strong></span></div>`)):t("\x3c!----\x3e"),t('</div></div><div class="text-right" data-v-75e79c96>'),d(ce).tiene_bono?(t('<div class="flex items-center gap-1 text-xs text-emerald-700 font-semibold mb-1" data-v-75e79c96>'),t(u(d(D),{class:"w-4 h-4"},null,s)),t("<span data-v-75e79c96>BONO ACTIVO</span></div>")):t("\x3c!----\x3e"),d(ce).tiene_bono?t(`<div class="text-2xl font-bold text-emerald-900" data-v-75e79c96>${v(d(ce).sesiones_restantes)}/${v(d(ce).sesiones_totales)}</div>`):t("\x3c!----\x3e"),d(ce).tiene_bono?t('<div class="text-xs text-emerald-600" data-v-75e79c96>sesiones</div>'):t("\x3c!----\x3e"),t("</div></div></div>")):t("\x3c!----\x3e"),T.pacientePreseleccionado?t("\x3c!----\x3e"):(t('<div class="space-y-4" data-v-75e79c96><div class="flex items-center justify-between" data-v-75e79c96><h3 class="text-lg font-[&#39;Elms_Sans&#39;] text-neutral-800 font-semibold flex items-center gap-2" data-v-75e79c96>'),d(Q)?(t('<span class="w-7 h-7 rounded-full bg-gradient-to-r from-[#04BF9D] to-[#027368] text-white flex items-center justify-center shadow-sm" data-v-75e79c96>'),t(u(d(A),{class:"w-5 h-5"},null,s)),t("</span>")):t('<span class="w-7 h-7 rounded-full bg-gradient-to-r from-[#5550F2] to-[#027368] text-white flex items-center justify-center text-sm font-bold shadow-sm" data-v-75e79c96> 1 </span>'),t(" Seleccionar Paciente </h3></div>"),d(Q)?t("\x3c!----\x3e"):(t('<div class="p-3 bg-blue-50 border-l-4 border-blue-400 rounded" data-v-75e79c96><p class="flex items-center gap-2 text-sm text-blue-800" data-v-75e79c96>'),t(u(d($),{class:"w-5 h-5 flex-shrink-0"},null,s)),t('<span data-v-75e79c96>Busca y selecciona un paciente ya registrado en el sistema</span></p><p class="text-xs text-blue-700 mt-1.5 ml-7" data-v-75e79c96> Para crear un paciente nuevo, ve a la secci√≥n <strong data-v-75e79c96>Pacientes</strong> en el men√∫ principal </p></div>')),d(Q)?t("\x3c!----\x3e"):(t(`<div class="space-y-3" data-v-75e79c96><div class="relative" data-v-75e79c96><input${p("value",d(R))} type="text" placeholder="Buscar paciente por nombre o email..." class="w-full px-4 py-2.5 pl-10 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-[#027368]/20 focus:border-[#027368] bg-white/90 backdrop-blur-sm transition-all shadow-sm" autocomplete="off" data-v-75e79c96><span class="absolute left-3 top-1/2 -translate-y-1/2" data-v-75e79c96>`),t(u(d($),{class:"w-5 h-5 text-neutral-400"},null,s)),t("</span>"),d(Y)?t('<span class="absolute right-3 top-1/2 -translate-y-1/2" data-v-75e79c96><svg class="animate-spin h-5 w-5 text-[#027368]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-75e79c96><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-75e79c96></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-75e79c96></path></svg></span>'):t("\x3c!----\x3e"),d(R)||d(Y)?t("\x3c!----\x3e"):(t('<div class="mt-1 flex items-center gap-2 text-xs text-neutral-500" data-v-75e79c96>'),t(u(d(F),{class:"w-4 h-4 flex-shrink-0"},null,s)),t("<span data-v-75e79c96>Escribe al menos 2 caracteres para buscar</span></div>")),t("</div>"),d(G)&&d(R)&&d(ge).length>0?(t('<div class="grid grid-cols-1 md:grid-cols-2 gap-3" data-v-75e79c96>\x3c!--[--\x3e'),m(d(ge),e=>{t('<button type="button" class="p-4 text-left hover:bg-[#027368]/5 transition-all border-2 border-neutral-200 hover:border-[#027368] rounded-xl cursor-pointer group bg-white/90 backdrop-blur-sm shadow-sm hover:shadow-md" data-v-75e79c96><div class="flex items-center gap-3" data-v-75e79c96><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-[#027368]/20 to-[#04BF9D]/20 group-hover:from-[#027368] group-hover:to-[#04BF9D] flex items-center justify-center transition-all" data-v-75e79c96>'),t(u(d(k),{class:"w-6 h-6 text-[#027368] group-hover:text-white transition-colors"},null,s)),t(`</div><div class="flex-1" data-v-75e79c96><div class="font-medium text-neutral-800 group-hover:text-[#027368] transition-colors" data-v-75e79c96>${v(e.nombre)}</div><div class="text-sm text-neutral-600" data-v-75e79c96>${v(e.email)}</div>`),e.frecuencia?(t('<div class="text-xs text-neutral-500 mt-1 flex items-center gap-1" data-v-75e79c96>'),t(u(d(_),{class:"w-3 h-3"},null,s)),t(`<span class="font-medium capitalize" data-v-75e79c96>${v(e.frecuencia)}</span></div>`)):t("\x3c!----\x3e"),t('</div><div class="opacity-0 group-hover:opacity-100 transition-opacity" data-v-75e79c96><svg class="w-5 h-5 text-[#027368]" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-75e79c96><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-75e79c96></path></svg></div></div></button>')}),t("\x3c!--]--\x3e</div>")):t("\x3c!----\x3e"),d(G)&&d(R)&&0===d(ge).length&&!d(Y)?(t('<div class="border border-neutral-200 rounded-xl bg-white/90 backdrop-blur-sm p-6 text-center text-sm text-neutral-600 shadow-sm" data-v-75e79c96>'),t(u(d($),{class:"w-12 h-12 mx-auto mb-2 text-neutral-400"},null,s)),t(`<p data-v-75e79c96>No se encontraron pacientes con &quot;<strong data-v-75e79c96>${v(d(R))}</strong>&quot;</p></div>`)):t("\x3c!----\x3e"),t("</div>")),d(ne).paciente_id&&d(Q)&&!T.pacientePreseleccionado?(t('<div class="space-y-3" data-v-75e79c96><div class="p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl shadow-sm" data-v-75e79c96><div class="flex items-start justify-between gap-3" data-v-75e79c96><div class="flex items-center gap-3 flex-1" data-v-75e79c96><div class="w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0" data-v-75e79c96>'),t(u(d(A),{class:"w-7 h-7 text-white"},null,s)),t(`</div><div class="flex-1" data-v-75e79c96><div class="text-xs font-semibold text-emerald-700 uppercase tracking-wide mb-1" data-v-75e79c96>Paciente Seleccionado</div><div class="font-bold text-emerald-900 text-lg" data-v-75e79c96>${v(d(Q).nombre)}</div><div class="text-sm text-emerald-700 flex items-center gap-1 mt-0.5" data-v-75e79c96><span data-v-75e79c96>${v(d(Q).email)}</span></div>`),d(Q).frecuencia?(t('<div class="mt-2 flex items-center gap-2 text-sm" data-v-75e79c96>'),t(u(d(_),{class:"w-4 h-4 text-emerald-600"},null,s)),t(`<span class="font-medium text-emerald-800" data-v-75e79c96>Frecuencia:</span><span class="px-2 py-0.5 bg-emerald-100 text-emerald-800 rounded-lg font-medium capitalize" data-v-75e79c96>${v(d(Q).frecuencia)}</span></div>`)):t("\x3c!----\x3e"),t('</div></div><button type="button" class="px-4 py-2 bg-white border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 hover:border-emerald-400 rounded-lg text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow flex-shrink-0" data-v-75e79c96><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-75e79c96><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" data-v-75e79c96></path></svg><span data-v-75e79c96>Cambiar</span></button></div></div>'),d(ce).tiene_bono?(t('<div class="p-5 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 border-2 border-blue-300 rounded-xl shadow-md" data-v-75e79c96><div class="flex items-center justify-between mb-4" data-v-75e79c96><div class="flex items-center gap-3" data-v-75e79c96><div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center" data-v-75e79c96>'),t(u(d(D),{class:"w-6 h-6 text-white"},null,s)),t(`</div><div data-v-75e79c96><div class="text-sm font-bold text-blue-900 uppercase tracking-wide" data-v-75e79c96>Bono Activo</div><div class="text-xs text-blue-600" data-v-75e79c96>El paciente tiene sesiones disponibles</div></div></div><div class="text-right" data-v-75e79c96><div class="text-xs text-blue-600 mb-1" data-v-75e79c96>Sesiones Disponibles</div><div class="${b(["text-3xl font-bold",d(ce).sesiones_restantes<=1?"text-red-600":d(ce).sesiones_restantes<=2?"text-amber-600":"text-blue-700"])}" data-v-75e79c96>${v(d(ce).sesiones_restantes)}</div></div></div><div class="grid grid-cols-3 gap-3 mb-4" data-v-75e79c96><div class="bg-white p-3 rounded-lg border border-blue-200" data-v-75e79c96><div class="text-xs text-blue-600 mb-1 font-medium" data-v-75e79c96>Tipo de Bono</div><div class="font-bold text-blue-900 capitalize text-sm" data-v-75e79c96>${v(d(ce).tipo_bono||"N/A")}</div></div><div class="bg-white p-3 rounded-lg border border-blue-200" data-v-75e79c96><div class="text-xs text-blue-600 mb-1 font-medium" data-v-75e79c96>Total Sesiones</div><div class="font-bold text-blue-900 text-sm" data-v-75e79c96>${v(d(ce).sesiones_totales||"?")}</div></div><div class="bg-white p-3 rounded-lg border border-blue-200" data-v-75e79c96><div class="text-xs text-blue-600 mb-1 font-medium" data-v-75e79c96>Utilizadas</div><div class="font-bold text-blue-900 text-sm" data-v-75e79c96>${v((d(ce).sesiones_totales||0)-(d(ce).sesiones_restantes||0))}</div></div></div><div class="mb-4" data-v-75e79c96><div class="flex justify-between text-xs text-blue-700 mb-1" data-v-75e79c96><span data-v-75e79c96>Progreso del bono</span><span class="font-semibold" data-v-75e79c96>${v(Math.round((d(ce).sesiones_totales-d(ce).sesiones_restantes)/d(ce).sesiones_totales*100))}%</span></div><div class="w-full bg-blue-200 rounded-full h-3 overflow-hidden" data-v-75e79c96><div class="${b([[d(ce).sesiones_restantes<=1?"bg-red-500":d(ce).sesiones_restantes<=2?"bg-amber-500":"bg-blue-500"],"h-full rounded-full transition-all duration-500"])}" style="${x({width:(d(ce).sesiones_totales-d(ce).sesiones_restantes)/d(ce).sesiones_totales*100+"%"})}" data-v-75e79c96></div></div></div>`),d(ce).sesiones_restantes<=2?(t('<div class="mb-4 flex items-start gap-3 p-3 bg-amber-50 border-l-4 border-amber-500 rounded-lg" data-v-75e79c96>'),t(u(d(C),{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"},null,s)),t(`<div class="text-sm" data-v-75e79c96><div class="font-semibold text-amber-900 mb-1" data-v-75e79c96>${v(1===d(ce).sesiones_restantes?"¬°√öltima sesi√≥n del bono!":"¬°Pocas sesiones restantes!")}</div><div class="text-amber-800" data-v-75e79c96>${v(1===d(ce).sesiones_restantes?"Esta es la √∫ltima sesi√≥n disponible. Considere informar al paciente para renovar su bono.":`Solo quedan ${d(ce).sesiones_restantes} sesiones. Considere informar al paciente para renovar su bono pronto.`)}</div></div></div>`)):t("\x3c!----\x3e"),t(`<div class="flex items-start gap-3 p-3 bg-white border-2 border-blue-300 rounded-lg" data-v-75e79c96><input id="descontar-bono"${f(Array.isArray(d(ne).descontar_de_bono)?g(d(ne).descontar_de_bono,null):d(ne).descontar_de_bono)?" checked":""} type="checkbox" class="mt-1 w-5 h-5 text-blue-600 border-blue-300 rounded focus:ring-blue-500 focus:ring-2" data-v-75e79c96><label for="descontar-bono" class="flex-1 cursor-pointer" data-v-75e79c96><div class="text-sm text-blue-900 font-semibold mb-1" data-v-75e79c96> Descontar sesi√≥n de este bono </div><div class="text-xs text-blue-700" data-v-75e79c96> Al completar esta cita, se descontar√° autom√°ticamente 1 sesi√≥n del bono activo. Quedar√°n <strong data-v-75e79c96>${v(d(ce).sesiones_restantes-1)}</strong> sesiones disponibles. </div></label></div></div>`)):(t('<div class="p-4 bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-400 rounded-lg shadow-sm" data-v-75e79c96><div class="flex items-start gap-3" data-v-75e79c96>'),t(u(d(F),{class:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"},null,s)),t('<div data-v-75e79c96><div class="font-semibold text-amber-900 mb-1" data-v-75e79c96>Sin bono activo</div><div class="text-sm text-amber-800" data-v-75e79c96> Este paciente no tiene bonos activos actualmente. Esta sesi√≥n se cobrar√° de forma individual. </div></div></div></div>')),t("</div>")):t("\x3c!----\x3e"),t("</div>")),d(ee)?(t('<div class="space-y-4 pt-4 border-t-2 border-[#D8AFA0]/30" data-v-75e79c96><div class="flex items-center justify-between" data-v-75e79c96><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold flex items-center gap-2" data-v-75e79c96>'),d(se)?(t('<span class="w-7 h-7 rounded-full bg-emerald-500 text-white flex items-center justify-center" data-v-75e79c96>'),t(u(d(A),{class:"w-5 h-5"},null,s)),t("</span>")):t(`<span class="w-7 h-7 rounded-full bg-[#D8AFA0] text-white flex items-center justify-center text-sm font-bold" data-v-75e79c96>${v((T.pacientePreseleccionado,"2"))}</span>`),t(" Asignar Terapeuta </h3></div>"),d(se)?t("\x3c!----\x3e"):(t('<div class="p-3 bg-purple-50 border-l-4 border-purple-400 rounded" data-v-75e79c96><p class="flex items-center gap-2 text-sm text-purple-800" data-v-75e79c96>'),t(u(d(P),{class:"w-5 h-5 flex-shrink-0"},null,s)),t("<span data-v-75e79c96>Selecciona el terapeuta que atender√° esta cita</span></p></div>")),d(se)?t("\x3c!----\x3e"):(t('<div class="grid grid-cols-1 md:grid-cols-2 gap-3" data-v-75e79c96>\x3c!--[--\x3e'),m(d(ae),e=>{t('<button type="button" class="p-4 text-left hover:bg-[#D8AFA0]/10 transition-all border-2 border-[#D8AFA0]/30 hover:border-[#D8AFA0] rounded-lg cursor-pointer group bg-white" data-v-75e79c96><div class="flex items-center gap-3" data-v-75e79c96><div class="w-12 h-12 rounded-full bg-[#D8AFA0]/20 group-hover:bg-[#D8AFA0] flex items-center justify-center transition-colors" data-v-75e79c96>'),t(u(d(k),{class:"w-6 h-6 text-[#5D4A44] group-hover:text-white transition-colors"},null,s)),t(`</div><div class="flex-1" data-v-75e79c96><div class="font-medium text-[#5D4A44] group-hover:text-[#D8AFA0] transition-colors" data-v-75e79c96>${v(e.nombre_completo)}</div>`),e.especialidad?t(`<div class="text-sm text-[#5D4A44]/60" data-v-75e79c96>${v(e.especialidad)}</div>`):t("\x3c!----\x3e"),t(`<div class="text-xs text-[#5D4A44]/50" data-v-75e79c96>${v(e.email)}</div></div><div class="opacity-0 group-hover:opacity-100 transition-opacity" data-v-75e79c96><svg class="w-5 h-5 text-[#D8AFA0]" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-75e79c96><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-75e79c96></path></svg></div></div></button>`)}),t("\x3c!--]--\x3e</div>")),d(se)?(t('<div class="p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl shadow-sm" data-v-75e79c96><div class="flex items-start justify-between gap-3" data-v-75e79c96><div class="flex items-center gap-3 flex-1" data-v-75e79c96><div class="w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0" data-v-75e79c96>'),t(u(d(A),{class:"w-7 h-7 text-white"},null,s)),t(`</div><div class="flex-1" data-v-75e79c96><div class="text-xs font-semibold text-emerald-700 uppercase tracking-wide mb-1" data-v-75e79c96>Terapeuta Asignado</div><div class="font-bold text-emerald-900 text-lg" data-v-75e79c96>${v(d(se).nombre_completo)}</div>`),d(se).especialidad?t(`<div class="text-sm text-emerald-700 mt-0.5" data-v-75e79c96>${v(d(se).especialidad)}</div>`):t("\x3c!----\x3e"),t('</div></div><button type="button" class="px-4 py-2 bg-white border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 hover:border-emerald-400 rounded-lg text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow flex-shrink-0" data-v-75e79c96><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-75e79c96><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" data-v-75e79c96></path></svg><span data-v-75e79c96>Cambiar</span></button></div></div>')):t("\x3c!----\x3e"),t("</div>")):t("\x3c!----\x3e"),t('<div class="space-y-6 pt-4 border-t-2 border-[#D8AFA0]/30" data-v-75e79c96><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold flex items-center gap-2" data-v-75e79c96>'),d(he)?t('<span class="w-7 h-7 rounded-full bg-green-500 text-white flex items-center justify-center" data-v-75e79c96> ‚úì </span>'):t(`<span class="w-7 h-7 rounded-full bg-[#D8AFA0] text-white flex items-center justify-center text-sm font-bold" data-v-75e79c96>${v(d(ee)?"3":T.pacientePreseleccionado?"1":"2")}</span>`),t(' Detalles de la Cita </h3><div class="p-5 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl shadow-sm space-y-4" data-v-75e79c96><h4 class="text-sm font-bold text-blue-900 flex items-center gap-2" data-v-75e79c96>'),t(u(d(_),{class:"w-5 h-5 text-blue-600"},null,s)),t('<span data-v-75e79c96>Detalles de Programaci√≥n</span></h4><div class="grid grid-cols-1 md:grid-cols-2 gap-4" data-v-75e79c96><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-2 flex items-center gap-2" data-v-75e79c96>'),t(u(d(_),{class:"w-4 h-4"},null,s)),t(`<span data-v-75e79c96>Fecha</span><span class="text-red-500" data-v-75e79c96>*</span></label><div class="space-y-2" data-v-75e79c96><input${p("value",d(ne).fecha)} type="date" required${p("min",d(xe))} class="${b(["w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white text-base cursor-pointer",d(ue).includes("fecha")?"border-red-500 border-2":"border-[#D8AFA0]/30"])}" style="${x({"min-height":"44px"})}" placeholder="dd/mm/aaaa" data-v-75e79c96><div class="flex gap-2 flex-wrap" data-v-75e79c96>\x3c!--[--\x3e`),m(d(fe),(e,a)=>{t(`<button type="button" class="${b(["text-xs px-3 py-1.5 rounded-lg border transition-all",d(ne).fecha===e.fecha?"bg-[#D8AFA0] text-white border-[#D8AFA0] font-semibold":"bg-white text-[#5D4A44] border-[#D8AFA0]/30 hover:border-[#D8AFA0] hover:bg-[#D8AFA0]/10"])}" data-v-75e79c96>${v(e.label)}</button>`)}),t("\x3c!--]--\x3e</div>"),d(ve)&&d(ve)!==d(ne).fecha?t(`<div class="flex items-center gap-2" data-v-75e79c96><button type="button" class="text-xs px-2 py-1 bg-green-50 text-green-700 border border-green-200 rounded hover:bg-green-100 transition-colors" data-v-75e79c96> üí° Usar fecha sugerida: ${v(formatearFechaLegible(d(ve)))}</button></div>`):t("\x3c!----\x3e"),t('</div></div><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-2 flex items-center gap-2" data-v-75e79c96>'),t(u(d(j),{class:"w-4 h-4"},null,s)),t('<span data-v-75e79c96>Hora de Inicio</span><span class="text-red-500" data-v-75e79c96>*</span></label><div class="space-y-3" data-v-75e79c96><div class="grid grid-cols-4 gap-3 max-h-72 overflow-y-auto p-4 bg-white rounded-lg border border-[#D8AFA0]/20 shadow-inner" data-v-75e79c96>\x3c!--[--\x3e'),m(pe,e=>{t(`<button type="button" class="${b(["px-4 py-3 text-sm font-semibold rounded-lg transition-all border-2 flex items-center justify-center min-w-[70px]",d(ne).hora_inicio===e?"bg-[#D8AFA0] text-white border-[#D8AFA0] shadow-lg transform scale-105 ring-2 ring-[#D8AFA0]/30":"bg-white text-[#5D4A44] border-gray-300 hover:border-[#D8AFA0] hover:bg-[#D8AFA0]/10 hover:shadow-md hover:scale-102"])}" data-v-75e79c96>${v(e)}</button>`)}),t('\x3c!--]--\x3e</div><details class="text-xs" data-v-75e79c96><summary class="cursor-pointer text-[#5D4A44]/60 hover:text-[#5D4A44] select-none flex items-center gap-2" data-v-75e79c96>'),t(u(d(S),{class:"w-4 h-4"},null,s)),t(`<span data-v-75e79c96>Ingresar hora manualmente</span></summary><div class="mt-2" data-v-75e79c96><input${p("value",d(ne).hora_inicio)} type="time" step="1800" class="${b(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white",d(ue).includes("hora_inicio")?"border-red-500 border-2":"border-[#D8AFA0]/30"])}" data-v-75e79c96></div></details><datalist id="horas-sugeridas" data-v-75e79c96>\x3c!--[--\x3e`),m(pe,e=>{t(`<option${p("value",e)} data-v-75e79c96>${v(e)}</option>`)}),t("\x3c!--]--\x3e</datalist>"),d(K)&&d(K)!==d(ne).hora_inicio&&!1===d(W)?(t('<div class="flex items-center gap-2" data-v-75e79c96><button type="button" class="flex items-center gap-1.5 text-xs px-3 py-1.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg hover:bg-emerald-100 transition-colors font-medium" data-v-75e79c96>'),t(u(d(F),{class:"w-4 h-4"},null,s)),t(`<span data-v-75e79c96>Usar hora sugerida: ${v(d(K))}</span></button></div>`)):t("\x3c!----\x3e"),d(W)?t('<div class="text-xs text-[#5D4A44]/50 flex items-center gap-2" data-v-75e79c96><svg class="animate-spin h-3 w-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-75e79c96><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-75e79c96></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-75e79c96></path></svg> Buscando horario disponible... </div>'):t("\x3c!----\x3e"),t(`</div></div><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-75e79c96> Duraci√≥n <span class="text-red-500" data-v-75e79c96>*</span></label><select required class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white" data-v-75e79c96><option value="30" data-v-75e79c96${f(Array.isArray(d(ne).duracion)?g(d(ne).duracion,"30"):h(d(ne).duracion,"30"))?" selected":""}>30 minutos</option><option value="60" selected data-v-75e79c96>60 minutos (1 hora)</option><option value="90" data-v-75e79c96${f(Array.isArray(d(ne).duracion)?g(d(ne).duracion,"90"):h(d(ne).duracion,"90"))?" selected":""}>90 minutos (1.5 horas)</option><option value="120" data-v-75e79c96${f(Array.isArray(d(ne).duracion)?g(d(ne).duracion,"120"):h(d(ne).duracion,"120"))?" selected":""}>120 minutos (2 horas)</option></select></div><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-75e79c96> Hora de Fin </label><input${p("value",d(ne).hora_fin)} type="text" readonly class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg bg-gray-100 text-[#5D4A44]/60" placeholder="Se calcular√° autom√°ticamente" data-v-75e79c96></div></div></div><div class="p-5 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl shadow-sm space-y-4" data-v-75e79c96><h4 class="text-sm font-bold text-purple-900 flex items-center gap-2" data-v-75e79c96>`),t(u(d(M),{class:"w-5 h-5 text-purple-600"},null,s)),t('<span data-v-75e79c96>Tipo de Sesi√≥n y Estado</span></h4><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-2 flex items-center gap-2" data-v-75e79c96>'),t(u(d(M),{class:"w-5 h-5"},null,s)),t(`<span data-v-75e79c96>Tipo de Sesi√≥n</span><span class="text-red-500" data-v-75e79c96>*</span></label><div class="${b(["grid grid-cols-3 gap-3",d(ue).includes("tipo")?"p-3 border-2 border-red-500 bg-red-50 rounded-lg":""])}" data-v-75e79c96>\x3c!--[--\x3e`),m(me,e=>{t(`<button type="button" class="${b(["p-4 border-2 rounded-lg transition-all flex flex-col items-center gap-2 group",d(ne).tipo===e.valor?"border-[#D8AFA0] bg-[#D8AFA0]/20 shadow-md":"border-[#D8AFA0]/30 hover:border-[#D8AFA0] hover:bg-[#D8AFA0]/5 bg-white"])}" data-v-75e79c96>`),w(t,l(i(e.componente),{class:["w-8 h-8 transition-colors",d(ne).tipo===e.valor?"text-[#D8AFA0]":"text-[#5D4A44]/60 group-hover:text-[#D8AFA0]"]},null),s),t(`<div class="font-medium text-[#5D4A44] text-sm" data-v-75e79c96>${v(e.nombre)}</div><div class="text-xs text-[#5D4A44]/50" data-v-75e79c96>${v(e.descripcion)}</div></button>`)}),t('\x3c!--]--\x3e</div></div><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-2 flex items-center gap-2" data-v-75e79c96>'),t(u(d(A),{class:"w-5 h-5"},null,s)),t('<span data-v-75e79c96>Estado</span><span class="text-red-500" data-v-75e79c96>*</span></label><div class="grid grid-cols-2 md:grid-cols-4 gap-3" data-v-75e79c96>\x3c!--[--\x3e'),m(be,e=>{t(`<button type="button" class="${b(["p-3 border-2 rounded-lg transition-all flex flex-col items-center gap-2",d(ne).estado===e.valor?e.claseActivo+" shadow-md":e.claseInactivo])}" data-v-75e79c96>`),w(t,l(i(e.componente),{class:"w-7 h-7"},null),s),t(`<div class="font-medium text-sm" data-v-75e79c96>${v(e.nombre)}</div></button>`)}),t('\x3c!--]--\x3e</div></div></div><div class="p-5 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl shadow-sm" data-v-75e79c96><h4 class="text-sm font-bold text-amber-900 flex items-center gap-2 mb-3" data-v-75e79c96>'),t(u(d(S),{class:"w-5 h-5 text-amber-600"},null,s)),t('<span data-v-75e79c96>Notas Adicionales</span></h4><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-2 flex items-center gap-2" data-v-75e79c96>'),t(u(d(S),{class:"w-4 h-4"},null,s)),t(`<span data-v-75e79c96>Notas (opcional)</span></label><textarea rows="3" class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white resize-none" placeholder="Notas sobre la cita, recordatorios, etc." data-v-75e79c96>${v(d(ne).notas)}</textarea></div></div></div>`),d(J)?(t('<div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg shadow-sm" data-v-75e79c96><div class="flex items-start gap-3" data-v-75e79c96>'),t(u(d(C),{class:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5"},null,s)),t('<div data-v-75e79c96><div class="font-semibold text-yellow-900 mb-1 flex items-center gap-2" data-v-75e79c96><span data-v-75e79c96>Conflicto de Horario</span></div><div class="text-sm text-yellow-800" data-v-75e79c96> Ya existe una cita en este horario. Verifica la disponibilidad. </div></div></div></div>')):t("\x3c!----\x3e"),d(ue).length>0&&!d(he)?(t('<div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-lg shadow-sm" data-v-75e79c96><div class="flex items-start gap-3" data-v-75e79c96>'),t(u(d(H),{class:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"},null,s)),t('<div data-v-75e79c96><div class="font-semibold text-red-900 mb-2" data-v-75e79c96> Completa los campos obligatorios </div><ul class="text-sm text-red-800 space-y-1.5" data-v-75e79c96>'),d(ne).paciente_id?t("\x3c!----\x3e"):t('<li class="flex items-center gap-2" data-v-75e79c96><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-75e79c96></span><span data-v-75e79c96>Selecciona un paciente</span></li>'),d(ne).fecha?t("\x3c!----\x3e"):t('<li class="flex items-center gap-2" data-v-75e79c96><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-75e79c96></span><span data-v-75e79c96>Selecciona una fecha</span></li>'),d(ne).hora_inicio?t("\x3c!----\x3e"):t('<li class="flex items-center gap-2" data-v-75e79c96><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-75e79c96></span><span data-v-75e79c96>Selecciona la hora de inicio</span></li>'),d(ne).tipo?t("\x3c!----\x3e"):t('<li class="flex items-center gap-2" data-v-75e79c96><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-75e79c96></span><span data-v-75e79c96>Selecciona el tipo de sesi√≥n</span></li>'),d(ne).estado?t("\x3c!----\x3e"):t('<li class="flex items-center gap-2" data-v-75e79c96><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-75e79c96></span><span data-v-75e79c96>Selecciona el estado de la cita</span></li>'),t("</ul></div></div></div>")):t("\x3c!----\x3e"),d(he)&&!d(J)?(t('<div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg shadow-sm" data-v-75e79c96><div class="flex items-start gap-3" data-v-75e79c96>'),t(u(d(F),{class:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5"},null,s)),t(`<div class="flex-1" data-v-75e79c96><div class="font-semibold text-blue-900 mb-3" data-v-75e79c96> Resumen de la Cita </div><div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm" data-v-75e79c96><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Paciente:</span><div class="text-blue-900 font-semibold" data-v-75e79c96>${v(d(ne).paciente_nombre)}</div></div><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Fecha:</span><div class="text-blue-900" data-v-75e79c96>${v(formatearFechaLegible(d(ne).fecha))}</div></div><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Horario:</span><div class="text-blue-900 font-semibold" data-v-75e79c96>${v(d(ne).hora_inicio)} - ${v(d(ne).hora_fin)}</div></div><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Duraci√≥n:</span><div class="text-blue-900" data-v-75e79c96>${v(d(ne).duracion)} minutos</div></div><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Tipo:</span><div class="text-blue-900 capitalize" data-v-75e79c96>${v(d(ne).tipo)}</div></div><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Estado:</span><div class="text-blue-900 capitalize" data-v-75e79c96>${v(d(ne).estado)}</div></div>`),d(ne).descontar_de_bono?(t('<div class="md:col-span-2 flex items-center gap-2" data-v-75e79c96>'),t(u(d(D),{class:"w-5 h-5 text-blue-600"},null,s)),t('<div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Bono:</span><span class="text-blue-900 ml-2" data-v-75e79c96>Se descontar√° 1 sesi√≥n del bono activo</span></div></div>')):t("\x3c!----\x3e"),t("</div></div></div></div>")):t("\x3c!----\x3e"),t(`<div class="sticky bottom-0 bg-[#F9F7F3] pt-4 border-t border-[#D8AFA0]/30 flex gap-3 mt-6" data-v-75e79c96><button type="button" class="flex-1 px-6 py-3 border-2 border-[#D8AFA0] text-[#5D4A44] rounded-lg hover:bg-[#D8AFA0]/10 transition-colors font-medium" aria-label="Cancelar creaci√≥n de cita" data-v-75e79c96> Cancelar </button><div class="relative flex-1" data-v-75e79c96><button type="submit"${f(!d(he)||d(X)||d(J))?" disabled":""} class="${b(["w-full px-6 py-3 rounded-lg transition-all font-medium text-white",!d(he)||d(X)||d(J)?"bg-gray-400 cursor-not-allowed opacity-60":"bg-[#D8AFA0] hover:bg-[#D8AFA0]/90 hover:shadow-lg cursor-pointer"])}"${p("aria-label",d(he)?"Guardar cita":"Completa todos los campos requeridos para guardar")} data-v-75e79c96>${v(d(X)?"Guardando...":"‚úì Guardar Cita")}</button>`),d(he)||d(X)?t("\x3c!----\x3e"):t('<div class="absolute -top-12 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs px-3 py-2 rounded shadow-lg whitespace-nowrap opacity-0 hover:opacity-100 transition-opacity pointer-events-none" data-v-75e79c96> Completa todos los campos obligatorios (*) </div>'),t("</div></div></form></div>"),d(oe)?(t(`<div class="${b(["fixed bottom-6 right-6 max-w-md rounded-lg shadow-2xl p-4 z-[60]","exito"===d(le)?"bg-gradient-to-r from-green-500 to-emerald-500":"error"===d(le)?"bg-gradient-to-r from-red-500 to-rose-500":"bg-gradient-to-r from-blue-500 to-indigo-500"])}" data-v-75e79c96><div class="flex items-start gap-3 text-white" data-v-75e79c96><div class="text-3xl" data-v-75e79c96>${v("exito"===d(le)?"‚úÖ":"error"===d(le)?"‚ùå":"‚ÑπÔ∏è")}</div><div class="flex-1" data-v-75e79c96><div class="font-bold text-lg mb-1" data-v-75e79c96>${v(d(re))}</div><div class="text-sm opacity-90 mb-3" data-v-75e79c96>${v(d(de))}</div>`),d(ie).length>0?(t('<div class="flex gap-2" data-v-75e79c96>\x3c!--[--\x3e'),m(d(ie),(e,a)=>{t(`<button class="px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-all" data-v-75e79c96>${v(e.texto)}</button>`)}),t("\x3c!--]--\x3e</div>")):t("\x3c!----\x3e"),t('</div><button class="text-white/80 hover:text-white transition-colors" data-v-75e79c96> ‚úï </button></div></div>')):t("\x3c!----\x3e"),t("</div>")):t("\x3c!----\x3e")}}}),V=q.setup;q.setup=(e,a)=>{const t=c();return(t.modules||(t.modules=new Set)).add("components/ModalNuevaCita.vue"),V?V(e,a):void 0};const O=Object.assign(T(q,[["__scopeId","data-v-75e79c96"]]),{__name:"ModalNuevaCita"});export{O as _};
//# sourceMappingURL=ModalNuevaCita-6Mm-k6WH.mjs.map
