{"version":3,"file":"pacientes-0LvVc8ge.mjs","sources":["../../../../../../node_modules/.cache/nuxt/.nuxt/dist/server/_nuxt/pacientes-0LvVc8ge.js"],"sourcesContent":null,"names":["render$3","_ctx","_cache","vueExports","openBlock","createElementBlock","xmlns","fill","viewBox","stroke","createElementVNode","d","render$2","render$1","render","_sfc_main$a","__name","__ssrInlineRender","props","paciente","type","Object","required","emits","setup","__props","nombreMostrar","computed","nombreCompleto","nombre","partes","trim","split","length","charAt","iniciales","toUpperCase","avatarColor","colors","id","charCodeAt","estadoEmocional","promedio","estado_emocional_promedio","estadoEmocionalTexto","estadoVinculoTexto","activo","en_pausa","estadoVinculoClasses","estadoVinculoPuntoClass","areaAcompanamiento","area_de_acompanamiento","ultimaSesion","ultima_sesion","fecha","Date","ahora","diffDias","Math","floor","toLocaleDateString","day","month","proximaSesion","proxima_sesion","fechaStr","includes","isNaN","getTime","console","warn","weekday","hour","minute","error","totalSesiones","total_sesiones","evolucionPorcentaje","evolucion_porcentaje","evolucionColor","valor","value","diasInactividad","tieneAlertaInactividad","tieneAlertaEmocional","requiere_atencion","bonoActivo","bono_activo","tipoBonoTexto","tipo","otro","quincenal","semanal","mensual","personalizado","tipoBonoClasses","estadoBonoTexto","estado","pendiente","vencido","completado","estadoBonoClasses","fechaFinTexto","fecha_fin","year","diasRestantes","sesionesUsadas","sesiones_totales","sesiones_restantes","sesionesTotales","sesionesColorClass","restantes","progresoBono","total","usadas","round","progresoBonoTexto","toString","progresoBonoColorClass","tieneAlertaBonoCritica","tieneAlertaBonoAdvertencia","_push","_parent","_attrs","serverRenderer_cjs_prodExports","ssrRenderAttrs","mergeProps","class","role","unref","tabindex","ssrRenderAttr","ssrRenderStyle","backgroundColor","ssrInterpolate","ssrRenderClass","ssrRenderComponent","render$4","render$5","render$6","render$7","render$8","fechaFinClases","render$9","width","render$a","render$b","render$c","_sfc_setup$a","ctx","ssrContext","useSSRContext","modules","Set","add","__nuxt_component_0$1","_export_sfc","_sfc_main$9","mostrar","Boolean","default","emit","__emit","useSupabase","useBonos","useCitas","useSupabaseUser","formulario","ref","apellido","email","telefono","fecha_nacimiento","area_acompanamiento","tipo_bono","primera_sesion","notas_iniciales","crear_bono","bono_monto","bono_renovacion_automatica","guardando","PRECIOS_BASE","sesionesSegunTipo","nombreTipoBono","precioPorSesionBono","sesiones","monto","toFixed","precioSugeridoBono","esADemanda","opcionesHorarioRapido","hoy","opciones","formatearDateTime","hora","getFullYear","String","getMonth","padStart","getDate","manana","setDate","push","label","datetime","proximoLunes","diasHastaLunes","getDay","unaSemana","formularioValido","base","watch","nuevoTipo","crear","nuevo","resetearFormulario","ssrIncludeBooleanAttr","Array","isArray","ssrLooseContain","ssrLooseEqual","ssrRenderList","opcion","index","_sfc_setup$9","__nuxt_component_2","assign","_sfc_main$8","sesionesAutomaticas","a_demanda","precioPorSesion","cargarDatosPaciente","p","metadata","nombre_completo","slice","join","apellido_paterno","_sfc_setup$8","__nuxt_component_3","_sfc_main$7","procesando","pacienteNombre","_sfc_setup$7","__nuxt_component_4","_sfc_main$6","defineComponent","isOpen","citaId","supabase","useSupabaseClient","getCitasPorDia","cita","cargando","conflictoHorario","fecha_cita","hora_inicio","hora_fin","duracion","modalidad","observaciones","fechaFormateada","opcionesFechaRapida","formatearFecha","fecha2","toISOString","diasLaborables","contadorDias","diaSemana","horasDisponibles","cargarCita","async","log","data","from","select","eq","single","substring","horaAMinutos","horas","minutos","map","Number","nuevaHora","totalMinutos","horaFin","minutosFin","nuevaDuracion","citasActivas","filter","c","inicioNueva","finNueva","some","inicioExistente","finExistente","minNuevaInicio","minNuevaFin","minExistenteInicio","minExistenteFin","verificarConflicto","nuevoCitaId","ssrRenderTeleport","_push2","paciente_nombre","icono","_sfc_setup$6","__nuxt_component_5","toasts","toastIdCounter","useToast","addToast","message","duration","toast","setTimeout","removeToast","findIndex","t","splice","success","warning","info","_sfc_main$5","toasts2","toastClasses","classes","render$d","render$e","_sfc_setup$5","__nuxt_component_6","_sfc_main$4","accept","maxSize","supportedFormats","ariaLabel","expose","__expose","file","isDragging","errorMessage","hasError","maxSizeMB","removeFile","render$g","render$f","name","bytes","i","pow","formatFileSize","size","_sfc_setup$4","__nuxt_component_0","_sfc_main$3","detectedColumns","mappings","validation","requiredFields","field","contactFields","treatmentFields","otherFields","allFields","getMappedField","sourceColumn","mapping","find","m","targetField","isFieldUsed","currentColumn","isRequiredField","f","mappedFields","previewData","sampleCount","min","sampleValues","preview","row","column","keys","idx","errors","warnings","render$h","getFieldLabel","_sfc_setup$3","__nuxt_component_1","_sfc_main$2","modelValue","existingPatients","importMapping","config","importResult","detecting","validating","importing","validateMapping","response","fetch","method","headers","body","JSON","stringify","configId","ok","errorData","json","Error","statusMessage","isValid","err","hasRequiredFields","hasNombre","has","hasContacto","detectColumns","formData","FormData","append","updateMapping","executeImport","action","results","reset","getPreviewData","useImportMapping","currentStep","selectedFile","downloadingTemplate","updateDuplicates","importSuccess","fieldLabels","documento_identidad","direccion","contacto_emergencia","frecuencia","derivacion","medicacion","orientacion_diagnostica","inicio_tratamiento","precio_sesion","comision","notas","handleFileSelected","handleFileRemoved","handleDropzoneError","handleMappingUpdate","_component_SharedFileDropzone","_component_PatientsColumnMappingTable","step","onFileSelected","onFileRemoved","onError","created","updated","skipped","incompleteProfiles","profile","missingFields","_sfc_setup$2","__nuxt_component_7","_sfc_main$1","totalPatients","filteredCount","selectedCount","hasFilters","currentFilters","selectedIds","format","scope","selectedFields","exporting","availableFields","watchEffect","render$i","_sfc_setup$1","__nuxt_component_8","_sfc_main","router","useRouter","getUserId","user","existe","newUser","oldUser","antes","mostrarModalNuevo","mostrarModalEditar","mostrarModalEliminar","mostrarModalAsignarCita","mostrarModalEditarCita","mostrarModalImportar","mostrarModalExportar","citaIdSeleccionada","pacienteSeleccionado","pacienteSeleccionadoCita","pacientes2","loading","busqueda","busquedaDebounced","estadoSeleccionado","areaSeleccionada","filtrosActivos","sinProximaCita","sinSesionRegistrada","requiereAtencion","filtrosEstado","contadores","activos","enPausa","finalizados","filtrosEstadoConContadores","filtro","count","areasDisponibles","areas","sort","hayFiltrosActivos","cargarPacientes","userId","pacientesData","pacientesError","order","ascending","pacientesEnriquecidos","Promise","all","ultimaCita","limit","maybeSingle","proximaCita","in","gte","head","todosLosBonos","bonoData","bonoError","sesionesCompletadasBono","totalSesionesBono","hace7Dias","emocionesRecientes","estadoEmocionalPromedio","promedioAnimo","reduce","sum","e","estado_animo","ultimosTres","every","apellidos","proxima_cita_id","created_at","sesiones_completadas","pacientesFiltrados","resultado","busquedaLower","toLowerCase","totalPacientes","cerrarModalNuevo","abrirModalEditar","cerrarModalEditar","abrirModalEliminar","cerrarModalEliminar","manejarPacienteCreado","nuevoPaciente","manejarPacienteActualizado","pacienteActualizado","manejarPacienteEliminado","pacienteId","manejarPacienteDesactivado","cerrarModalAsignarCita","manejarCitaCreada","nuevaCita","verCitasPaciente","gestionarBonosPaciente","handleImportComplete","filtrosActualesParaExport","filters","area","abrirModalEditarCita","cerrarModalEditarCita","handleCitaActualizada","newUserId","oldUserId","_component_PacienteCard","_component_ModalNuevaCita","__nuxt_component_2$1","_component_ModalNuevoPaciente","_component_ModalEditarPaciente","_component_ModalEliminarPaciente","_component_ModalEditarCita","_component_ToastContainer","_component_PatientsImportModal","_component_PatientsExportModal","render$j","render$k","render$l","render$m","onEditar","onEliminar","onVerCitas","onGestionarBonos","onEditarCita","onCerrar","onCitaCreada","onPacienteCreado","onPacienteActualizado","onPacienteEliminado","onPacienteDesactivado","onClose","onActualizado","$event","isRef","onImportComplete","_sfc_setup","pacientes"],"mappings":"","x_google_ignoreList":[0]}