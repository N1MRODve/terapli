import{_ as t}from"./nuxt-link-CboeUkiO.mjs";import{defineComponent as e,ref as s,computed as o,mergeProps as a,unref as n,withCtx as i,createTextVNode as r,useSSRContext as d}from"vue";import{ssrRenderAttrs as l,ssrInterpolate as c,ssrRenderClass as p,ssrRenderStyle as x,ssrRenderComponent as m,ssrRenderList as u}from"vue/server-renderer";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"./server.mjs";import"../routes/renderer.mjs";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"vue-router";import"@supabase/ssr";import"@vercel/analytics/nuxt";const v=e({__name:"bono",__ssrInlineRender:!0,setup(e){const d=s(!0),v=s([]),f=o(()=>v.value.find(t=>"activo"===t.estado)),h=o(()=>v.value.filter(t=>"activo"!==t.estado).sort((t,e)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())),formatearFecha=t=>t?new Date(t).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"",formatearPrecio=t=>{try{return new Intl.NumberFormat("es-ES",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}catch{return t}},estadoBonoTexto=t=>({activo:"Activo",agotado:"Agotado",expirado:"Expirado",cancelado:"Cancelado"}[t]||t),estadoBonoClass=t=>({activo:"bg-green-100 text-green-800",agotado:"bg-red-100 text-red-800",expirado:"bg-gray-100 text-gray-800",cancelado:"bg-orange-100 text-orange-800"}[t]||"bg-gray-100 text-gray-800"),getProgressColor=(t,e)=>{const s=t/e*100;return s>50?"bg-[#D8AFA0]":s>25?"bg-amber-500":"bg-red-500"};return(e,s,o,v)=>{const g=t;s(`<div${l(a({class:"max-w-4xl mx-auto space-y-6 px-4 py-8"},v))}>`),n(d)?s('<div class="flex flex-col items-center justify-center min-h-[40vh]"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[#D8AFA0]"></div><p class="mt-4 text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;]">Cargando tu bono...</p></div>'):(s('<div><header class="mb-8"><h1 class="text-2xl sm:text-3xl font-[&#39;Lora&#39;] font-medium text-[#5D4A44]"> Mi Bono </h1><p class="text-sm text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;] mt-1"> Gestiona y consulta tu bono de sesiones </p></header>'),n(f)?(s(`<section class="bg-white rounded-xl shadow-sm border border-[#EAD5D3]/30 p-6 mb-8"><header class="flex items-center justify-between mb-4"><div><h2 class="text-xl font-[&#39;Lora&#39;] font-medium text-[#5D4A44]">Bono de ${c(n(f).total_sesiones)} Sesiones</h2><p class="text-sm text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;]">Contratado el ${c(formatearFecha(n(f).created_at))}</p></div><div><span class="${p([estadoBonoClass(n(f).estado),"px-3 py-1 rounded-full text-xs font-['Lato'] font-medium"])}">${c(estadoBonoTexto(n(f).estado))}</span></div></header><div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mb-6"><div class="text-center"><p class="text-4xl font-[&#39;Lora&#39;] font-bold text-[#D8AFA0]">${c(n(f).sesiones_restantes)}</p><p class="text-sm text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;] mt-1">Disponibles</p></div><div class="text-center"><p class="text-4xl font-[&#39;Lora&#39;] font-bold text-[#5D4A44]">${c(n(f).total_sesiones)}</p><p class="text-sm text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;] mt-1">Totales</p></div><div class="text-center"><p class="text-4xl font-[&#39;Lora&#39;] font-bold text-[#5D4A44] opacity-50">${c(n(f).sesiones_usadas)}</p><p class="text-sm text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;] mt-1">Completadas</p></div></div><div class="space-y-2"><div class="flex justify-between text-xs font-[&#39;Lato&#39;] text-[#5D4A44] opacity-70"><span>Progreso del bono</span><span>${c(Math.round(n(f).sesiones_usadas/n(f).total_sesiones*100))}%</span></div><div class="w-full bg-[#EAD5D3]/30 rounded-full h-3 overflow-hidden"><div class="${p([getProgressColor(n(f).sesiones_restantes,n(f).total_sesiones),"h-full rounded-full transition-all duration-500"])}" style="${x({width:n(f).sesiones_usadas/n(f).total_sesiones*100+"%"})}"></div></div></div><div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6"><div class="flex items-center space-x-3 p-4 bg-[#F9F7F3] rounded-lg"><div class="w-10 h-10 rounded-full bg-[#D8AFA0]/20 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-[#D8AFA0]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><p class="text-xs text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;]">Precio total</p><p class="text-lg font-[&#39;Lora&#39;] font-medium text-[#5D4A44]">${c(formatearPrecio(n(f).precio_total))}€</p><p class="text-xs text-[#5D4A44] opacity-50 font-[&#39;Lato&#39;]">${c(formatearPrecio(n(f).precio_total/n(f).total_sesiones))}€ por sesión</p></div></div><div class="flex items-center space-x-3 p-4 bg-[#F9F7F3] rounded-lg"><div class="w-10 h-10 rounded-full bg-[#D8AFA0]/20 flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-[#D8AFA0]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><p class="text-xs text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;]">Estado</p><p class="text-lg font-[&#39;Lora&#39;] font-medium text-[#5D4A44]">${c(estadoBonoTexto(n(f).estado))}</p>`),n(f).fecha_expiracion?s(`<p class="text-xs text-[#5D4A44] opacity-50 font-[&#39;Lato&#39;]">Válido hasta ${c(formatearFecha(n(f).fecha_expiracion))}</p>`):s("\x3c!----\x3e"),s("</div></div></div>"),n(f).sesiones_restantes<=2&&n(f).sesiones_restantes>0?s('<div class="flex items-start space-x-3 p-4 bg-amber-50 border border-amber-200 rounded-lg mt-6"><svg class="w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div><p class="text-sm font-[&#39;Lato&#39;] font-medium text-amber-900">Quedan pocas sesiones</p><p class="text-xs font-[&#39;Lato&#39;] text-amber-700 mt-1">Considera renovar tu bono pronto para mantener la continuidad.</p></div></div>'):s("\x3c!----\x3e"),0===n(f).sesiones_restantes?s('<div class="flex items-start space-x-3 p-4 bg-red-50 border border-red-200 rounded-lg mt-6"><svg class="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><p class="text-sm font-[&#39;Lato&#39;] font-medium text-red-900">Bono agotado</p><p class="text-xs font-[&#39;Lato&#39;] text-red-700 mt-1">Has utilizado todas las sesiones. Contacta para adquirir uno nuevo.</p></div></div>'):s("\x3c!----\x3e"),n(f).sesiones_restantes<=2?(s('<div class="pt-4 border-t border-[#EAD5D3]/30 mt-6">'),s(m(g,{to:"/como-empezar",class:"block w-full text-center px-6 py-3 bg-[#D8AFA0] hover:bg-[#C89B8A] text-white rounded-lg font-['Lato'] font-medium transition-colors"},{default:i((t,e,s,o)=>{if(!e)return[r("Renovar Bono")];e("Renovar Bono")}),_:1},o)),s("</div>")):s("\x3c!----\x3e"),s("</section>")):s("\x3c!----\x3e"),n(h).length>0?(s('<section class="space-y-4"><h2 class="text-lg font-[&#39;Lora&#39;] font-medium text-[#5D4A44] mb-2">Historial de Bonos</h2><div class="space-y-3">\x3c!--[--\x3e'),u(n(h),t=>{s(`<article class="bg-white rounded-lg shadow-sm border border-[#EAD5D3]/30 p-4"><div class="flex items-center justify-between mb-3"><div><h3 class="text-base font-[&#39;Lato&#39;] font-medium text-[#5D4A44]">Bono de ${c(t.total_sesiones)} Sesiones</h3><p class="text-xs text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;]">${c(formatearFecha(t.created_at))}</p></div><div class="text-right"><p class="text-sm font-[&#39;Lora&#39;] font-medium text-[#5D4A44]">${c(t.sesiones_usadas)}/${c(t.total_sesiones)}</p><p class="text-xs text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;]">sesiones</p></div></div><div class="w-full bg-[#EAD5D3]/30 rounded-full h-2"><div class="h-full bg-[#5D4A44] opacity-30 rounded-full" style="${x({width:t.sesiones_usadas/t.total_sesiones*100+"%"})}"></div></div><div class="flex items-center space-x-2 mt-2 text-xs text-[#5D4A44] opacity-60 font-[&#39;Lato&#39;]"><span class="${p([estadoBonoClass(t.estado),"px-2 py-0.5 rounded-full font-medium"])}">${c(estadoBonoTexto(t.estado))}</span><span>·</span><span>Contratado: ${c(formatearFecha(t.created_at))}</span>`),t.fecha_expiracion?s(`<span>· Expira: ${c(formatearFecha(t.fecha_expiracion))}</span>`):s("\x3c!----\x3e"),s("</div></article>")}),s("\x3c!--]--\x3e</div></section>")):s("\x3c!----\x3e"),n(f)||0!==n(h).length?s("\x3c!----\x3e"):(s('<div class="flex flex-col items-center justify-center text-center py-16"><div class="w-20 h-20 rounded-full bg-[#EAD5D3]/30 flex items-center justify-center mb-4"><svg class="w-10 h-10 text-[#D8AFA0]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div><h3 class="text-xl font-[&#39;Lora&#39;] font-medium text-[#5D4A44] mb-2">No tienes bonos activos</h3><p class="text-sm text-[#5D4A44] opacity-70 font-[&#39;Lato&#39;] max-w-md mb-6">Adquiere un bono para comenzar tu proceso terapéutico.</p>'),s(m(g,{to:"/contacto",class:"px-6 py-3 bg-[#D8AFA0] hover:bg-[#C89B8A] text-white rounded-lg font-['Lato'] font-medium transition-colors"},{default:i((t,e,s,o)=>{if(!e)return[r("Contactar")];e("Contactar")}),_:1},o)),s("</div>")),s("</div>")),s("</div>")}}}),f=v.setup;v.setup=(t,e)=>{const s=d();return(s.modules||(s.modules=new Set)).add("pages/paciente/bono.vue"),f?f(t,e):void 0};export{v as default};
//# sourceMappingURL=bono-DyhzyBNH.mjs.map
