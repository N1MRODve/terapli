{"version":3,"file":"index-Djpsuren.mjs","sources":["../../../../../../node_modules/.cache/nuxt/.nuxt/dist/server/_nuxt/index-Djpsuren.js"],"sourcesContent":null,"names":["useFacturas","supabase","useSupabaseClient","userProfile","useSupabase","facturas","vueExports","ref","facturaActual","loading","error","redondear","valor","Math","round","validarNIF","nif","nifLimpio","toUpperCase","replace","length","test","letraCalculada","parseInt","substring","numeroStr","formatearNIF","async","obtenerRegimenIVA","terapeutaId","value","terapeuta_id","id","data","fetchError","from","select","eq","single","datos_fiscales","regimen_iva","totalFacturado","computed","filter","f","estado","reduce","sum","total","facturasEmitidas","facturasAnuladas","calcularImpuestos","baseImponible","tipoCliente","regimenIVA","porcentajeIVA","importeIVA","porcentajeIRPF","importeIRPF","crearFactura","params","success","receptorNif","rpcError","rpc","p_terapeuta_id","p_paciente_id","pacienteId","p_tipo_cliente","p_receptor_nombre","receptorNombre","p_receptor_nif","p_receptor_direccion","receptorDireccion","p_concepto","concepto","p_base_imponible","p_aplicar_iva","p_aplicar_irpf","p_lineas_detalle","lineasDetalle","p_bono_id","bonoId","p_pago_id","pagoId","Error","message","factura","err","console","getFacturas","filtros","query","order","ascending","fechaDesde","gte","fechaHasta","lte","busqueda","or","getFactura","facturaId","anularFactura","motivo","trim","p_factura_id","p_motivo","index2","findIndex","motivo_anulacion","getProximoNumero","config","numeracion_facturas","anioActual","Date","getFullYear","numeroFormateado","anio_actual","ultimo_numero","toString","padStart","prefijo","getDatosFiscales","guardarDatosFiscales","datos","updateError","update","updated_at","toISOString","formatearImporte","importe","Intl","NumberFormat","style","currency","format","formatearFecha","fecha","toLocaleDateString","day","month","year","getEstadoColor","borrador","emitida","anulada","getEstadoTexto","_sfc_main$2","defineComponent","__name","__ssrInlineRender","props","default","initialTipoCliente","initialDatosEmpresa","nombre","direccion","emits","setup","__props","emit","__emit","datosEmpresa","nifError","calculo","watch","deep","immediate","descripcionIVA","_ctx","_push","_parent","_attrs","serverRenderer_cjs_prodExports","ssrRenderAttrs","mergeProps","class","ssrRenderClass","ssrIncludeBooleanAttr","ssrLooseEqual","ssrRenderAttr","ssrInterpolate","unref","_sfc_setup$2","ctx","ssrContext","useSSRContext","modules","Set","add","__nuxt_component_1","Object","assign","usePagosRegistros","pagos","getPagos","metodoPago","conFactura","not","is","actualizarPago","cambios","updateData","fechaPago","fecha_pago","monto","metodo_pago","factura_id","p","calcularResumen","listaPagos","pagosAcalcular","porMetodo","efectivo","cantidad","transferencia","bizum","tarjeta","stripe","forEach","pago","totalPagos","resumenActual","pagosConFactura","pagosSinFactura","crearPago","insertError","insert","paciente_id","split","bono_id","cita_id","citaId","estado_pago","pagado","actualizarPagoBono","unshift","getPago","eliminarPago","deleteError","delete","vincularConFactura","getBonosPendientesPago","in","getPagosMes","anio","mes","formatearMetodoPago","metodo","_sfc_main$1","visible","type","Boolean","pacienteIdPreseleccionado","bonoIdPreseleccionado","montoInicial","searchPacientes","pacientes","loadingPacientes","usePacientes","waitForUser","paso","guardando","usuarioListo","pacienteNombre","busquedaPaciente","mostrarListaPacientes","bonosPaciente","generarFactura","calculoImpuestos","proximoNumeroFactura","handleFacturaUpdate","puedeAvanzar","_component_PaymentMethodSelector","__nuxt_component_0$1","_component_FacturaForm","ssrRenderTeleport","_push2","ssrRenderComponent","render","render$1","ssrRenderList","nombre_completo","charAt","email","render$2","bono","tipo","monto_total","sesiones_totales","render$3","size","onSelect","$event","render$4","Array","isArray","ssrLooseContain","onUpdate","_sfc_setup$1","__nuxt_component_0","_sfc_main","loadingPagos","loadingFacturas","activeTab","showPagoModal","filtroRapidoActivo","filtrosRapidos","label","paginaPagos","paginaFacturas","totalFacturas","ceil","metricasResumen","totalCobrado","cantidadPagos","metodoMasUsado","porcentaje","metodosOrdenados","entries","sort","a","b","promedioPorPago","descripcionPeriodo","formatFecha","pagosHuerfanos","paciente","tienePagosHuerfanos","showAsignarPacienteModal","pagoParaAsignar","pacienteSeleccionado","asignandoPaciente","tieneProblema","cargarPagos","result","cargarFacturas","formatearFechaContextual","hoy","ayer","setDate","getDate","hace7Dias","fechaPagoStr","hoyStr","ayerStr","texto","weekday","subtexto","getMetodoIcon","parseConcepto","detalleCompleto","toLowerCase","includes","matchBono","match","progreso","getConceptoLabel","individual","primera","familiar","otro","menuAbierto","showGenerarFacturaModal","pagoParaFacturar","generandoFactura","datosFactura","showExportMenu","showInformeModal","tipoInforme","mesInforme","getMonth","anioInforme","metricasFacturas","emitidas","totalBase","base_imponible","totalIVA","importe_iva","totalIRPF","importe_irpf","anuladas","handlePagoCreado","tab","_component_PaymentPagoUnificadoModal","active","filtro","rotated","find","getNombrePaciente","numero_factura","fecha_emision","receptor_nombre","receptor_nif","onClose","onSaved","selected","floor","_sfc_setup","index","_export_sfc"],"mappings":"","x_google_ignoreList":[0]}