import{watch as e,ref as a,computed as t,unref as o,mergeProps as r,useSSRContext as s}from"vue";import{ssrRenderAttrs as n,ssrRenderAttr as l,ssrRenderComponent as i,ssrRenderList as d,ssrRenderClass as c,ssrInterpolate as p,ssrRenderStyle as u,ssrIncludeBooleanAttr as v,ssrLooseContain as m,ssrLooseEqual as b}from"vue/server-renderer";import{MagnifyingGlassIcon as x,UserGroupIcon as f,CalendarDaysIcon as g,CalendarIcon as h,ClockIcon as _,CheckCircleIcon as y,TicketIcon as A,CurrencyDollarIcon as w,ChartBarIcon as D,ExclamationTriangleIcon as $,ExclamationCircleIcon as k,BellAlertIcon as F}from"@heroicons/vue/24/outline";import{_ as C}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{_ as P}from"./ModalNuevaCita-6Mm-k6WH.mjs";import{u as S}from"./useSupabase-DljD0dj8.mjs";import{u as E}from"./useBonos-BFarM2bD.mjs";import{u as q}from"./useCitas-DyEZH6RI.mjs";import{a as j,e as M}from"./server.mjs";import{_ as B}from"./ModalEditarCita-Dnm8mnH7.mjs";import{u as L}from"./useSupabaseClient-DykwVqLQ.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../routes/renderer.mjs";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"vue-router";import"@supabase/ssr";import"@vercel/analytics/nuxt";const z={__name:"PacienteCard",__ssrInlineRender:!0,props:{paciente:{type:Object,required:!0}},emits:["editar","eliminar","ver-citas","gestionar-bonos","editar-cita"],setup(e){const a=e,s=t(()=>{const e=a.paciente.nombre||"Sin nombre";if("Sin nombre"===e)return"Sin nombre";const t=e.trim().split(" ");if(t.length>2){return`${t[0]} ${t[1]} ${t[t.length-1].charAt(0)}.`}return e}),d=t(()=>{var e,t;const o=a.paciente.nombre||"";if(!o)return"??";const r=o.trim().split(" ");return`${(null==(e=r[0])?void 0:e.charAt(0).toUpperCase())||"?"}${(null==(t=r[1])?void 0:t.charAt(0).toUpperCase())||""}`}),v=t(()=>{const e=["#D8AFA0","#C89B8A","#B7C6B0","#A8C5B5","#D4A5A5","#C4B5A0"];return e[a.paciente.id.charCodeAt(0)%e.length]}),m=t(()=>{const e=a.paciente.estado_emocional_promedio||3;return e>=4?"ÔøΩ":e>=3?"üòê":"ÔøΩ"}),b=t(()=>{const e=a.paciente.estado_emocional_promedio||3;return e>=4?"Estado positivo":e>=3?"Estado neutro":"Requiere atenci√≥n"}),x=t(()=>a.paciente.activo?a.paciente.en_pausa?"En pausa":"Activo":"Finalizado"),f=t(()=>a.paciente.activo?a.paciente.en_pausa?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),g=t(()=>a.paciente.area_de_acompanamiento||null),C=t(()=>{if(!a.paciente.ultima_sesion)return"Sin registro";const e=new Date(a.paciente.ultima_sesion),t=new Date,o=Math.floor((t-e)/864e5);return 0===o?"Hoy":1===o?"Ayer":o<7?`Hace ${o} d√≠as`:o<30?`Hace ${Math.floor(o/7)} semanas`:e.toLocaleDateString("es-ES",{day:"numeric",month:"short"})}),P=t(()=>{if(!a.paciente.proxima_sesion)return null;try{let e=a.paciente.proxima_sesion;e.includes("T")||(e+="T00:00:00");const t=new Date(e);return isNaN(t.getTime())?(console.warn("Fecha inv√°lida en pr√≥xima sesi√≥n:",a.paciente.proxima_sesion),null):t.toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error al formatear pr√≥xima sesi√≥n:",e,a.paciente.proxima_sesion),null}}),S=t(()=>a.paciente.total_sesiones||0),E=t(()=>a.paciente.evolucion_porcentaje||50),q=t(()=>{const e=E.value;return e>=70?"bg-green-500":e>=50?"bg-yellow-500":"bg-orange-500"}),j=t(()=>{if(!a.paciente.ultima_sesion)return 0;const e=new Date(a.paciente.ultima_sesion),t=new Date;return Math.floor((t-e)/864e5)}),M=t(()=>!(!a.paciente.activo||a.paciente.en_pausa)&&j.value>30),B=t(()=>a.paciente.requiere_atencion||!1),L=t(()=>a.paciente.bono_activo||null),z=t(()=>{var e;if(!(null==(e=L.value)?void 0:e.tipo))return"Sin tipo";return{otro:"A demanda",quincenal:"Quincenal",semanal:"Semanal",mensual:"Mensual",personalizado:"Personalizado"}[L.value.tipo]||L.value.tipo}),I=t(()=>{var e;if(!(null==(e=L.value)?void 0:e.tipo))return"bg-gray-100 text-gray-600";return{otro:"bg-blue-100 text-blue-700",quincenal:"bg-purple-100 text-purple-700",semanal:"bg-indigo-100 text-indigo-700",mensual:"bg-teal-100 text-teal-700",personalizado:"bg-pink-100 text-pink-700"}[L.value.tipo]||"bg-gray-100 text-gray-600"}),R=t(()=>{var e;if(!(null==(e=L.value)?void 0:e.estado))return"Sin estado";return{activo:"Activo",pendiente:"Pendiente",vencido:"Vencido",completado:"Completado"}[L.value.estado]||L.value.estado}),N=t(()=>{var e;if(!(null==(e=L.value)?void 0:e.estado))return"bg-gray-100 text-gray-600";return{activo:"bg-green-100 text-green-700",pendiente:"bg-yellow-100 text-yellow-700",vencido:"bg-red-100 text-red-700",completado:"bg-gray-100 text-gray-600"}[L.value.estado]||"bg-gray-100 text-gray-600"}),T=t(()=>{var e;if(!(null==(e=L.value)?void 0:e.fecha_fin))return"Sin fecha";try{return new Date(L.value.fecha_fin).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"})}catch(e){return"Fecha inv√°lida"}});t(()=>{var e;if(!(null==(e=L.value)?void 0:e.fecha_fin))return"text-cafe/60";const a=new Date(L.value.fecha_fin),t=new Date,o=Math.floor((a-t)/864e5);return o<0?"text-red-600 font-semibold":o<=7?"text-orange-600 font-semibold":o<=14?"text-amber-600":"text-cafe/80"});const O=t(()=>L.value?L.value.sesiones_totales-L.value.sesiones_restantes:0),H=t(()=>{var e;return(null==(e=L.value)?void 0:e.sesiones_totales)||0}),V=t(()=>{if(!L.value)return"text-terracota";const e=L.value.sesiones_restantes;return 0===e?"text-red-600 font-bold":1===e?"text-red-600 font-semibold":2===e?"text-orange-600 font-semibold":"text-terracota font-semibold"}),Q=t(()=>{if(!L.value)return 0;const e=L.value.sesiones_totales,a=L.value.sesiones_restantes;if(0===e)return 0;const t=e-a;return Math.round(t/e*100)}),U=t(()=>Q.value.toString()),G=t(()=>{if(!L.value)return"bg-gray-400";return{activo:"bg-green-500",pendiente:"bg-yellow-500",vencido:"bg-red-500",completado:"bg-gray-400"}[L.value.estado]||"bg-gray-400"}),W=t(()=>!!L.value&&1===L.value.sesiones_restantes),X=t(()=>!!L.value&&2===L.value.sesiones_restantes);return(e,a,t,Y)=>{a(`<div${n(r({class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-lg hover:border-gray-200 transition-all duration-300 group relative cursor-pointer"},Y))} data-v-e4c2174f><div class="absolute top-4 right-4 flex gap-1.5 opacity-0 group-hover:opacity-100 transition-all duration-200 z-10" data-v-e4c2174f><button class="p-1.5 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors shadow-md hover:shadow-lg" title="Gestionar bonos" data-v-e4c2174f><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e4c2174f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z" data-v-e4c2174f></path></svg></button><button class="p-1.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors shadow-md hover:shadow-lg" title="Editar paciente" data-v-e4c2174f><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e4c2174f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" data-v-e4c2174f></path></svg></button><button class="p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-md hover:shadow-lg" title="Eliminar paciente" data-v-e4c2174f><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e4c2174f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" data-v-e4c2174f></path></svg></button></div><div class="flex items-start justify-between mb-5" data-v-e4c2174f><div class="flex items-center gap-3" data-v-e4c2174f><div class="w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold text-lg flex-shrink-0 shadow-sm" style="${u({backgroundColor:o(v)})}" data-v-e4c2174f>${p(o(d))}</div><div data-v-e4c2174f><h3 class="font-serif text-lg font-semibold text-cafe group-hover:text-terracota transition-colors leading-tight" data-v-e4c2174f>${p(o(s))}</h3><div class="flex items-center gap-2 mt-1" data-v-e4c2174f><span class="text-lg"${l("title",o(b))} data-v-e4c2174f>${p(o(m))}</span><span class="text-xs text-gray-500" data-v-e4c2174f>${p(o(b))}</span></div></div></div><span class="${c([o(f),"px-2.5 py-1 text-xs font-medium rounded-full whitespace-nowrap"])}" data-v-e4c2174f>${p(o(x))}</span></div>`),o(g)?a(`<div class="mb-4 flex items-center gap-2" data-v-e4c2174f><span class="text-xs text-gray-400 uppercase tracking-wide" data-v-e4c2174f>√Årea:</span><span class="text-sm text-gray-700 font-medium" data-v-e4c2174f>${p(o(g))}</span></div>`):a("\x3c!----\x3e"),a('<div class="space-y-3 mb-5" data-v-e4c2174f><div class="flex items-center gap-2 text-sm text-gray-600" data-v-e4c2174f>'),a(i(o(h),{class:"w-4 h-4 text-terracota flex-shrink-0"},null,t)),a(`<span data-v-e4c2174f>√öltima sesi√≥n: </span><span class="font-medium" data-v-e4c2174f>${p(o(C))}</span></div><div class="flex items-center gap-2 text-sm text-gray-600" data-v-e4c2174f>`),a(i(o(_),{class:"w-4 h-4 text-terracota flex-shrink-0"},null,t)),a("<span data-v-e4c2174f>Pr√≥xima: </span>"),o(P)?a(`<button class="text-terracota hover:text-cafe font-medium hover:underline transition-colors flex-shrink-0"${l("title",`Editar cita del ${o(P)}`)} data-v-e4c2174f>${p(o(P))}</button>`):a('<span class="text-gray-400 font-medium" data-v-e4c2174f>No programada</span>'),a('<button class="ml-auto text-xs text-terracota hover:text-cafe hover:underline transition-colors flex-shrink-0" title="Ver todas las citas" data-v-e4c2174f> Ver citas ‚Üí </button></div><div class="flex items-center gap-2 text-sm text-gray-600" data-v-e4c2174f>'),a(i(o(y),{class:"w-4 h-4 text-terracota flex-shrink-0"},null,t)),a(`<span data-v-e4c2174f>${p(o(S))} sesiones completadas</span></div></div>`),o(L)?(a('<div class="mb-5 p-4 bg-gradient-to-br from-terracota/8 to-rosa/12 rounded-xl border border-terracota/15" data-v-e4c2174f><div class="space-y-3" data-v-e4c2174f><div class="flex items-center justify-between" data-v-e4c2174f><div class="flex items-center gap-2" data-v-e4c2174f>'),a(i(o(A),{class:"w-4 h-4 text-terracota flex-shrink-0"},null,t)),a(`<span class="text-sm font-medium text-gray-700" data-v-e4c2174f>Bono:</span><span class="${c([o(I),"px-2.5 py-1 rounded-lg text-xs font-semibold"])}" data-v-e4c2174f>${p(o(z))}</span></div><span class="${c([o(N),"px-2.5 py-1 rounded-full text-xs font-semibold flex items-center gap-1.5"])}" data-v-e4c2174f>`),a(i(o(w),{class:"w-3 h-3"},null,t)),a(`<span data-v-e4c2174f>${p(o(R))}</span></span></div><div class="grid grid-cols-1 gap-2" data-v-e4c2174f><div class="flex items-center gap-2 text-sm" data-v-e4c2174f>`),a(i(o(h),{class:"w-4 h-4 text-terracota flex-shrink-0"},null,t)),a(`<span class="text-gray-600" data-v-e4c2174f>Vigencia:</span><span class="${c([e.fechaFinClases,"font-medium"])}" data-v-e4c2174f>${p(o(T))}</span></div><div class="flex items-center gap-2 text-sm" data-v-e4c2174f>`),a(i(o(D),{class:"w-4 h-4 text-terracota flex-shrink-0"},null,t)),a(`<span class="text-gray-600" data-v-e4c2174f>Sesiones:</span><span class="${c([o(V),"font-semibold"])}" data-v-e4c2174f>${p(o(O))}/${p(o(H))}</span></div></div><div class="pt-1" data-v-e4c2174f><div class="flex items-center justify-between text-xs text-gray-500 mb-2" data-v-e4c2174f><span data-v-e4c2174f>Progreso del bono</span><span class="font-semibold text-gray-700" data-v-e4c2174f>${p(o(U))}%</span></div><div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden" data-v-e4c2174f><div class="${c([o(G),"h-2 rounded-full transition-all duration-500"])}" style="${u({width:`${o(Q)}%`})}" data-v-e4c2174f></div></div></div></div></div>`)):a("\x3c!----\x3e"),a(`<div class="pt-5 border-t border-gray-100" data-v-e4c2174f><div class="flex items-center justify-between text-xs text-gray-500 mb-2" data-v-e4c2174f><span data-v-e4c2174f>Evoluci√≥n general</span><span class="font-semibold text-gray-700" data-v-e4c2174f>${p(o(E))}%</span></div><div class="w-full bg-gray-200 rounded-full h-2" data-v-e4c2174f><div class="${c([o(q),"h-2 rounded-full transition-all duration-500"])}" style="${u({width:`${o(E)}%`})}" data-v-e4c2174f></div></div></div><div class="mt-5 space-y-2" data-v-e4c2174f>`),o(W)?(a('<div class="flex items-start gap-3 p-3 bg-red-50 border border-red-200 rounded-lg animate-pulse-subtle" data-v-e4c2174f>'),a(i(o($),{class:"w-4 h-4 text-red-600 flex-shrink-0 mt-0.5"},null,t)),a(`<div class="flex-1" data-v-e4c2174f><p class="text-xs font-semibold text-red-800 mb-1" data-v-e4c2174f> Bono casi agotado </p><p class="text-xs text-red-700" data-v-e4c2174f> Solo queda ${p(o(L).sesiones_restantes)} sesi√≥n. Informar para renovaci√≥n. </p></div></div>`)):o(X)?(a('<div class="flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-lg" data-v-e4c2174f>'),a(i(o(k),{class:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5"},null,t)),a(`<div class="flex-1" data-v-e4c2174f><p class="text-xs font-semibold text-amber-800 mb-1" data-v-e4c2174f> Bono pr√≥ximo a agotar </p><p class="text-xs text-amber-700" data-v-e4c2174f> Quedan ${p(o(L).sesiones_restantes)} sesiones. Considerar renovaci√≥n. </p></div></div>`)):a("\x3c!----\x3e"),o(M)?(a('<div class="flex items-start gap-3 p-3 bg-red-50 border border-red-200 rounded-lg animate-pulse-subtle" data-v-e4c2174f>'),a(i(o(F),{class:"w-4 h-4 text-red-600 flex-shrink-0 mt-0.5"},null,t)),a(`<div class="flex-1" data-v-e4c2174f><p class="text-xs font-semibold text-red-800 mb-1" data-v-e4c2174f> Riesgo de abandono </p><p class="text-xs text-red-700" data-v-e4c2174f>${p(o(j))} d√≠as sin sesi√≥n. Considera contactar pronto. </p></div></div>`)):a("\x3c!----\x3e"),o(B)?(a('<div class="flex items-start gap-3 p-3 bg-orange-50 border border-orange-200 rounded-lg" data-v-e4c2174f>'),a(i(o(k),{class:"w-4 h-4 text-orange-500 flex-shrink-0 mt-0.5"},null,t)),a('<div class="flex-1" data-v-e4c2174f><p class="text-xs font-semibold text-orange-800" data-v-e4c2174f> Requiere seguimiento especial por estado emocional </p></div></div>')):a("\x3c!----\x3e"),a("</div></div>")}}},I=z.setup;z.setup=(e,a)=>{const t=s();return(t.modules||(t.modules=new Set)).add("components/PacienteCard.vue"),I?I(e,a):void 0};const R=C(z,[["__scopeId","data-v-e4c2174f"]]),N={__name:"ModalNuevoPaciente",__ssrInlineRender:!0,props:{mostrar:{type:Boolean,default:!1}},emits:["cerrar","paciente-creado"],setup(s,{emit:i}){const u=s;S(),E(),q(),M();const x=a({nombre:"",apellido:"",email:"",telefono:"",fecha_nacimiento:"",area_acompanamiento:"",tipo_bono:"",primera_sesion:"",activo:!0,notas_iniciales:"",crear_bono:!1,bono_monto:0,bono_renovacion_automatica:!1}),f=a(!1),g=a(""),h={otro:60,quincenal:100,semanal:160,mensual:180},_=t(()=>{const e=x.value.tipo_bono;if(!e)return 0;return{otro:1,quincenal:2,semanal:4,mensual:4}[e]||0}),y=t(()=>({otro:"A Demanda",quincenal:"Quincenal",semanal:"Semanal",mensual:"Mensual"}[x.value.tipo_bono]||"No seleccionado")),A=t(()=>{const e=_.value,a=x.value.bono_monto;return!e||!a||e<=0?"0.00":(a/e).toFixed(2)}),w=t(()=>{const e=x.value.tipo_bono;return e&&h[e]||0}),D=t(()=>"otro"===x.value.tipo_bono),$=t(()=>{const e=new Date,a=[],formatearDateTime=(e,a)=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}T${a}`,t=new Date(e);t.setDate(t.getDate()+1),a.push({label:"üåÖ Ma√±ana 10:00",datetime:formatearDateTime(t,"10:00")});const o=new Date(e),r=(8-o.getDay())%7;o.setDate(o.getDate()+(r||7)),a.push({label:"üìÖ Pr√≥ximo Lun 09:00",datetime:formatearDateTime(o,"09:00")});const s=new Date(e);return s.setDate(s.getDate()+7),a.push({label:"üóìÔ∏è En 7 d√≠as 16:00",datetime:formatearDateTime(s,"16:00")}),a}),k=t(()=>{const e=x.value.nombre&&x.value.apellido&&x.value.email&&x.value.area_acompanamiento&&x.value.tipo_bono&&x.value.primera_sesion;return x.value.crear_bono?e&&x.value.bono_monto>0:e});e(()=>x.value.tipo_bono,e=>{"otro"===e?(x.value.crear_bono=!1,x.value.bono_monto=0):x.value.crear_bono&&0===x.value.bono_monto&&(x.value.bono_monto=h[e]||0)}),e(()=>x.value.crear_bono,e=>{e&&x.value.tipo_bono&&0===x.value.bono_monto&&(x.value.bono_monto=h[x.value.tipo_bono]||0)}),e(()=>u.mostrar,e=>{e&&resetearFormulario()});const resetearFormulario=()=>{x.value={nombre:"",apellido:"",email:"",telefono:"",fecha_nacimiento:"",area_acompanamiento:"",tipo_bono:"",primera_sesion:"",activo:!0,notas_iniciales:"",crear_bono:!1,bono_monto:0,bono_renovacion_automatica:!1},g.value=""};return(e,a,t,i)=>{s.mostrar?(a(`<div${n(r({class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},i))}><div class="bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-white/30"><div class="sticky top-0 bg-gradient-to-r from-[#5550F2]/5 via-[#027368]/5 to-[#04BF9D]/5 backdrop-blur-md border-b border-neutral-200 px-6 py-4 flex justify-between items-center shadow-sm"><h2 class="text-2xl font-[&#39;Elms_Sans&#39;] text-neutral-800 font-semibold"> Nuevo Paciente </h2><button class="text-neutral-600 hover:text-[#027368] transition-colors p-2 hover:bg-white/50 rounded-lg" aria-label="Cerrar modal"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div><form class="px-6 py-6 space-y-6 bg-gradient-to-b from-white/50 to-transparent"><div class="space-y-4"><h3 class="text-lg font-[&#39;Elms_Sans&#39;] text-neutral-800 font-semibold"> Informaci√≥n Personal </h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="nombre" class="block text-sm font-medium text-neutral-700 mb-1"> Nombre <span class="text-red-500">*</span></label><input id="nombre"${l("value",x.value.nombre)} type="text" required class="w-full px-4 py-2 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-[#027368]/20 focus:border-[#027368] bg-white/90 backdrop-blur-sm transition-all shadow-sm" placeholder="Nombre del paciente"></div><div><label for="apellido" class="block text-sm font-medium text-neutral-700 mb-1"> Apellido <span class="text-red-500">*</span></label><input id="apellido"${l("value",x.value.apellido)} type="text" required class="w-full px-4 py-2 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-[#027368]/20 focus:border-[#027368] bg-white/90 backdrop-blur-sm transition-all shadow-sm" placeholder="Apellido(s) del paciente"></div><div><label for="email" class="block text-sm font-medium text-neutral-700 mb-1"> Email <span class="text-red-500">*</span></label><input id="email"${l("value",x.value.email)} type="email" required class="w-full px-4 py-2 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-[#027368]/20 focus:border-[#027368] bg-white/90 backdrop-blur-sm transition-all shadow-sm" placeholder="correo@ejemplo.com"></div><div><label for="telefono" class="block text-sm font-medium text-neutral-700 mb-1"> Tel√©fono </label><input id="telefono"${l("value",x.value.telefono)} type="tel" class="w-full px-4 py-2 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-[#027368]/20 focus:border-[#027368] bg-white/90 backdrop-blur-sm transition-all shadow-sm" placeholder="+52 123 456 7890"></div><div><label for="fecha_nacimiento" class="block text-sm font-medium text-[#5D4A44] mb-1"> Fecha de Nacimiento </label><div class="relative"><input id="fecha_nacimiento"${l("value",x.value.fecha_nacimiento)} type="date" class="w-full px-4 py-2 pr-12 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white cursor-pointer"><button type="button" class="absolute right-2 top-1/2 -translate-y-1/2 p-2 text-[#D8AFA0] hover:text-[#5D4A44] transition-colors" title="Abrir calendario"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button></div><p class="text-xs text-cafe/60 mt-1"> üí° Puedes escribir la fecha o usar el calendario </p></div></div></div><div class="space-y-4 pt-4 border-t border-neutral-200"><h3 class="text-lg font-[&#39;Elms_Sans&#39;] text-neutral-800 font-semibold"> Informaci√≥n Terap√©utica </h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="md:col-span-2"><label for="area_acompanamiento" class="block text-sm font-medium text-[#5D4A44] mb-1"> √Årea de Acompa√±amiento <span class="text-red-500">*</span></label><select id="area_acompanamiento" required class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white"><option value=""${v(Array.isArray(x.value.area_acompanamiento)?m(x.value.area_acompanamiento,""):b(x.value.area_acompanamiento,""))?" selected":""}>Selecciona un √°rea</option><option value="Ansiedad"${v(Array.isArray(x.value.area_acompanamiento)?m(x.value.area_acompanamiento,"Ansiedad"):b(x.value.area_acompanamiento,"Ansiedad"))?" selected":""}>Ansiedad</option><option value="Depresi√≥n"${v(Array.isArray(x.value.area_acompanamiento)?m(x.value.area_acompanamiento,"Depresi√≥n"):b(x.value.area_acompanamiento,"Depresi√≥n"))?" selected":""}>Depresi√≥n</option><option value="Autoestima"${v(Array.isArray(x.value.area_acompanamiento)?m(x.value.area_acompanamiento,"Autoestima"):b(x.value.area_acompanamiento,"Autoestima"))?" selected":""}>Autoestima</option><option value="Relaciones"${v(Array.isArray(x.value.area_acompanamiento)?m(x.value.area_acompanamiento,"Relaciones"):b(x.value.area_acompanamiento,"Relaciones"))?" selected":""}>Relaciones</option><option value="Duelo"${v(Array.isArray(x.value.area_acompanamiento)?m(x.value.area_acompanamiento,"Duelo"):b(x.value.area_acompanamiento,"Duelo"))?" selected":""}>Duelo</option><option value="Estr√©s Laboral"${v(Array.isArray(x.value.area_acompanamiento)?m(x.value.area_acompanamiento,"Estr√©s Laboral"):b(x.value.area_acompanamiento,"Estr√©s Laboral"))?" selected":""}>Estr√©s Laboral</option><option value="Crecimiento Personal"${v(Array.isArray(x.value.area_acompanamiento)?m(x.value.area_acompanamiento,"Crecimiento Personal"):b(x.value.area_acompanamiento,"Crecimiento Personal"))?" selected":""}>Crecimiento Personal</option><option value="Otro"${v(Array.isArray(x.value.area_acompanamiento)?m(x.value.area_acompanamiento,"Otro"):b(x.value.area_acompanamiento,"Otro"))?" selected":""}>Otro</option></select></div><div><label for="tipo_bono" class="block text-sm font-medium text-[#5D4A44] mb-1"> Tipo de Bono <span class="text-red-500">*</span></label><select id="tipo_bono" required class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white"><option value=""${v(Array.isArray(x.value.tipo_bono)?m(x.value.tipo_bono,""):b(x.value.tipo_bono,""))?" selected":""}>Selecciona tipo de bono</option><option value="otro"${v(Array.isArray(x.value.tipo_bono)?m(x.value.tipo_bono,"otro"):b(x.value.tipo_bono,"otro"))?" selected":""}>A Demanda (1 sesi√≥n - 60‚Ç¨ - sin compromiso)</option><option value="quincenal"${v(Array.isArray(x.value.tipo_bono)?m(x.value.tipo_bono,"quincenal"):b(x.value.tipo_bono,"quincenal"))?" selected":""}>Quincenal (2 sesiones/mes - 100‚Ç¨)</option><option value="semanal"${v(Array.isArray(x.value.tipo_bono)?m(x.value.tipo_bono,"semanal"):b(x.value.tipo_bono,"semanal"))?" selected":""}>Semanal (4 sesiones/mes - 160‚Ç¨)</option><option value="mensual"${v(Array.isArray(x.value.tipo_bono)?m(x.value.tipo_bono,"mensual"):b(x.value.tipo_bono,"mensual"))?" selected":""}>Mensual</option></select><p class="text-xs text-cafe/60 mt-1"> üé´ Define el tipo de bono del paciente </p></div><div><label for="primera_sesion" class="block text-sm font-medium text-[#5D4A44] mb-1"> Primera Sesi√≥n <span class="text-red-500">*</span></label><div class="relative"><input id="primera_sesion"${l("value",x.value.primera_sesion)} type="datetime-local" required step="1800" class="w-full px-4 py-2 pr-12 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white cursor-pointer"><button type="button" class="absolute right-2 top-1/2 -translate-y-1/2 p-2 text-[#D8AFA0] hover:text-[#5D4A44] transition-colors" title="Abrir selector de fecha y hora"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button></div><div class="flex gap-2 flex-wrap mt-2">\x3c!--[--\x3e`),d(o($),(e,t)=>{a(`<button type="button" class="${c(["text-xs px-3 py-1.5 rounded-lg border transition-all",x.value.primera_sesion===e.datetime?"bg-[#D8AFA0] text-white border-[#D8AFA0] font-semibold":"bg-white text-[#5D4A44] border-[#D8AFA0]/30 hover:border-[#D8AFA0] hover:bg-[#D8AFA0]/10"])}">${p(e.label)}</button>`)}),a('\x3c!--]--\x3e</div><p class="text-xs text-cafe/60 mt-1"> üí° Puedes escribir la fecha/hora o usar el selector </p></div></div></div><div class="space-y-4 pt-4 border-t border-[#D8AFA0]/30"><div class="border-t pt-6"><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold mb-2"> üí≥ Bono Inicial (Opcional) </h3>'),o(D)?a('<div class="bg-amber-50 border-2 border-amber-200 rounded-lg p-4 mb-3"><div class="flex items-start gap-3"><span class="text-2xl">‚ÑπÔ∏è</span><div><p class="text-sm font-semibold text-amber-900 mb-1"> Sesi√≥n &quot;A Demanda&quot; seleccionada </p><p class="text-sm text-amber-800"> Las sesiones a demanda son <strong>sin compromiso</strong> y se pagan individualmente (60‚Ç¨ por sesi√≥n). No es necesario crear un bono prepagado. </p></div></div></div>'):a('<p class="text-sm text-cafe/70 mb-3"> Crea un bono prepagado para que el paciente empiece su tratamiento. Podr√°s confirmar el pago despu√©s. </p>'),a(`<label class="${c([o(D)?"bg-gray-100 border-2 border-gray-200 cursor-not-allowed opacity-60":"bg-purple-50 border-2 border-purple-200 cursor-pointer hover:bg-purple-100","flex items-center gap-3 p-3 rounded-lg transition-colors"])}"><input${v(Array.isArray(x.value.crear_bono)?m(x.value.crear_bono,null):x.value.crear_bono)?" checked":""} type="checkbox"${v(o(D))?" disabled":""} class="w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed"><span class="${c([o(D)?"text-gray-500":"text-purple-700","text-sm font-semibold"])}"> ‚úÖ S√≠, crear bono prepagado para este paciente </span></label></div>`),x.value.crear_bono?(a(`<div class="border-2 border-purple-400/40 rounded-lg p-5 space-y-4 bg-gradient-to-br from-purple-50 to-purple-100/50"><div class="bg-white border-2 border-purple-300 rounded-lg p-4 shadow-sm"><div class="flex items-start gap-3"><div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0"><span class="text-white text-xl">üéüÔ∏è</span></div><div class="flex-1"><h4 class="font-semibold text-purple-900 mb-1"> Tipo de Bono: ${p(o(y)||"Selecciona un tipo arriba")}</h4><div class="grid grid-cols-2 gap-3 text-sm"><div class="flex items-center gap-2"><span class="text-purple-600">üìä</span><span class="text-purple-800"><strong>${p(o(_))}</strong> ${p(1===o(_)?"sesi√≥n":"sesiones")}</span></div>`),o(w)>0?a(`<div class="flex items-center gap-2"><span class="text-purple-600">üí∞</span><span class="text-purple-800"> Precio sugerido: <strong>‚Ç¨${p(o(w))}</strong></span></div>`):a("\x3c!----\x3e"),a(`</div><p class="text-xs text-purple-600 mt-2 bg-purple-50 p-2 rounded"> üí° <strong>Tip:</strong> Los precios se calcular√°n autom√°ticamente seg√∫n el tipo de bono </p></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="bono_monto" class="block text-sm font-medium text-[#5D4A44] mb-1"> Monto Total <span class="text-red-500">*</span></label><div class="relative"><span class="absolute left-3 top-1/2 -translate-y-1/2 text-[#5D4A44]/60">‚Ç¨</span><input id="bono_monto"${l("value",x.value.bono_monto)} type="number" min="0" step="0.01"${v(x.value.crear_bono)?" required":""} placeholder="0.00" class="w-full pl-8 pr-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-white"></div></div><div><label class="block text-sm font-medium text-[#5D4A44] mb-1"> Precio por Sesi√≥n </label><div class="px-4 py-2 bg-purple-100 rounded-lg border border-purple-300"><span class="text-lg font-bold text-purple-700">‚Ç¨${p(o(A))}</span></div></div><div class="md:col-span-2"><label class="flex items-start gap-3 p-4 bg-white border-2 border-purple-200 rounded-lg cursor-pointer hover:bg-purple-50 hover:border-purple-300 transition-all"><input${v(Array.isArray(x.value.bono_renovacion_automatica)?m(x.value.bono_renovacion_automatica,null):x.value.bono_renovacion_automatica)?" checked":""} type="checkbox" class="mt-1 w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"><div class="flex-1"><div class="flex items-center gap-2 mb-1"><span class="text-lg">üîÑ</span><span class="text-sm font-semibold text-purple-900"> Renovaci√≥n Autom√°tica </span><span class="ml-auto px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-medium rounded"> Recomendado </span></div><div class="text-xs text-[#5D4A44]/70 space-y-1"><p>‚úì El bono se renovar√° autom√°ticamente cuando se agoten las sesiones o expire</p><p>‚úì Mantiene la continuidad del tratamiento sin interrupciones</p><p>‚úì Puedes desactivar la renovaci√≥n en cualquier momento</p></div></div></label></div></div>`),o(_)>0&&x.value.bono_monto>0?a(`<div class="p-3 bg-white rounded-lg border border-purple-300"><div class="text-xs font-medium text-purple-800 mb-2">üìã Resumen del Bono</div><div class="grid grid-cols-3 gap-2 text-xs"><div><span class="text-[#5D4A44]/60">Tipo:</span><span class="font-medium text-[#5D4A44] ml-1">${p(o(y))}</span></div><div><span class="text-[#5D4A44]/60">Sesiones:</span><span class="font-medium text-[#5D4A44] ml-1">${p(o(_))}</span></div><div><span class="text-[#5D4A44]/60">Total:</span><span class="font-medium text-[#5D4A44] ml-1">‚Ç¨${p(x.value.bono_monto)}</span></div></div></div>`):a("\x3c!----\x3e"),a("</div>")):a("\x3c!----\x3e"),a(`</div><div class="space-y-4 pt-4 border-t border-[#D8AFA0]/30"><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold"> Notas Iniciales </h3><div><label for="notas_iniciales" class="block text-sm font-medium text-[#5D4A44] mb-1"> Observaciones (Opcional) </label><textarea id="notas_iniciales" rows="3" class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white resize-none" placeholder="Observaciones iniciales, motivo de consulta, etc.">${p(x.value.notas_iniciales)}</textarea></div></div>`),g.value?a(`<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-600">${p(g.value)}</p></div>`):a("\x3c!----\x3e"),a(`<div class="sticky bottom-0 bg-gradient-to-r from-white/95 via-white/90 to-white/95 backdrop-blur-md pt-4 pb-2 border-t border-neutral-200 -mx-6 px-6 mt-6 shadow-sm"><div class="flex justify-between items-center gap-3"><div class="text-xs text-neutral-600"><span class="inline-block w-2 h-2 bg-red-500 rounded-full mr-1"></span> Los campos con * son obligatorios </div><div class="flex gap-3"><button type="button"${v(f.value)?" disabled":""} class="px-6 py-2.5 border-2 border-neutral-300 text-neutral-700 font-medium rounded-xl hover:bg-neutral-50 hover:border-[#027368] transition-all disabled:opacity-50 disabled:cursor-not-allowed"> Cancelar </button><button type="submit"${v(f.value||!o(k))?" disabled":""} class="px-8 py-2.5 bg-gradient-to-r from-[#04BF9D] to-[#027368] text-white font-semibold rounded-xl hover:from-[#027368] hover:to-[#04BF9D] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-sm hover:shadow-md">`),f.value?a('<span class="inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span>'):a("<span>‚úì</span>"),a(` ${p(f.value?"Creando paciente...":"Crear Paciente")}</button></div></div></div></form></div></div>`)):a("\x3c!----\x3e")}}},T=N.setup;N.setup=(e,a)=>{const t=s();return(t.modules||(t.modules=new Set)).add("components/ModalNuevoPaciente.vue"),T?T(e,a):void 0};const O=Object.assign(N,{__name:"ModalNuevoPaciente"}),H={__name:"ModalEditarPaciente",__ssrInlineRender:!0,props:{mostrar:{type:Boolean,default:!1},paciente:{type:Object,default:null}},emits:["cerrar","paciente-actualizado"],setup(o,{emit:s}){const i=o;S(),E();const d=a({nombre:"",apellido:"",email:"",telefono:"",fecha_nacimiento:"",area_acompanamiento:"",tipo_bono:"",activo:!0,en_pausa:!1,crear_bono:!1,bono_monto:null,bono_renovacion_automatica:!1}),c=t(()=>{const e=d.value.tipo_bono;if(!e)return"Selecciona tipo";return{a_demanda:1,quincenal:2,semanal:4}[e]||0}),u=t(()=>({a_demanda:"A Demanda",quincenal:"Quincenal",semanal:"Semanal"}[d.value.tipo_bono]||"")),x=t(()=>{const e=c.value,a=d.value.bono_monto;return"Selecciona tipo"===e||!a||e<=0?"0.00":(a/e).toFixed(2)}),f=a(!1),g=a("");e(()=>i.mostrar,e=>{e&&i.paciente&&cargarDatosPaciente()});const cargarDatosPaciente=()=>{var e;const a=i.paciente,t=a.metadata||{},o=(a.nombre_completo||a.nombre||"").split(" "),r=o[0]||t.nombre||"",s=o.slice(1).join(" ")||t.apellido||t.apellido_paterno||"";d.value={nombre:r,apellido:s,email:a.email||"",telefono:a.telefono||"",fecha_nacimiento:t.fecha_nacimiento||"",area_acompanamiento:a.area_de_acompanamiento||a.area_acompanamiento||"",tipo_bono:a.tipo_bono||"",activo:null==(e=a.activo)||e,en_pausa:a.en_pausa||t.en_pausa||!1,crear_bono:!1,bono_monto:null,bono_renovacion_automatica:!1},g.value=""};return(e,a,t,s)=>{o.mostrar?(a(`<div${n(r({class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},s))} data-v-931716c5><div class="bg-[#F9F7F3] rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto" data-v-931716c5><div class="sticky top-0 bg-[#F9F7F3] border-b border-[#D8AFA0]/30 px-6 py-4 flex justify-between items-center" data-v-931716c5><h2 class="text-2xl font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold" data-v-931716c5> Editar Paciente </h2><button class="text-[#5D4A44] hover:text-[#D8AFA0] transition-colors" aria-label="Cerrar modal" data-v-931716c5><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-931716c5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-931716c5></path></svg></button></div><form class="px-6 py-6 space-y-6" data-v-931716c5><div class="space-y-4" data-v-931716c5><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold" data-v-931716c5> Informaci√≥n Personal </h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4" data-v-931716c5><div data-v-931716c5><label for="nombre" class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-931716c5> Nombre <span class="text-red-500" data-v-931716c5>*</span></label><input id="nombre"${l("value",d.value.nombre)} type="text" required class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white" placeholder="Nombre del paciente" data-v-931716c5></div><div data-v-931716c5><label for="apellido" class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-931716c5> Apellido <span class="text-red-500" data-v-931716c5>*</span></label><input id="apellido"${l("value",d.value.apellido)} type="text" required class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white" placeholder="Apellido(s) del paciente" data-v-931716c5></div><div data-v-931716c5><label for="email" class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-931716c5> Email <span class="text-red-500" data-v-931716c5>*</span></label><input id="email"${l("value",d.value.email)} type="email" required class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white" placeholder="correo@ejemplo.com" data-v-931716c5></div><div data-v-931716c5><label for="telefono" class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-931716c5> Tel√©fono </label><input id="telefono"${l("value",d.value.telefono)} type="tel" class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white" placeholder="+52 123 456 7890" data-v-931716c5></div><div data-v-931716c5><label for="fecha_nacimiento" class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-931716c5> Fecha de Nacimiento </label><input id="fecha_nacimiento"${l("value",d.value.fecha_nacimiento)} type="date" class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white" data-v-931716c5></div></div></div><div class="space-y-4 pt-4 border-t border-[#D8AFA0]/30" data-v-931716c5><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold" data-v-931716c5> Informaci√≥n Terap√©utica </h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4" data-v-931716c5><div class="md:col-span-2" data-v-931716c5><label for="area_acompanamiento" class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-931716c5> √Årea de Acompa√±amiento <span class="text-red-500" data-v-931716c5>*</span></label><select id="area_acompanamiento" required class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white" data-v-931716c5><option value="" data-v-931716c5${v(Array.isArray(d.value.area_acompanamiento)?m(d.value.area_acompanamiento,""):b(d.value.area_acompanamiento,""))?" selected":""}>Selecciona un √°rea</option><option value="Ansiedad" data-v-931716c5${v(Array.isArray(d.value.area_acompanamiento)?m(d.value.area_acompanamiento,"Ansiedad"):b(d.value.area_acompanamiento,"Ansiedad"))?" selected":""}>Ansiedad</option><option value="Depresi√≥n" data-v-931716c5${v(Array.isArray(d.value.area_acompanamiento)?m(d.value.area_acompanamiento,"Depresi√≥n"):b(d.value.area_acompanamiento,"Depresi√≥n"))?" selected":""}>Depresi√≥n</option><option value="Autoestima" data-v-931716c5${v(Array.isArray(d.value.area_acompanamiento)?m(d.value.area_acompanamiento,"Autoestima"):b(d.value.area_acompanamiento,"Autoestima"))?" selected":""}>Autoestima</option><option value="Relaciones" data-v-931716c5${v(Array.isArray(d.value.area_acompanamiento)?m(d.value.area_acompanamiento,"Relaciones"):b(d.value.area_acompanamiento,"Relaciones"))?" selected":""}>Relaciones</option><option value="Duelo" data-v-931716c5${v(Array.isArray(d.value.area_acompanamiento)?m(d.value.area_acompanamiento,"Duelo"):b(d.value.area_acompanamiento,"Duelo"))?" selected":""}>Duelo</option><option value="Estr√©s Laboral" data-v-931716c5${v(Array.isArray(d.value.area_acompanamiento)?m(d.value.area_acompanamiento,"Estr√©s Laboral"):b(d.value.area_acompanamiento,"Estr√©s Laboral"))?" selected":""}>Estr√©s Laboral</option><option value="Crecimiento Personal" data-v-931716c5${v(Array.isArray(d.value.area_acompanamiento)?m(d.value.area_acompanamiento,"Crecimiento Personal"):b(d.value.area_acompanamiento,"Crecimiento Personal"))?" selected":""}>Crecimiento Personal</option><option value="Otro" data-v-931716c5${v(Array.isArray(d.value.area_acompanamiento)?m(d.value.area_acompanamiento,"Otro"):b(d.value.area_acompanamiento,"Otro"))?" selected":""}>Otro</option></select></div><div data-v-931716c5><label for="tipo_bono" class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-931716c5> Tipo de Bono <span class="text-red-500" data-v-931716c5>*</span></label><select id="tipo_bono" required class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white" data-v-931716c5><option value="" data-v-931716c5${v(Array.isArray(d.value.tipo_bono)?m(d.value.tipo_bono,""):b(d.value.tipo_bono,""))?" selected":""}>Selecciona tipo de bono</option><option value="a_demanda" data-v-931716c5${v(Array.isArray(d.value.tipo_bono)?m(d.value.tipo_bono,"a_demanda"):b(d.value.tipo_bono,"a_demanda"))?" selected":""}>A Demanda (1 sesi√≥n)</option><option value="quincenal" data-v-931716c5${v(Array.isArray(d.value.tipo_bono)?m(d.value.tipo_bono,"quincenal"):b(d.value.tipo_bono,"quincenal"))?" selected":""}>Quincenal (2 sesiones/mes)</option><option value="semanal" data-v-931716c5${v(Array.isArray(d.value.tipo_bono)?m(d.value.tipo_bono,"semanal"):b(d.value.tipo_bono,"semanal"))?" selected":""}>Semanal (4 sesiones/mes)</option></select></div><div data-v-931716c5><label for="activo" class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-931716c5> Estado </label><select id="activo" class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white" data-v-931716c5><option${l("value",!0)} data-v-931716c5${v(Array.isArray(d.value.activo)?m(d.value.activo,!0):b(d.value.activo,!0))?" selected":""}>Activo</option><option${l("value",!1)} data-v-931716c5${v(Array.isArray(d.value.activo)?m(d.value.activo,!1):b(d.value.activo,!1))?" selected":""}>Inactivo</option></select></div><div class="md:col-span-2" data-v-931716c5><label class="flex items-center gap-2 cursor-pointer" data-v-931716c5><input${v(Array.isArray(d.value.en_pausa)?m(d.value.en_pausa,null):d.value.en_pausa)?" checked":""} type="checkbox" class="w-4 h-4 text-[#D8AFA0] border-gray-300 rounded focus:ring-[#D8AFA0]" data-v-931716c5><span class="text-sm font-medium text-[#5D4A44]" data-v-931716c5> Proceso en pausa temporal </span></label><p class="text-xs text-cafe/60 mt-1 ml-6" data-v-931716c5> ‚è∏Ô∏è Marca esta opci√≥n si el seguimiento est√° pausado temporalmente </p></div></div></div><div class="space-y-4 pt-4 border-t border-[#D8AFA0]/30" data-v-931716c5><div class="flex items-center justify-between" data-v-931716c5><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold" data-v-931716c5> Gesti√≥n de Bonos </h3><label class="flex items-center gap-2 cursor-pointer" data-v-931716c5><input${v(Array.isArray(d.value.crear_bono)?m(d.value.crear_bono,null):d.value.crear_bono)?" checked":""} type="checkbox" class="w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500" data-v-931716c5><span class="text-sm font-medium text-[#5D4A44]" data-v-931716c5> üé´ Crear nuevo bono para este paciente </span></label></div>`),d.value.crear_bono?(a(`<div class="border-2 border-purple-400/40 rounded-lg p-4 space-y-4 bg-purple-50/30" data-v-931716c5><div class="bg-purple-100 border border-purple-300 rounded-lg p-3 flex items-start gap-2" data-v-931716c5><svg class="w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20" data-v-931716c5><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" data-v-931716c5></path></svg><div class="text-sm text-purple-800" data-v-931716c5><p class="font-medium" data-v-931716c5>El bono usar√° el tipo seleccionado arriba: <strong data-v-931716c5>${p(u.value||"Selecciona un tipo primero")}</strong></p><p class="text-xs text-purple-700 mt-1" data-v-931716c5> Sesiones incluidas: ${p("Selecciona tipo"===c.value?"N/A":c.value)}</p></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4" data-v-931716c5><div data-v-931716c5><label for="bono_monto" class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-931716c5> Monto Total <span class="text-red-500" data-v-931716c5>*</span></label><div class="relative" data-v-931716c5><span class="absolute left-3 top-2.5 text-[#5D4A44] font-medium" data-v-931716c5>‚Ç¨</span><input id="bono_monto"${l("value",d.value.bono_monto)} type="number" min="0" step="0.01"${v(d.value.crear_bono)?" required":""} class="w-full pl-8 pr-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white" placeholder="0.00" data-v-931716c5></div></div><div data-v-931716c5><label class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-931716c5> Precio por Sesi√≥n </label><div class="px-4 py-2 bg-purple-100 border-2 border-purple-300 rounded-lg text-purple-900 font-bold" data-v-931716c5> ‚Ç¨${p(x.value)}</div></div><div class="md:col-span-2" data-v-931716c5><label class="flex items-center gap-2 cursor-pointer" data-v-931716c5><input${v(Array.isArray(d.value.bono_renovacion_automatica)?m(d.value.bono_renovacion_automatica,null):d.value.bono_renovacion_automatica)?" checked":""} type="checkbox" class="w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500" data-v-931716c5><span class="text-sm font-medium text-[#5D4A44]" data-v-931716c5> üîÑ Renovaci√≥n autom√°tica al vencer </span></label><p class="text-xs text-cafe/60 mt-1 ml-6" data-v-931716c5> El sistema crear√° un nuevo bono id√©ntico cuando este expire </p></div></div>`),c.value&&d.value.bono_monto?(a(`<div class="bg-white border border-purple-300 rounded-lg p-4" data-v-931716c5><p class="text-sm font-medium text-[#5D4A44] mb-2" data-v-931716c5>üìã Resumen del Bono:</p><div class="text-sm text-cafe/80 space-y-1" data-v-931716c5><p data-v-931716c5>‚Ä¢ <strong data-v-931716c5>Tipo:</strong> ${p(u.value)}</p><p data-v-931716c5>‚Ä¢ <strong data-v-931716c5>Sesiones:</strong> ${p(c.value)}</p><p data-v-931716c5>‚Ä¢ <strong data-v-931716c5>Total:</strong> ‚Ç¨${p(d.value.bono_monto.toFixed(2))}</p><p data-v-931716c5>‚Ä¢ <strong data-v-931716c5>Por sesi√≥n:</strong> ‚Ç¨${p(x.value)}</p>`),d.value.bono_renovacion_automatica?a('<p class="text-purple-700" data-v-931716c5>‚Ä¢ ‚úÖ Con renovaci√≥n autom√°tica</p>'):a("\x3c!----\x3e"),a("</div></div>")):a("\x3c!----\x3e"),a("</div>")):a("\x3c!----\x3e"),a("</div>"),g.value?a(`<div class="bg-red-50 border border-red-200 rounded-lg p-4" data-v-931716c5><p class="text-sm text-red-600" data-v-931716c5>${p(g.value)}</p></div>`):a("\x3c!----\x3e"),a(`<div class="flex justify-end gap-3 pt-4 border-t border-[#D8AFA0]/30" data-v-931716c5><button type="button"${v(f.value)?" disabled":""} class="px-6 py-2 border border-[#D8AFA0] text-[#5D4A44] rounded-lg hover:bg-[#D8AFA0]/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" data-v-931716c5> Cancelar </button><button type="submit"${v(f.value)?" disabled":""} class="px-6 py-2 bg-[#D8AFA0] text-white rounded-lg hover:bg-[#C69F91] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2" data-v-931716c5>`),f.value?a('<span class="inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin" data-v-931716c5></span>'):a("\x3c!----\x3e"),a(` ${p(f.value?"Actualizando...":"Guardar Cambios")}</button></div></form></div></div>`)):a("\x3c!----\x3e")}}},V=H.setup;H.setup=(e,a)=>{const t=s();return(t.modules||(t.modules=new Set)).add("components/ModalEditarPaciente.vue"),V?V(e,a):void 0};const Q=C(H,[["__scopeId","data-v-931716c5"]]),U={__name:"ModalEliminarPaciente",__ssrInlineRender:!0,props:{mostrar:{type:Boolean,default:!1},paciente:{type:Object,default:null}},emits:["cerrar","paciente-eliminado","paciente-desactivado"],setup(e,{emit:o}){const s=e;S();const l=a(!1),i=a(""),d=t(()=>s.paciente?s.paciente.nombre_completo||s.paciente.nombre||s.paciente.email||"este paciente":"");return(a,t,o,s)=>{e.mostrar?(t(`<div${n(r({class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},s))} data-v-650451a2><div class="bg-[#F9F7F3] rounded-lg shadow-xl max-w-md w-full" data-v-650451a2><div class="px-6 py-4 border-b border-[#D8AFA0]/30" data-v-650451a2><div class="flex items-center gap-3" data-v-650451a2><span class="text-3xl" data-v-650451a2>‚ö†Ô∏è</span><h2 class="text-2xl font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold" data-v-650451a2> Eliminar Paciente </h2></div></div><div class="px-6 py-6 space-y-4" data-v-650451a2><p class="text-[#5D4A44]" data-v-650451a2> ¬øEst√°s seguro de que deseas eliminar a <strong class="font-semibold" data-v-650451a2>${p(d.value)}</strong>? </p><div class="bg-red-50 border border-red-200 rounded-lg p-4 space-y-2" data-v-650451a2><p class="text-sm text-red-800 font-medium" data-v-650451a2> Esta acci√≥n no se puede deshacer y eliminar√°: </p><ul class="text-sm text-red-700 space-y-1 ml-4 list-disc" data-v-650451a2><li data-v-650451a2>Todos los datos personales del paciente</li><li data-v-650451a2>El historial de sesiones</li><li data-v-650451a2>Las notas terap√©uticas</li><li data-v-650451a2>Las m√©tricas de bienestar</li><li data-v-650451a2>Los bonos asociados</li></ul></div><div class="bg-blue-50 border border-blue-200 rounded-lg p-4" data-v-650451a2><p class="text-sm text-blue-800 font-medium mb-2" data-v-650451a2> üí° Recomendaci√≥n: </p><p class="text-sm text-blue-700 mb-3" data-v-650451a2> En lugar de eliminar, considera <strong data-v-650451a2>desactivar</strong> al paciente. Esto preservar√° el historial para consultas futuras. </p><button type="button"${v(l.value)?" disabled":""} class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm" data-v-650451a2> Desactivar en lugar de eliminar </button></div>`),i.value?t(`<div class="bg-red-50 border border-red-200 rounded-lg p-3" data-v-650451a2><p class="text-sm text-red-600" data-v-650451a2>${p(i.value)}</p></div>`):t("\x3c!----\x3e"),t(`</div><div class="px-6 py-4 border-t border-[#D8AFA0]/30 flex justify-end gap-3" data-v-650451a2><button type="button"${v(l.value)?" disabled":""} class="px-6 py-2 border border-[#D8AFA0] text-[#5D4A44] rounded-lg hover:bg-[#D8AFA0]/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" data-v-650451a2> Cancelar </button><button type="button"${v(l.value)?" disabled":""} class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2" data-v-650451a2>`),l.value?t('<span class="inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin" data-v-650451a2></span>'):t("\x3c!----\x3e"),t(` ${p(l.value?"Eliminando...":"Eliminar Definitivamente")}</button></div></div></div>`)):t("\x3c!----\x3e")}}},G=U.setup;U.setup=(e,a)=>{const t=s();return(t.modules||(t.modules=new Set)).add("components/ModalEliminarPaciente.vue"),G?G(e,a):void 0};const W=C(U,[["__scopeId","data-v-650451a2"]]),X={__name:"pacientes",__ssrInlineRender:!0,setup(r){var s;const u=j(),v=L(),{getUserId:m}=S(),b=M();console.log("[Pacientes] Estado inicial del usuario:",{existe:!!b.value,id:m(),email:null==(s=b.value)?void 0:s.email}),e(b,(e,a)=>{console.log("[Pacientes] Usuario cambi√≥:",{antes:(null==a?void 0:a.email)||"null",ahora:(null==e?void 0:e.email)||"null",id:m()})});const h=a(!1),_=a(!1),y=a(!1),A=a(!1),w=a(!1),D=a(null),$=a(null),k=a(null),F=a([]),C=a(!0),E=a(""),q=a("todos"),z=[{valor:"todos",label:"Todos"},{valor:"activo",label:"Activos"},{valor:"pausa",label:"En pausa"},{valor:"finalizado",label:"Finalizados"}],cargarPacientes=async()=>{var e;C.value=!0;try{const a=m();if(console.log("[Pacientes] Iniciando carga de pacientes..."),console.log("[Pacientes] Usuario actual:",{existe:!!b.value,id:a,email:null==(e=b.value)?void 0:e.email}),!a)return console.error("[Pacientes] Usuario no autenticado"),void(C.value=!1);console.log("‚úÖ [Pacientes] Usuario verificado, consultando database...");const{data:t,error:o}=await v.from("pacientes").select("\n        id,\n        created_at,\n        activo,\n        email,\n        nombre_completo,\n        telefono,\n        area_de_acompanamiento,\n        frecuencia,\n        metadata\n      ").eq("terapeuta_id",a).order("created_at",{ascending:!1});if(o)throw o;const r=await Promise.all(t.map(async e=>{var a,t;const{data:o}=await v.from("citas").select("fecha_cita").eq("paciente_id",e.id).eq("estado","realizada").order("fecha_cita",{ascending:!1}).limit(1).maybeSingle(),{data:r}=await v.from("citas").select("id, fecha_cita, hora_inicio").eq("paciente_id",e.id).in("estado",["pendiente","confirmada"]).gte("fecha_cita",(new Date).toISOString().split("T")[0]).order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0}).limit(1).maybeSingle(),{count:s}=await v.from("citas").select("*",{count:"exact",head:!0}).eq("paciente_id",e.id).eq("estado","realizada");let n=null;try{const{data:a}=await v.from("bonos").select("id, tipo, estado, sesiones_totales, sesiones_restantes, fecha_fin, created_at").eq("paciente_id",e.id).order("created_at",{ascending:!1});console.log(`[Bonos] Paciente ${e.nombre_completo}:`,a);const{data:t,error:o}=await v.from("bonos").select("id, tipo, estado, sesiones_totales, sesiones_restantes, fecha_fin, created_at").eq("paciente_id",e.id).in("estado",["activo","pendiente"]).order("created_at",{ascending:!1}).limit(1).maybeSingle();o?console.warn("[Bonos] Error en consulta:",o.message):(n=t,console.log("‚úÖ [Bonos] Bono activo encontrado:",n))}catch(e){console.warn("[Bonos] Error inesperado:",e)}let l=0,i=0;n&&(i=n.sesiones_totales,l=i-n.sesiones_restantes);const d=new Date;d.setDate(d.getDate()-7);const{data:c}=await v.from("metricas_bienestar").select("estado_animo, nivel_energia, nivel_estres").eq("paciente_id",e.id).gte("fecha",d.toISOString());let p=3,u=!1,m=50;if(c&&c.length>0){const e=c.reduce((e,a)=>e+a.estado_animo,0)/c.length;p=e,m=Math.round(e/10*100);const a=c.slice(-3);a.length>=3&&(u=a.every(e=>e.estado_animo<=4))}const b=e.nombre_completo||(null==(a=e.metadata)?void 0:a.nombre_completo)||e.email;return{id:e.id,nombre:b,apellidos:"",email:e.email,telefono:e.telefono,activo:e.activo,en_pausa:(null==(t=e.metadata)?void 0:t.en_pausa)||!1,area_de_acompanamiento:e.area_de_acompanamiento,frecuencia:e.frecuencia,ultima_sesion:(null==o?void 0:o.fecha_cita)||null,proxima_sesion:r?`${r.fecha_cita}T${r.hora_inicio}`:null,proxima_cita_id:(null==r?void 0:r.id)||null,total_sesiones:s||0,estado_emocional_promedio:p,evolucion_porcentaje:m,requiere_atencion:u,created_at:e.created_at,bono_activo:n?{tipo:n.tipo,estado:n.estado,fecha_fin:n.fecha_fin,sesiones_completadas:l,sesiones_totales:i,sesiones_restantes:n.sesiones_restantes}:null}}));F.value=r}catch(e){console.error("Error al cargar pacientes:",e),alert("Hubo un error al cargar los pacientes. Por favor, recarga la p√°gina.")}finally{C.value=!1}},I=t(()=>{let e=F.value;if(E.value){const a=E.value.toLowerCase();e=e.filter(e=>(e.nombre||"").toLowerCase().includes(a)||(e.email||"").toLowerCase().includes(a))}return"todos"!==q.value&&(e=e.filter(e=>"activo"===q.value?e.activo&&!e.en_pausa:"pausa"===q.value?e.activo&&e.en_pausa:"finalizado"!==q.value||!e.activo)),e}),N=t(()=>F.value.length),cerrarModalNuevo=()=>{h.value=!1},abrirModalEditar=e=>{console.log("Abriendo modal de edici√≥n para:",e),$.value=e,_.value=!0},cerrarModalEditar=()=>{_.value=!1,$.value=null},abrirModalEliminar=e=>{console.log("Abriendo modal de eliminaci√≥n para:",e),$.value=e,y.value=!0},cerrarModalEliminar=()=>{y.value=!1,$.value=null},manejarPacienteCreado=async e=>{console.log("Nuevo paciente creado:",e),await cargarPacientes()},manejarPacienteActualizado=async e=>{console.log("Paciente actualizado:",e),await cargarPacientes()},manejarPacienteEliminado=async e=>{console.log("Paciente eliminado:",e),F.value=F.value.filter(a=>a.id!==e)},manejarPacienteDesactivado=async e=>{console.log("Paciente desactivado:",e),await cargarPacientes()},cerrarModalAsignarCita=()=>{A.value=!1,k.value=null},manejarCitaCreada=async e=>{console.log("Nueva cita creada:",e),await cargarPacientes(),cerrarModalAsignarCita()},verCitasPaciente=e=>{u.push(`/agenda?paciente=${e.id}`)},gestionarBonosPaciente=e=>{u.push(`/terapeuta/pacientes/${e.id}/bonos`)},abrirModalEditarCita=e=>{console.log("Abriendo modal de edici√≥n de cita:",e),D.value=e,w.value=!0},cerrarModalEditarCita=()=>{w.value=!1,D.value=null},handleCitaActualizada=async()=>{console.log("Cita actualizada, recargando pacientes..."),await cargarPacientes(),cerrarModalEditarCita()};return e(()=>m(),(e,a)=>{console.log("[Pacientes] ID de usuario cambi√≥:",{antes:a,ahora:e}),e&&0===F.value.length&&(console.log("[Pacientes] Recargando pacientes por cambio de usuario..."),cargarPacientes())}),(e,a,t,r)=>{const s=R,u=P,v=O,m=Q,b=W,F=B;a(`<div${n(r)} data-v-da126003><header class="mb-8" data-v-da126003><h1 class="text-3xl font-serif font-bold text-cafe mb-2" data-v-da126003> Pacientes </h1><p class="text-cafe/60" data-v-da126003> Gesti√≥n de pacientes activos </p></header><section class="mb-8" data-v-da126003><div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6" data-v-da126003><div class="flex flex-col lg:flex-row gap-4" data-v-da126003><div class="flex-1" data-v-da126003><div class="relative" data-v-da126003><input${l("value",o(E))} type="text" placeholder="Buscar paciente por nombre o email..." class="w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-lg focus:border-terracota focus:ring-2 focus:ring-terracota/20 focus:bg-white transition-all text-cafe placeholder-gray-400" data-v-da126003>`),a(i(o(x),{class:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,t)),a('</div></div><div class="flex flex-wrap gap-2" data-v-da126003>\x3c!--[--\x3e'),d(z,e=>{a(`<button class="${c([o(q)===e.valor?"bg-terracota text-white shadow-sm":"bg-gray-50 text-gray-600 hover:bg-gray-100 border border-gray-200","px-4 py-2.5 rounded-lg text-sm font-medium transition-all whitespace-nowrap"])}" data-v-da126003>${p(e.label)}</button>`)}),a('\x3c!--]--\x3e</div><button class="px-6 py-2.5 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-all flex items-center gap-2 whitespace-nowrap font-medium shadow-sm hover:shadow-md" data-v-da126003><span class="text-lg leading-none" data-v-da126003>+</span><span data-v-da126003>Nuevo Paciente</span></button></div></div></section><section data-v-da126003>'),o(C)?a('<div class="flex flex-col items-center justify-center py-16" data-v-da126003><div class="animate-spin w-12 h-12 border-4 border-terracota border-t-transparent rounded-full mb-6" data-v-da126003></div><p class="text-gray-500 font-medium" data-v-da126003>Cargando pacientes...</p></div>'):0===o(I).length?(a('<div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8 text-center" data-v-da126003>'),a(i(o(f),{class:"w-20 h-20 mx-auto mb-6 text-gray-300"},null,t)),a(`<h3 class="text-xl font-serif font-semibold text-cafe mb-3" data-v-da126003>${p(o(E)||"todos"!==o(q)?"No se encontraron pacientes":"A√∫n no tienes pacientes registrados")}</h3><p class="text-gray-500 mb-6 max-w-md mx-auto" data-v-da126003>${p(o(E)||"todos"!==o(q)?"Intenta ajustar los filtros de b√∫squeda para encontrar lo que buscas":"Comienza a√±adiendo tu primer paciente para gestionar su proceso terap√©utico")}</p>`),o(E)||"todos"!==o(q)?a("\x3c!----\x3e"):a('<button class="px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-all font-medium shadow-sm hover:shadow-md" data-v-da126003> + A√±adir Primer Paciente </button>'),a("</div>")):(a('<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6" data-v-da126003>\x3c!--[--\x3e'),d(o(I),e=>{a('<div class="relative group cursor-pointer" data-v-da126003>'),a(i(s,{paciente:e,onEditar:abrirModalEditar,onEliminar:abrirModalEliminar,onVerCitas:verCitasPaciente,onGestionarBonos:gestionarBonosPaciente,onEditarCita:abrirModalEditarCita},null,t)),e.activo&&!e.en_pausa?(a('<button class="hidden md:flex absolute bottom-4 right-4 px-3 py-2 bg-gradient-to-r from-terracota to-rosa text-white text-sm font-medium rounded-lg shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200 items-center gap-2 z-10 opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto" title="Asignar nueva cita" data-v-da126003>'),a(i(o(g),{class:"w-4 h-4"},null,t)),a("<span data-v-da126003>Asignar Cita</span></button>")):a("\x3c!----\x3e"),e.activo&&!e.en_pausa?(a('<button class="md:hidden absolute bottom-4 right-4 px-3 py-2 bg-gradient-to-r from-terracota to-rosa text-white text-sm font-medium rounded-lg shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200 flex items-center gap-2 z-10" title="Asignar nueva cita" data-v-da126003>'),a(i(o(g),{class:"w-4 h-4"},null,t)),a("<span data-v-da126003>Asignar Cita</span></button>")):a("\x3c!----\x3e"),a("</div>")}),a("\x3c!--]--\x3e</div>")),o(I).length>0?(a(`<footer class="mt-8 pt-6 border-t border-gray-100 flex items-center justify-between" data-v-da126003><p class="text-sm text-gray-500" data-v-da126003> Mostrando ${p(o(I).length)} de ${p(o(N))} pacientes </p>`),o(N)>o(I).length?a('<div class="flex gap-2" data-v-da126003><button class="px-4 py-2 bg-white border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium" data-v-da126003> Ver m√°s </button></div>'):a("\x3c!----\x3e"),a("</footer>")):a("\x3c!----\x3e"),a("</section>"),a(i(u,{mostrar:o(A),"paciente-preseleccionado":o(k),onCerrar:cerrarModalAsignarCita,onCitaCreada:manejarCitaCreada},null,t)),a(i(v,{mostrar:o(h),onCerrar:cerrarModalNuevo,onPacienteCreado:manejarPacienteCreado},null,t)),a(i(m,{mostrar:o(_),paciente:o($),onCerrar:cerrarModalEditar,onPacienteActualizado:manejarPacienteActualizado},null,t)),a(i(b,{mostrar:o(y),paciente:o($),onCerrar:cerrarModalEliminar,onPacienteEliminado:manejarPacienteEliminado,onPacienteDesactivado:manejarPacienteDesactivado},null,t)),a(i(F,{isOpen:o(w),citaId:o(D),onClose:cerrarModalEditarCita,onActualizado:handleCitaActualizada},null,t)),a("</div>")}}},Y=X.setup;X.setup=(e,a)=>{const t=s();return(t.modules||(t.modules=new Set)).add("pages/terapeuta/pacientes.vue"),Y?Y(e,a):void 0};const Z=C(X,[["__scopeId","data-v-da126003"]]);export{Z as default};
//# sourceMappingURL=pacientes-DXHzeU7x.mjs.map
