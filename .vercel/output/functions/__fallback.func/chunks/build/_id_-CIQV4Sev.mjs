import{_ as e}from"./DashboardCard-DLsboU2i.mjs";import{v as a,e as t,s}from"./server.mjs";import{_ as r}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{_ as o}from"./ModalNuevaCita-CAxtnDaO.mjs";import{M as n}from"./ModalDetallesCita-DUTiJ_cw.mjs";import{u as d}from"./useCitas-DyEZH6RI.mjs";import{u as l}from"./useSupabaseClient-DykwVqLQ.mjs";import"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../_/shared.cjs.prod.mjs";import"../virtual/_commonjsHelpers.mjs";import"node:stream";import"../_/index2.mjs";import"@supabase/supabase-js";import"@vercel/analytics/nuxt";import"./useSupabase-DfFg84CY.mjs";import"./CheckCircleIcon-CT9fzVFs.mjs";import"./CalendarIcon-BrsGHJBC.mjs";import"./TicketIcon-zZdrc71S.mjs";import"./MagnifyingGlassIcon-GsbNDyPZ.mjs";import"./XCircleIcon-Cr4IlpzV.mjs";import"./UserIcon-CrHYaeI9.mjs";import"./ExclamationTriangleIcon-DQdM2y0F.mjs";import"./UserGroupIcon-BhthmHUw.mjs";import"./ClockIcon-BxdFtPqx.mjs";import"./DocumentTextIcon-O51EkPyw.mjs";import"./PhoneIcon-acGzPaDV.mjs";import"./CheckBadgeIcon-DjhxLc-3.mjs";import"./PaymentMethodSelector-B6WAV7CR.mjs";import"./XMarkIcon-DCLwyE-W.mjs";import"./PencilIcon-BKWXEWgS.mjs";import"./CalendarDaysIcon-f8DhK37e.mjs";import"./ChevronDownIcon-CvdhRGll.mjs";import"./PlusIcon-CHLzv-V9.mjs";const i={__name:"NotasPrivadas",__ssrInlineRender:!0,props:{pacienteId:{type:String,required:!0},contenido:{type:String,default:""},ultimaActualizacion:{type:String,default:null}},emits:["guardar","actualizar"],setup(e,{emit:t}){const r=e,o=a.ref(!1),n=a.ref(!1),d=a.ref(r.contenido),l=a.ref(r.contenido);a.ref(null),a.watch(()=>r.contenido,e=>{o.value||(d.value=e,l.value=e)});const formatearFecha=e=>{if(!e)return"";return new Date(e).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})};return(t,r,l,i)=>{r(`<div${s.ssrRenderAttrs(a.mergeProps({class:"bg-white rounded-xl shadow-sm border border-[#E2E8F0]/40 p-6"},i))} data-v-b66842cb><div class="flex items-center justify-between mb-4" data-v-b66842cb><h3 class="font-serif text-lg font-semibold text-cafe flex items-center gap-2" data-v-b66842cb><span class="text-xl" data-v-b66842cb>üìù</span> Notas Cl√≠nicas Privadas </h3>`),a.unref(o)?r("\x3c!----\x3e"):r('<button class="px-3 py-1.5 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors" data-v-b66842cb> ‚úèÔ∏è Editar </button>'),r('</div><div class="mb-4 p-3 bg-rosa/20 border border-rosa rounded-lg" data-v-b66842cb><p class="text-xs text-cafe/70 flex items-start gap-2" data-v-b66842cb><span class="text-purple-600" data-v-b66842cb>üîí</span><span data-v-b66842cb> Esta informaci√≥n es estrictamente confidencial y solo visible para ti como terapeuta. Cumple con los est√°ndares de protecci√≥n de datos cl√≠nicos. </span></p></div>'),a.unref(o)?(r(`<div data-v-b66842cb><textarea placeholder="Anota observaciones, reflexiones o aspectos a seguir trabajando...\n\n‚Ä¢ Progreso observado en la sesi√≥n\n‚Ä¢ Temas pendientes de abordar\n‚Ä¢ Estrategias que funcionan\n‚Ä¢ Aspectos que requieren atenci√≥n" class="w-full min-h-[300px] px-4 py-3 bg-base-bg rounded-lg border border-purple-600/30 focus:border-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-300/20 transition-all text-cafe resize-y" data-v-b66842cb>${s.ssrInterpolate(a.unref(d))}</textarea><div class="mt-2 flex items-center justify-between text-xs text-cafe/60" data-v-b66842cb><span data-v-b66842cb> üí° Presiona Cmd/Ctrl + Enter para guardar r√°pidamente </span>`),e.ultimaActualizacion?r(`<span data-v-b66842cb> √öltima actualizaci√≥n: ${s.ssrInterpolate(formatearFecha(e.ultimaActualizacion))}</span>`):r("\x3c!----\x3e"),r(`</div><div class="mt-4 flex items-center gap-3" data-v-b66842cb><button${s.ssrIncludeBooleanAttr(a.unref(n))?" disabled":""} class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2" data-v-b66842cb>`),a.unref(n)?r("<span data-v-b66842cb>‚è≥</span>"):r("<span data-v-b66842cb>üíæ</span>"),r(`<span data-v-b66842cb>${s.ssrInterpolate(a.unref(n)?"Guardando...":"Guardar cambios")}</span></button><button${s.ssrIncludeBooleanAttr(a.unref(n))?" disabled":""} class="px-4 py-2 bg-white border border-cafe/20 text-cafe rounded-lg hover:bg-gray-50 transition-colors" data-v-b66842cb> Cancelar </button></div></div>`)):(r('<div class="min-h-[200px]" data-v-b66842cb>'),a.unref(d)?r(`<div class="prose prose-sm max-w-none text-cafe/80 whitespace-pre-wrap" data-v-b66842cb>${s.ssrInterpolate(a.unref(d))}</div>`):r('<div class="text-center py-8" data-v-b66842cb><span class="text-5xl mb-3 block opacity-40" data-v-b66842cb>üìã</span><p class="text-cafe/50 italic" data-v-b66842cb> A√∫n no hay notas registradas para este paciente </p><button class="mt-4 px-4 py-2 text-sm bg-purple-600/10 text-purple-600 rounded-lg hover:bg-purple-600/20 transition-colors" data-v-b66842cb> A√±adir primera nota </button></div>'),r("</div>")),!a.unref(o)&&e.ultimaActualizacion?r(`<div class="mt-4 pt-4 border-t border-gray-100" data-v-b66842cb><p class="text-xs text-cafe/50" data-v-b66842cb> √öltima modificaci√≥n: ${s.ssrInterpolate(formatearFecha(e.ultimaActualizacion))}</p></div>`):r("\x3c!----\x3e"),r("</div>")}}},c=i.setup;i.setup=(e,t)=>{const s=a.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/NotasPrivadas.vue"),c?c(e,t):void 0};const p=r(i,[["__scopeId","data-v-b66842cb"]]),u=a.defineComponent({__name:"[id]",__ssrInlineRender:!0,setup(r){const i=l(),c=t(),{getCitas:u}=d(),x=a.computed(()=>null),f=a.computed(()=>null),m=a.computed(()=>""),v=a.ref(!0),b=a.ref(null),g=a.ref(null),y=a.ref(null),$=a.ref([]),h=a.ref(""),N=a.ref(null),V=a.ref("proximas"),w=a.ref(!1),_=a.ref(null),k=a.ref(!1),C=a.ref(null),S=a.computed(()=>[{id:"proximas",nombre:"Pr√≥ximas Sesiones",icono:"üìÖ",badge:R.value.proximas||null},{id:"completadas",nombre:"Completadas",icono:"‚úÖ",badge:R.value.completadas||null},{id:"pendientes",nombre:"Pendientes",icono:"‚è≥",badge:R.value.pendientes||null},{id:"anteriores",nombre:"Historial",icono:"üìö",badge:null}]),cargarDatosPaciente=async()=>{v.value=!0,b.value=null;try{if(!c.value)return void(b.value="Usuario no autenticado");const{data:e,error:a}=await i.from("pacientes").select("*").eq("id",m.value).single();if(a)throw a;const t=e.nombre||e.email||"Sin nombre";g.value={...e,nombre_completo:t,email:e.email||"",telefono:e.telefono||""};const s=await u();$.value=s.filter(e=>e.paciente_id===m.value),await cargarBonoActivo(),await cargarNotas()}catch(e){console.error("Error al cargar paciente:",e),b.value=e.message||"Error desconocido"}finally{v.value=!1}},cargarBonoActivo=async()=>{try{const{data:e,error:a}=await i.from("bonos").select("*").eq("paciente_id",m.value).eq("estado","activo").maybeSingle();if(a)return void console.warn("[Bonos] Error en consulta:",a.message);if(e){const a=e.sesiones_usadas||0,t=e.sesiones_totales||0,s=t-a;y.value={...e,sesiones_disponibles:s,porcentaje_uso:t>0?Math.round(a/t*100):0}}}catch(e){console.warn("[Bonos] Error inesperado:",e)}},cargarNotas=async()=>{try{const{data:e}=await i.from("notas_terapeuticas").select("contenido, updated_at").eq("paciente_id",m.value).eq("terapeuta_id",c.value?.id).order("updated_at",{ascending:!1}).limit(1).maybeSingle();e&&(h.value=e.contenido||"",N.value=e.updated_at)}catch(e){console.error("Error al cargar notas:",e)}},guardarNotas=async({pacienteId:e,contenido:a})=>{try{const{data:t}=await i.from("notas_terapeuticas").select("id").eq("paciente_id",e).eq("terapeuta_id",c.value?.id).maybeSingle();t?await i.from("notas_terapeuticas").update({contenido:a,updated_at:(new Date).toISOString()}).eq("id",t.id):await i.from("notas_terapeuticas").insert({paciente_id:e,terapeuta_id:c.value?.id,contenido:a}),h.value=a,N.value=(new Date).toISOString()}catch(e){throw console.error("Error al guardar notas:",e),e}},D=a.computed(()=>{const e=new Date;return $.value.filter(a=>["pendiente","confirmada"].includes(a.estado)&&new Date(a.fecha_cita)>=e).sort((e,a)=>new Date(e.fecha_cita).getTime()-new Date(a.fecha_cita).getTime())}),I=a.computed(()=>$.value.filter(e=>"realizada"===e.estado).sort((e,a)=>new Date(a.fecha_cita).getTime()-new Date(e.fecha_cita).getTime())),B=a.computed(()=>$.value.filter(e=>"pendiente"===e.estado).sort((e,a)=>new Date(e.fecha_cita).getTime()-new Date(a.fecha_cita).getTime())),j=a.computed(()=>$.value.sort((e,a)=>new Date(a.fecha_cita).getTime()-new Date(e.fecha_cita).getTime())),R=a.computed(()=>({total:$.value.length,completadas:I.value.length,pendientes:B.value.length,proximas:D.value.length})),P=a.computed(()=>{const e=I.value;return e.length>0?e[e.length-1].fecha_cita:null}),A=a.computed(()=>{const e=I.value;return e.length>0?e[0].fecha_cita:null}),E=a.computed(()=>D.value.length>0?D.value[0]:null),T=a.computed(()=>g.value?.nombre_completo||"Sin nombre"),z=a.computed(()=>{if(!T.value)return"?";const e=T.value.split(" ");return e.length>=2&&e[0]&&e[1]?`${e[0][0]}${e[1][0]}`.toUpperCase():T.value.substring(0,2).toUpperCase()}),L=a.computed(()=>{const e=["#D8AFA0","#C89B8A","#B7C6B0","#A8C5B5","#D4A5A5","#C4B5A0"];return e[m.value.charCodeAt(0)%e.length]}),q=a.computed(()=>g.value?g.value.activo?g.value.metadata?.en_pausa?"En pausa":"En proceso":"Finalizado":""),G=a.computed(()=>g.value?g.value.activo?g.value.metadata?.en_pausa?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700":"bg-gray-100 text-gray-600":""),F=a.computed(()=>{if(!g.value?.tipo_bono)return"";return{a_demanda:"A Demanda (1 sesi√≥n)",quincenal:"Quincenal (2 sesiones/mes)",semanal:"Semanal (4 sesiones/mes)"}[g.value.tipo_bono]||g.value.tipo_bono}),formatearFecha=e=>{if(!e)return"";try{return new Date(e+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}catch{return e}},formatearFechaCompleta=(e,a)=>{if(!e)return"";try{return new Date(e+"T"+(a||"00:00:00")).toLocaleString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}},formatearPrecio=e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(e||0),calcularTiempoProceso=e=>{if(!e)return"";const a=new Date(e),t=new Date,s=Math.floor((t.getTime()-a.getTime())/864e5);return s<30?`${s} d√≠as`:s<365?`${Math.floor(s/30)} meses`:`${Math.floor(s/365)} a√±os`},obtenerIconoModalidad=e=>({presencial:"üè•",online:"üíª",telefonica:"üìû"}[e]||"üìã"),obtenerEstiloModalidad=e=>({presencial:"bg-green-100 text-green-700",online:"bg-purple-600/20 text-purple-600",telefonica:"bg-blue-100 text-blue-700"}[e]||"bg-gray-100 text-gray-700"),obtenerEstiloEstado=e=>({pendiente:"bg-yellow-100 text-yellow-700",confirmada:"bg-green-100 text-green-700",realizada:"bg-blue-100 text-blue-700",cancelada:"bg-red-100 text-red-700"}[e]||"bg-gray-100 text-gray-700"),irABonos=()=>{f.value&&f.value.push(`/terapeuta/pacientes/${m.value}/bonos`)},abrirWhatsApp=()=>{const e=g.value?.telefono;if(!e)return void alert("Este paciente no tiene tel√©fono registrado");const a=`https://wa.me/${e.replace(/\D/g,"")}?text=${encodeURIComponent(`Hola ${T.value}, ¬øc√≥mo est√°s?`)}`;(void 0).open(a,"_blank")},agendarSesion=()=>{g.value&&(_.value={id:g.value.id,nombre:T.value,email:g.value.email,telefono:g.value.telefono,frecuencia:g.value.frecuencia||"semanal",area_acompanamiento:g.value.area_de_acompanamiento},w.value=!0)},cerrarModalCita=()=>{w.value=!1,_.value=null},onCitaCreada=()=>{cargarDatosPaciente()},verDetallesCita=e=>{C.value=e,k.value=!0},cerrarModalDetalles=()=>{k.value=!1,C.value=null},editarPaciente=()=>{alert("Funci√≥n de editar en desarrollo")};return a.watch(()=>x.value?.params.id,()=>{x.value?.params.id&&cargarDatosPaciente()}),(t,r,d,l)=>{const c=e,u=p,x=o,f=n;r(`<div${s.ssrRenderAttrs(a.mergeProps({class:"pb-20"},l))} data-v-a1147d9a><button class="mb-6 flex items-center gap-2 text-cafe hover:text-purple-600 transition-colors" data-v-a1147d9a><span data-v-a1147d9a>‚Üê</span><span data-v-a1147d9a>Volver a lista de pacientes</span></button>`),a.unref(v)?r('<div class="text-center py-12" data-v-a1147d9a><div class="animate-spin w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4" data-v-a1147d9a></div><p class="text-cafe/60" data-v-a1147d9a>Cargando informaci√≥n del paciente...</p></div>'):a.unref(b)?(r('<div class="text-center py-12" data-v-a1147d9a>'),r(s.ssrRenderComponent(c,null,{default:a.withCtx((e,r,o,n)=>{if(!r)return[a.createVNode("span",{class:"text-6xl mb-4 block"},"‚ùå"),a.createVNode("h3",{class:"text-xl font-serif font-semibold text-cafe mb-2"}," No se pudo cargar la informaci√≥n "),a.createVNode("p",{class:"text-cafe/60 mb-4"},a.toDisplayString(a.unref(b)),1),a.createVNode("button",{onClick:e=>t.$router.push("/terapeuta/pacientes"),class:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors"}," Volver a la lista ",8,["onClick"])];r(`<span class="text-6xl mb-4 block" data-v-a1147d9a${n}>‚ùå</span><h3 class="text-xl font-serif font-semibold text-cafe mb-2" data-v-a1147d9a${n}> No se pudo cargar la informaci√≥n </h3><p class="text-cafe/60 mb-4" data-v-a1147d9a${n}>${s.ssrInterpolate(a.unref(b))}</p><button class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors" data-v-a1147d9a${n}> Volver a la lista </button>`)}),_:1},d)),r("</div>")):a.unref(g)?(r("<div data-v-a1147d9a>"),r(s.ssrRenderComponent(c,{class:"mb-6"},{default:a.withCtx((e,t,r,o)=>{if(!t)return[a.createVNode("div",{class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6"},[a.createVNode("div",{class:"flex items-start gap-4"},[a.createVNode("div",{class:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0",style:{backgroundColor:a.unref(L)}},a.toDisplayString(a.unref(z)),5),a.createVNode("div",null,[a.createVNode("h1",{class:"text-3xl font-serif font-bold text-cafe mb-2"},a.toDisplayString(a.unref(T)),1),a.createVNode("div",{class:"flex flex-wrap items-center gap-3 mb-3"},[a.createVNode("span",{class:["px-3 py-1 text-sm font-medium rounded-full",a.unref(G)]},a.toDisplayString(a.unref(q)),3),a.createVNode("span",{class:"text-cafe/60 text-sm flex items-center gap-1"},[a.createVNode("span",null,"üìß"),a.createVNode("span",null,a.toDisplayString(a.unref(g).email),1)])]),a.createVNode("div",{class:"space-y-1 text-sm"},[a.unref(g).telefono?(a.openBlock(),a.createBlock("div",{key:0,class:"text-cafe/70 flex items-center gap-2"},[a.createVNode("span",null,"üì±"),a.createVNode("span",null,a.toDisplayString(a.unref(g).telefono),1)])):a.createCommentVNode("",!0),a.unref(g).area_de_acompanamiento?(a.openBlock(),a.createBlock("div",{key:1,class:"text-cafe/70 flex items-center gap-2"},[a.createVNode("span",null,"üéØ"),a.createVNode("span",null,[a.createVNode("strong",null,"√Årea:"),a.createTextVNode(" "+a.toDisplayString(a.unref(g).area_de_acompanamiento),1)])])):a.createCommentVNode("",!0),a.unref(g).tipo_bono?(a.openBlock(),a.createBlock("div",{key:2,class:"text-cafe/70 flex items-center gap-2"},[a.createVNode("span",null,"üé´"),a.createVNode("span",null,[a.createVNode("strong",null,"Tipo de Bono:"),a.createTextVNode(" "+a.toDisplayString(a.unref(F)),1)])])):a.createCommentVNode("",!0)])])]),a.createVNode("div",{class:"flex flex-wrap gap-2"},[a.createVNode("button",{onClick:irABonos,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2"},[a.createVNode("span",null,"üé´"),a.createVNode("span",null,"Gestionar Bonos")]),a.createVNode("button",{onClick:abrirWhatsApp,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2"},[a.createVNode("span",null,"üí¨"),a.createVNode("span",null,"WhatsApp")]),a.createVNode("button",{onClick:agendarSesion,class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-sm flex items-center gap-2"},[a.createVNode("span",null,"üìÖ"),a.createVNode("span",null,"Agendar sesi√≥n")]),a.createVNode("button",{onClick:editarPaciente,class:"px-4 py-2 bg-white border border-purple-600/30 text-purple-600 rounded-lg hover:bg-purple-600/5 transition-colors text-sm flex items-center gap-2"},[a.createVNode("span",null,"‚úèÔ∏è"),a.createVNode("span",null,"Editar")])])])];t(`<div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6" data-v-a1147d9a${o}><div class="flex items-start gap-4" data-v-a1147d9a${o}><div class="w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0" style="${s.ssrRenderStyle({backgroundColor:a.unref(L)})}" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(z))}</div><div data-v-a1147d9a${o}><h1 class="text-3xl font-serif font-bold text-cafe mb-2" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(T))}</h1><div class="flex flex-wrap items-center gap-3 mb-3" data-v-a1147d9a${o}><span class="${s.ssrRenderClass([a.unref(G),"px-3 py-1 text-sm font-medium rounded-full"])}" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(q))}</span><span class="text-cafe/60 text-sm flex items-center gap-1" data-v-a1147d9a${o}><span data-v-a1147d9a${o}>üìß</span><span data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(g).email)}</span></span></div><div class="space-y-1 text-sm" data-v-a1147d9a${o}>`),a.unref(g).telefono?t(`<div class="text-cafe/70 flex items-center gap-2" data-v-a1147d9a${o}><span data-v-a1147d9a${o}>üì±</span><span data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(g).telefono)}</span></div>`):t("\x3c!----\x3e"),a.unref(g).area_de_acompanamiento?t(`<div class="text-cafe/70 flex items-center gap-2" data-v-a1147d9a${o}><span data-v-a1147d9a${o}>üéØ</span><span data-v-a1147d9a${o}><strong data-v-a1147d9a${o}>√Årea:</strong> ${s.ssrInterpolate(a.unref(g).area_de_acompanamiento)}</span></div>`):t("\x3c!----\x3e"),a.unref(g).tipo_bono?t(`<div class="text-cafe/70 flex items-center gap-2" data-v-a1147d9a${o}><span data-v-a1147d9a${o}>üé´</span><span data-v-a1147d9a${o}><strong data-v-a1147d9a${o}>Tipo de Bono:</strong> ${s.ssrInterpolate(a.unref(F))}</span></div>`):t("\x3c!----\x3e"),t(`</div></div></div><div class="flex flex-wrap gap-2" data-v-a1147d9a${o}><button class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2" data-v-a1147d9a${o}><span data-v-a1147d9a${o}>üé´</span><span data-v-a1147d9a${o}>Gestionar Bonos</span></button><button class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2" data-v-a1147d9a${o}><span data-v-a1147d9a${o}>üí¨</span><span data-v-a1147d9a${o}>WhatsApp</span></button><button class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-sm flex items-center gap-2" data-v-a1147d9a${o}><span data-v-a1147d9a${o}>üìÖ</span><span data-v-a1147d9a${o}>Agendar sesi√≥n</span></button><button class="px-4 py-2 bg-white border border-purple-600/30 text-purple-600 rounded-lg hover:bg-purple-600/5 transition-colors text-sm flex items-center gap-2" data-v-a1147d9a${o}><span data-v-a1147d9a${o}>‚úèÔ∏è</span><span data-v-a1147d9a${o}>Editar</span></button></div></div>`)}),_:1},d)),r('<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6" data-v-a1147d9a>'),r(s.ssrRenderComponent(c,null,{default:a.withCtx((e,t,r,o)=>{if(!t)return[a.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[a.createVNode("span",{class:"text-2xl"},"üìä"),a.createTextVNode(" Resumen ")]),a.createVNode("div",{class:"space-y-3"},[a.createVNode("div",{class:"flex items-center justify-between p-3 bg-base-bg rounded-lg"},[a.createVNode("span",{class:"text-sm text-cafe/70"},"Total sesiones"),a.createVNode("span",{class:"font-bold text-cafe text-lg"},a.toDisplayString(a.unref(R).total),1)]),a.createVNode("div",{class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},[a.createVNode("span",{class:"text-sm text-cafe/70"},"Completadas"),a.createVNode("span",{class:"font-bold text-green-600 text-lg"},a.toDisplayString(a.unref(R).completadas),1)]),a.createVNode("div",{class:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg"},[a.createVNode("span",{class:"text-sm text-cafe/70"},"Pendientes"),a.createVNode("span",{class:"font-bold text-yellow-600 text-lg"},a.toDisplayString(a.unref(R).pendientes),1)]),a.createVNode("div",{class:"flex items-center justify-between p-3 bg-blue-50 rounded-lg"},[a.createVNode("span",{class:"text-sm text-cafe/70"},"Pr√≥ximas"),a.createVNode("span",{class:"font-bold text-blue-600 text-lg"},a.toDisplayString(a.unref(R).proximas),1)])])];t(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-a1147d9a${o}><span class="text-2xl" data-v-a1147d9a${o}>üìä</span> Resumen </h2><div class="space-y-3" data-v-a1147d9a${o}><div class="flex items-center justify-between p-3 bg-base-bg rounded-lg" data-v-a1147d9a${o}><span class="text-sm text-cafe/70" data-v-a1147d9a${o}>Total sesiones</span><span class="font-bold text-cafe text-lg" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(R).total)}</span></div><div class="flex items-center justify-between p-3 bg-green-50 rounded-lg" data-v-a1147d9a${o}><span class="text-sm text-cafe/70" data-v-a1147d9a${o}>Completadas</span><span class="font-bold text-green-600 text-lg" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(R).completadas)}</span></div><div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg" data-v-a1147d9a${o}><span class="text-sm text-cafe/70" data-v-a1147d9a${o}>Pendientes</span><span class="font-bold text-yellow-600 text-lg" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(R).pendientes)}</span></div><div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg" data-v-a1147d9a${o}><span class="text-sm text-cafe/70" data-v-a1147d9a${o}>Pr√≥ximas</span><span class="font-bold text-blue-600 text-lg" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(R).proximas)}</span></div></div>`)}),_:1},d)),r(s.ssrRenderComponent(c,null,{default:a.withCtx((e,t,r,o)=>{if(!t)return[a.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[a.createVNode("span",{class:"text-2xl"},"üé´"),a.createTextVNode(" Bono Contratado ")]),a.unref(y)?(a.openBlock(),a.createBlock("div",{key:0,class:"space-y-4"},[a.createVNode("div",{class:"p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg"},[a.createVNode("div",{class:"text-xs text-purple-700 font-medium mb-1"},"Tipo de Bono"),a.createVNode("div",{class:"text-sm font-bold text-purple-900"},a.toDisplayString(a.unref(F)),1)]),a.createVNode("div",{class:"text-center p-4 bg-gradient-to-br from-purple-600/10 to-rosa/20 rounded-xl"},[a.createVNode("div",{class:"text-4xl font-bold text-purple-600 mb-1"},a.toDisplayString(a.unref(y).sesiones_disponibles),1),a.createVNode("div",{class:"text-sm text-cafe/70"}," de "+a.toDisplayString(a.unref(y).sesiones_totales)+" sesiones disponibles ",1)]),a.createVNode("div",{class:"space-y-2"},[a.createVNode("div",{class:"flex justify-between text-sm"},[a.createVNode("span",{class:"text-cafe/70"},"Progreso"),a.createVNode("span",{class:"font-medium text-cafe"},a.toDisplayString(a.unref(y).porcentaje_uso)+"%",1)]),a.createVNode("div",{class:"w-full bg-gray-200 rounded-full h-2.5"},[a.createVNode("div",{class:"h-2.5 rounded-full bg-gradient-to-r from-purple-600 to-rosa transition-all",style:{width:`${a.unref(y).porcentaje_uso}%`}},null,4)])]),a.createVNode("div",{class:"pt-3 border-t space-y-2 text-sm"},[a.createVNode("div",{class:"flex justify-between"},[a.createVNode("span",{class:"text-cafe/70"},"Sesiones usadas:"),a.createVNode("span",{class:"font-medium text-cafe"},a.toDisplayString(a.unref(y).sesiones_usadas),1)]),a.createVNode("div",{class:"flex justify-between"},[a.createVNode("span",{class:"text-cafe/70"},"Monto total:"),a.createVNode("span",{class:"font-medium text-cafe"},a.toDisplayString(formatearPrecio(a.unref(y).monto_total||a.unref(y).precio)),1)]),a.createVNode("div",{class:"flex justify-between"},[a.createVNode("span",{class:"text-cafe/70"},"Precio por sesi√≥n:"),a.createVNode("span",{class:"font-medium text-cafe"},a.toDisplayString(formatearPrecio((a.unref(y).monto_total||a.unref(y).precio)/a.unref(y).sesiones_totales)),1)]),a.createVNode("div",{class:"flex justify-between"},[a.createVNode("span",{class:"text-cafe/70"},"Estado:"),a.createVNode("span",{class:["font-medium capitalize",{"text-green-600":"activo"===a.unref(y).estado,"text-yellow-600":"pendiente"===a.unref(y).estado,"text-gray-600":"vencido"===a.unref(y).estado}]},a.toDisplayString(a.unref(y).estado),3)])])])):(a.openBlock(),a.createBlock("div",{key:1,class:"text-center py-8"},[a.createVNode("span",{class:"text-5xl mb-3 block opacity-40"},"üé´"),a.createVNode("p",{class:"text-sm text-cafe/50 mb-2"},"No hay bono activo"),a.createVNode("p",{class:"text-xs text-cafe/40 mb-4"},[a.createTextVNode(" Tipo de bono del paciente: "),a.createVNode("strong",null,a.toDisplayString(a.unref(F)||"No definido"),1)]),a.createVNode("button",{onClick:irABonos,class:"mt-2 text-sm text-purple-600 hover:text-cafe transition-colors font-medium"}," Gestionar bonos ‚Üí ")]))];t(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-a1147d9a${o}><span class="text-2xl" data-v-a1147d9a${o}>üé´</span> Bono Contratado </h2>`),a.unref(y)?t(`<div class="space-y-4" data-v-a1147d9a${o}><div class="p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg" data-v-a1147d9a${o}><div class="text-xs text-purple-700 font-medium mb-1" data-v-a1147d9a${o}>Tipo de Bono</div><div class="text-sm font-bold text-purple-900" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(F))}</div></div><div class="text-center p-4 bg-gradient-to-br from-purple-600/10 to-rosa/20 rounded-xl" data-v-a1147d9a${o}><div class="text-4xl font-bold text-purple-600 mb-1" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(y).sesiones_disponibles)}</div><div class="text-sm text-cafe/70" data-v-a1147d9a${o}> de ${s.ssrInterpolate(a.unref(y).sesiones_totales)} sesiones disponibles </div></div><div class="space-y-2" data-v-a1147d9a${o}><div class="flex justify-between text-sm" data-v-a1147d9a${o}><span class="text-cafe/70" data-v-a1147d9a${o}>Progreso</span><span class="font-medium text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(y).porcentaje_uso)}%</span></div><div class="w-full bg-gray-200 rounded-full h-2.5" data-v-a1147d9a${o}><div class="h-2.5 rounded-full bg-gradient-to-r from-purple-600 to-rosa transition-all" style="${s.ssrRenderStyle({width:`${a.unref(y).porcentaje_uso}%`})}" data-v-a1147d9a${o}></div></div></div><div class="pt-3 border-t space-y-2 text-sm" data-v-a1147d9a${o}><div class="flex justify-between" data-v-a1147d9a${o}><span class="text-cafe/70" data-v-a1147d9a${o}>Sesiones usadas:</span><span class="font-medium text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(y).sesiones_usadas)}</span></div><div class="flex justify-between" data-v-a1147d9a${o}><span class="text-cafe/70" data-v-a1147d9a${o}>Monto total:</span><span class="font-medium text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(formatearPrecio(a.unref(y).monto_total||a.unref(y).precio))}</span></div><div class="flex justify-between" data-v-a1147d9a${o}><span class="text-cafe/70" data-v-a1147d9a${o}>Precio por sesi√≥n:</span><span class="font-medium text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(formatearPrecio((a.unref(y).monto_total||a.unref(y).precio)/a.unref(y).sesiones_totales))}</span></div><div class="flex justify-between" data-v-a1147d9a${o}><span class="text-cafe/70" data-v-a1147d9a${o}>Estado:</span><span class="${s.ssrRenderClass([{"text-green-600":"activo"===a.unref(y).estado,"text-yellow-600":"pendiente"===a.unref(y).estado,"text-gray-600":"vencido"===a.unref(y).estado},"font-medium capitalize"])}" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(y).estado)}</span></div></div></div>`):t(`<div class="text-center py-8" data-v-a1147d9a${o}><span class="text-5xl mb-3 block opacity-40" data-v-a1147d9a${o}>üé´</span><p class="text-sm text-cafe/50 mb-2" data-v-a1147d9a${o}>No hay bono activo</p><p class="text-xs text-cafe/40 mb-4" data-v-a1147d9a${o}> Tipo de bono del paciente: <strong data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(F)||"No definido")}</strong></p><button class="mt-2 text-sm text-purple-600 hover:text-cafe transition-colors font-medium" data-v-a1147d9a${o}> Gestionar bonos ‚Üí </button></div>`)}),_:1},d)),r(s.ssrRenderComponent(c,null,{default:a.withCtx((e,t,r,o)=>{if(!t)return[a.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[a.createVNode("span",{class:"text-2xl"},"üìã"),a.createTextVNode(" Datos del Proceso ")]),a.createVNode("div",{class:"space-y-3"},[a.createVNode("div",{class:"p-3 bg-base-bg rounded-lg"},[a.createVNode("div",{class:"text-xs text-cafe/60 mb-1"},"Primera sesi√≥n"),a.createVNode("div",{class:"text-sm font-medium text-cafe"},a.toDisplayString(formatearFecha(a.unref(P))||"Sin registro"),1)]),a.createVNode("div",{class:"p-3 bg-base-bg rounded-lg"},[a.createVNode("div",{class:"text-xs text-cafe/60 mb-1"},"√öltima sesi√≥n"),a.createVNode("div",{class:"text-sm font-medium text-cafe"},a.toDisplayString(formatearFecha(a.unref(A))||"Sin registro"),1)]),a.unref(E)?(a.openBlock(),a.createBlock("div",{key:0,class:"p-4 bg-gradient-to-br from-purple-600/20 to-rosa/20 border-2 border-purple-600/40 rounded-lg"},[a.createVNode("div",{class:"text-xs font-medium text-purple-600 mb-2 flex items-center gap-1"},[a.createVNode("span",null,"üìÖ"),a.createVNode("span",null,"Pr√≥xima sesi√≥n agendada")]),a.createVNode("div",{class:"text-base font-bold text-cafe mb-3"},a.toDisplayString(formatearFechaCompleta(a.unref(E).fecha_cita,a.unref(E).hora_inicio)),1),a.createVNode("div",{class:"flex items-center gap-2 flex-wrap"},[a.createVNode("span",{class:"text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full font-medium flex items-center gap-1"},a.toDisplayString(obtenerIconoModalidad(a.unref(E).modalidad))+" "+a.toDisplayString(a.unref(E).modalidad),1),a.createVNode("span",{class:["text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full capitalize font-medium",{"text-green-600 border-green-300":"confirmada"===a.unref(E).estado,"text-yellow-600 border-yellow-300":"pendiente"===a.unref(E).estado,"text-blue-600 border-blue-300":"programada"===a.unref(E).estado}]},a.toDisplayString(a.unref(E).estado),3)]),a.unref(E).notas?(a.openBlock(),a.createBlock("div",{key:0,class:"mt-3 pt-3 border-t border-purple-600/20"},[a.createVNode("div",{class:"text-xs text-cafe/70 mb-1"},"Notas:"),a.createVNode("div",{class:"text-xs text-cafe"},a.toDisplayString(a.unref(E).notas),1)])):a.createCommentVNode("",!0)])):(a.openBlock(),a.createBlock("div",{key:1,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[a.createVNode("div",{class:"text-center"},[a.createVNode("span",{class:"text-3xl mb-2 block"},"‚è∞"),a.createVNode("div",{class:"text-sm font-medium text-yellow-800 mb-1"},"No hay sesi√≥n agendada"),a.createVNode("div",{class:"text-xs text-yellow-700"},"Recuerda agendar la pr√≥xima sesi√≥n"),a.createVNode("button",{onClick:agendarSesion,class:"mt-3 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-xs font-medium"}," Agendar ahora ")])])),a.createVNode("div",{class:"p-3 bg-base-bg rounded-lg"},[a.createVNode("div",{class:"text-xs text-cafe/60 mb-1"},"En proceso desde"),a.createVNode("div",{class:"text-sm font-medium text-cafe"},a.toDisplayString(calcularTiempoProceso(a.unref(g).created_at)),1)])])];t(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-a1147d9a${o}><span class="text-2xl" data-v-a1147d9a${o}>üìã</span> Datos del Proceso </h2><div class="space-y-3" data-v-a1147d9a${o}><div class="p-3 bg-base-bg rounded-lg" data-v-a1147d9a${o}><div class="text-xs text-cafe/60 mb-1" data-v-a1147d9a${o}>Primera sesi√≥n</div><div class="text-sm font-medium text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(formatearFecha(a.unref(P))||"Sin registro")}</div></div><div class="p-3 bg-base-bg rounded-lg" data-v-a1147d9a${o}><div class="text-xs text-cafe/60 mb-1" data-v-a1147d9a${o}>√öltima sesi√≥n</div><div class="text-sm font-medium text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(formatearFecha(a.unref(A))||"Sin registro")}</div></div>`),a.unref(E)?(t(`<div class="p-4 bg-gradient-to-br from-purple-600/20 to-rosa/20 border-2 border-purple-600/40 rounded-lg" data-v-a1147d9a${o}><div class="text-xs font-medium text-purple-600 mb-2 flex items-center gap-1" data-v-a1147d9a${o}><span data-v-a1147d9a${o}>üìÖ</span><span data-v-a1147d9a${o}>Pr√≥xima sesi√≥n agendada</span></div><div class="text-base font-bold text-cafe mb-3" data-v-a1147d9a${o}>${s.ssrInterpolate(formatearFechaCompleta(a.unref(E).fecha_cita,a.unref(E).hora_inicio))}</div><div class="flex items-center gap-2 flex-wrap" data-v-a1147d9a${o}><span class="text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full font-medium flex items-center gap-1" data-v-a1147d9a${o}>${s.ssrInterpolate(obtenerIconoModalidad(a.unref(E).modalidad))} ${s.ssrInterpolate(a.unref(E).modalidad)}</span><span class="${s.ssrRenderClass([{"text-green-600 border-green-300":"confirmada"===a.unref(E).estado,"text-yellow-600 border-yellow-300":"pendiente"===a.unref(E).estado,"text-blue-600 border-blue-300":"programada"===a.unref(E).estado},"text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full capitalize font-medium"])}" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(E).estado)}</span></div>`),a.unref(E).notas?t(`<div class="mt-3 pt-3 border-t border-purple-600/20" data-v-a1147d9a${o}><div class="text-xs text-cafe/70 mb-1" data-v-a1147d9a${o}>Notas:</div><div class="text-xs text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(a.unref(E).notas)}</div></div>`):t("\x3c!----\x3e"),t("</div>")):t(`<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg" data-v-a1147d9a${o}><div class="text-center" data-v-a1147d9a${o}><span class="text-3xl mb-2 block" data-v-a1147d9a${o}>‚è∞</span><div class="text-sm font-medium text-yellow-800 mb-1" data-v-a1147d9a${o}>No hay sesi√≥n agendada</div><div class="text-xs text-yellow-700" data-v-a1147d9a${o}>Recuerda agendar la pr√≥xima sesi√≥n</div><button class="mt-3 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-xs font-medium" data-v-a1147d9a${o}> Agendar ahora </button></div></div>`),t(`<div class="p-3 bg-base-bg rounded-lg" data-v-a1147d9a${o}><div class="text-xs text-cafe/60 mb-1" data-v-a1147d9a${o}>En proceso desde</div><div class="text-sm font-medium text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(calcularTiempoProceso(a.unref(g).created_at))}</div></div></div>`)}),_:1},d)),r('</div><div class="mb-6" data-v-a1147d9a><div class="border-b border-gray-200" data-v-a1147d9a><nav class="-mb-px flex space-x-8 overflow-x-auto" data-v-a1147d9a>\x3c!--[--\x3e'),s.ssrRenderList(a.unref(S),e=>{r(`<button class="${s.ssrRenderClass([a.unref(V)===e.id?"border-purple-600 text-purple-600":"border-transparent text-cafe/60 hover:text-cafe hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"])}" data-v-a1147d9a><span class="mr-2" data-v-a1147d9a>${s.ssrInterpolate(e.icono)}</span><span data-v-a1147d9a>${s.ssrInterpolate(e.nombre)}</span>`),e.badge?r(`<span class="ml-2 px-2 py-0.5 text-xs rounded-full bg-purple-600 text-white" data-v-a1147d9a>${s.ssrInterpolate(e.badge)}</span>`):r("\x3c!----\x3e"),r("</button>")}),r('\x3c!--]--\x3e</nav></div></div><div class="space-y-6" data-v-a1147d9a>'),"proximas"===a.unref(V)?(r("<div data-v-a1147d9a>"),r(s.ssrRenderComponent(c,null,{default:a.withCtx((e,t,r,o)=>{if(!t)return[a.createVNode("div",{class:"flex items-center justify-between mb-4"},[a.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe"},"Pr√≥ximas Sesiones Agendadas"),a.createVNode("button",{onClick:agendarSesion,class:"text-sm text-purple-600 hover:text-cafe transition-colors"}," + Nueva sesi√≥n ")]),a.unref(D).length>0?(a.openBlock(),a.createBlock("div",{key:0,class:"space-y-3"},[(a.openBlock(!0),a.createBlock(a.Fragment,null,a.renderList(a.unref(D),e=>(a.openBlock(),a.createBlock("div",{key:e.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[a.createVNode("div",{class:"flex items-start justify-between gap-4"},[a.createVNode("div",{class:"flex-1"},[a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:"text-lg font-semibold text-cafe"},a.toDisplayString(formatearFecha(e.fecha_cita)),1),a.createVNode("span",{class:"text-base font-medium text-purple-600"},a.toDisplayString(e.hora_inicio)+" - "+a.toDisplayString(e.hora_fin),1)]),a.createVNode("div",{class:"flex flex-wrap items-center gap-2 mb-2"},[a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},a.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+a.toDisplayString(e.modalidad),3),a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full capitalize",obtenerEstiloEstado(e.estado)]},a.toDisplayString(e.estado),3)]),e.observaciones?(a.openBlock(),a.createBlock("p",{key:0,class:"text-sm text-cafe/60 mt-2"},a.toDisplayString(e.observaciones),1)):a.createCommentVNode("",!0)]),a.createVNode("button",{onClick:a=>verDetallesCita(e.id),class:"px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors"}," Ver detalles ",8,["onClick"])])]))),128))])):(a.openBlock(),a.createBlock("div",{key:1,class:"text-center py-12"},[a.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"üìÖ"),a.createVNode("p",{class:"text-cafe/60 mb-4"},"No hay sesiones pr√≥ximas agendadas"),a.createVNode("button",{onClick:agendarSesion,class:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors"}," Agendar primera sesi√≥n ")]))];t(`<div class="flex items-center justify-between mb-4" data-v-a1147d9a${o}><h3 class="text-lg font-serif font-semibold text-cafe" data-v-a1147d9a${o}>Pr√≥ximas Sesiones Agendadas</h3><button class="text-sm text-purple-600 hover:text-cafe transition-colors" data-v-a1147d9a${o}> + Nueva sesi√≥n </button></div>`),a.unref(D).length>0?(t(`<div class="space-y-3" data-v-a1147d9a${o}>\x3c!--[--\x3e`),s.ssrRenderList(a.unref(D),e=>{t(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-a1147d9a${o}><div class="flex items-start justify-between gap-4" data-v-a1147d9a${o}><div class="flex-1" data-v-a1147d9a${o}><div class="flex items-center gap-2 mb-2" data-v-a1147d9a${o}><span class="text-lg font-semibold text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-base font-medium text-purple-600" data-v-a1147d9a${o}>${s.ssrInterpolate(e.hora_inicio)} - ${s.ssrInterpolate(e.hora_fin)}</span></div><div class="flex flex-wrap items-center gap-2 mb-2" data-v-a1147d9a${o}><span class="${s.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-a1147d9a${o}>${s.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${s.ssrInterpolate(e.modalidad)}</span><span class="${s.ssrRenderClass([obtenerEstiloEstado(e.estado),"px-2 py-0.5 text-xs rounded-full capitalize"])}" data-v-a1147d9a${o}>${s.ssrInterpolate(e.estado)}</span></div>`),e.observaciones?t(`<p class="text-sm text-cafe/60 mt-2" data-v-a1147d9a${o}>${s.ssrInterpolate(e.observaciones)}</p>`):t("\x3c!----\x3e"),t(`</div><button class="px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors" data-v-a1147d9a${o}> Ver detalles </button></div></div>`)}),t("\x3c!--]--\x3e</div>")):t(`<div class="text-center py-12" data-v-a1147d9a${o}><span class="text-6xl mb-3 block opacity-40" data-v-a1147d9a${o}>üìÖ</span><p class="text-cafe/60 mb-4" data-v-a1147d9a${o}>No hay sesiones pr√≥ximas agendadas</p><button class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors" data-v-a1147d9a${o}> Agendar primera sesi√≥n </button></div>`)}),_:1},d)),r("</div>")):r("\x3c!----\x3e"),"completadas"===a.unref(V)?(r("<div data-v-a1147d9a>"),r(s.ssrRenderComponent(c,null,{default:a.withCtx((e,t,r,o)=>{if(!t)return[a.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Historial de Sesiones Completadas"),a.unref(I).length>0?(a.openBlock(),a.createBlock("div",{key:0,class:"space-y-3"},[(a.openBlock(!0),a.createBlock(a.Fragment,null,a.renderList(a.unref(I),e=>(a.openBlock(),a.createBlock("div",{key:e.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[a.createVNode("div",{class:"flex items-start justify-between gap-4"},[a.createVNode("div",{class:"flex-1"},[a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:"text-base font-semibold text-cafe"},a.toDisplayString(formatearFecha(e.fecha_cita)),1),a.createVNode("span",{class:"text-sm text-cafe/60"},a.toDisplayString(e.hora_inicio)+" - "+a.toDisplayString(e.hora_fin),1),a.createVNode("span",{class:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700"}," ‚úì Realizada ")]),a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},a.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+a.toDisplayString(e.modalidad),3)]),e.notas_terapeuta?(a.openBlock(),a.createBlock("p",{key:0,class:"text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100"},[a.createVNode("strong",{class:"text-cafe"},"Notas:"),a.createTextVNode(" "+a.toDisplayString(e.notas_terapeuta),1)])):e.observaciones?(a.openBlock(),a.createBlock("p",{key:1,class:"text-sm text-cafe/60 mt-2"},a.toDisplayString(e.observaciones),1)):a.createCommentVNode("",!0)])])]))),128))])):(a.openBlock(),a.createBlock("div",{key:1,class:"text-center py-12"},[a.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"üìù"),a.createVNode("p",{class:"text-cafe/60"},"A√∫n no hay sesiones completadas")]))];t(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-a1147d9a${o}>Historial de Sesiones Completadas</h3>`),a.unref(I).length>0?(t(`<div class="space-y-3" data-v-a1147d9a${o}>\x3c!--[--\x3e`),s.ssrRenderList(a.unref(I),e=>{t(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-a1147d9a${o}><div class="flex items-start justify-between gap-4" data-v-a1147d9a${o}><div class="flex-1" data-v-a1147d9a${o}><div class="flex items-center gap-2 mb-2" data-v-a1147d9a${o}><span class="text-base font-semibold text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-sm text-cafe/60" data-v-a1147d9a${o}>${s.ssrInterpolate(e.hora_inicio)} - ${s.ssrInterpolate(e.hora_fin)}</span><span class="px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700" data-v-a1147d9a${o}> ‚úì Realizada </span></div><div class="flex items-center gap-2 mb-2" data-v-a1147d9a${o}><span class="${s.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-a1147d9a${o}>${s.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${s.ssrInterpolate(e.modalidad)}</span></div>`),e.notas_terapeuta?t(`<p class="text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100" data-v-a1147d9a${o}><strong class="text-cafe" data-v-a1147d9a${o}>Notas:</strong> ${s.ssrInterpolate(e.notas_terapeuta)}</p>`):e.observaciones?t(`<p class="text-sm text-cafe/60 mt-2" data-v-a1147d9a${o}>${s.ssrInterpolate(e.observaciones)}</p>`):t("\x3c!----\x3e"),t("</div></div></div>")}),t("\x3c!--]--\x3e</div>")):t(`<div class="text-center py-12" data-v-a1147d9a${o}><span class="text-6xl mb-3 block opacity-40" data-v-a1147d9a${o}>üìù</span><p class="text-cafe/60" data-v-a1147d9a${o}>A√∫n no hay sesiones completadas</p></div>`)}),_:1},d)),r("</div>")):r("\x3c!----\x3e"),"pendientes"===a.unref(V)?(r("<div data-v-a1147d9a>"),r(s.ssrRenderComponent(c,null,{default:a.withCtx((e,t,r,o)=>{if(!t)return[a.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Sesiones Pendientes de Confirmaci√≥n"),a.unref(B).length>0?(a.openBlock(),a.createBlock("div",{key:0,class:"space-y-3"},[(a.openBlock(!0),a.createBlock(a.Fragment,null,a.renderList(a.unref(B),e=>(a.openBlock(),a.createBlock("div",{key:e.id,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[a.createVNode("div",{class:"flex items-start justify-between gap-4"},[a.createVNode("div",{class:"flex-1"},[a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:"text-lg"},"‚è≥"),a.createVNode("span",{class:"text-base font-semibold text-cafe"},a.toDisplayString(formatearFecha(e.fecha_cita)),1),a.createVNode("span",{class:"text-base font-medium text-purple-600"},a.toDisplayString(e.hora_inicio)+" - "+a.toDisplayString(e.hora_fin),1)]),a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},a.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+a.toDisplayString(e.modalidad),3),a.createVNode("span",{class:"px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700"}," Pendiente de confirmar ")]),e.observaciones?(a.openBlock(),a.createBlock("p",{key:0,class:"text-sm text-cafe/60 mt-2"},a.toDisplayString(e.observaciones),1)):a.createCommentVNode("",!0)]),a.createVNode("div",{class:"flex gap-2"},[a.createVNode("button",{onClick:a=>(async e=>{try{const{data:a,error:t}=await i.rpc("confirmar_cita_y_descontar_bono",{p_cita_id:e});if(t)throw t;if(!a.success)return console.error("Error en la confirmaci√≥n:",a.error),void alert(a.error||"Error al confirmar la cita");let s=`Cita confirmada con ${a.paciente_nombre||"paciente"}`;a.bono_id&&(s+=`\nSesiones restantes en bono: ${a.sesiones_restantes}`,a.bono_agotado?s+="\n‚ö†Ô∏è BONO AGOTADO":a.sesiones_restantes<=2&&(s+="\n‚ö†Ô∏è Pocas sesiones restantes")),alert(s),await cargarDatosPaciente()}catch(e){console.error("Error al confirmar cita:",e),alert("Error al confirmar la cita: "+e.message)}})(e.id),class:"px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," ‚úì Confirmar ",8,["onClick"]),a.createVNode("button",{onClick:a=>verDetallesCita(e.id),class:"px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors"}," Ver ",8,["onClick"])])])]))),128))])):(a.openBlock(),a.createBlock("div",{key:1,class:"text-center py-12"},[a.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"‚úÖ"),a.createVNode("p",{class:"text-cafe/60"},"No hay sesiones pendientes de confirmaci√≥n")]))];t(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-a1147d9a${o}>Sesiones Pendientes de Confirmaci√≥n</h3>`),a.unref(B).length>0?(t(`<div class="space-y-3" data-v-a1147d9a${o}>\x3c!--[--\x3e`),s.ssrRenderList(a.unref(B),e=>{t(`<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg" data-v-a1147d9a${o}><div class="flex items-start justify-between gap-4" data-v-a1147d9a${o}><div class="flex-1" data-v-a1147d9a${o}><div class="flex items-center gap-2 mb-2" data-v-a1147d9a${o}><span class="text-lg" data-v-a1147d9a${o}>‚è≥</span><span class="text-base font-semibold text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-base font-medium text-purple-600" data-v-a1147d9a${o}>${s.ssrInterpolate(e.hora_inicio)} - ${s.ssrInterpolate(e.hora_fin)}</span></div><div class="flex items-center gap-2 mb-2" data-v-a1147d9a${o}><span class="${s.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-a1147d9a${o}>${s.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${s.ssrInterpolate(e.modalidad)}</span><span class="px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700" data-v-a1147d9a${o}> Pendiente de confirmar </span></div>`),e.observaciones?t(`<p class="text-sm text-cafe/60 mt-2" data-v-a1147d9a${o}>${s.ssrInterpolate(e.observaciones)}</p>`):t("\x3c!----\x3e"),t(`</div><div class="flex gap-2" data-v-a1147d9a${o}><button class="px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors" data-v-a1147d9a${o}> ‚úì Confirmar </button><button class="px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors" data-v-a1147d9a${o}> Ver </button></div></div></div>`)}),t("\x3c!--]--\x3e</div>")):t(`<div class="text-center py-12" data-v-a1147d9a${o}><span class="text-6xl mb-3 block opacity-40" data-v-a1147d9a${o}>‚úÖ</span><p class="text-cafe/60" data-v-a1147d9a${o}>No hay sesiones pendientes de confirmaci√≥n</p></div>`)}),_:1},d)),r("</div>")):r("\x3c!----\x3e"),"anteriores"===a.unref(V)?(r("<div data-v-a1147d9a>"),r(s.ssrRenderComponent(c,null,{default:a.withCtx((e,t,r,o)=>{if(!t)return[a.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"}," Historial Completo de Sesiones "),a.unref(j).length>0?(a.openBlock(),a.createBlock("div",{key:0,class:"space-y-3"},[(a.openBlock(!0),a.createBlock(a.Fragment,null,a.renderList(a.unref(j),e=>(a.openBlock(),a.createBlock("div",{key:e.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[a.createVNode("div",{class:"flex items-start justify-between gap-4"},[a.createVNode("div",{class:"flex-1"},[a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:"text-base font-semibold text-cafe"},a.toDisplayString(formatearFecha(e.fecha_cita)),1),a.createVNode("span",{class:"text-sm text-cafe/60"},a.toDisplayString(e.hora_inicio)+" - "+a.toDisplayString(e.hora_fin),1)]),a.createVNode("div",{class:"flex flex-wrap items-center gap-2"},[a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},a.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+a.toDisplayString(e.modalidad),3),a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full capitalize",obtenerEstiloEstado(e.estado)]},a.toDisplayString(e.estado),3)])])])]))),128))])):(a.openBlock(),a.createBlock("div",{key:1,class:"text-center py-12"},[a.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"üìö"),a.createVNode("p",{class:"text-cafe/60"},"No hay sesiones registradas")]))];t(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-a1147d9a${o}> Historial Completo de Sesiones </h3>`),a.unref(j).length>0?(t(`<div class="space-y-3" data-v-a1147d9a${o}>\x3c!--[--\x3e`),s.ssrRenderList(a.unref(j),e=>{t(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-a1147d9a${o}><div class="flex items-start justify-between gap-4" data-v-a1147d9a${o}><div class="flex-1" data-v-a1147d9a${o}><div class="flex items-center gap-2 mb-2" data-v-a1147d9a${o}><span class="text-base font-semibold text-cafe" data-v-a1147d9a${o}>${s.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-sm text-cafe/60" data-v-a1147d9a${o}>${s.ssrInterpolate(e.hora_inicio)} - ${s.ssrInterpolate(e.hora_fin)}</span></div><div class="flex flex-wrap items-center gap-2" data-v-a1147d9a${o}><span class="${s.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-a1147d9a${o}>${s.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${s.ssrInterpolate(e.modalidad)}</span><span class="${s.ssrRenderClass([obtenerEstiloEstado(e.estado),"px-2 py-0.5 text-xs rounded-full capitalize"])}" data-v-a1147d9a${o}>${s.ssrInterpolate(e.estado)}</span></div></div></div></div>`)}),t("\x3c!--]--\x3e</div>")):t(`<div class="text-center py-12" data-v-a1147d9a${o}><span class="text-6xl mb-3 block opacity-40" data-v-a1147d9a${o}>üìö</span><p class="text-cafe/60" data-v-a1147d9a${o}>No hay sesiones registradas</p></div>`)}),_:1},d)),r("</div>")):r("\x3c!----\x3e"),r('</div><div class="mt-6" data-v-a1147d9a>'),r(s.ssrRenderComponent(c,null,{default:a.withCtx((e,t,r,o)=>{if(!t)return[a.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[a.createVNode("span",{class:"text-2xl"},"üìù"),a.createTextVNode(" Notas Cl√≠nicas Privadas ")]),a.createVNode(u,{"paciente-id":a.unref(m),contenido:a.unref(h),"ultima-actualizacion":a.unref(N)||void 0,onGuardar:guardarNotas},null,8,["paciente-id","contenido","ultima-actualizacion"])];t(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-a1147d9a${o}><span class="text-2xl" data-v-a1147d9a${o}>üìù</span> Notas Cl√≠nicas Privadas </h2>`),t(s.ssrRenderComponent(u,{"paciente-id":a.unref(m),contenido:a.unref(h),"ultima-actualizacion":a.unref(N)||void 0,onGuardar:guardarNotas},null,r,o))}),_:1},d)),r("</div></div>")):r("\x3c!----\x3e"),r(s.ssrRenderComponent(x,{mostrar:a.unref(w),"paciente-preseleccionado":a.unref(_),onCerrar:cerrarModalCita,onCitaCreada:onCitaCreada},null,d)),r(s.ssrRenderComponent(f,{"is-open":a.unref(k),"cita-id":a.unref(C),onClose:cerrarModalDetalles},null,d)),r("</div>")}}}),x=u.setup;u.setup=(e,t)=>{const s=a.useSSRContext();return(s.modules||(s.modules=new Set)).add("pages/terapeuta/pacientes/[id].vue"),x?x(e,t):void 0};const f=r(u,[["__scopeId","data-v-a1147d9a"]]);export{f as default};
//# sourceMappingURL=_id_-CIQV4Sev.mjs.map
