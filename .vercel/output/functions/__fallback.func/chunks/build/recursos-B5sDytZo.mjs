import{v as e,s as a,e as t}from"./server.mjs";import{u as s}from"./useSupabaseClient-DykwVqLQ.mjs";import{u as o}from"./useSupabase-DfFg84CY.mjs";import{_ as r}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../_/shared.cjs.prod.mjs";import"../virtual/_commonjsHelpers.mjs";import"node:stream";import"../_/index2.mjs";import"@supabase/supabase-js";import"@vercel/analytics/nuxt";const useTerapeuta=()=>{s(),t(),o();return{getPacientes:async()=>[],getRecursosRepositorio:async()=>[],compartirRecurso:async(e,a,t)=>({success:!1,error:"Not client side"}),getRecursosCompartidosPaciente:async e=>[],getEstadisticasRecursos:async()=>null,descompartirRecurso:async e=>({success:!1}),crearRecurso:async e=>({success:!1}),actualizarRecurso:async(e,a)=>({success:!1}),eliminarRecurso:async e=>({success:!1})}},c={__name:"ModalCompartirRecurso",__ssrInlineRender:!0,props:{modelValue:{type:Boolean,required:!0},recurso:{type:Object,default:null}},emits:["update:modelValue","compartido"],setup(t,{emit:s}){const o=t,{getPacientes:r}=useTerapeuta(),c=e.ref([]),l=e.ref(""),d=e.ref([]),i=e.ref(""),n=e.ref(!1),u=e.ref(!1),v=e.ref(""),p=e.computed(()=>{if(!l.value)return c.value;const e=l.value.toLowerCase();return c.value.filter(a=>(a.nombre||"").toLowerCase().includes(e)||(a.email||"").toLowerCase().includes(e)||(a.area_de_acompanamiento||"").toLowerCase().includes(e))});e.watch(()=>o.modelValue,async e=>{e?await cargarPacientes():resetear()});const cargarPacientes=async()=>{n.value=!0,v.value="";try{const e=await r();c.value=e||[]}catch(e){console.error("Error al cargar pacientes:",e),v.value="Error al cargar la lista de pacientes"}finally{n.value=!1}},resetear=()=>{d.value=[],i.value="",l.value="",v.value=""};return(e,s,o,r)=>{a.ssrRenderTeleport(s,e=>{t.modelValue?(e(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm" data-v-c902ca26><div class="bg-[#F2F2F2] rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden" data-v-c902ca26><div class="bg-gradient-to-r from-[#5550F2] to-[#E2E8F0] px-6 py-5" data-v-c902ca26><div class="flex items-center justify-between" data-v-c902ca26><div data-v-c902ca26><h2 class="text-2xl font-serif text-white" data-v-c902ca26>Compartir Recurso</h2><p class="text-sm text-white/90 mt-1" data-v-c902ca26>${a.ssrInterpolate(t.recurso?.titulo)}</p></div><button class="text-white hover:bg-white/20 rounded-lg p-2 transition" data-v-c902ca26><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c902ca26><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-c902ca26></path></svg></button></div></div><div class="p-6 overflow-y-auto max-h-[calc(90vh-200px)]" data-v-c902ca26><div class="space-y-5" data-v-c902ca26><div data-v-c902ca26><label class="block text-sm font-sans font-semibold text-[#2D3748] mb-2" data-v-c902ca26> Buscar paciente </label><div class="relative" data-v-c902ca26><input${a.ssrRenderAttr("value",l.value)} type="text" placeholder="Buscar por nombre..." class="w-full px-4 py-3 pl-10 bg-white border border-[#E2E8F0]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5550F2] text-[#2D3748]" data-v-c902ca26><svg class="w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-[#2D3748]/40" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c902ca26><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-c902ca26></path></svg></div></div><div data-v-c902ca26><label class="block text-sm font-sans font-semibold text-[#2D3748] mb-2" data-v-c902ca26> Seleccionar pacientes * </label>`),n.value?e('<div class="text-center py-8" data-v-c902ca26><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-[#5550F2] mx-auto" data-v-c902ca26></div><p class="text-sm text-[#2D3748]/60 mt-2" data-v-c902ca26>Cargando pacientes...</p></div>'):0===p.value.length?e('<div class="text-center py-8" data-v-c902ca26><p class="text-sm text-[#2D3748]/60" data-v-c902ca26>No se encontraron pacientes</p></div>'):(e('<div class="bg-white border border-[#E2E8F0]/50 rounded-xl max-h-60 overflow-y-auto" data-v-c902ca26>\x3c!--[--\x3e'),a.ssrRenderList(p.value,t=>{e(`<label class="flex items-center gap-3 p-4 hover:bg-[#F2F2F2] cursor-pointer border-b border-[#E2E8F0]/30 last:border-0 transition" data-v-c902ca26><input type="checkbox"${a.ssrRenderAttr("value",t.id)}${a.ssrIncludeBooleanAttr(Array.isArray(d.value)?a.ssrLooseContain(d.value,t.id):d.value)?" checked":""} class="w-5 h-5 text-[#5550F2] rounded focus:ring-2 focus:ring-[#5550F2]" data-v-c902ca26><div class="flex-1" data-v-c902ca26><p class="font-medium text-[#2D3748]" data-v-c902ca26>${a.ssrInterpolate(t.nombre)}</p>`),t.email?e(`<p class="text-sm text-[#2D3748]/60" data-v-c902ca26>${a.ssrInterpolate(t.email)}</p>`):e("\x3c!----\x3e"),e("</div></label>")}),e("\x3c!--]--\x3e</div>")),d.value.length>0?e(`<p class="text-sm text-[#2D3748]/70 mt-2" data-v-c902ca26>${a.ssrInterpolate(d.value.length)} paciente(s) seleccionado(s) </p>`):e("\x3c!----\x3e"),e(`</div><div data-v-c902ca26><label class="block text-sm font-sans font-semibold text-[#2D3748] mb-2" data-v-c902ca26> Mensaje opcional </label><textarea rows="3" placeholder="AÃ±ade un mensaje personalizado para el paciente..." class="w-full px-4 py-3 bg-white border border-[#E2E8F0]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5550F2] text-[#2D3748] resize-none" data-v-c902ca26>${a.ssrInterpolate(i.value)}</textarea><p class="text-xs text-[#2D3748]/60 mt-1" data-v-c902ca26> Este mensaje se incluirÃ¡ en la notificaciÃ³n que recibirÃ¡ el paciente </p></div>`),v.value?e(`<div class="bg-red-50 border border-red-200 rounded-xl p-4" data-v-c902ca26><div class="flex items-start gap-3" data-v-c902ca26><svg class="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20" data-v-c902ca26><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" data-v-c902ca26></path></svg><p class="text-sm text-red-800" data-v-c902ca26>${a.ssrInterpolate(v.value)}</p></div></div>`):e("\x3c!----\x3e"),u.value?e('<div class="bg-[#5550F2]/10 border border-[#5550F2]/30 rounded-xl p-4" data-v-c902ca26><div class="flex items-center gap-3" data-v-c902ca26><div class="animate-spin rounded-full h-5 w-5 border-b-2 border-[#5550F2]" data-v-c902ca26></div><span class="text-sm text-[#2D3748]" data-v-c902ca26>Compartiendo recurso...</span></div></div>'):e("\x3c!----\x3e"),e(`</div></div><div class="bg-white border-t border-[#E2E8F0]/30 px-6 py-4 flex items-center justify-between" data-v-c902ca26><p class="text-sm text-[#2D3748]/70" data-v-c902ca26> Los pacientes recibirÃ¡n una notificaciÃ³n automÃ¡tica </p><div class="flex items-center gap-3" data-v-c902ca26><button type="button"${a.ssrIncludeBooleanAttr(u.value)?" disabled":""} class="px-6 py-2.5 text-[#2D3748] font-sans rounded-xl hover:bg-[#F2F2F2] transition disabled:opacity-50" data-v-c902ca26> Cancelar </button><button${a.ssrIncludeBooleanAttr(u.value||0===d.value.length)?" disabled":""} class="px-6 py-2.5 bg-[#5550F2] text-white font-sans font-semibold rounded-xl hover:bg-[#5550F2]/90 transition disabled:opacity-50 disabled:cursor-not-allowed" data-v-c902ca26>${a.ssrInterpolate(u.value?"Compartiendo...":"Enviar Recurso")}</button></div></div></div></div>`)):e("\x3c!----\x3e")},"body",!1,o)}}},l=c.setup;c.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/ModalCompartirRecurso.vue"),l?l(a,t):void 0};const d=r(c,[["__scopeId","data-v-c902ca26"]]),i={__name:"ModalRecurso",__ssrInlineRender:!0,props:{modelValue:{type:Boolean,required:!0},recurso:{type:Object,default:null}},emits:["update:modelValue","guardado"],setup(t,{emit:s}){const o=t;useTerapeuta();const r=e.ref({titulo:"",descripcion:"",tipo:"",categoria:"",url:"",icono:"ğŸ“„",tags:[]}),c=e.ref(""),l=e.ref(!1),d=e.ref(""),i=["ğŸ“‹","ğŸµ","ğŸ¥","ğŸ§˜","ğŸ“–","ğŸ“„","ğŸŒŸ","ğŸ’¡","ğŸ¯","âœ¨"],n=e.computed(()=>!!o.recurso),u=e.computed(()=>""!==r.value.titulo.trim()&&""!==r.value.descripcion.trim()&&""!==r.value.tipo&&""!==r.value.url.trim());e.watch(c,e=>{if(e.includes(",")){const a=e.split(",").map(e=>e.trim()).filter(e=>""!==e&&!r.value.tags.includes(e));r.value.tags.push(...a),c.value=""}}),e.watch(()=>o.modelValue,e=>{e&&(o.recurso?r.value={titulo:o.recurso.titulo||"",descripcion:o.recurso.descripcion||"",tipo:o.recurso.tipo||"",categoria:o.recurso.categoria||"",url:o.recurso.url||"",icono:o.recurso.icono||"ğŸ“„",tags:o.recurso.tags?[...o.recurso.tags]:[]}:resetear())});const resetear=()=>{r.value={titulo:"",descripcion:"",tipo:"",categoria:"",url:"",icono:"ğŸ“„",tags:[]},c.value="",d.value=""};return(e,s,o,v)=>{a.ssrRenderTeleport(s,e=>{t.modelValue?(e(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm" data-v-e31be23c><div class="bg-[#F2F2F2] rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden" data-v-e31be23c><div class="bg-gradient-to-r from-[#5550F2] to-[#E2E8F0] px-6 py-5" data-v-e31be23c><div class="flex items-center justify-between" data-v-e31be23c><div data-v-e31be23c><h2 class="text-2xl font-serif text-white" data-v-e31be23c>${a.ssrInterpolate(n.value?"âœï¸ Editar Recurso":"â• Nuevo Recurso")}</h2><p class="text-sm text-white/90 mt-1" data-v-e31be23c>${a.ssrInterpolate(n.value?"Modifica la informaciÃ³n del recurso":"AÃ±ade un nuevo recurso al repositorio")}</p></div><button class="text-white hover:bg-white/20 rounded-lg p-2 transition" data-v-e31be23c><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e31be23c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-e31be23c></path></svg></button></div></div><form class="p-6 overflow-y-auto max-h-[calc(90vh-200px)]" data-v-e31be23c><div class="space-y-5" data-v-e31be23c><div data-v-e31be23c><label class="block text-sm font-sans font-semibold text-[#2D3748] mb-2" data-v-e31be23c> TÃ­tulo del recurso * </label><input${a.ssrRenderAttr("value",r.value.titulo)} type="text" required placeholder="Ej: GuÃ­a de respiraciÃ³n consciente" class="w-full px-4 py-3 bg-white border border-[#E2E8F0]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5550F2] text-[#2D3748]" data-v-e31be23c></div><div data-v-e31be23c><label class="block text-sm font-sans font-semibold text-[#2D3748] mb-2" data-v-e31be23c> DescripciÃ³n * </label><textarea rows="3" required placeholder="Describe brevemente el contenido del recurso..." class="w-full px-4 py-3 bg-white border border-[#E2E8F0]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5550F2] text-[#2D3748] resize-none" data-v-e31be23c>${a.ssrInterpolate(r.value.descripcion)}</textarea></div><div class="grid grid-cols-2 gap-4" data-v-e31be23c><div data-v-e31be23c><label class="block text-sm font-sans font-semibold text-[#2D3748] mb-2" data-v-e31be23c> Tipo * </label><select required class="w-full px-4 py-3 bg-white border border-[#E2E8F0]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5550F2] text-[#2D3748]" data-v-e31be23c><option value="" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.tipo)?a.ssrLooseContain(r.value.tipo,""):a.ssrLooseEqual(r.value.tipo,""))?" selected":""}>Seleccionar...</option><option value="GuÃ­a" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.tipo)?a.ssrLooseContain(r.value.tipo,"GuÃ­a"):a.ssrLooseEqual(r.value.tipo,"GuÃ­a"))?" selected":""}>ğŸ“‹ GuÃ­a</option><option value="Audio" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.tipo)?a.ssrLooseContain(r.value.tipo,"Audio"):a.ssrLooseEqual(r.value.tipo,"Audio"))?" selected":""}>ğŸµ Audio</option><option value="Video" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.tipo)?a.ssrLooseContain(r.value.tipo,"Video"):a.ssrLooseEqual(r.value.tipo,"Video"))?" selected":""}>ğŸ¥ Video</option><option value="Ejercicio" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.tipo)?a.ssrLooseContain(r.value.tipo,"Ejercicio"):a.ssrLooseEqual(r.value.tipo,"Ejercicio"))?" selected":""}>ğŸ§˜ Ejercicio</option><option value="Lectura" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.tipo)?a.ssrLooseContain(r.value.tipo,"Lectura"):a.ssrLooseEqual(r.value.tipo,"Lectura"))?" selected":""}>ğŸ“– Lectura</option><option value="PDF" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.tipo)?a.ssrLooseContain(r.value.tipo,"PDF"):a.ssrLooseEqual(r.value.tipo,"PDF"))?" selected":""}>ğŸ“„ PDF</option></select></div><div data-v-e31be23c><label class="block text-sm font-sans font-semibold text-[#2D3748] mb-2" data-v-e31be23c> CategorÃ­a </label><select class="w-full px-4 py-3 bg-white border border-[#E2E8F0]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5550F2] text-[#2D3748]" data-v-e31be23c><option value="" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.categoria)?a.ssrLooseContain(r.value.categoria,""):a.ssrLooseEqual(r.value.categoria,""))?" selected":""}>Sin categorÃ­a</option><option value="Ansiedad" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.categoria)?a.ssrLooseContain(r.value.categoria,"Ansiedad"):a.ssrLooseEqual(r.value.categoria,"Ansiedad"))?" selected":""}>Ansiedad</option><option value="Mindfulness" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.categoria)?a.ssrLooseContain(r.value.categoria,"Mindfulness"):a.ssrLooseEqual(r.value.categoria,"Mindfulness"))?" selected":""}>Mindfulness</option><option value="RelajaciÃ³n" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.categoria)?a.ssrLooseContain(r.value.categoria,"RelajaciÃ³n"):a.ssrLooseEqual(r.value.categoria,"RelajaciÃ³n"))?" selected":""}>RelajaciÃ³n</option><option value="Autoestima" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.categoria)?a.ssrLooseContain(r.value.categoria,"Autoestima"):a.ssrLooseEqual(r.value.categoria,"Autoestima"))?" selected":""}>Autoestima</option><option value="TCC" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.categoria)?a.ssrLooseContain(r.value.categoria,"TCC"):a.ssrLooseEqual(r.value.categoria,"TCC"))?" selected":""}>TCC</option><option value="EstrÃ©s" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.categoria)?a.ssrLooseContain(r.value.categoria,"EstrÃ©s"):a.ssrLooseEqual(r.value.categoria,"EstrÃ©s"))?" selected":""}>EstrÃ©s</option><option value="DepresiÃ³n" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.categoria)?a.ssrLooseContain(r.value.categoria,"DepresiÃ³n"):a.ssrLooseEqual(r.value.categoria,"DepresiÃ³n"))?" selected":""}>DepresiÃ³n</option><option value="Relaciones" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.categoria)?a.ssrLooseContain(r.value.categoria,"Relaciones"):a.ssrLooseEqual(r.value.categoria,"Relaciones"))?" selected":""}>Relaciones</option><option value="Otro" data-v-e31be23c${a.ssrIncludeBooleanAttr(Array.isArray(r.value.categoria)?a.ssrLooseContain(r.value.categoria,"Otro"):a.ssrLooseEqual(r.value.categoria,"Otro"))?" selected":""}>Otro</option></select></div></div><div data-v-e31be23c><label class="block text-sm font-sans font-semibold text-[#2D3748] mb-2" data-v-e31be23c> URL del recurso * </label><input${a.ssrRenderAttr("value",r.value.url)} type="url" required placeholder="https://..." class="w-full px-4 py-3 bg-white border border-[#E2E8F0]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5550F2] text-[#2D3748]" data-v-e31be23c><p class="text-xs text-[#2D3748]/60 mt-1" data-v-e31be23c> Enlace directo al recurso (YouTube, PDF, artÃ­culo web, etc.) </p></div><div data-v-e31be23c><label class="block text-sm font-sans font-semibold text-[#2D3748] mb-2" data-v-e31be23c> Icono (emoji) </label><div class="flex gap-2" data-v-e31be23c><input${a.ssrRenderAttr("value",r.value.icono)} type="text" maxlength="2" placeholder="ğŸ“š" class="w-20 px-4 py-3 bg-white border border-[#E2E8F0]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5550F2] text-center text-2xl" data-v-e31be23c><div class="flex flex-wrap gap-2 flex-1" data-v-e31be23c>\x3c!--[--\x3e`),a.ssrRenderList(i,t=>{e(`<button type="button" class="px-3 py-2 text-2xl hover:bg-[#E2E8F0]/30 rounded-lg transition" data-v-e31be23c>${a.ssrInterpolate(t)}</button>`)}),e(`\x3c!--]--\x3e</div></div></div><div data-v-e31be23c><label class="block text-sm font-sans font-semibold text-[#2D3748] mb-2" data-v-e31be23c> Etiquetas </label><input${a.ssrRenderAttr("value",c.value)} type="text" placeholder="respiraciÃ³n, mindfulness, ansiedad (separadas por comas)" class="w-full px-4 py-3 bg-white border border-[#E2E8F0]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5550F2] text-[#2D3748]" data-v-e31be23c><p class="text-xs text-[#2D3748]/60 mt-1" data-v-e31be23c> Separa las etiquetas con comas </p>`),r.value.tags.length>0?(e('<div class="flex flex-wrap gap-2 mt-2" data-v-e31be23c>\x3c!--[--\x3e'),a.ssrRenderList(r.value.tags,(t,s)=>{e(`<span class="px-3 py-1 bg-[#5550F2]/20 text-[#2D3748] rounded-full text-sm flex items-center gap-2" data-v-e31be23c> #${a.ssrInterpolate(t)} <button type="button" class="text-[#2D3748]/50 hover:text-[#2D3748]" data-v-e31be23c> Ã— </button></span>`)}),e("\x3c!--]--\x3e</div>")):e("\x3c!----\x3e"),e("</div>"),d.value?e(`<div class="bg-red-50 border border-red-200 rounded-xl p-4" data-v-e31be23c><div class="flex items-start gap-3" data-v-e31be23c><svg class="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20" data-v-e31be23c><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" data-v-e31be23c></path></svg><p class="text-sm text-red-800" data-v-e31be23c>${a.ssrInterpolate(d.value)}</p></div></div>`):e("\x3c!----\x3e"),e(`</div></form><div class="bg-white border-t border-[#E2E8F0]/30 px-6 py-4 flex items-center justify-end gap-3" data-v-e31be23c><button type="button"${a.ssrIncludeBooleanAttr(l.value)?" disabled":""} class="px-6 py-2.5 text-[#2D3748] font-sans rounded-xl hover:bg-[#F2F2F2] transition disabled:opacity-50" data-v-e31be23c> Cancelar </button><button${a.ssrIncludeBooleanAttr(l.value||!u.value)?" disabled":""} class="px-6 py-2.5 bg-[#5550F2] text-white font-sans font-semibold rounded-xl hover:bg-[#5550F2]/90 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2" data-v-e31be23c>`),l.value?e('<span class="inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin" data-v-e31be23c></span>'):e("\x3c!----\x3e"),e(`<span data-v-e31be23c>${a.ssrInterpolate(l.value?"Guardando...":n.value?"Guardar Cambios":"Crear Recurso")}</span></button></div></div></div>`)):e("\x3c!----\x3e")},"body",!1,o)}}},n=i.setup;i.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/ModalRecurso.vue"),n?n(a,t):void 0};const u=r(i,[["__scopeId","data-v-e31be23c"]]),v={__name:"recursos",__ssrInlineRender:!0,setup(t){const{getEstadisticasRecursos:s}=useTerapeuta(),o=e.ref(""),r=e.ref([]),c=e.ref(!0),l=e.ref(null),i=e.ref(!1),n=e.ref(!1),v=e.ref(null),p=e.ref(!1),b=e.ref(null),x=e.ref(!1);e.ref(null);const f=e.ref(!1),m=e.ref(""),g=e.ref(""),h=e.computed(()=>{if(!o.value)return r.value;const e=o.value.toLowerCase();return r.value.filter(a=>a.titulo?.toLowerCase().includes(e)||a.descripcion?.toLowerCase().includes(e)||a.categoria?.toLowerCase().includes(e)||a.tipo?.toLowerCase().includes(e))}),cargarEstadisticas=async()=>{try{const e=await s();l.value=e||{total:2,vistos:1,pendientes:1,porcentajeVisto:50}}catch(e){console.error("Error cargando estadÃ­sticas:",e),l.value={total:0,vistos:0,pendientes:0,porcentajeVisto:0}}},handleCompartido=e=>{mostrarToastExito("Â¡Recurso compartido!",`Compartido con ${e.cantidad} paciente${e.cantidad>1?"s":""}`),cargarEstadisticas()},handleRecursoGuardado=e=>{if(b.value){const a=r.value.findIndex(a=>a.id===e.id);-1!==a&&(r.value[a]=e),mostrarToastExito("Â¡Recurso actualizado!","Los cambios se han guardado correctamente")}else r.value.unshift(e),mostrarToastExito("Â¡Recurso creado!","El nuevo recurso estÃ¡ listo para compartir");cargarEstadisticas()},mostrarToastExito=(e,a)=>{m.value=e,g.value=a,f.value=!0,setTimeout(()=>{f.value=!1},3e3)};return(t,s,r,y)=>{const A=d,w=u;s(`<div${a.ssrRenderAttrs(e.mergeProps({class:"min-h-screen bg-[#F9F7F3] py-8"},y))} data-v-ce5bceaf><div class="container mx-auto px-4 max-w-7xl" data-v-ce5bceaf>`),e.unref(i)?s('<div class="mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl" data-v-ce5bceaf><div class="flex items-start gap-3" data-v-ce5bceaf><span class="text-3xl" data-v-ce5bceaf>ğŸ­</span><div class="flex-1" data-v-ce5bceaf><h3 class="font-[&#39;Lora&#39;] text-lg font-semibold text-blue-900 mb-1" data-v-ce5bceaf> Modo DemostraciÃ³n - Recursos Precargados </h3><p class="text-sm text-blue-700 leading-relaxed" data-v-ce5bceaf> EstÃ¡s viendo <strong data-v-ce5bceaf>6 recursos de ejemplo</strong> listos para compartir con tus pacientes. Para usar el repositorio real, ejecuta la migraciÃ³n SQL en Supabase: <code class="px-2 py-0.5 bg-blue-100 rounded" data-v-ce5bceaf>supabase/migrations/20251019_recursos_compartidos.sql</code></p></div></div></div>'):s("\x3c!----\x3e"),s('<div class="mb-8 flex items-start justify-between" data-v-ce5bceaf><div data-v-ce5bceaf><h1 class="text-4xl font-[&#39;Lora&#39;] text-[#5D4A44] mb-2" data-v-ce5bceaf>ğŸ“š Recursos TerapÃ©uticos</h1><p class="text-[#5D4A44]/70" data-v-ce5bceaf>Biblioteca de materiales para compartir con tus pacientes</p></div><button class="px-6 py-3 bg-[#D8AFA0] text-white rounded-xl hover:bg-[#D8AFA0]/90 transition-colors flex items-center gap-2 whitespace-nowrap" data-v-ce5bceaf><span class="text-xl" data-v-ce5bceaf>â•</span><span class="font-[&#39;Lato&#39;] font-semibold" data-v-ce5bceaf>Nuevo Recurso</span></button></div>'),e.unref(l)?s(`<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6" data-v-ce5bceaf><div class="bg-white rounded-xl p-4 border border-[#EAD5D3]/30" data-v-ce5bceaf><div class="flex items-center gap-3" data-v-ce5bceaf><span class="text-3xl" data-v-ce5bceaf>ğŸ“¤</span><div data-v-ce5bceaf><p class="text-2xl font-[&#39;Lora&#39;] font-bold text-[#5D4A44]" data-v-ce5bceaf>${a.ssrInterpolate(e.unref(l).total)}</p><p class="text-sm text-[#5D4A44]/70" data-v-ce5bceaf>Recursos compartidos</p></div></div></div><div class="bg-white rounded-xl p-4 border border-[#EAD5D3]/30" data-v-ce5bceaf><div class="flex items-center gap-3" data-v-ce5bceaf><span class="text-3xl" data-v-ce5bceaf>ğŸ‘ï¸</span><div data-v-ce5bceaf><p class="text-2xl font-[&#39;Lora&#39;] font-bold text-[#5D4A44]" data-v-ce5bceaf>${a.ssrInterpolate(e.unref(l).vistos)}</p><p class="text-sm text-[#5D4A44]/70" data-v-ce5bceaf>Vistos por pacientes</p></div></div></div><div class="bg-white rounded-xl p-4 border border-[#EAD5D3]/30" data-v-ce5bceaf><div class="flex items-center gap-3" data-v-ce5bceaf><span class="text-3xl" data-v-ce5bceaf>â³</span><div data-v-ce5bceaf><p class="text-2xl font-[&#39;Lora&#39;] font-bold text-[#5D4A44]" data-v-ce5bceaf>${a.ssrInterpolate(e.unref(l).pendientes)}</p><p class="text-sm text-[#5D4A44]/70" data-v-ce5bceaf>Pendientes de ver</p></div></div></div></div>`):s("\x3c!----\x3e"),s(`<div class="bg-white rounded-xl p-6 mb-6 border border-[#EAD5D3]/30" data-v-ce5bceaf><input${a.ssrRenderAttr("value",e.unref(o))} type="text" placeholder="Buscar recursos por tÃ­tulo, descripciÃ³n o categorÃ­a..." class="w-full px-4 py-3 bg-[#F9F7F3] border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0]" data-v-ce5bceaf></div>`),e.unref(c)?s('<div class="text-center py-12" data-v-ce5bceaf><div class="animate-spin w-12 h-12 border-4 border-[#D8AFA0] border-t-transparent rounded-full mx-auto mb-4" data-v-ce5bceaf></div><p class="text-[#5D4A44]/60" data-v-ce5bceaf>Cargando recursos...</p></div>'):e.unref(h).length>0?(s('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" data-v-ce5bceaf>\x3c!--[--\x3e'),a.ssrRenderList(e.unref(h),e=>{s(`<div class="bg-white rounded-xl shadow-sm border border-[#EAD5D3]/30 p-6 hover:shadow-md transition-shadow" data-v-ce5bceaf><div class="flex justify-between mb-3" data-v-ce5bceaf><span class="text-2xl" data-v-ce5bceaf>${a.ssrInterpolate(e.icono)}</span><span class="text-xs px-3 py-1 rounded-full bg-[#EAD5D3]/50" data-v-ce5bceaf>${a.ssrInterpolate(e.tipo)}</span></div><h3 class="font-[&#39;Lora&#39;] text-lg text-[#5D4A44] mb-2" data-v-ce5bceaf>${a.ssrInterpolate(e.titulo)}</h3><p class="text-sm text-[#5D4A44]/70 mb-4 line-clamp-2" data-v-ce5bceaf>${a.ssrInterpolate(e.descripcion)}</p>`),e.categoria?s(`<div class="mb-4" data-v-ce5bceaf><span class="text-xs px-2 py-1 bg-[#D8AFA0]/20 text-[#5D4A44] rounded" data-v-ce5bceaf>${a.ssrInterpolate(e.categoria)}</span></div>`):s("\x3c!----\x3e"),s(`<div class="flex flex-col gap-2" data-v-ce5bceaf><div class="flex gap-2" data-v-ce5bceaf><a${a.ssrRenderAttr("href",e.url)} target="_blank" class="flex-1 text-center px-3 py-2 text-sm bg-[#F9F7F3] text-[#5D4A44] rounded-lg hover:bg-[#EAD5D3]/30 transition-colors" data-v-ce5bceaf> ğŸ‘ï¸ Ver </a><button class="flex-1 px-3 py-2 text-sm bg-[#D8AFA0] text-white rounded-lg hover:bg-[#D8AFA0]/90 transition-colors" data-v-ce5bceaf> ğŸ“¤ Compartir </button></div><div class="flex gap-2" data-v-ce5bceaf><button class="flex-1 px-3 py-2 text-sm bg-white border border-[#EAD5D3] text-[#5D4A44] rounded-lg hover:bg-[#F9F7F3] transition-colors" data-v-ce5bceaf> âœï¸ Editar </button>`),e.id?.startsWith("demo")?s("\x3c!----\x3e"):s('<button class="flex-1 px-3 py-2 text-sm bg-white border border-red-200 text-red-600 rounded-lg hover:bg-red-50 transition-colors" data-v-ce5bceaf> ğŸ—‘ï¸ Eliminar </button>'),s("</div></div></div>")}),s("\x3c!--]--\x3e</div>")):s(`<div class="text-center py-12" data-v-ce5bceaf><span class="text-6xl block mb-4 opacity-40" data-v-ce5bceaf>ğŸ“š</span><h3 class="text-xl font-[&#39;Lora&#39;] font-semibold text-[#5D4A44] mb-2" data-v-ce5bceaf>${a.ssrInterpolate(e.unref(o)?"No se encontraron recursos":"No hay recursos disponibles")}</h3><p class="text-[#5D4A44]/60" data-v-ce5bceaf>${a.ssrInterpolate(e.unref(o)?"Intenta con otros tÃ©rminos de bÃºsqueda":"Los recursos se cargarÃ¡n automÃ¡ticamente")}</p></div>`),s("</div>"),s(a.ssrRenderComponent(A,{modelValue:e.unref(n),"onUpdate:modelValue":a=>e.isRef(n)?n.value=a:null,recurso:e.unref(v),onCompartido:handleCompartido},null,r)),s(a.ssrRenderComponent(w,{modelValue:e.unref(p),"onUpdate:modelValue":a=>e.isRef(p)?p.value=a:null,recurso:e.unref(b),onGuardado:handleRecursoGuardado},null,r)),e.unref(f)?s(`<div class="fixed bottom-6 right-6 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg flex items-center gap-3 z-50" data-v-ce5bceaf><span class="text-2xl" data-v-ce5bceaf>âœ…</span><div data-v-ce5bceaf><p class="font-semibold" data-v-ce5bceaf>${a.ssrInterpolate(e.unref(m))}</p><p class="text-sm opacity-90" data-v-ce5bceaf>${a.ssrInterpolate(e.unref(g))}</p></div></div>`):s("\x3c!----\x3e"),e.unref(x)?s('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm" data-v-ce5bceaf><div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6" data-v-ce5bceaf><div class="text-center mb-6" data-v-ce5bceaf><span class="text-6xl block mb-4" data-v-ce5bceaf>âš ï¸</span><h3 class="text-xl font-[&#39;Lora&#39;] font-semibold text-[#5D4A44] mb-2" data-v-ce5bceaf> Â¿Eliminar recurso? </h3><p class="text-sm text-[#5D4A44]/70" data-v-ce5bceaf> Esta acciÃ³n no se puede deshacer. El recurso se ocultarÃ¡ del repositorio. </p></div><div class="flex gap-3" data-v-ce5bceaf><button class="flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors font-[&#39;Lato&#39;] font-medium" data-v-ce5bceaf> Cancelar </button><button class="flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-[&#39;Lato&#39;] font-semibold" data-v-ce5bceaf> Eliminar </button></div></div></div>'):s("\x3c!----\x3e"),s("</div>")}}},p=v.setup;v.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("pages/terapeuta/recursos.vue"),p?p(a,t):void 0};const b=r(v,[["__scopeId","data-v-ce5bceaf"]]);export{b as default};
//# sourceMappingURL=recursos-B5sDytZo.mjs.map
