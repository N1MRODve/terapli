import{ssrRenderAttrs as e,ssrInterpolate as a,ssrRenderAttr as t,ssrRenderList as o,ssrRenderComponent as s,ssrRenderTeleport as r,ssrIncludeBooleanAttr as l,ssrLooseContain as c,ssrLooseEqual as d}from"vue/server-renderer";import{ref as i,computed as n,mergeProps as b,unref as u,isRef as v,watch as f,useSSRContext as p}from"vue";import{u as x}from"./useSupabaseClient-DykwVqLQ.mjs";import{e as m}from"./server.mjs";import{u as g}from"./useSupabase-DljD0dj8.mjs";import{_ as A}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../routes/renderer.mjs";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"vue-router";import"@supabase/ssr";import"@vercel/analytics/nuxt";const useTerapeuta=()=>{x(),m(),g();return{getPacientes:async()=>[],getRecursosRepositorio:async()=>[],compartirRecurso:async(e,a,t)=>({success:!1,error:"Not client side"}),getRecursosCompartidosPaciente:async e=>[],getEstadisticasRecursos:async()=>null,descompartirRecurso:async e=>({success:!1}),crearRecurso:async e=>({success:!1}),actualizarRecurso:async(e,a)=>({success:!1}),eliminarRecurso:async e=>({success:!1})}},h={__name:"ModalCompartirRecurso",__ssrInlineRender:!0,props:{modelValue:{type:Boolean,required:!0},recurso:{type:Object,default:null}},emits:["update:modelValue","compartido"],setup(e,{emit:s}){const d=e,{getPacientes:b}=useTerapeuta(),u=i([]),v=i(""),p=i([]),x=i(""),m=i(!1),g=i(!1),A=i(""),h=n(()=>{if(!v.value)return u.value;const e=v.value.toLowerCase();return u.value.filter(a=>(a.nombre||"").toLowerCase().includes(e)||(a.email||"").toLowerCase().includes(e)||(a.area_de_acompanamiento||"").toLowerCase().includes(e))});f(()=>d.modelValue,async e=>{e?await cargarPacientes():resetear()});const cargarPacientes=async()=>{m.value=!0,A.value="";try{const e=await b();u.value=e||[]}catch(e){console.error("Error al cargar pacientes:",e),A.value="Error al cargar la lista de pacientes"}finally{m.value=!1}},resetear=()=>{p.value=[],x.value="",v.value="",A.value=""};return(s,d,i,n)=>{r(d,s=>{var r;e.modelValue?(s(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm" data-v-0b1ffb67><div class="bg-[#F9F7F3] rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden" data-v-0b1ffb67><div class="bg-gradient-to-r from-[#D8AFA0] to-[#EAD5D3] px-6 py-5" data-v-0b1ffb67><div class="flex items-center justify-between" data-v-0b1ffb67><div data-v-0b1ffb67><h2 class="text-2xl font-[&#39;Lora&#39;] text-white" data-v-0b1ffb67>Compartir Recurso</h2><p class="text-sm text-white/90 mt-1" data-v-0b1ffb67>${a(null==(r=e.recurso)?void 0:r.titulo)}</p></div><button class="text-white hover:bg-white/20 rounded-lg p-2 transition" data-v-0b1ffb67><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-0b1ffb67><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-0b1ffb67></path></svg></button></div></div><div class="p-6 overflow-y-auto max-h-[calc(90vh-200px)]" data-v-0b1ffb67><div class="space-y-5" data-v-0b1ffb67><div data-v-0b1ffb67><label class="block text-sm font-[&#39;Lato&#39;] font-semibold text-[#5D4A44] mb-2" data-v-0b1ffb67> Buscar paciente </label><div class="relative" data-v-0b1ffb67><input${t("value",v.value)} type="text" placeholder="Buscar por nombre..." class="w-full px-4 py-3 pl-10 bg-white border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] text-[#5D4A44]" data-v-0b1ffb67><svg class="w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-[#5D4A44]/40" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-0b1ffb67><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-0b1ffb67></path></svg></div></div><div data-v-0b1ffb67><label class="block text-sm font-[&#39;Lato&#39;] font-semibold text-[#5D4A44] mb-2" data-v-0b1ffb67> Seleccionar pacientes * </label>`),m.value?s('<div class="text-center py-8" data-v-0b1ffb67><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-[#D8AFA0] mx-auto" data-v-0b1ffb67></div><p class="text-sm text-[#5D4A44]/60 mt-2" data-v-0b1ffb67>Cargando pacientes...</p></div>'):0===h.value.length?s('<div class="text-center py-8" data-v-0b1ffb67><p class="text-sm text-[#5D4A44]/60" data-v-0b1ffb67>No se encontraron pacientes</p></div>'):(s('<div class="bg-white border border-[#EAD5D3]/50 rounded-xl max-h-60 overflow-y-auto" data-v-0b1ffb67>\x3c!--[--\x3e'),o(h.value,e=>{s(`<label class="flex items-center gap-3 p-4 hover:bg-[#F9F7F3] cursor-pointer border-b border-[#EAD5D3]/30 last:border-0 transition" data-v-0b1ffb67><input type="checkbox"${t("value",e.id)}${l(Array.isArray(p.value)?c(p.value,e.id):p.value)?" checked":""} class="w-5 h-5 text-[#D8AFA0] rounded focus:ring-2 focus:ring-[#D8AFA0]" data-v-0b1ffb67><div class="flex-1" data-v-0b1ffb67><p class="font-medium text-[#5D4A44]" data-v-0b1ffb67>${a(e.nombre)}</p>`),e.email?s(`<p class="text-sm text-[#5D4A44]/60" data-v-0b1ffb67>${a(e.email)}</p>`):s("\x3c!----\x3e"),s("</div></label>")}),s("\x3c!--]--\x3e</div>")),p.value.length>0?s(`<p class="text-sm text-[#5D4A44]/70 mt-2" data-v-0b1ffb67>${a(p.value.length)} paciente(s) seleccionado(s) </p>`):s("\x3c!----\x3e"),s(`</div><div data-v-0b1ffb67><label class="block text-sm font-[&#39;Lato&#39;] font-semibold text-[#5D4A44] mb-2" data-v-0b1ffb67> Mensaje opcional </label><textarea rows="3" placeholder="AÃ±ade un mensaje personalizado para el paciente..." class="w-full px-4 py-3 bg-white border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] text-[#5D4A44] resize-none" data-v-0b1ffb67>${a(x.value)}</textarea><p class="text-xs text-[#5D4A44]/60 mt-1" data-v-0b1ffb67> Este mensaje se incluirÃ¡ en la notificaciÃ³n que recibirÃ¡ el paciente </p></div>`),A.value?s(`<div class="bg-red-50 border border-red-200 rounded-xl p-4" data-v-0b1ffb67><div class="flex items-start gap-3" data-v-0b1ffb67><svg class="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20" data-v-0b1ffb67><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" data-v-0b1ffb67></path></svg><p class="text-sm text-red-800" data-v-0b1ffb67>${a(A.value)}</p></div></div>`):s("\x3c!----\x3e"),g.value?s('<div class="bg-[#D8AFA0]/10 border border-[#D8AFA0]/30 rounded-xl p-4" data-v-0b1ffb67><div class="flex items-center gap-3" data-v-0b1ffb67><div class="animate-spin rounded-full h-5 w-5 border-b-2 border-[#D8AFA0]" data-v-0b1ffb67></div><span class="text-sm text-[#5D4A44]" data-v-0b1ffb67>Compartiendo recurso...</span></div></div>'):s("\x3c!----\x3e"),s(`</div></div><div class="bg-white border-t border-[#EAD5D3]/30 px-6 py-4 flex items-center justify-between" data-v-0b1ffb67><p class="text-sm text-[#5D4A44]/70" data-v-0b1ffb67> Los pacientes recibirÃ¡n una notificaciÃ³n automÃ¡tica </p><div class="flex items-center gap-3" data-v-0b1ffb67><button type="button"${l(g.value)?" disabled":""} class="px-6 py-2.5 text-[#5D4A44] font-[&#39;Lato&#39;] rounded-xl hover:bg-[#F9F7F3] transition disabled:opacity-50" data-v-0b1ffb67> Cancelar </button><button${l(g.value||0===p.value.length)?" disabled":""} class="px-6 py-2.5 bg-[#D8AFA0] text-white font-[&#39;Lato&#39;] font-semibold rounded-xl hover:bg-[#D8AFA0]/90 transition disabled:opacity-50 disabled:cursor-not-allowed" data-v-0b1ffb67>${a(g.value?"Compartiendo...":"Enviar Recurso")}</button></div></div></div></div>`)):s("\x3c!----\x3e")},"body",!1,i)}}},D=h.setup;h.setup=(e,a)=>{const t=p();return(t.modules||(t.modules=new Set)).add("components/ModalCompartirRecurso.vue"),D?D(e,a):void 0};const y=A(h,[["__scopeId","data-v-0b1ffb67"]]),w={__name:"ModalRecurso",__ssrInlineRender:!0,props:{modelValue:{type:Boolean,required:!0},recurso:{type:Object,default:null}},emits:["update:modelValue","guardado"],setup(e,{emit:s}){const b=e;useTerapeuta();const u=i({titulo:"",descripcion:"",tipo:"",categoria:"",url:"",icono:"ğŸ“„",tags:[]}),v=i(""),p=i(!1),x=i(""),m=["ğŸ“‹","ğŸµ","ğŸ¥","ğŸ§˜","ğŸ“–","ğŸ“„","ğŸŒŸ","ğŸ’¡","ğŸ¯","âœ¨"],g=n(()=>!!b.recurso),A=n(()=>""!==u.value.titulo.trim()&&""!==u.value.descripcion.trim()&&""!==u.value.tipo&&""!==u.value.url.trim());f(v,e=>{if(e.includes(",")){const a=e.split(",").map(e=>e.trim()).filter(e=>""!==e&&!u.value.tags.includes(e));u.value.tags.push(...a),v.value=""}}),f(()=>b.modelValue,e=>{e&&(b.recurso?u.value={titulo:b.recurso.titulo||"",descripcion:b.recurso.descripcion||"",tipo:b.recurso.tipo||"",categoria:b.recurso.categoria||"",url:b.recurso.url||"",icono:b.recurso.icono||"ğŸ“„",tags:b.recurso.tags?[...b.recurso.tags]:[]}:resetear())});const resetear=()=>{u.value={titulo:"",descripcion:"",tipo:"",categoria:"",url:"",icono:"ğŸ“„",tags:[]},v.value="",x.value=""};return(s,i,n,b)=>{r(i,s=>{e.modelValue?(s(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm" data-v-bba9cf3f><div class="bg-[#F9F7F3] rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden" data-v-bba9cf3f><div class="bg-gradient-to-r from-[#D8AFA0] to-[#EAD5D3] px-6 py-5" data-v-bba9cf3f><div class="flex items-center justify-between" data-v-bba9cf3f><div data-v-bba9cf3f><h2 class="text-2xl font-[&#39;Lora&#39;] text-white" data-v-bba9cf3f>${a(g.value?"âœï¸ Editar Recurso":"â• Nuevo Recurso")}</h2><p class="text-sm text-white/90 mt-1" data-v-bba9cf3f>${a(g.value?"Modifica la informaciÃ³n del recurso":"AÃ±ade un nuevo recurso al repositorio")}</p></div><button class="text-white hover:bg-white/20 rounded-lg p-2 transition" data-v-bba9cf3f><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-bba9cf3f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-bba9cf3f></path></svg></button></div></div><form class="p-6 overflow-y-auto max-h-[calc(90vh-200px)]" data-v-bba9cf3f><div class="space-y-5" data-v-bba9cf3f><div data-v-bba9cf3f><label class="block text-sm font-[&#39;Lato&#39;] font-semibold text-[#5D4A44] mb-2" data-v-bba9cf3f> TÃ­tulo del recurso * </label><input${t("value",u.value.titulo)} type="text" required placeholder="Ej: GuÃ­a de respiraciÃ³n consciente" class="w-full px-4 py-3 bg-white border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] text-[#5D4A44]" data-v-bba9cf3f></div><div data-v-bba9cf3f><label class="block text-sm font-[&#39;Lato&#39;] font-semibold text-[#5D4A44] mb-2" data-v-bba9cf3f> DescripciÃ³n * </label><textarea rows="3" required placeholder="Describe brevemente el contenido del recurso..." class="w-full px-4 py-3 bg-white border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] text-[#5D4A44] resize-none" data-v-bba9cf3f>${a(u.value.descripcion)}</textarea></div><div class="grid grid-cols-2 gap-4" data-v-bba9cf3f><div data-v-bba9cf3f><label class="block text-sm font-[&#39;Lato&#39;] font-semibold text-[#5D4A44] mb-2" data-v-bba9cf3f> Tipo * </label><select required class="w-full px-4 py-3 bg-white border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] text-[#5D4A44]" data-v-bba9cf3f><option value="" data-v-bba9cf3f${l(Array.isArray(u.value.tipo)?c(u.value.tipo,""):d(u.value.tipo,""))?" selected":""}>Seleccionar...</option><option value="GuÃ­a" data-v-bba9cf3f${l(Array.isArray(u.value.tipo)?c(u.value.tipo,"GuÃ­a"):d(u.value.tipo,"GuÃ­a"))?" selected":""}>ğŸ“‹ GuÃ­a</option><option value="Audio" data-v-bba9cf3f${l(Array.isArray(u.value.tipo)?c(u.value.tipo,"Audio"):d(u.value.tipo,"Audio"))?" selected":""}>ğŸµ Audio</option><option value="Video" data-v-bba9cf3f${l(Array.isArray(u.value.tipo)?c(u.value.tipo,"Video"):d(u.value.tipo,"Video"))?" selected":""}>ğŸ¥ Video</option><option value="Ejercicio" data-v-bba9cf3f${l(Array.isArray(u.value.tipo)?c(u.value.tipo,"Ejercicio"):d(u.value.tipo,"Ejercicio"))?" selected":""}>ğŸ§˜ Ejercicio</option><option value="Lectura" data-v-bba9cf3f${l(Array.isArray(u.value.tipo)?c(u.value.tipo,"Lectura"):d(u.value.tipo,"Lectura"))?" selected":""}>ğŸ“– Lectura</option><option value="PDF" data-v-bba9cf3f${l(Array.isArray(u.value.tipo)?c(u.value.tipo,"PDF"):d(u.value.tipo,"PDF"))?" selected":""}>ğŸ“„ PDF</option></select></div><div data-v-bba9cf3f><label class="block text-sm font-[&#39;Lato&#39;] font-semibold text-[#5D4A44] mb-2" data-v-bba9cf3f> CategorÃ­a </label><select class="w-full px-4 py-3 bg-white border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] text-[#5D4A44]" data-v-bba9cf3f><option value="" data-v-bba9cf3f${l(Array.isArray(u.value.categoria)?c(u.value.categoria,""):d(u.value.categoria,""))?" selected":""}>Sin categorÃ­a</option><option value="Ansiedad" data-v-bba9cf3f${l(Array.isArray(u.value.categoria)?c(u.value.categoria,"Ansiedad"):d(u.value.categoria,"Ansiedad"))?" selected":""}>Ansiedad</option><option value="Mindfulness" data-v-bba9cf3f${l(Array.isArray(u.value.categoria)?c(u.value.categoria,"Mindfulness"):d(u.value.categoria,"Mindfulness"))?" selected":""}>Mindfulness</option><option value="RelajaciÃ³n" data-v-bba9cf3f${l(Array.isArray(u.value.categoria)?c(u.value.categoria,"RelajaciÃ³n"):d(u.value.categoria,"RelajaciÃ³n"))?" selected":""}>RelajaciÃ³n</option><option value="Autoestima" data-v-bba9cf3f${l(Array.isArray(u.value.categoria)?c(u.value.categoria,"Autoestima"):d(u.value.categoria,"Autoestima"))?" selected":""}>Autoestima</option><option value="TCC" data-v-bba9cf3f${l(Array.isArray(u.value.categoria)?c(u.value.categoria,"TCC"):d(u.value.categoria,"TCC"))?" selected":""}>TCC</option><option value="EstrÃ©s" data-v-bba9cf3f${l(Array.isArray(u.value.categoria)?c(u.value.categoria,"EstrÃ©s"):d(u.value.categoria,"EstrÃ©s"))?" selected":""}>EstrÃ©s</option><option value="DepresiÃ³n" data-v-bba9cf3f${l(Array.isArray(u.value.categoria)?c(u.value.categoria,"DepresiÃ³n"):d(u.value.categoria,"DepresiÃ³n"))?" selected":""}>DepresiÃ³n</option><option value="Relaciones" data-v-bba9cf3f${l(Array.isArray(u.value.categoria)?c(u.value.categoria,"Relaciones"):d(u.value.categoria,"Relaciones"))?" selected":""}>Relaciones</option><option value="Otro" data-v-bba9cf3f${l(Array.isArray(u.value.categoria)?c(u.value.categoria,"Otro"):d(u.value.categoria,"Otro"))?" selected":""}>Otro</option></select></div></div><div data-v-bba9cf3f><label class="block text-sm font-[&#39;Lato&#39;] font-semibold text-[#5D4A44] mb-2" data-v-bba9cf3f> URL del recurso * </label><input${t("value",u.value.url)} type="url" required placeholder="https://..." class="w-full px-4 py-3 bg-white border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] text-[#5D4A44]" data-v-bba9cf3f><p class="text-xs text-[#5D4A44]/60 mt-1" data-v-bba9cf3f> Enlace directo al recurso (YouTube, PDF, artÃ­culo web, etc.) </p></div><div data-v-bba9cf3f><label class="block text-sm font-[&#39;Lato&#39;] font-semibold text-[#5D4A44] mb-2" data-v-bba9cf3f> Icono (emoji) </label><div class="flex gap-2" data-v-bba9cf3f><input${t("value",u.value.icono)} type="text" maxlength="2" placeholder="ğŸ“š" class="w-20 px-4 py-3 bg-white border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] text-center text-2xl" data-v-bba9cf3f><div class="flex flex-wrap gap-2 flex-1" data-v-bba9cf3f>\x3c!--[--\x3e`),o(m,e=>{s(`<button type="button" class="px-3 py-2 text-2xl hover:bg-[#EAD5D3]/30 rounded-lg transition" data-v-bba9cf3f>${a(e)}</button>`)}),s(`\x3c!--]--\x3e</div></div></div><div data-v-bba9cf3f><label class="block text-sm font-[&#39;Lato&#39;] font-semibold text-[#5D4A44] mb-2" data-v-bba9cf3f> Etiquetas </label><input${t("value",v.value)} type="text" placeholder="respiraciÃ³n, mindfulness, ansiedad (separadas por comas)" class="w-full px-4 py-3 bg-white border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0] text-[#5D4A44]" data-v-bba9cf3f><p class="text-xs text-[#5D4A44]/60 mt-1" data-v-bba9cf3f> Separa las etiquetas con comas </p>`),u.value.tags.length>0?(s('<div class="flex flex-wrap gap-2 mt-2" data-v-bba9cf3f>\x3c!--[--\x3e'),o(u.value.tags,(e,t)=>{s(`<span class="px-3 py-1 bg-[#D8AFA0]/20 text-[#5D4A44] rounded-full text-sm flex items-center gap-2" data-v-bba9cf3f> #${a(e)} <button type="button" class="text-[#5D4A44]/50 hover:text-[#5D4A44]" data-v-bba9cf3f> Ã— </button></span>`)}),s("\x3c!--]--\x3e</div>")):s("\x3c!----\x3e"),s("</div>"),x.value?s(`<div class="bg-red-50 border border-red-200 rounded-xl p-4" data-v-bba9cf3f><div class="flex items-start gap-3" data-v-bba9cf3f><svg class="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20" data-v-bba9cf3f><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" data-v-bba9cf3f></path></svg><p class="text-sm text-red-800" data-v-bba9cf3f>${a(x.value)}</p></div></div>`):s("\x3c!----\x3e"),s(`</div></form><div class="bg-white border-t border-[#EAD5D3]/30 px-6 py-4 flex items-center justify-end gap-3" data-v-bba9cf3f><button type="button"${l(p.value)?" disabled":""} class="px-6 py-2.5 text-[#5D4A44] font-[&#39;Lato&#39;] rounded-xl hover:bg-[#F9F7F3] transition disabled:opacity-50" data-v-bba9cf3f> Cancelar </button><button${l(p.value||!A.value)?" disabled":""} class="px-6 py-2.5 bg-[#D8AFA0] text-white font-[&#39;Lato&#39;] font-semibold rounded-xl hover:bg-[#D8AFA0]/90 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2" data-v-bba9cf3f>`),p.value?s('<span class="inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin" data-v-bba9cf3f></span>'):s("\x3c!----\x3e"),s(`<span data-v-bba9cf3f>${a(p.value?"Guardando...":g.value?"Guardar Cambios":"Crear Recurso")}</span></button></div></div></div>`)):s("\x3c!----\x3e")},"body",!1,n)}}},F=w.setup;w.setup=(e,a)=>{const t=p();return(t.modules||(t.modules=new Set)).add("components/ModalRecurso.vue"),F?F(e,a):void 0};const $=A(w,[["__scopeId","data-v-bba9cf3f"]]),L={__name:"recursos",__ssrInlineRender:!0,setup(r){const{getEstadisticasRecursos:l}=useTerapeuta(),c=i(""),d=i([]),f=i(!0),p=i(null),x=i(!1),m=i(!1),g=i(null),A=i(!1),h=i(null),D=i(!1);i(null);const w=i(!1),F=i(""),L=i(""),E=n(()=>{if(!c.value)return d.value;const e=c.value.toLowerCase();return d.value.filter(a=>{var t,o,s,r;return(null==(t=a.titulo)?void 0:t.toLowerCase().includes(e))||(null==(o=a.descripcion)?void 0:o.toLowerCase().includes(e))||(null==(s=a.categoria)?void 0:s.toLowerCase().includes(e))||(null==(r=a.tipo)?void 0:r.toLowerCase().includes(e))})}),cargarEstadisticas=async()=>{try{const e=await l();p.value=e||{total:2,vistos:1,pendientes:1,porcentajeVisto:50}}catch(e){console.error("Error cargando estadÃ­sticas:",e),p.value={total:0,vistos:0,pendientes:0,porcentajeVisto:0}}},handleCompartido=e=>{mostrarToastExito("Â¡Recurso compartido!",`Compartido con ${e.cantidad} paciente${e.cantidad>1?"s":""}`),cargarEstadisticas()},handleRecursoGuardado=e=>{if(h.value){const a=d.value.findIndex(a=>a.id===e.id);-1!==a&&(d.value[a]=e),mostrarToastExito("Â¡Recurso actualizado!","Los cambios se han guardado correctamente")}else d.value.unshift(e),mostrarToastExito("Â¡Recurso creado!","El nuevo recurso estÃ¡ listo para compartir");cargarEstadisticas()},mostrarToastExito=(e,a)=>{F.value=e,L.value=a,w.value=!0,setTimeout(()=>{w.value=!1},3e3)};return(r,l,d,i)=>{const n=y,C=$;l(`<div${e(b({class:"min-h-screen bg-[#F9F7F3] py-8"},i))} data-v-ce5bceaf><div class="container mx-auto px-4 max-w-7xl" data-v-ce5bceaf>`),u(x)?l('<div class="mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl" data-v-ce5bceaf><div class="flex items-start gap-3" data-v-ce5bceaf><span class="text-3xl" data-v-ce5bceaf>ğŸ­</span><div class="flex-1" data-v-ce5bceaf><h3 class="font-[&#39;Lora&#39;] text-lg font-semibold text-blue-900 mb-1" data-v-ce5bceaf> Modo DemostraciÃ³n - Recursos Precargados </h3><p class="text-sm text-blue-700 leading-relaxed" data-v-ce5bceaf> EstÃ¡s viendo <strong data-v-ce5bceaf>6 recursos de ejemplo</strong> listos para compartir con tus pacientes. Para usar el repositorio real, ejecuta la migraciÃ³n SQL en Supabase: <code class="px-2 py-0.5 bg-blue-100 rounded" data-v-ce5bceaf>supabase/migrations/20251019_recursos_compartidos.sql</code></p></div></div></div>'):l("\x3c!----\x3e"),l('<div class="mb-8 flex items-start justify-between" data-v-ce5bceaf><div data-v-ce5bceaf><h1 class="text-4xl font-[&#39;Lora&#39;] text-[#5D4A44] mb-2" data-v-ce5bceaf>ğŸ“š Recursos TerapÃ©uticos</h1><p class="text-[#5D4A44]/70" data-v-ce5bceaf>Biblioteca de materiales para compartir con tus pacientes</p></div><button class="px-6 py-3 bg-[#D8AFA0] text-white rounded-xl hover:bg-[#D8AFA0]/90 transition-colors flex items-center gap-2 whitespace-nowrap" data-v-ce5bceaf><span class="text-xl" data-v-ce5bceaf>â•</span><span class="font-[&#39;Lato&#39;] font-semibold" data-v-ce5bceaf>Nuevo Recurso</span></button></div>'),u(p)?l(`<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6" data-v-ce5bceaf><div class="bg-white rounded-xl p-4 border border-[#EAD5D3]/30" data-v-ce5bceaf><div class="flex items-center gap-3" data-v-ce5bceaf><span class="text-3xl" data-v-ce5bceaf>ğŸ“¤</span><div data-v-ce5bceaf><p class="text-2xl font-[&#39;Lora&#39;] font-bold text-[#5D4A44]" data-v-ce5bceaf>${a(u(p).total)}</p><p class="text-sm text-[#5D4A44]/70" data-v-ce5bceaf>Recursos compartidos</p></div></div></div><div class="bg-white rounded-xl p-4 border border-[#EAD5D3]/30" data-v-ce5bceaf><div class="flex items-center gap-3" data-v-ce5bceaf><span class="text-3xl" data-v-ce5bceaf>ğŸ‘ï¸</span><div data-v-ce5bceaf><p class="text-2xl font-[&#39;Lora&#39;] font-bold text-[#5D4A44]" data-v-ce5bceaf>${a(u(p).vistos)}</p><p class="text-sm text-[#5D4A44]/70" data-v-ce5bceaf>Vistos por pacientes</p></div></div></div><div class="bg-white rounded-xl p-4 border border-[#EAD5D3]/30" data-v-ce5bceaf><div class="flex items-center gap-3" data-v-ce5bceaf><span class="text-3xl" data-v-ce5bceaf>â³</span><div data-v-ce5bceaf><p class="text-2xl font-[&#39;Lora&#39;] font-bold text-[#5D4A44]" data-v-ce5bceaf>${a(u(p).pendientes)}</p><p class="text-sm text-[#5D4A44]/70" data-v-ce5bceaf>Pendientes de ver</p></div></div></div></div>`):l("\x3c!----\x3e"),l(`<div class="bg-white rounded-xl p-6 mb-6 border border-[#EAD5D3]/30" data-v-ce5bceaf><input${t("value",u(c))} type="text" placeholder="Buscar recursos por tÃ­tulo, descripciÃ³n o categorÃ­a..." class="w-full px-4 py-3 bg-[#F9F7F3] border border-[#EAD5D3]/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D8AFA0]" data-v-ce5bceaf></div>`),u(f)?l('<div class="text-center py-12" data-v-ce5bceaf><div class="animate-spin w-12 h-12 border-4 border-[#D8AFA0] border-t-transparent rounded-full mx-auto mb-4" data-v-ce5bceaf></div><p class="text-[#5D4A44]/60" data-v-ce5bceaf>Cargando recursos...</p></div>'):u(E).length>0?(l('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" data-v-ce5bceaf>\x3c!--[--\x3e'),o(u(E),e=>{var o;l(`<div class="bg-white rounded-xl shadow-sm border border-[#EAD5D3]/30 p-6 hover:shadow-md transition-shadow" data-v-ce5bceaf><div class="flex justify-between mb-3" data-v-ce5bceaf><span class="text-2xl" data-v-ce5bceaf>${a(e.icono)}</span><span class="text-xs px-3 py-1 rounded-full bg-[#EAD5D3]/50" data-v-ce5bceaf>${a(e.tipo)}</span></div><h3 class="font-[&#39;Lora&#39;] text-lg text-[#5D4A44] mb-2" data-v-ce5bceaf>${a(e.titulo)}</h3><p class="text-sm text-[#5D4A44]/70 mb-4 line-clamp-2" data-v-ce5bceaf>${a(e.descripcion)}</p>`),e.categoria?l(`<div class="mb-4" data-v-ce5bceaf><span class="text-xs px-2 py-1 bg-[#D8AFA0]/20 text-[#5D4A44] rounded" data-v-ce5bceaf>${a(e.categoria)}</span></div>`):l("\x3c!----\x3e"),l(`<div class="flex flex-col gap-2" data-v-ce5bceaf><div class="flex gap-2" data-v-ce5bceaf><a${t("href",e.url)} target="_blank" class="flex-1 text-center px-3 py-2 text-sm bg-[#F9F7F3] text-[#5D4A44] rounded-lg hover:bg-[#EAD5D3]/30 transition-colors" data-v-ce5bceaf> ğŸ‘ï¸ Ver </a><button class="flex-1 px-3 py-2 text-sm bg-[#D8AFA0] text-white rounded-lg hover:bg-[#D8AFA0]/90 transition-colors" data-v-ce5bceaf> ğŸ“¤ Compartir </button></div><div class="flex gap-2" data-v-ce5bceaf><button class="flex-1 px-3 py-2 text-sm bg-white border border-[#EAD5D3] text-[#5D4A44] rounded-lg hover:bg-[#F9F7F3] transition-colors" data-v-ce5bceaf> âœï¸ Editar </button>`),(null==(o=e.id)?void 0:o.startsWith("demo"))?l("\x3c!----\x3e"):l('<button class="flex-1 px-3 py-2 text-sm bg-white border border-red-200 text-red-600 rounded-lg hover:bg-red-50 transition-colors" data-v-ce5bceaf> ğŸ—‘ï¸ Eliminar </button>'),l("</div></div></div>")}),l("\x3c!--]--\x3e</div>")):l(`<div class="text-center py-12" data-v-ce5bceaf><span class="text-6xl block mb-4 opacity-40" data-v-ce5bceaf>ğŸ“š</span><h3 class="text-xl font-[&#39;Lora&#39;] font-semibold text-[#5D4A44] mb-2" data-v-ce5bceaf>${a(u(c)?"No se encontraron recursos":"No hay recursos disponibles")}</h3><p class="text-[#5D4A44]/60" data-v-ce5bceaf>${a(u(c)?"Intenta con otros tÃ©rminos de bÃºsqueda":"Los recursos se cargarÃ¡n automÃ¡ticamente")}</p></div>`),l("</div>"),l(s(n,{modelValue:u(m),"onUpdate:modelValue":e=>v(m)?m.value=e:null,recurso:u(g),onCompartido:handleCompartido},null,d)),l(s(C,{modelValue:u(A),"onUpdate:modelValue":e=>v(A)?A.value=e:null,recurso:u(h),onGuardado:handleRecursoGuardado},null,d)),u(w)?l(`<div class="fixed bottom-6 right-6 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg flex items-center gap-3 z-50" data-v-ce5bceaf><span class="text-2xl" data-v-ce5bceaf>âœ…</span><div data-v-ce5bceaf><p class="font-semibold" data-v-ce5bceaf>${a(u(F))}</p><p class="text-sm opacity-90" data-v-ce5bceaf>${a(u(L))}</p></div></div>`):l("\x3c!----\x3e"),u(D)?l('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm" data-v-ce5bceaf><div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6" data-v-ce5bceaf><div class="text-center mb-6" data-v-ce5bceaf><span class="text-6xl block mb-4" data-v-ce5bceaf>âš ï¸</span><h3 class="text-xl font-[&#39;Lora&#39;] font-semibold text-[#5D4A44] mb-2" data-v-ce5bceaf> Â¿Eliminar recurso? </h3><p class="text-sm text-[#5D4A44]/70" data-v-ce5bceaf> Esta acciÃ³n no se puede deshacer. El recurso se ocultarÃ¡ del repositorio. </p></div><div class="flex gap-3" data-v-ce5bceaf><button class="flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors font-[&#39;Lato&#39;] font-medium" data-v-ce5bceaf> Cancelar </button><button class="flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-[&#39;Lato&#39;] font-semibold" data-v-ce5bceaf> Eliminar </button></div></div></div>'):l("\x3c!----\x3e"),l("</div>")}}},E=L.setup;L.setup=(e,a)=>{const t=p();return(t.modules||(t.modules=new Set)).add("pages/terapeuta/recursos.vue"),E?E(e,a):void 0};const C=A(L,[["__scopeId","data-v-ce5bceaf"]]);export{C as default};
//# sourceMappingURL=recursos-DBFdoN0-.mjs.map
