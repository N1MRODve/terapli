import{_ as a}from"./DashboardCard-CYAu_T60.mjs";import{defineComponent as e,computed as t,ref as s,watch as c,mergeProps as d,unref as o,withCtx as n,createVNode as l,toDisplayString as r,createBlock as i,createCommentVNode as p,openBlock as x,createTextVNode as v,Fragment as m,renderList as u,useSSRContext as f}from"vue";import{ssrRenderAttrs as b,ssrRenderComponent as g,ssrInterpolate as $,ssrRenderStyle as y,ssrRenderClass as h,ssrRenderList as w,ssrIncludeBooleanAttr as _}from"vue/server-renderer";import{_ as k}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{_ as C}from"./ModalNuevaCita-6Mm-k6WH.mjs";import{M as j}from"./ModalDetallesCita-4YIA-weF.mjs";import{u as S}from"./useCitas-DyEZH6RI.mjs";import{h as A,a as D,e as E}from"./server.mjs";import{u as P}from"./useSupabaseClient-DykwVqLQ.mjs";import"@heroicons/vue/24/outline";import"./useSupabase-DljD0dj8.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../routes/renderer.mjs";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"vue-router";import"@supabase/ssr";import"@vercel/analytics/nuxt";const N={__name:"NotasPrivadas",__ssrInlineRender:!0,props:{pacienteId:{type:String,required:!0},contenido:{type:String,default:""},ultimaActualizacion:{type:String,default:null}},emits:["guardar","actualizar"],setup(a,{emit:e}){const t=a,n=s(!1),l=s(!1),r=s(t.contenido),i=s(t.contenido);s(null),c(()=>t.contenido,a=>{n.value||(r.value=a,i.value=a)});const formatearFecha=a=>{if(!a)return"";return new Date(a).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})};return(e,t,s,c)=>{t(`<div${b(d({class:"bg-white rounded-xl shadow-sm border border-[#EAD5D3]/40 p-6"},c))} data-v-a439e157><div class="flex items-center justify-between mb-4" data-v-a439e157><h3 class="font-serif text-lg font-semibold text-cafe flex items-center gap-2" data-v-a439e157><span class="text-xl" data-v-a439e157>ğŸ“</span> Notas ClÃ­nicas Privadas </h3>`),o(n)?t("\x3c!----\x3e"):t('<button class="px-3 py-1.5 text-sm bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors" data-v-a439e157> âœï¸ Editar </button>'),t('</div><div class="mb-4 p-3 bg-rosa/20 border border-rosa rounded-lg" data-v-a439e157><p class="text-xs text-cafe/70 flex items-start gap-2" data-v-a439e157><span class="text-terracota" data-v-a439e157>ğŸ”’</span><span data-v-a439e157> Esta informaciÃ³n es estrictamente confidencial y solo visible para ti como terapeuta. Cumple con los estÃ¡ndares de protecciÃ³n de datos clÃ­nicos. </span></p></div>'),o(n)?(t(`<div data-v-a439e157><textarea placeholder="Anota observaciones, reflexiones o aspectos a seguir trabajando...\n\nâ€¢ Progreso observado en la sesiÃ³n\nâ€¢ Temas pendientes de abordar\nâ€¢ Estrategias que funcionan\nâ€¢ Aspectos que requieren atenciÃ³n" class="w-full min-h-[300px] px-4 py-3 bg-base-bg rounded-lg border border-terracota/30 focus:border-terracota focus:outline-none focus:ring-2 focus:ring-terracota/20 transition-all text-cafe resize-y" data-v-a439e157>${$(o(r))}</textarea><div class="mt-2 flex items-center justify-between text-xs text-cafe/60" data-v-a439e157><span data-v-a439e157> ğŸ’¡ Presiona Cmd/Ctrl + Enter para guardar rÃ¡pidamente </span>`),a.ultimaActualizacion?t(`<span data-v-a439e157> Ãšltima actualizaciÃ³n: ${$(formatearFecha(a.ultimaActualizacion))}</span>`):t("\x3c!----\x3e"),t(`</div><div class="mt-4 flex items-center gap-3" data-v-a439e157><button${_(o(l))?" disabled":""} class="px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2" data-v-a439e157>`),o(l)?t("<span data-v-a439e157>â³</span>"):t("<span data-v-a439e157>ğŸ’¾</span>"),t(`<span data-v-a439e157>${$(o(l)?"Guardando...":"Guardar cambios")}</span></button><button${_(o(l))?" disabled":""} class="px-4 py-2 bg-white border border-cafe/20 text-cafe rounded-lg hover:bg-gray-50 transition-colors" data-v-a439e157> Cancelar </button></div></div>`)):(t('<div class="min-h-[200px]" data-v-a439e157>'),o(r)?t(`<div class="prose prose-sm max-w-none text-cafe/80 whitespace-pre-wrap" data-v-a439e157>${$(o(r))}</div>`):t('<div class="text-center py-8" data-v-a439e157><span class="text-5xl mb-3 block opacity-40" data-v-a439e157>ğŸ“‹</span><p class="text-cafe/50 italic" data-v-a439e157> AÃºn no hay notas registradas para este paciente </p><button class="mt-4 px-4 py-2 text-sm bg-terracota/10 text-terracota rounded-lg hover:bg-terracota/20 transition-colors" data-v-a439e157> AÃ±adir primera nota </button></div>'),t("</div>")),!o(n)&&a.ultimaActualizacion?t(`<div class="mt-4 pt-4 border-t border-gray-100" data-v-a439e157><p class="text-xs text-cafe/50" data-v-a439e157> Ãšltima modificaciÃ³n: ${$(formatearFecha(a.ultimaActualizacion))}</p></div>`):t("\x3c!----\x3e"),t("</div>")}}},z=N.setup;N.setup=(a,e)=>{const t=f();return(t.modules||(t.modules=new Set)).add("components/NotasPrivadas.vue"),z?z(a,e):void 0};const T=k(N,[["__scopeId","data-v-a439e157"]]),B=e({__name:"[id]",__ssrInlineRender:!0,setup(e){const f=A(),_=D(),k=P(),N=E(),{getCitas:z}=S(),B=t(()=>f.params.id),q=s(!0),I=s(null),R=s(null),M=s(null),G=s([]),H=s(""),V=s(null),O=s("proximas"),F=s(!1),U=s(null),L=s(!1),W=s(null),Q=t(()=>[{id:"proximas",nombre:"PrÃ³ximas Sesiones",icono:"ğŸ“…",badge:K.value.proximas||null},{id:"completadas",nombre:"Completadas",icono:"âœ…",badge:K.value.completadas||null},{id:"pendientes",nombre:"Pendientes",icono:"â³",badge:K.value.pendientes||null},{id:"anteriores",nombre:"Historial",icono:"ğŸ“š",badge:null}]),cargarDatosPaciente=async()=>{q.value=!0,I.value=null;try{if(!N.value)return void(I.value="Usuario no autenticado");const{data:a,error:e}=await k.from("pacientes").select("*").eq("id",B.value).single();if(e)throw e;const t=a.nombre||a.email||"Sin nombre";R.value={...a,nombre_completo:t,email:a.email||"",telefono:a.telefono||""};const s=await z();G.value=s.filter(a=>a.paciente_id===B.value),await cargarBonoActivo(),await cargarNotas()}catch(a){console.error("Error al cargar paciente:",a),I.value=a.message||"Error desconocido"}finally{q.value=!1}},cargarBonoActivo=async()=>{try{const{data:a,error:e}=await k.from("bonos").select("*").eq("paciente_id",B.value).eq("estado","activo").maybeSingle();if(e)return void console.warn("[Bonos] Error en consulta:",e.message);if(a){const e=a.sesiones_usadas||0,t=a.sesiones_totales||0,s=t-e;M.value={...a,sesiones_disponibles:s,porcentaje_uso:t>0?Math.round(e/t*100):0}}}catch(a){console.warn("[Bonos] Error inesperado:",a)}},cargarNotas=async()=>{var a;try{const{data:e}=await k.from("notas_terapeuticas").select("contenido, updated_at").eq("paciente_id",B.value).eq("terapeuta_id",null==(a=N.value)?void 0:a.id).order("updated_at",{ascending:!1}).limit(1).maybeSingle();e&&(H.value=e.contenido||"",V.value=e.updated_at)}catch(a){console.error("Error al cargar notas:",a)}},guardarNotas=async({pacienteId:a,contenido:e})=>{var t,s;try{const{data:c}=await k.from("notas_terapeuticas").select("id").eq("paciente_id",a).eq("terapeuta_id",null==(t=N.value)?void 0:t.id).maybeSingle();c?await k.from("notas_terapeuticas").update({contenido:e,updated_at:(new Date).toISOString()}).eq("id",c.id):await k.from("notas_terapeuticas").insert({paciente_id:a,terapeuta_id:null==(s=N.value)?void 0:s.id,contenido:e}),H.value=e,V.value=(new Date).toISOString()}catch(a){throw console.error("Error al guardar notas:",a),a}},Y=t(()=>{const a=new Date;return G.value.filter(e=>["pendiente","confirmada"].includes(e.estado)&&new Date(e.fecha_cita)>=a).sort((a,e)=>new Date(a.fecha_cita).getTime()-new Date(e.fecha_cita).getTime())}),X=t(()=>G.value.filter(a=>"realizada"===a.estado).sort((a,e)=>new Date(e.fecha_cita).getTime()-new Date(a.fecha_cita).getTime())),Z=t(()=>G.value.filter(a=>"pendiente"===a.estado).sort((a,e)=>new Date(a.fecha_cita).getTime()-new Date(e.fecha_cita).getTime())),J=t(()=>G.value.sort((a,e)=>new Date(e.fecha_cita).getTime()-new Date(a.fecha_cita).getTime())),K=t(()=>({total:G.value.length,completadas:X.value.length,pendientes:Z.value.length,proximas:Y.value.length})),aa=t(()=>{const a=X.value;return a.length>0?a[a.length-1].fecha_cita:null}),ea=t(()=>{const a=X.value;return a.length>0?a[0].fecha_cita:null}),ta=t(()=>Y.value.length>0?Y.value[0]:null),sa=t(()=>{var a;return(null==(a=R.value)?void 0:a.nombre_completo)||"Sin nombre"}),ca=t(()=>{if(!sa.value)return"?";const a=sa.value.split(" ");return a.length>=2&&a[0]&&a[1]?`${a[0][0]}${a[1][0]}`.toUpperCase():sa.value.substring(0,2).toUpperCase()}),da=t(()=>{const a=["#D8AFA0","#C89B8A","#B7C6B0","#A8C5B5","#D4A5A5","#C4B5A0"];return a[B.value.charCodeAt(0)%a.length]}),oa=t(()=>{var a;return R.value?R.value.activo?(null==(a=R.value.metadata)?void 0:a.en_pausa)?"En pausa":"En proceso":"Finalizado":""}),na=t(()=>{var a;return R.value?R.value.activo?(null==(a=R.value.metadata)?void 0:a.en_pausa)?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700":"bg-gray-100 text-gray-600":""}),la=t(()=>{var a;if(!(null==(a=R.value)?void 0:a.tipo_bono))return"";return{a_demanda:"A Demanda (1 sesiÃ³n)",quincenal:"Quincenal (2 sesiones/mes)",semanal:"Semanal (4 sesiones/mes)"}[R.value.tipo_bono]||R.value.tipo_bono}),formatearFecha=a=>{if(!a)return"";try{return new Date(a+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}catch{return a}},formatearFechaCompleta=(a,e)=>{if(!a)return"";try{return new Date(a+"T"+(e||"00:00:00")).toLocaleString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return a}},formatearPrecio=a=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(a||0),calcularTiempoProceso=a=>{if(!a)return"";const e=new Date(a),t=new Date,s=Math.floor((t.getTime()-e.getTime())/864e5);return s<30?`${s} dÃ­as`:s<365?`${Math.floor(s/30)} meses`:`${Math.floor(s/365)} aÃ±os`},obtenerIconoModalidad=a=>({presencial:"ğŸ¥",online:"ğŸ’»",telefonica:"ğŸ“"}[a]||"ğŸ“‹"),obtenerEstiloModalidad=a=>({presencial:"bg-green-100 text-green-700",online:"bg-terracota/20 text-terracota",telefonica:"bg-blue-100 text-blue-700"}[a]||"bg-gray-100 text-gray-700"),obtenerEstiloEstado=a=>({pendiente:"bg-yellow-100 text-yellow-700",confirmada:"bg-green-100 text-green-700",realizada:"bg-blue-100 text-blue-700",cancelada:"bg-red-100 text-red-700"}[a]||"bg-gray-100 text-gray-700"),irABonos=()=>{_.push(`/terapeuta/pacientes/${B.value}/bonos`)},abrirWhatsApp=()=>{var a;const e=null==(a=R.value)?void 0:a.telefono;if(!e)return void alert("Este paciente no tiene telÃ©fono registrado");const t=`https://wa.me/${e.replace(/\D/g,"")}?text=${encodeURIComponent(`Hola ${sa.value}, Â¿cÃ³mo estÃ¡s?`)}`;(void 0).open(t,"_blank")},agendarSesion=()=>{R.value&&(U.value={id:R.value.id,nombre:sa.value,email:R.value.email,telefono:R.value.telefono,frecuencia:R.value.frecuencia||"semanal",area_acompanamiento:R.value.area_de_acompanamiento},F.value=!0)},cerrarModalCita=()=>{F.value=!1,U.value=null},onCitaCreada=()=>{cargarDatosPaciente()},verDetallesCita=a=>{W.value=a,L.value=!0},cerrarModalDetalles=()=>{L.value=!1,W.value=null},editarPaciente=()=>{alert("FunciÃ³n de editar en desarrollo")};return c(()=>f.params.id,()=>{f.params.id&&cargarDatosPaciente()}),(e,t,s,c)=>{const f=a,_=T,S=C,A=j;t(`<div${b(d({class:"pb-20"},c))} data-v-cc632d3a><button class="mb-6 flex items-center gap-2 text-cafe hover:text-terracota transition-colors" data-v-cc632d3a><span data-v-cc632d3a>â†</span><span data-v-cc632d3a>Volver a lista de pacientes</span></button>`),o(q)?t('<div class="text-center py-12" data-v-cc632d3a><div class="animate-spin w-12 h-12 border-4 border-terracota border-t-transparent rounded-full mx-auto mb-4" data-v-cc632d3a></div><p class="text-cafe/60" data-v-cc632d3a>Cargando informaciÃ³n del paciente...</p></div>'):o(I)?(t('<div class="text-center py-12" data-v-cc632d3a>'),t(g(f,null,{default:n((a,t,s,c)=>{if(!t)return[l("span",{class:"text-6xl mb-4 block"},"âŒ"),l("h3",{class:"text-xl font-serif font-semibold text-cafe mb-2"}," No se pudo cargar la informaciÃ³n "),l("p",{class:"text-cafe/60 mb-4"},r(o(I)),1),l("button",{onClick:a=>e.$router.push("/terapeuta/pacientes"),class:"px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors"}," Volver a la lista ",8,["onClick"])];t(`<span class="text-6xl mb-4 block" data-v-cc632d3a${c}>âŒ</span><h3 class="text-xl font-serif font-semibold text-cafe mb-2" data-v-cc632d3a${c}> No se pudo cargar la informaciÃ³n </h3><p class="text-cafe/60 mb-4" data-v-cc632d3a${c}>${$(o(I))}</p><button class="px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors" data-v-cc632d3a${c}> Volver a la lista </button>`)}),_:1},s)),t("</div>")):o(R)?(t("<div data-v-cc632d3a>"),t(g(f,{class:"mb-6"},{default:n((a,e,t,s)=>{if(!e)return[l("div",{class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6"},[l("div",{class:"flex items-start gap-4"},[l("div",{class:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0",style:{backgroundColor:o(da)}},r(o(ca)),5),l("div",null,[l("h1",{class:"text-3xl font-serif font-bold text-cafe mb-2"},r(o(sa)),1),l("div",{class:"flex flex-wrap items-center gap-3 mb-3"},[l("span",{class:["px-3 py-1 text-sm font-medium rounded-full",o(na)]},r(o(oa)),3),l("span",{class:"text-cafe/60 text-sm flex items-center gap-1"},[l("span",null,"ğŸ“§"),l("span",null,r(o(R).email),1)])]),l("div",{class:"space-y-1 text-sm"},[o(R).telefono?(x(),i("div",{key:0,class:"text-cafe/70 flex items-center gap-2"},[l("span",null,"ğŸ“±"),l("span",null,r(o(R).telefono),1)])):p("",!0),o(R).area_de_acompanamiento?(x(),i("div",{key:1,class:"text-cafe/70 flex items-center gap-2"},[l("span",null,"ğŸ¯"),l("span",null,[l("strong",null,"Ãrea:"),v(" "+r(o(R).area_de_acompanamiento),1)])])):p("",!0),o(R).tipo_bono?(x(),i("div",{key:2,class:"text-cafe/70 flex items-center gap-2"},[l("span",null,"ğŸ«"),l("span",null,[l("strong",null,"Tipo de Bono:"),v(" "+r(o(la)),1)])])):p("",!0)])])]),l("div",{class:"flex flex-wrap gap-2"},[l("button",{onClick:irABonos,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2"},[l("span",null,"ğŸ«"),l("span",null,"Gestionar Bonos")]),l("button",{onClick:abrirWhatsApp,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2"},[l("span",null,"ğŸ’¬"),l("span",null,"WhatsApp")]),l("button",{onClick:agendarSesion,class:"px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors text-sm flex items-center gap-2"},[l("span",null,"ğŸ“…"),l("span",null,"Agendar sesiÃ³n")]),l("button",{onClick:editarPaciente,class:"px-4 py-2 bg-white border border-terracota/30 text-terracota rounded-lg hover:bg-terracota/5 transition-colors text-sm flex items-center gap-2"},[l("span",null,"âœï¸"),l("span",null,"Editar")])])])];e(`<div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6" data-v-cc632d3a${s}><div class="flex items-start gap-4" data-v-cc632d3a${s}><div class="w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0" style="${y({backgroundColor:o(da)})}" data-v-cc632d3a${s}>${$(o(ca))}</div><div data-v-cc632d3a${s}><h1 class="text-3xl font-serif font-bold text-cafe mb-2" data-v-cc632d3a${s}>${$(o(sa))}</h1><div class="flex flex-wrap items-center gap-3 mb-3" data-v-cc632d3a${s}><span class="${h([o(na),"px-3 py-1 text-sm font-medium rounded-full"])}" data-v-cc632d3a${s}>${$(o(oa))}</span><span class="text-cafe/60 text-sm flex items-center gap-1" data-v-cc632d3a${s}><span data-v-cc632d3a${s}>ğŸ“§</span><span data-v-cc632d3a${s}>${$(o(R).email)}</span></span></div><div class="space-y-1 text-sm" data-v-cc632d3a${s}>`),o(R).telefono?e(`<div class="text-cafe/70 flex items-center gap-2" data-v-cc632d3a${s}><span data-v-cc632d3a${s}>ğŸ“±</span><span data-v-cc632d3a${s}>${$(o(R).telefono)}</span></div>`):e("\x3c!----\x3e"),o(R).area_de_acompanamiento?e(`<div class="text-cafe/70 flex items-center gap-2" data-v-cc632d3a${s}><span data-v-cc632d3a${s}>ğŸ¯</span><span data-v-cc632d3a${s}><strong data-v-cc632d3a${s}>Ãrea:</strong> ${$(o(R).area_de_acompanamiento)}</span></div>`):e("\x3c!----\x3e"),o(R).tipo_bono?e(`<div class="text-cafe/70 flex items-center gap-2" data-v-cc632d3a${s}><span data-v-cc632d3a${s}>ğŸ«</span><span data-v-cc632d3a${s}><strong data-v-cc632d3a${s}>Tipo de Bono:</strong> ${$(o(la))}</span></div>`):e("\x3c!----\x3e"),e(`</div></div></div><div class="flex flex-wrap gap-2" data-v-cc632d3a${s}><button class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2" data-v-cc632d3a${s}><span data-v-cc632d3a${s}>ğŸ«</span><span data-v-cc632d3a${s}>Gestionar Bonos</span></button><button class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2" data-v-cc632d3a${s}><span data-v-cc632d3a${s}>ğŸ’¬</span><span data-v-cc632d3a${s}>WhatsApp</span></button><button class="px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors text-sm flex items-center gap-2" data-v-cc632d3a${s}><span data-v-cc632d3a${s}>ğŸ“…</span><span data-v-cc632d3a${s}>Agendar sesiÃ³n</span></button><button class="px-4 py-2 bg-white border border-terracota/30 text-terracota rounded-lg hover:bg-terracota/5 transition-colors text-sm flex items-center gap-2" data-v-cc632d3a${s}><span data-v-cc632d3a${s}>âœï¸</span><span data-v-cc632d3a${s}>Editar</span></button></div></div>`)}),_:1},s)),t('<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6" data-v-cc632d3a>'),t(g(f,null,{default:n((a,e,t,s)=>{if(!e)return[l("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[l("span",{class:"text-2xl"},"ğŸ“Š"),v(" Resumen ")]),l("div",{class:"space-y-3"},[l("div",{class:"flex items-center justify-between p-3 bg-base-bg rounded-lg"},[l("span",{class:"text-sm text-cafe/70"},"Total sesiones"),l("span",{class:"font-bold text-cafe text-lg"},r(o(K).total),1)]),l("div",{class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},[l("span",{class:"text-sm text-cafe/70"},"Completadas"),l("span",{class:"font-bold text-green-600 text-lg"},r(o(K).completadas),1)]),l("div",{class:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg"},[l("span",{class:"text-sm text-cafe/70"},"Pendientes"),l("span",{class:"font-bold text-yellow-600 text-lg"},r(o(K).pendientes),1)]),l("div",{class:"flex items-center justify-between p-3 bg-blue-50 rounded-lg"},[l("span",{class:"text-sm text-cafe/70"},"PrÃ³ximas"),l("span",{class:"font-bold text-blue-600 text-lg"},r(o(K).proximas),1)])])];e(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-cc632d3a${s}><span class="text-2xl" data-v-cc632d3a${s}>ğŸ“Š</span> Resumen </h2><div class="space-y-3" data-v-cc632d3a${s}><div class="flex items-center justify-between p-3 bg-base-bg rounded-lg" data-v-cc632d3a${s}><span class="text-sm text-cafe/70" data-v-cc632d3a${s}>Total sesiones</span><span class="font-bold text-cafe text-lg" data-v-cc632d3a${s}>${$(o(K).total)}</span></div><div class="flex items-center justify-between p-3 bg-green-50 rounded-lg" data-v-cc632d3a${s}><span class="text-sm text-cafe/70" data-v-cc632d3a${s}>Completadas</span><span class="font-bold text-green-600 text-lg" data-v-cc632d3a${s}>${$(o(K).completadas)}</span></div><div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg" data-v-cc632d3a${s}><span class="text-sm text-cafe/70" data-v-cc632d3a${s}>Pendientes</span><span class="font-bold text-yellow-600 text-lg" data-v-cc632d3a${s}>${$(o(K).pendientes)}</span></div><div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg" data-v-cc632d3a${s}><span class="text-sm text-cafe/70" data-v-cc632d3a${s}>PrÃ³ximas</span><span class="font-bold text-blue-600 text-lg" data-v-cc632d3a${s}>${$(o(K).proximas)}</span></div></div>`)}),_:1},s)),t(g(f,null,{default:n((a,e,t,s)=>{if(!e)return[l("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[l("span",{class:"text-2xl"},"ğŸ«"),v(" Bono Contratado ")]),o(M)?(x(),i("div",{key:0,class:"space-y-4"},[l("div",{class:"p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg"},[l("div",{class:"text-xs text-purple-700 font-medium mb-1"},"Tipo de Bono"),l("div",{class:"text-sm font-bold text-purple-900"},r(o(la)),1)]),l("div",{class:"text-center p-4 bg-gradient-to-br from-terracota/10 to-rosa/20 rounded-xl"},[l("div",{class:"text-4xl font-bold text-terracota mb-1"},r(o(M).sesiones_disponibles),1),l("div",{class:"text-sm text-cafe/70"}," de "+r(o(M).sesiones_totales)+" sesiones disponibles ",1)]),l("div",{class:"space-y-2"},[l("div",{class:"flex justify-between text-sm"},[l("span",{class:"text-cafe/70"},"Progreso"),l("span",{class:"font-medium text-cafe"},r(o(M).porcentaje_uso)+"%",1)]),l("div",{class:"w-full bg-gray-200 rounded-full h-2.5"},[l("div",{class:"h-2.5 rounded-full bg-gradient-to-r from-terracota to-rosa transition-all",style:{width:`${o(M).porcentaje_uso}%`}},null,4)])]),l("div",{class:"pt-3 border-t space-y-2 text-sm"},[l("div",{class:"flex justify-between"},[l("span",{class:"text-cafe/70"},"Sesiones usadas:"),l("span",{class:"font-medium text-cafe"},r(o(M).sesiones_usadas),1)]),l("div",{class:"flex justify-between"},[l("span",{class:"text-cafe/70"},"Monto total:"),l("span",{class:"font-medium text-cafe"},r(formatearPrecio(o(M).monto_total||o(M).precio)),1)]),l("div",{class:"flex justify-between"},[l("span",{class:"text-cafe/70"},"Precio por sesiÃ³n:"),l("span",{class:"font-medium text-cafe"},r(formatearPrecio((o(M).monto_total||o(M).precio)/o(M).sesiones_totales)),1)]),l("div",{class:"flex justify-between"},[l("span",{class:"text-cafe/70"},"Estado:"),l("span",{class:["font-medium capitalize",{"text-green-600":"activo"===o(M).estado,"text-yellow-600":"pendiente"===o(M).estado,"text-gray-600":"vencido"===o(M).estado}]},r(o(M).estado),3)])])])):(x(),i("div",{key:1,class:"text-center py-8"},[l("span",{class:"text-5xl mb-3 block opacity-40"},"ğŸ«"),l("p",{class:"text-sm text-cafe/50 mb-2"},"No hay bono activo"),l("p",{class:"text-xs text-cafe/40 mb-4"},[v(" Tipo de bono del paciente: "),l("strong",null,r(o(la)||"No definido"),1)]),l("button",{onClick:irABonos,class:"mt-2 text-sm text-terracota hover:text-cafe transition-colors font-medium"}," Gestionar bonos â†’ ")]))];e(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-cc632d3a${s}><span class="text-2xl" data-v-cc632d3a${s}>ğŸ«</span> Bono Contratado </h2>`),o(M)?e(`<div class="space-y-4" data-v-cc632d3a${s}><div class="p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg" data-v-cc632d3a${s}><div class="text-xs text-purple-700 font-medium mb-1" data-v-cc632d3a${s}>Tipo de Bono</div><div class="text-sm font-bold text-purple-900" data-v-cc632d3a${s}>${$(o(la))}</div></div><div class="text-center p-4 bg-gradient-to-br from-terracota/10 to-rosa/20 rounded-xl" data-v-cc632d3a${s}><div class="text-4xl font-bold text-terracota mb-1" data-v-cc632d3a${s}>${$(o(M).sesiones_disponibles)}</div><div class="text-sm text-cafe/70" data-v-cc632d3a${s}> de ${$(o(M).sesiones_totales)} sesiones disponibles </div></div><div class="space-y-2" data-v-cc632d3a${s}><div class="flex justify-between text-sm" data-v-cc632d3a${s}><span class="text-cafe/70" data-v-cc632d3a${s}>Progreso</span><span class="font-medium text-cafe" data-v-cc632d3a${s}>${$(o(M).porcentaje_uso)}%</span></div><div class="w-full bg-gray-200 rounded-full h-2.5" data-v-cc632d3a${s}><div class="h-2.5 rounded-full bg-gradient-to-r from-terracota to-rosa transition-all" style="${y({width:`${o(M).porcentaje_uso}%`})}" data-v-cc632d3a${s}></div></div></div><div class="pt-3 border-t space-y-2 text-sm" data-v-cc632d3a${s}><div class="flex justify-between" data-v-cc632d3a${s}><span class="text-cafe/70" data-v-cc632d3a${s}>Sesiones usadas:</span><span class="font-medium text-cafe" data-v-cc632d3a${s}>${$(o(M).sesiones_usadas)}</span></div><div class="flex justify-between" data-v-cc632d3a${s}><span class="text-cafe/70" data-v-cc632d3a${s}>Monto total:</span><span class="font-medium text-cafe" data-v-cc632d3a${s}>${$(formatearPrecio(o(M).monto_total||o(M).precio))}</span></div><div class="flex justify-between" data-v-cc632d3a${s}><span class="text-cafe/70" data-v-cc632d3a${s}>Precio por sesiÃ³n:</span><span class="font-medium text-cafe" data-v-cc632d3a${s}>${$(formatearPrecio((o(M).monto_total||o(M).precio)/o(M).sesiones_totales))}</span></div><div class="flex justify-between" data-v-cc632d3a${s}><span class="text-cafe/70" data-v-cc632d3a${s}>Estado:</span><span class="${h([{"text-green-600":"activo"===o(M).estado,"text-yellow-600":"pendiente"===o(M).estado,"text-gray-600":"vencido"===o(M).estado},"font-medium capitalize"])}" data-v-cc632d3a${s}>${$(o(M).estado)}</span></div></div></div>`):e(`<div class="text-center py-8" data-v-cc632d3a${s}><span class="text-5xl mb-3 block opacity-40" data-v-cc632d3a${s}>ğŸ«</span><p class="text-sm text-cafe/50 mb-2" data-v-cc632d3a${s}>No hay bono activo</p><p class="text-xs text-cafe/40 mb-4" data-v-cc632d3a${s}> Tipo de bono del paciente: <strong data-v-cc632d3a${s}>${$(o(la)||"No definido")}</strong></p><button class="mt-2 text-sm text-terracota hover:text-cafe transition-colors font-medium" data-v-cc632d3a${s}> Gestionar bonos â†’ </button></div>`)}),_:1},s)),t(g(f,null,{default:n((a,e,t,s)=>{if(!e)return[l("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[l("span",{class:"text-2xl"},"ğŸ“‹"),v(" Datos del Proceso ")]),l("div",{class:"space-y-3"},[l("div",{class:"p-3 bg-base-bg rounded-lg"},[l("div",{class:"text-xs text-cafe/60 mb-1"},"Primera sesiÃ³n"),l("div",{class:"text-sm font-medium text-cafe"},r(formatearFecha(o(aa))||"Sin registro"),1)]),l("div",{class:"p-3 bg-base-bg rounded-lg"},[l("div",{class:"text-xs text-cafe/60 mb-1"},"Ãšltima sesiÃ³n"),l("div",{class:"text-sm font-medium text-cafe"},r(formatearFecha(o(ea))||"Sin registro"),1)]),o(ta)?(x(),i("div",{key:0,class:"p-4 bg-gradient-to-br from-terracota/20 to-rosa/20 border-2 border-terracota/40 rounded-lg"},[l("div",{class:"text-xs font-medium text-terracota mb-2 flex items-center gap-1"},[l("span",null,"ğŸ“…"),l("span",null,"PrÃ³xima sesiÃ³n agendada")]),l("div",{class:"text-base font-bold text-cafe mb-3"},r(formatearFechaCompleta(o(ta).fecha_cita,o(ta).hora_inicio)),1),l("div",{class:"flex items-center gap-2 flex-wrap"},[l("span",{class:"text-xs px-3 py-1.5 bg-white border border-terracota/30 rounded-full font-medium flex items-center gap-1"},r(obtenerIconoModalidad(o(ta).modalidad))+" "+r(o(ta).modalidad),1),l("span",{class:["text-xs px-3 py-1.5 bg-white border border-terracota/30 rounded-full capitalize font-medium",{"text-green-600 border-green-300":"confirmada"===o(ta).estado,"text-yellow-600 border-yellow-300":"pendiente"===o(ta).estado,"text-blue-600 border-blue-300":"programada"===o(ta).estado}]},r(o(ta).estado),3)]),o(ta).notas?(x(),i("div",{key:0,class:"mt-3 pt-3 border-t border-terracota/20"},[l("div",{class:"text-xs text-cafe/70 mb-1"},"Notas:"),l("div",{class:"text-xs text-cafe"},r(o(ta).notas),1)])):p("",!0)])):(x(),i("div",{key:1,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[l("div",{class:"text-center"},[l("span",{class:"text-3xl mb-2 block"},"â°"),l("div",{class:"text-sm font-medium text-yellow-800 mb-1"},"No hay sesiÃ³n agendada"),l("div",{class:"text-xs text-yellow-700"},"Recuerda agendar la prÃ³xima sesiÃ³n"),l("button",{onClick:agendarSesion,class:"mt-3 px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors text-xs font-medium"}," Agendar ahora ")])])),l("div",{class:"p-3 bg-base-bg rounded-lg"},[l("div",{class:"text-xs text-cafe/60 mb-1"},"En proceso desde"),l("div",{class:"text-sm font-medium text-cafe"},r(calcularTiempoProceso(o(R).created_at)),1)])])];e(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-cc632d3a${s}><span class="text-2xl" data-v-cc632d3a${s}>ğŸ“‹</span> Datos del Proceso </h2><div class="space-y-3" data-v-cc632d3a${s}><div class="p-3 bg-base-bg rounded-lg" data-v-cc632d3a${s}><div class="text-xs text-cafe/60 mb-1" data-v-cc632d3a${s}>Primera sesiÃ³n</div><div class="text-sm font-medium text-cafe" data-v-cc632d3a${s}>${$(formatearFecha(o(aa))||"Sin registro")}</div></div><div class="p-3 bg-base-bg rounded-lg" data-v-cc632d3a${s}><div class="text-xs text-cafe/60 mb-1" data-v-cc632d3a${s}>Ãšltima sesiÃ³n</div><div class="text-sm font-medium text-cafe" data-v-cc632d3a${s}>${$(formatearFecha(o(ea))||"Sin registro")}</div></div>`),o(ta)?(e(`<div class="p-4 bg-gradient-to-br from-terracota/20 to-rosa/20 border-2 border-terracota/40 rounded-lg" data-v-cc632d3a${s}><div class="text-xs font-medium text-terracota mb-2 flex items-center gap-1" data-v-cc632d3a${s}><span data-v-cc632d3a${s}>ğŸ“…</span><span data-v-cc632d3a${s}>PrÃ³xima sesiÃ³n agendada</span></div><div class="text-base font-bold text-cafe mb-3" data-v-cc632d3a${s}>${$(formatearFechaCompleta(o(ta).fecha_cita,o(ta).hora_inicio))}</div><div class="flex items-center gap-2 flex-wrap" data-v-cc632d3a${s}><span class="text-xs px-3 py-1.5 bg-white border border-terracota/30 rounded-full font-medium flex items-center gap-1" data-v-cc632d3a${s}>${$(obtenerIconoModalidad(o(ta).modalidad))} ${$(o(ta).modalidad)}</span><span class="${h([{"text-green-600 border-green-300":"confirmada"===o(ta).estado,"text-yellow-600 border-yellow-300":"pendiente"===o(ta).estado,"text-blue-600 border-blue-300":"programada"===o(ta).estado},"text-xs px-3 py-1.5 bg-white border border-terracota/30 rounded-full capitalize font-medium"])}" data-v-cc632d3a${s}>${$(o(ta).estado)}</span></div>`),o(ta).notas?e(`<div class="mt-3 pt-3 border-t border-terracota/20" data-v-cc632d3a${s}><div class="text-xs text-cafe/70 mb-1" data-v-cc632d3a${s}>Notas:</div><div class="text-xs text-cafe" data-v-cc632d3a${s}>${$(o(ta).notas)}</div></div>`):e("\x3c!----\x3e"),e("</div>")):e(`<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg" data-v-cc632d3a${s}><div class="text-center" data-v-cc632d3a${s}><span class="text-3xl mb-2 block" data-v-cc632d3a${s}>â°</span><div class="text-sm font-medium text-yellow-800 mb-1" data-v-cc632d3a${s}>No hay sesiÃ³n agendada</div><div class="text-xs text-yellow-700" data-v-cc632d3a${s}>Recuerda agendar la prÃ³xima sesiÃ³n</div><button class="mt-3 px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors text-xs font-medium" data-v-cc632d3a${s}> Agendar ahora </button></div></div>`),e(`<div class="p-3 bg-base-bg rounded-lg" data-v-cc632d3a${s}><div class="text-xs text-cafe/60 mb-1" data-v-cc632d3a${s}>En proceso desde</div><div class="text-sm font-medium text-cafe" data-v-cc632d3a${s}>${$(calcularTiempoProceso(o(R).created_at))}</div></div></div>`)}),_:1},s)),t('</div><div class="mb-6" data-v-cc632d3a><div class="border-b border-gray-200" data-v-cc632d3a><nav class="-mb-px flex space-x-8 overflow-x-auto" data-v-cc632d3a>\x3c!--[--\x3e'),w(o(Q),a=>{t(`<button class="${h([o(O)===a.id?"border-terracota text-terracota":"border-transparent text-cafe/60 hover:text-cafe hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"])}" data-v-cc632d3a><span class="mr-2" data-v-cc632d3a>${$(a.icono)}</span><span data-v-cc632d3a>${$(a.nombre)}</span>`),a.badge?t(`<span class="ml-2 px-2 py-0.5 text-xs rounded-full bg-terracota text-white" data-v-cc632d3a>${$(a.badge)}</span>`):t("\x3c!----\x3e"),t("</button>")}),t('\x3c!--]--\x3e</nav></div></div><div class="space-y-6" data-v-cc632d3a>'),"proximas"===o(O)?(t("<div data-v-cc632d3a>"),t(g(f,null,{default:n((a,e,t,s)=>{if(!e)return[l("div",{class:"flex items-center justify-between mb-4"},[l("h3",{class:"text-lg font-serif font-semibold text-cafe"},"PrÃ³ximas Sesiones Agendadas"),l("button",{onClick:agendarSesion,class:"text-sm text-terracota hover:text-cafe transition-colors"}," + Nueva sesiÃ³n ")]),o(Y).length>0?(x(),i("div",{key:0,class:"space-y-3"},[(x(!0),i(m,null,u(o(Y),a=>(x(),i("div",{key:a.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[l("div",{class:"flex items-start justify-between gap-4"},[l("div",{class:"flex-1"},[l("div",{class:"flex items-center gap-2 mb-2"},[l("span",{class:"text-lg font-semibold text-cafe"},r(formatearFecha(a.fecha_cita)),1),l("span",{class:"text-base font-medium text-terracota"},r(a.hora_inicio)+" - "+r(a.hora_fin),1)]),l("div",{class:"flex flex-wrap items-center gap-2 mb-2"},[l("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(a.modalidad)]},r(obtenerIconoModalidad(a.modalidad))+" "+r(a.modalidad),3),l("span",{class:["px-2 py-0.5 text-xs rounded-full capitalize",obtenerEstiloEstado(a.estado)]},r(a.estado),3)]),a.observaciones?(x(),i("p",{key:0,class:"text-sm text-cafe/60 mt-2"},r(a.observaciones),1)):p("",!0)]),l("button",{onClick:e=>verDetallesCita(a.id),class:"px-3 py-1.5 text-sm bg-white border border-terracota/30 text-terracota hover:bg-terracota hover:text-white rounded-lg transition-colors"}," Ver detalles ",8,["onClick"])])]))),128))])):(x(),i("div",{key:1,class:"text-center py-12"},[l("span",{class:"text-6xl mb-3 block opacity-40"},"ğŸ“…"),l("p",{class:"text-cafe/60 mb-4"},"No hay sesiones prÃ³ximas agendadas"),l("button",{onClick:agendarSesion,class:"px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors"}," Agendar primera sesiÃ³n ")]))];e(`<div class="flex items-center justify-between mb-4" data-v-cc632d3a${s}><h3 class="text-lg font-serif font-semibold text-cafe" data-v-cc632d3a${s}>PrÃ³ximas Sesiones Agendadas</h3><button class="text-sm text-terracota hover:text-cafe transition-colors" data-v-cc632d3a${s}> + Nueva sesiÃ³n </button></div>`),o(Y).length>0?(e(`<div class="space-y-3" data-v-cc632d3a${s}>\x3c!--[--\x3e`),w(o(Y),a=>{e(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-cc632d3a${s}><div class="flex items-start justify-between gap-4" data-v-cc632d3a${s}><div class="flex-1" data-v-cc632d3a${s}><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${s}><span class="text-lg font-semibold text-cafe" data-v-cc632d3a${s}>${$(formatearFecha(a.fecha_cita))}</span><span class="text-base font-medium text-terracota" data-v-cc632d3a${s}>${$(a.hora_inicio)} - ${$(a.hora_fin)}</span></div><div class="flex flex-wrap items-center gap-2 mb-2" data-v-cc632d3a${s}><span class="${h([obtenerEstiloModalidad(a.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-cc632d3a${s}>${$(obtenerIconoModalidad(a.modalidad))} ${$(a.modalidad)}</span><span class="${h([obtenerEstiloEstado(a.estado),"px-2 py-0.5 text-xs rounded-full capitalize"])}" data-v-cc632d3a${s}>${$(a.estado)}</span></div>`),a.observaciones?e(`<p class="text-sm text-cafe/60 mt-2" data-v-cc632d3a${s}>${$(a.observaciones)}</p>`):e("\x3c!----\x3e"),e(`</div><button class="px-3 py-1.5 text-sm bg-white border border-terracota/30 text-terracota hover:bg-terracota hover:text-white rounded-lg transition-colors" data-v-cc632d3a${s}> Ver detalles </button></div></div>`)}),e("\x3c!--]--\x3e</div>")):e(`<div class="text-center py-12" data-v-cc632d3a${s}><span class="text-6xl mb-3 block opacity-40" data-v-cc632d3a${s}>ğŸ“…</span><p class="text-cafe/60 mb-4" data-v-cc632d3a${s}>No hay sesiones prÃ³ximas agendadas</p><button class="px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors" data-v-cc632d3a${s}> Agendar primera sesiÃ³n </button></div>`)}),_:1},s)),t("</div>")):t("\x3c!----\x3e"),"completadas"===o(O)?(t("<div data-v-cc632d3a>"),t(g(f,null,{default:n((a,e,t,s)=>{if(!e)return[l("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Historial de Sesiones Completadas"),o(X).length>0?(x(),i("div",{key:0,class:"space-y-3"},[(x(!0),i(m,null,u(o(X),a=>(x(),i("div",{key:a.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[l("div",{class:"flex items-start justify-between gap-4"},[l("div",{class:"flex-1"},[l("div",{class:"flex items-center gap-2 mb-2"},[l("span",{class:"text-base font-semibold text-cafe"},r(formatearFecha(a.fecha_cita)),1),l("span",{class:"text-sm text-cafe/60"},r(a.hora_inicio)+" - "+r(a.hora_fin),1),l("span",{class:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700"}," âœ“ Realizada ")]),l("div",{class:"flex items-center gap-2 mb-2"},[l("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(a.modalidad)]},r(obtenerIconoModalidad(a.modalidad))+" "+r(a.modalidad),3)]),a.notas_terapeuta?(x(),i("p",{key:0,class:"text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100"},[l("strong",{class:"text-cafe"},"Notas:"),v(" "+r(a.notas_terapeuta),1)])):a.observaciones?(x(),i("p",{key:1,class:"text-sm text-cafe/60 mt-2"},r(a.observaciones),1)):p("",!0)])])]))),128))])):(x(),i("div",{key:1,class:"text-center py-12"},[l("span",{class:"text-6xl mb-3 block opacity-40"},"ğŸ“"),l("p",{class:"text-cafe/60"},"AÃºn no hay sesiones completadas")]))];e(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-cc632d3a${s}>Historial de Sesiones Completadas</h3>`),o(X).length>0?(e(`<div class="space-y-3" data-v-cc632d3a${s}>\x3c!--[--\x3e`),w(o(X),a=>{e(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-cc632d3a${s}><div class="flex items-start justify-between gap-4" data-v-cc632d3a${s}><div class="flex-1" data-v-cc632d3a${s}><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${s}><span class="text-base font-semibold text-cafe" data-v-cc632d3a${s}>${$(formatearFecha(a.fecha_cita))}</span><span class="text-sm text-cafe/60" data-v-cc632d3a${s}>${$(a.hora_inicio)} - ${$(a.hora_fin)}</span><span class="px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700" data-v-cc632d3a${s}> âœ“ Realizada </span></div><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${s}><span class="${h([obtenerEstiloModalidad(a.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-cc632d3a${s}>${$(obtenerIconoModalidad(a.modalidad))} ${$(a.modalidad)}</span></div>`),a.notas_terapeuta?e(`<p class="text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100" data-v-cc632d3a${s}><strong class="text-cafe" data-v-cc632d3a${s}>Notas:</strong> ${$(a.notas_terapeuta)}</p>`):a.observaciones?e(`<p class="text-sm text-cafe/60 mt-2" data-v-cc632d3a${s}>${$(a.observaciones)}</p>`):e("\x3c!----\x3e"),e("</div></div></div>")}),e("\x3c!--]--\x3e</div>")):e(`<div class="text-center py-12" data-v-cc632d3a${s}><span class="text-6xl mb-3 block opacity-40" data-v-cc632d3a${s}>ğŸ“</span><p class="text-cafe/60" data-v-cc632d3a${s}>AÃºn no hay sesiones completadas</p></div>`)}),_:1},s)),t("</div>")):t("\x3c!----\x3e"),"pendientes"===o(O)?(t("<div data-v-cc632d3a>"),t(g(f,null,{default:n((a,e,t,s)=>{if(!e)return[l("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Sesiones Pendientes de ConfirmaciÃ³n"),o(Z).length>0?(x(),i("div",{key:0,class:"space-y-3"},[(x(!0),i(m,null,u(o(Z),a=>(x(),i("div",{key:a.id,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[l("div",{class:"flex items-start justify-between gap-4"},[l("div",{class:"flex-1"},[l("div",{class:"flex items-center gap-2 mb-2"},[l("span",{class:"text-lg"},"â³"),l("span",{class:"text-base font-semibold text-cafe"},r(formatearFecha(a.fecha_cita)),1),l("span",{class:"text-base font-medium text-terracota"},r(a.hora_inicio)+" - "+r(a.hora_fin),1)]),l("div",{class:"flex items-center gap-2 mb-2"},[l("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(a.modalidad)]},r(obtenerIconoModalidad(a.modalidad))+" "+r(a.modalidad),3),l("span",{class:"px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700"}," Pendiente de confirmar ")]),a.observaciones?(x(),i("p",{key:0,class:"text-sm text-cafe/60 mt-2"},r(a.observaciones),1)):p("",!0)]),l("div",{class:"flex gap-2"},[l("button",{onClick:e=>(async a=>{try{const{data:e,error:t}=await k.rpc("confirmar_cita_y_descontar_bono",{p_cita_id:a});if(t)throw t;if(!e.success)return console.error("Error en la confirmaciÃ³n:",e.error),void alert(e.error||"Error al confirmar la cita");let s=`Cita confirmada con ${e.paciente_nombre||"paciente"}`;e.bono_id&&(s+=`\nSesiones restantes en bono: ${e.sesiones_restantes}`,e.bono_agotado?s+="\nâš ï¸ BONO AGOTADO":e.sesiones_restantes<=2&&(s+="\nâš ï¸ Pocas sesiones restantes")),alert(s),await cargarDatosPaciente()}catch(a){console.error("Error al confirmar cita:",a),alert("Error al confirmar la cita: "+a.message)}})(a.id),class:"px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," âœ“ Confirmar ",8,["onClick"]),l("button",{onClick:e=>verDetallesCita(a.id),class:"px-3 py-1.5 text-sm bg-white border border-terracota/30 text-terracota hover:bg-terracota hover:text-white rounded-lg transition-colors"}," Ver ",8,["onClick"])])])]))),128))])):(x(),i("div",{key:1,class:"text-center py-12"},[l("span",{class:"text-6xl mb-3 block opacity-40"},"âœ…"),l("p",{class:"text-cafe/60"},"No hay sesiones pendientes de confirmaciÃ³n")]))];e(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-cc632d3a${s}>Sesiones Pendientes de ConfirmaciÃ³n</h3>`),o(Z).length>0?(e(`<div class="space-y-3" data-v-cc632d3a${s}>\x3c!--[--\x3e`),w(o(Z),a=>{e(`<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg" data-v-cc632d3a${s}><div class="flex items-start justify-between gap-4" data-v-cc632d3a${s}><div class="flex-1" data-v-cc632d3a${s}><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${s}><span class="text-lg" data-v-cc632d3a${s}>â³</span><span class="text-base font-semibold text-cafe" data-v-cc632d3a${s}>${$(formatearFecha(a.fecha_cita))}</span><span class="text-base font-medium text-terracota" data-v-cc632d3a${s}>${$(a.hora_inicio)} - ${$(a.hora_fin)}</span></div><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${s}><span class="${h([obtenerEstiloModalidad(a.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-cc632d3a${s}>${$(obtenerIconoModalidad(a.modalidad))} ${$(a.modalidad)}</span><span class="px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700" data-v-cc632d3a${s}> Pendiente de confirmar </span></div>`),a.observaciones?e(`<p class="text-sm text-cafe/60 mt-2" data-v-cc632d3a${s}>${$(a.observaciones)}</p>`):e("\x3c!----\x3e"),e(`</div><div class="flex gap-2" data-v-cc632d3a${s}><button class="px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors" data-v-cc632d3a${s}> âœ“ Confirmar </button><button class="px-3 py-1.5 text-sm bg-white border border-terracota/30 text-terracota hover:bg-terracota hover:text-white rounded-lg transition-colors" data-v-cc632d3a${s}> Ver </button></div></div></div>`)}),e("\x3c!--]--\x3e</div>")):e(`<div class="text-center py-12" data-v-cc632d3a${s}><span class="text-6xl mb-3 block opacity-40" data-v-cc632d3a${s}>âœ…</span><p class="text-cafe/60" data-v-cc632d3a${s}>No hay sesiones pendientes de confirmaciÃ³n</p></div>`)}),_:1},s)),t("</div>")):t("\x3c!----\x3e"),"anteriores"===o(O)?(t("<div data-v-cc632d3a>"),t(g(f,null,{default:n((a,e,t,s)=>{if(!e)return[l("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"}," Historial Completo de Sesiones "),o(J).length>0?(x(),i("div",{key:0,class:"space-y-3"},[(x(!0),i(m,null,u(o(J),a=>(x(),i("div",{key:a.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[l("div",{class:"flex items-start justify-between gap-4"},[l("div",{class:"flex-1"},[l("div",{class:"flex items-center gap-2 mb-2"},[l("span",{class:"text-base font-semibold text-cafe"},r(formatearFecha(a.fecha_cita)),1),l("span",{class:"text-sm text-cafe/60"},r(a.hora_inicio)+" - "+r(a.hora_fin),1)]),l("div",{class:"flex flex-wrap items-center gap-2"},[l("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(a.modalidad)]},r(obtenerIconoModalidad(a.modalidad))+" "+r(a.modalidad),3),l("span",{class:["px-2 py-0.5 text-xs rounded-full capitalize",obtenerEstiloEstado(a.estado)]},r(a.estado),3)])])])]))),128))])):(x(),i("div",{key:1,class:"text-center py-12"},[l("span",{class:"text-6xl mb-3 block opacity-40"},"ğŸ“š"),l("p",{class:"text-cafe/60"},"No hay sesiones registradas")]))];e(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-cc632d3a${s}> Historial Completo de Sesiones </h3>`),o(J).length>0?(e(`<div class="space-y-3" data-v-cc632d3a${s}>\x3c!--[--\x3e`),w(o(J),a=>{e(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-cc632d3a${s}><div class="flex items-start justify-between gap-4" data-v-cc632d3a${s}><div class="flex-1" data-v-cc632d3a${s}><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${s}><span class="text-base font-semibold text-cafe" data-v-cc632d3a${s}>${$(formatearFecha(a.fecha_cita))}</span><span class="text-sm text-cafe/60" data-v-cc632d3a${s}>${$(a.hora_inicio)} - ${$(a.hora_fin)}</span></div><div class="flex flex-wrap items-center gap-2" data-v-cc632d3a${s}><span class="${h([obtenerEstiloModalidad(a.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-cc632d3a${s}>${$(obtenerIconoModalidad(a.modalidad))} ${$(a.modalidad)}</span><span class="${h([obtenerEstiloEstado(a.estado),"px-2 py-0.5 text-xs rounded-full capitalize"])}" data-v-cc632d3a${s}>${$(a.estado)}</span></div></div></div></div>`)}),e("\x3c!--]--\x3e</div>")):e(`<div class="text-center py-12" data-v-cc632d3a${s}><span class="text-6xl mb-3 block opacity-40" data-v-cc632d3a${s}>ğŸ“š</span><p class="text-cafe/60" data-v-cc632d3a${s}>No hay sesiones registradas</p></div>`)}),_:1},s)),t("</div>")):t("\x3c!----\x3e"),t('</div><div class="mt-6" data-v-cc632d3a>'),t(g(f,null,{default:n((a,e,t,s)=>{if(!e)return[l("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[l("span",{class:"text-2xl"},"ğŸ“"),v(" Notas ClÃ­nicas Privadas ")]),l(_,{"paciente-id":o(B),contenido:o(H),"ultima-actualizacion":o(V)||void 0,onGuardar:guardarNotas},null,8,["paciente-id","contenido","ultima-actualizacion"])];e(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-cc632d3a${s}><span class="text-2xl" data-v-cc632d3a${s}>ğŸ“</span> Notas ClÃ­nicas Privadas </h2>`),e(g(_,{"paciente-id":o(B),contenido:o(H),"ultima-actualizacion":o(V)||void 0,onGuardar:guardarNotas},null,t,s))}),_:1},s)),t("</div></div>")):t("\x3c!----\x3e"),t(g(S,{mostrar:o(F),"paciente-preseleccionado":o(U),onCerrar:cerrarModalCita,onCitaCreada:onCitaCreada},null,s)),t(g(A,{"is-open":o(L),"cita-id":o(W),onClose:cerrarModalDetalles},null,s)),t("</div>")}}}),q=B.setup;B.setup=(a,e)=>{const t=f();return(t.modules||(t.modules=new Set)).add("pages/terapeuta/pacientes/[id].vue"),q?q(a,e):void 0};const I=k(B,[["__scopeId","data-v-cc632d3a"]]);export{I as default};
//# sourceMappingURL=_id_-BJ7z77Gn.mjs.map
