import{_ as e}from"./DashboardCard-DLsboU2i.mjs";import{v as t,e as a,h as s,a as r,s as o}from"./server.mjs";import{_ as n}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{_ as l}from"./ModalNuevaCita-CAxtnDaO.mjs";import{M as d}from"./ModalDetallesCita-LTSdOklK.mjs";import{u as i}from"./useCitas-DyEZH6RI.mjs";import{u as c}from"./useSupabaseClient-DykwVqLQ.mjs";import"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../_/shared.cjs.prod.mjs";import"../virtual/_commonjsHelpers.mjs";import"node:stream";import"../_/index2.mjs";import"@supabase/supabase-js";import"@vercel/analytics/nuxt";import"./useSupabase-DfFg84CY.mjs";import"./CheckCircleIcon-CT9fzVFs.mjs";import"./CalendarIcon-BrsGHJBC.mjs";import"./TicketIcon-zZdrc71S.mjs";import"./MagnifyingGlassIcon-GsbNDyPZ.mjs";import"./XCircleIcon-Cr4IlpzV.mjs";import"./UserIcon-CrHYaeI9.mjs";import"./ExclamationTriangleIcon-DQdM2y0F.mjs";import"./UserGroupIcon-BhthmHUw.mjs";import"./ClockIcon-BxdFtPqx.mjs";import"./DocumentTextIcon-O51EkPyw.mjs";import"./PhoneIcon-acGzPaDV.mjs";import"./CheckBadgeIcon-DjhxLc-3.mjs";import"./PaymentMethodSelector-B6WAV7CR.mjs";import"./useToast-CW-71pJZ.mjs";import"./ModalNuevoBono-Mje0VtwW.mjs";import"./useBonos-B2-LOzOF.mjs";import"./XMarkIcon-DCLwyE-W.mjs";import"./PencilIcon-BKWXEWgS.mjs";import"./CalendarDaysIcon-f8DhK37e.mjs";import"./ChevronDownIcon-CvdhRGll.mjs";import"./PlusIcon-CHLzv-V9.mjs";const p={__name:"NotasPrivadas",__ssrInlineRender:!0,props:{pacienteId:{type:String,required:!0},contenido:{type:String,default:""},ultimaActualizacion:{type:String,default:null}},emits:["guardar","actualizar"],setup(e,{emit:a}){const s=e,r=t.ref(!1),n=t.ref(!1),l=t.ref(s.contenido),d=t.ref(s.contenido);t.ref(null),t.watch(()=>s.contenido,e=>{r.value||(l.value=e,d.value=e)});const formatearFecha=e=>{if(!e)return"";return new Date(e).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})};return(a,s,d,i)=>{s(`<div${o.ssrRenderAttrs(t.mergeProps({class:"bg-white rounded-xl shadow-sm border border-[#E2E8F0]/40 p-6"},i))} data-v-b66842cb><div class="flex items-center justify-between mb-4" data-v-b66842cb><h3 class="font-serif text-lg font-semibold text-cafe flex items-center gap-2" data-v-b66842cb><span class="text-xl" data-v-b66842cb>üìù</span> Notas Cl√≠nicas Privadas </h3>`),t.unref(r)?s("\x3c!----\x3e"):s('<button class="px-3 py-1.5 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors" data-v-b66842cb> ‚úèÔ∏è Editar </button>'),s('</div><div class="mb-4 p-3 bg-rosa/20 border border-rosa rounded-lg" data-v-b66842cb><p class="text-xs text-cafe/70 flex items-start gap-2" data-v-b66842cb><span class="text-purple-600" data-v-b66842cb>üîí</span><span data-v-b66842cb> Esta informaci√≥n es estrictamente confidencial y solo visible para ti como terapeuta. Cumple con los est√°ndares de protecci√≥n de datos cl√≠nicos. </span></p></div>'),t.unref(r)?(s(`<div data-v-b66842cb><textarea placeholder="Anota observaciones, reflexiones o aspectos a seguir trabajando...\n\n‚Ä¢ Progreso observado en la sesi√≥n\n‚Ä¢ Temas pendientes de abordar\n‚Ä¢ Estrategias que funcionan\n‚Ä¢ Aspectos que requieren atenci√≥n" class="w-full min-h-[300px] px-4 py-3 bg-base-bg rounded-lg border border-purple-600/30 focus:border-purple-600 focus:outline-none focus:ring-2 focus:ring-purple-300/20 transition-all text-cafe resize-y" data-v-b66842cb>${o.ssrInterpolate(t.unref(l))}</textarea><div class="mt-2 flex items-center justify-between text-xs text-cafe/60" data-v-b66842cb><span data-v-b66842cb> üí° Presiona Cmd/Ctrl + Enter para guardar r√°pidamente </span>`),e.ultimaActualizacion?s(`<span data-v-b66842cb> √öltima actualizaci√≥n: ${o.ssrInterpolate(formatearFecha(e.ultimaActualizacion))}</span>`):s("\x3c!----\x3e"),s(`</div><div class="mt-4 flex items-center gap-3" data-v-b66842cb><button${o.ssrIncludeBooleanAttr(t.unref(n))?" disabled":""} class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2" data-v-b66842cb>`),t.unref(n)?s("<span data-v-b66842cb>‚è≥</span>"):s("<span data-v-b66842cb>üíæ</span>"),s(`<span data-v-b66842cb>${o.ssrInterpolate(t.unref(n)?"Guardando...":"Guardar cambios")}</span></button><button${o.ssrIncludeBooleanAttr(t.unref(n))?" disabled":""} class="px-4 py-2 bg-white border border-cafe/20 text-cafe rounded-lg hover:bg-gray-50 transition-colors" data-v-b66842cb> Cancelar </button></div></div>`)):(s('<div class="min-h-[200px]" data-v-b66842cb>'),t.unref(l)?s(`<div class="prose prose-sm max-w-none text-cafe/80 whitespace-pre-wrap" data-v-b66842cb>${o.ssrInterpolate(t.unref(l))}</div>`):s('<div class="text-center py-8" data-v-b66842cb><span class="text-5xl mb-3 block opacity-40" data-v-b66842cb>üìã</span><p class="text-cafe/50 italic" data-v-b66842cb> A√∫n no hay notas registradas para este paciente </p><button class="mt-4 px-4 py-2 text-sm bg-purple-600/10 text-purple-600 rounded-lg hover:bg-purple-600/20 transition-colors" data-v-b66842cb> A√±adir primera nota </button></div>'),s("</div>")),!t.unref(r)&&e.ultimaActualizacion?s(`<div class="mt-4 pt-4 border-t border-gray-100" data-v-b66842cb><p class="text-xs text-cafe/50" data-v-b66842cb> √öltima modificaci√≥n: ${o.ssrInterpolate(formatearFecha(e.ultimaActualizacion))}</p></div>`):s("\x3c!----\x3e"),s("</div>")}}},x=p.setup;p.setup=(e,a)=>{const s=t.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/NotasPrivadas.vue"),x?x(e,a):void 0};const u=n(p,[["__scopeId","data-v-b66842cb"]]),f=t.defineComponent({__name:"[id]",__ssrInlineRender:!0,setup(n){const p=c(),x=a(),{getCitas:f}=i(),v=s(),m=r(),b=t.computed(()=>v.params.id||""),g=t.ref(!0),y=t.ref(null),$=t.ref(null),h=t.ref(null),N=t.ref([]),V=t.ref(""),w=t.ref(null),_=t.ref([]),k=(new Date).getFullYear(),C=t.ref(k),D=t.ref(k),S=t.ref(""),B=t.ref(""),I=t.computed(()=>{const e=[];for(let t=k;t>=k-4;t--)e.push(t);return e}),j=t.ref("proximas"),R=t.ref(!1),P=t.ref(null),A=t.ref(!1),T=t.ref(null),E=t.computed(()=>[{id:"proximas",nombre:"Pr√≥ximas Sesiones",icono:"üìÖ",badge:q.value.proximas||null},{id:"completadas",nombre:"Completadas",icono:"‚úÖ",badge:q.value.completadas||null},{id:"pendientes",nombre:"Pendientes",icono:"‚è≥",badge:q.value.pendientes||null},{id:"anteriores",nombre:"Historial",icono:"üìö",badge:null}]),cargarDatosPaciente=async()=>{g.value=!0,y.value=null;try{if(!x.value)return void(y.value="Usuario no autenticado");const{data:e,error:t}=await p.from("pacientes").select("*").eq("id",b.value).single();if(t)throw t;const a=e.nombre_completo||e.email||"Sin nombre";$.value={...e,nombre_completo:a,email:e.email||"",telefono:e.telefono||""};const s=await f();N.value=s.filter(e=>e.paciente_id===b.value),await cargarBonoActivo(),await cargarPagos(),await cargarNotas()}catch(e){console.error("Error al cargar paciente:",e),y.value=e.message||"Error desconocido"}finally{g.value=!1}},cargarBonoActivo=async()=>{try{const{data:e,error:t}=await p.from("bonos").select("*").eq("paciente_id",b.value).in("estado",["activo","pendiente"]).gt("sesiones_restantes",0).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(t)return void console.warn("[Bonos] Error en consulta:",t.message);if(e){const t=e.sesiones_totales||0,a=e.sesiones_restantes||0,s=t-a;h.value={...e,sesiones_usadas:s,sesiones_disponibles:a,porcentaje_uso:t>0?Math.round(s/t*100):0},console.info(`[Bonos] Bono activo cargado para paciente: ${e.tipo} (${a}/${t} disponibles)`)}else h.value=null,console.info("[Bonos] No se encontr√≥ bono activo para este paciente")}catch(e){console.warn("[Bonos] Error inesperado:",e)}},cargarPagos=async()=>{try{const{data:e,error:t}=await p.from("pagos").select("*").eq("paciente_id",b.value).order("created_at",{ascending:!1});if(t)return void console.warn("[Pagos] Error al cargar:",t.message);_.value=e||[],console.info(`[Pagos] Cargados ${_.value.length} pagos para el paciente`)}catch(e){console.warn("[Pagos] Error inesperado:",e)}},cargarNotas=async()=>{try{const{data:e}=await p.from("notas_terapeuticas").select("contenido, updated_at").eq("paciente_id",b.value).eq("terapeuta_id",x.value?.id).order("updated_at",{ascending:!1}).limit(1).maybeSingle();e&&(V.value=e.contenido||"",w.value=e.updated_at)}catch(e){console.error("Error al cargar notas:",e)}},guardarNotas=async({pacienteId:e,contenido:t})=>{try{const{data:a}=await p.from("notas_terapeuticas").select("id").eq("paciente_id",e).eq("terapeuta_id",x.value?.id).maybeSingle();a?await p.from("notas_terapeuticas").update({contenido:t,updated_at:(new Date).toISOString()}).eq("id",a.id):await p.from("notas_terapeuticas").insert({paciente_id:e,terapeuta_id:x.value?.id,contenido:t}),V.value=t,w.value=(new Date).toISOString()}catch(e){throw console.error("Error al guardar notas:",e),e}},z=t.computed(()=>{const e=new Date;return N.value.filter(t=>["pendiente","confirmada"].includes(t.estado)&&new Date(t.fecha_cita)>=e).sort((e,t)=>new Date(e.fecha_cita).getTime()-new Date(t.fecha_cita).getTime())}),L=t.computed(()=>N.value.filter(e=>"realizada"===e.estado).sort((e,t)=>new Date(t.fecha_cita).getTime()-new Date(e.fecha_cita).getTime())),F=t.computed(()=>N.value.filter(e=>"pendiente"===e.estado).sort((e,t)=>new Date(e.fecha_cita).getTime()-new Date(t.fecha_cita).getTime())),M=t.computed(()=>N.value.sort((e,t)=>new Date(t.fecha_cita).getTime()-new Date(e.fecha_cita).getTime())),q=t.computed(()=>({total:N.value.length,completadas:L.value.length,pendientes:F.value.length,proximas:z.value.length})),U=t.computed(()=>{const e=C.value,t=N.value.filter(t=>new Date(t.fecha_cita).getFullYear()===e);return{total:t.length,realizadas:t.filter(e=>"realizada"===e.estado).length,canceladas:t.filter(e=>"cancelada"===e.estado).length,programadas:t.filter(e=>["pendiente","confirmada"].includes(e.estado)).length}}),H=t.computed(()=>{const e=D.value,t=_.value.filter(t=>new Date(t.created_at||t.fecha).getFullYear()===e&&"pendiente"===t.estado),a=N.value.filter(t=>new Date(t.fecha_cita).getFullYear()===e&&"realizada"===t.estado&&!t.pagado),s=t.reduce((e,t)=>e+(t.monto||0),0),r=a.reduce((e,t)=>e+(t.precio_sesion||0),0);return{totalPendiente:s+r,cantidadPendientes:t.length+a.length,haDeuda:s+r>0}}),G=t.computed(()=>{let e=[...N.value];if(S.value){const t=new Date(S.value);e=e.filter(e=>new Date(e.fecha_cita)>=t)}if(B.value){const t=new Date(B.value);e=e.filter(e=>new Date(e.fecha_cita)<=t)}return e.sort((e,t)=>new Date(t.fecha_cita).getTime()-new Date(e.fecha_cita).getTime())}),O=t.computed(()=>{const e=L.value;return e.length>0?e[e.length-1].fecha_cita:null}),W=t.computed(()=>{const e=L.value;return e.length>0?e[0].fecha_cita:null}),Y=t.computed(()=>z.value.length>0?z.value[0]:null),X=t.computed(()=>$.value?.nombre_completo||"Sin nombre"),Z=t.computed(()=>{if(!X.value)return"?";const e=X.value.split(" ");return e.length>=2&&e[0]&&e[1]?`${e[0][0]}${e[1][0]}`.toUpperCase():X.value.substring(0,2).toUpperCase()}),K=t.computed(()=>{const e=["#D8AFA0","#C89B8A","#B7C6B0","#A8C5B5","#D4A5A5","#C4B5A0"];return e[b.value.charCodeAt(0)%e.length]}),Q=t.computed(()=>$.value?$.value.activo?$.value.metadata?.en_pausa?"En pausa":"En proceso":"Finalizado":""),J=t.computed(()=>$.value?$.value.activo?$.value.metadata?.en_pausa?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700":"bg-gray-100 text-gray-600":""),ee=t.computed(()=>{if(!$.value?.tipo_bono)return"";return{a_demanda:"A Demanda (1 sesi√≥n)",quincenal:"Quincenal (2 sesiones/mes)",semanal:"Semanal (4 sesiones/mes)"}[$.value.tipo_bono]||$.value.tipo_bono}),formatearFecha=e=>{if(!e)return"";try{return new Date(e+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}catch{return e}},formatearFechaCompleta=(e,t)=>{if(!e)return"";try{return new Date(e+"T"+(t||"00:00:00")).toLocaleString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}},formatearPrecio=e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(e||0),calcularTiempoProceso=e=>{if(!e)return"";const t=new Date(e),a=new Date,s=Math.floor((a.getTime()-t.getTime())/864e5);return s<30?`${s} d√≠as`:s<365?`${Math.floor(s/30)} meses`:`${Math.floor(s/365)} a√±os`},obtenerIconoModalidad=e=>({presencial:"üè•",online:"üíª",telefonica:"üìû"}[e]||"üìã"),obtenerEstiloModalidad=e=>({presencial:"bg-green-100 text-green-700",online:"bg-purple-600/20 text-purple-600",telefonica:"bg-blue-100 text-blue-700"}[e]||"bg-gray-100 text-gray-700"),obtenerEstiloEstado=e=>({pendiente:"bg-yellow-100 text-yellow-700",confirmada:"bg-green-100 text-green-700",realizada:"bg-blue-100 text-blue-700",cancelada:"bg-red-100 text-red-700"}[e]||"bg-gray-100 text-gray-700"),irABonos=()=>{m.push(`/terapeuta/pacientes/${b.value}/bonos`)},abrirWhatsApp=()=>{const e=$.value?.telefono;if(!e)return void alert("Este paciente no tiene tel√©fono registrado");const t=`https://wa.me/${e.replace(/\D/g,"")}?text=${encodeURIComponent(`Hola ${X.value}, ¬øc√≥mo est√°s?`)}`;(void 0).open(t,"_blank")},agendarSesion=()=>{$.value&&(P.value={id:$.value.id,nombre:X.value,email:$.value.email,telefono:$.value.telefono,frecuencia:$.value.frecuencia||"semanal",area_acompanamiento:$.value.area_de_acompanamiento},R.value=!0)},cerrarModalCita=()=>{R.value=!1,P.value=null},onCitaCreada=()=>{cargarDatosPaciente()},verDetallesCita=e=>{T.value=e,A.value=!0},cerrarModalDetalles=()=>{A.value=!1,T.value=null},editarPaciente=()=>{alert("Funci√≥n de editar en desarrollo")};return t.watch(()=>v.params.id,()=>{v.params.id&&cargarDatosPaciente()}),(a,s,r,n)=>{const i=e,c=u,x=l,f=d;s(`<div${o.ssrRenderAttrs(t.mergeProps({class:"pb-20"},n))} data-v-626e6619><button class="mb-6 flex items-center gap-2 text-cafe hover:text-purple-600 transition-colors" data-v-626e6619><span data-v-626e6619>‚Üê</span><span data-v-626e6619>Volver a lista de pacientes</span></button>`),t.unref(g)?s('<div class="text-center py-12" data-v-626e6619><div class="animate-spin w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4" data-v-626e6619></div><p class="text-cafe/60" data-v-626e6619>Cargando informaci√≥n del paciente...</p></div>'):t.unref(y)?(s('<div class="text-center py-12" data-v-626e6619>'),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,s,r,n)=>{if(!s)return[t.createVNode("span",{class:"text-6xl mb-4 block"},"‚ùå"),t.createVNode("h3",{class:"text-xl font-serif font-semibold text-cafe mb-2"}," No se pudo cargar la informaci√≥n "),t.createVNode("p",{class:"text-cafe/60 mb-4"},t.toDisplayString(t.unref(y)),1),t.createVNode("button",{onClick:e=>a.$router.push("/terapeuta/pacientes"),class:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors"}," Volver a la lista ",8,["onClick"])];s(`<span class="text-6xl mb-4 block" data-v-626e6619${n}>‚ùå</span><h3 class="text-xl font-serif font-semibold text-cafe mb-2" data-v-626e6619${n}> No se pudo cargar la informaci√≥n </h3><p class="text-cafe/60 mb-4" data-v-626e6619${n}>${o.ssrInterpolate(t.unref(y))}</p><button class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors" data-v-626e6619${n}> Volver a la lista </button>`)}),_:1},r)),s("</div>")):t.unref($)?(s("<div data-v-626e6619>"),s(o.ssrRenderComponent(i,{class:"mb-6"},{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("div",{class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6"},[t.createVNode("div",{class:"flex items-start gap-4"},[t.createVNode("div",{class:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0",style:{backgroundColor:t.unref(K)}},t.toDisplayString(t.unref(Z)),5),t.createVNode("div",null,[t.createVNode("h1",{class:"text-3xl font-serif font-bold text-cafe mb-2"},t.toDisplayString(t.unref(X)),1),t.createVNode("div",{class:"flex flex-wrap items-center gap-3 mb-3"},[t.createVNode("span",{class:["px-3 py-1 text-sm font-medium rounded-full",t.unref(J)]},t.toDisplayString(t.unref(Q)),3),t.createVNode("span",{class:"text-cafe/60 text-sm flex items-center gap-1"},[t.createVNode("span",null,"üìß"),t.createVNode("span",null,t.toDisplayString(t.unref($).email),1)])]),t.createVNode("div",{class:"space-y-1 text-sm"},[t.unref($).telefono?(t.openBlock(),t.createBlock("div",{key:0,class:"text-cafe/70 flex items-center gap-2"},[t.createVNode("span",null,"üì±"),t.createVNode("span",null,t.toDisplayString(t.unref($).telefono),1)])):t.createCommentVNode("",!0),t.unref($).area_de_acompanamiento?(t.openBlock(),t.createBlock("div",{key:1,class:"text-cafe/70 flex items-center gap-2"},[t.createVNode("span",null,"üéØ"),t.createVNode("span",null,[t.createVNode("strong",null,"√Årea:"),t.createTextVNode(" "+t.toDisplayString(t.unref($).area_de_acompanamiento),1)])])):t.createCommentVNode("",!0),t.unref($).tipo_bono?(t.openBlock(),t.createBlock("div",{key:2,class:"text-cafe/70 flex items-center gap-2"},[t.createVNode("span",null,"üé´"),t.createVNode("span",null,[t.createVNode("strong",null,"Tipo de Bono:"),t.createTextVNode(" "+t.toDisplayString(t.unref(ee)),1)])])):t.createCommentVNode("",!0)])])]),t.createVNode("div",{class:"flex flex-wrap gap-2"},[t.createVNode("button",{onClick:irABonos,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2"},[t.createVNode("span",null,"üé´"),t.createVNode("span",null,"Gestionar Bonos")]),t.createVNode("button",{onClick:abrirWhatsApp,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2"},[t.createVNode("span",null,"üí¨"),t.createVNode("span",null,"WhatsApp")]),t.createVNode("button",{onClick:agendarSesion,class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-sm flex items-center gap-2"},[t.createVNode("span",null,"üìÖ"),t.createVNode("span",null,"Agendar sesi√≥n")]),t.createVNode("button",{onClick:editarPaciente,class:"px-4 py-2 bg-white border border-purple-600/30 text-purple-600 rounded-lg hover:bg-purple-600/5 transition-colors text-sm flex items-center gap-2"},[t.createVNode("span",null,"‚úèÔ∏è"),t.createVNode("span",null,"Editar")])])])];a(`<div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6" data-v-626e6619${r}><div class="flex items-start gap-4" data-v-626e6619${r}><div class="w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0" style="${o.ssrRenderStyle({backgroundColor:t.unref(K)})}" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(Z))}</div><div data-v-626e6619${r}><h1 class="text-3xl font-serif font-bold text-cafe mb-2" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(X))}</h1><div class="flex flex-wrap items-center gap-3 mb-3" data-v-626e6619${r}><span class="${o.ssrRenderClass([t.unref(J),"px-3 py-1 text-sm font-medium rounded-full"])}" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(Q))}</span><span class="text-cafe/60 text-sm flex items-center gap-1" data-v-626e6619${r}><span data-v-626e6619${r}>üìß</span><span data-v-626e6619${r}>${o.ssrInterpolate(t.unref($).email)}</span></span></div><div class="space-y-1 text-sm" data-v-626e6619${r}>`),t.unref($).telefono?a(`<div class="text-cafe/70 flex items-center gap-2" data-v-626e6619${r}><span data-v-626e6619${r}>üì±</span><span data-v-626e6619${r}>${o.ssrInterpolate(t.unref($).telefono)}</span></div>`):a("\x3c!----\x3e"),t.unref($).area_de_acompanamiento?a(`<div class="text-cafe/70 flex items-center gap-2" data-v-626e6619${r}><span data-v-626e6619${r}>üéØ</span><span data-v-626e6619${r}><strong data-v-626e6619${r}>√Årea:</strong> ${o.ssrInterpolate(t.unref($).area_de_acompanamiento)}</span></div>`):a("\x3c!----\x3e"),t.unref($).tipo_bono?a(`<div class="text-cafe/70 flex items-center gap-2" data-v-626e6619${r}><span data-v-626e6619${r}>üé´</span><span data-v-626e6619${r}><strong data-v-626e6619${r}>Tipo de Bono:</strong> ${o.ssrInterpolate(t.unref(ee))}</span></div>`):a("\x3c!----\x3e"),a(`</div></div></div><div class="flex flex-wrap gap-2" data-v-626e6619${r}><button class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2" data-v-626e6619${r}><span data-v-626e6619${r}>üé´</span><span data-v-626e6619${r}>Gestionar Bonos</span></button><button class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2" data-v-626e6619${r}><span data-v-626e6619${r}>üí¨</span><span data-v-626e6619${r}>WhatsApp</span></button><button class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-sm flex items-center gap-2" data-v-626e6619${r}><span data-v-626e6619${r}>üìÖ</span><span data-v-626e6619${r}>Agendar sesi√≥n</span></button><button class="px-4 py-2 bg-white border border-purple-600/30 text-purple-600 rounded-lg hover:bg-purple-600/5 transition-colors text-sm flex items-center gap-2" data-v-626e6619${r}><span data-v-626e6619${r}>‚úèÔ∏è</span><span data-v-626e6619${r}>Editar</span></button></div></div>`)}),_:1},r)),s('<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6" data-v-626e6619>'),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[t.createVNode("span",{class:"text-2xl"},"üìä"),t.createTextVNode(" Resumen ")]),t.createVNode("div",{class:"space-y-3"},[t.createVNode("div",{class:"flex items-center justify-between p-3 bg-base-bg rounded-lg"},[t.createVNode("span",{class:"text-sm text-cafe/70"},"Total sesiones"),t.createVNode("span",{class:"font-bold text-cafe text-lg"},t.toDisplayString(t.unref(q).total),1)]),t.createVNode("div",{class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},[t.createVNode("span",{class:"text-sm text-cafe/70"},"Completadas"),t.createVNode("span",{class:"font-bold text-green-600 text-lg"},t.toDisplayString(t.unref(q).completadas),1)]),t.createVNode("div",{class:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg"},[t.createVNode("span",{class:"text-sm text-cafe/70"},"Pendientes"),t.createVNode("span",{class:"font-bold text-yellow-600 text-lg"},t.toDisplayString(t.unref(q).pendientes),1)]),t.createVNode("div",{class:"flex items-center justify-between p-3 bg-blue-50 rounded-lg"},[t.createVNode("span",{class:"text-sm text-cafe/70"},"Pr√≥ximas"),t.createVNode("span",{class:"font-bold text-blue-600 text-lg"},t.toDisplayString(t.unref(q).proximas),1)])])];a(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-626e6619${r}><span class="text-2xl" data-v-626e6619${r}>üìä</span> Resumen </h2><div class="space-y-3" data-v-626e6619${r}><div class="flex items-center justify-between p-3 bg-base-bg rounded-lg" data-v-626e6619${r}><span class="text-sm text-cafe/70" data-v-626e6619${r}>Total sesiones</span><span class="font-bold text-cafe text-lg" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(q).total)}</span></div><div class="flex items-center justify-between p-3 bg-green-50 rounded-lg" data-v-626e6619${r}><span class="text-sm text-cafe/70" data-v-626e6619${r}>Completadas</span><span class="font-bold text-green-600 text-lg" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(q).completadas)}</span></div><div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg" data-v-626e6619${r}><span class="text-sm text-cafe/70" data-v-626e6619${r}>Pendientes</span><span class="font-bold text-yellow-600 text-lg" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(q).pendientes)}</span></div><div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg" data-v-626e6619${r}><span class="text-sm text-cafe/70" data-v-626e6619${r}>Pr√≥ximas</span><span class="font-bold text-blue-600 text-lg" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(q).proximas)}</span></div></div>`)}),_:1},r)),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[t.createVNode("span",{class:"text-2xl"},"üé´"),t.createTextVNode(" Bono Contratado ")]),t.unref(h)?(t.openBlock(),t.createBlock("div",{key:0,class:"space-y-4"},[t.createVNode("div",{class:"p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg"},[t.createVNode("div",{class:"text-xs text-purple-700 font-medium mb-1"},"Tipo de Bono"),t.createVNode("div",{class:"text-sm font-bold text-purple-900"},t.toDisplayString(t.unref(ee)),1)]),t.createVNode("div",{class:"text-center p-4 bg-gradient-to-br from-purple-600/10 to-rosa/20 rounded-xl"},[t.createVNode("div",{class:"text-4xl font-bold text-purple-600 mb-1"},t.toDisplayString(t.unref(h).sesiones_disponibles),1),t.createVNode("div",{class:"text-sm text-cafe/70"}," de "+t.toDisplayString(t.unref(h).sesiones_totales)+" sesiones disponibles ",1)]),t.createVNode("div",{class:"space-y-2"},[t.createVNode("div",{class:"flex justify-between text-sm"},[t.createVNode("span",{class:"text-cafe/70"},"Progreso"),t.createVNode("span",{class:"font-medium text-cafe"},t.toDisplayString(t.unref(h).porcentaje_uso)+"%",1)]),t.createVNode("div",{class:"w-full bg-gray-200 rounded-full h-2.5"},[t.createVNode("div",{class:"h-2.5 rounded-full bg-gradient-to-r from-purple-600 to-rosa transition-all",style:{width:`${t.unref(h).porcentaje_uso}%`}},null,4)])]),t.createVNode("div",{class:"pt-3 border-t space-y-2 text-sm"},[t.createVNode("div",{class:"flex justify-between"},[t.createVNode("span",{class:"text-cafe/70"},"Sesiones usadas:"),t.createVNode("span",{class:"font-medium text-cafe"},t.toDisplayString(t.unref(h).sesiones_usadas),1)]),t.createVNode("div",{class:"flex justify-between"},[t.createVNode("span",{class:"text-cafe/70"},"Monto total:"),t.createVNode("span",{class:"font-medium text-cafe"},t.toDisplayString(formatearPrecio(t.unref(h).monto_total||t.unref(h).precio)),1)]),t.createVNode("div",{class:"flex justify-between"},[t.createVNode("span",{class:"text-cafe/70"},"Precio por sesi√≥n:"),t.createVNode("span",{class:"font-medium text-cafe"},t.toDisplayString(formatearPrecio(t.unref(h).precio_por_sesion||(t.unref(h).monto_total||t.unref(h).precio)/t.unref(h).sesiones_totales)),1)]),t.createVNode("div",{class:"flex justify-between"},[t.createVNode("span",{class:"text-cafe/70"},"Estado:"),t.createVNode("span",{class:["font-medium capitalize",{"text-green-600":"activo"===t.unref(h).estado,"text-yellow-600":"pendiente"===t.unref(h).estado,"text-gray-600":"vencido"===t.unref(h).estado}]},t.toDisplayString(t.unref(h).estado),3)])])])):(t.openBlock(),t.createBlock("div",{key:1,class:"text-center py-8"},[t.createVNode("span",{class:"text-5xl mb-3 block opacity-40"},"üé´"),t.createVNode("p",{class:"text-sm text-cafe/50 mb-2"},"No hay bono activo"),t.createVNode("p",{class:"text-xs text-cafe/40 mb-4"},[t.createTextVNode(" Tipo de bono del paciente: "),t.createVNode("strong",null,t.toDisplayString(t.unref(ee)||"No definido"),1)]),t.createVNode("button",{onClick:irABonos,class:"mt-2 text-sm text-purple-600 hover:text-cafe transition-colors font-medium"}," Gestionar bonos ‚Üí ")]))];a(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-626e6619${r}><span class="text-2xl" data-v-626e6619${r}>üé´</span> Bono Contratado </h2>`),t.unref(h)?a(`<div class="space-y-4" data-v-626e6619${r}><div class="p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg" data-v-626e6619${r}><div class="text-xs text-purple-700 font-medium mb-1" data-v-626e6619${r}>Tipo de Bono</div><div class="text-sm font-bold text-purple-900" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(ee))}</div></div><div class="text-center p-4 bg-gradient-to-br from-purple-600/10 to-rosa/20 rounded-xl" data-v-626e6619${r}><div class="text-4xl font-bold text-purple-600 mb-1" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(h).sesiones_disponibles)}</div><div class="text-sm text-cafe/70" data-v-626e6619${r}> de ${o.ssrInterpolate(t.unref(h).sesiones_totales)} sesiones disponibles </div></div><div class="space-y-2" data-v-626e6619${r}><div class="flex justify-between text-sm" data-v-626e6619${r}><span class="text-cafe/70" data-v-626e6619${r}>Progreso</span><span class="font-medium text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(h).porcentaje_uso)}%</span></div><div class="w-full bg-gray-200 rounded-full h-2.5" data-v-626e6619${r}><div class="h-2.5 rounded-full bg-gradient-to-r from-purple-600 to-rosa transition-all" style="${o.ssrRenderStyle({width:`${t.unref(h).porcentaje_uso}%`})}" data-v-626e6619${r}></div></div></div><div class="pt-3 border-t space-y-2 text-sm" data-v-626e6619${r}><div class="flex justify-between" data-v-626e6619${r}><span class="text-cafe/70" data-v-626e6619${r}>Sesiones usadas:</span><span class="font-medium text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(h).sesiones_usadas)}</span></div><div class="flex justify-between" data-v-626e6619${r}><span class="text-cafe/70" data-v-626e6619${r}>Monto total:</span><span class="font-medium text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(formatearPrecio(t.unref(h).monto_total||t.unref(h).precio))}</span></div><div class="flex justify-between" data-v-626e6619${r}><span class="text-cafe/70" data-v-626e6619${r}>Precio por sesi√≥n:</span><span class="font-medium text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(formatearPrecio(t.unref(h).precio_por_sesion||(t.unref(h).monto_total||t.unref(h).precio)/t.unref(h).sesiones_totales))}</span></div><div class="flex justify-between" data-v-626e6619${r}><span class="text-cafe/70" data-v-626e6619${r}>Estado:</span><span class="${o.ssrRenderClass([{"text-green-600":"activo"===t.unref(h).estado,"text-yellow-600":"pendiente"===t.unref(h).estado,"text-gray-600":"vencido"===t.unref(h).estado},"font-medium capitalize"])}" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(h).estado)}</span></div></div></div>`):a(`<div class="text-center py-8" data-v-626e6619${r}><span class="text-5xl mb-3 block opacity-40" data-v-626e6619${r}>üé´</span><p class="text-sm text-cafe/50 mb-2" data-v-626e6619${r}>No hay bono activo</p><p class="text-xs text-cafe/40 mb-4" data-v-626e6619${r}> Tipo de bono del paciente: <strong data-v-626e6619${r}>${o.ssrInterpolate(t.unref(ee)||"No definido")}</strong></p><button class="mt-2 text-sm text-purple-600 hover:text-cafe transition-colors font-medium" data-v-626e6619${r}> Gestionar bonos ‚Üí </button></div>`)}),_:1},r)),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[t.createVNode("span",{class:"text-2xl"},"üìã"),t.createTextVNode(" Datos del Proceso ")]),t.createVNode("div",{class:"space-y-3"},[t.createVNode("div",{class:"p-3 bg-base-bg rounded-lg"},[t.createVNode("div",{class:"text-xs text-cafe/60 mb-1"},"Primera sesi√≥n"),t.createVNode("div",{class:"text-sm font-medium text-cafe"},t.toDisplayString(formatearFecha(t.unref(O))||"Sin registro"),1)]),t.createVNode("div",{class:"p-3 bg-base-bg rounded-lg"},[t.createVNode("div",{class:"text-xs text-cafe/60 mb-1"},"√öltima sesi√≥n"),t.createVNode("div",{class:"text-sm font-medium text-cafe"},t.toDisplayString(formatearFecha(t.unref(W))||"Sin registro"),1)]),t.unref(Y)?(t.openBlock(),t.createBlock("div",{key:0,class:"p-4 bg-gradient-to-br from-purple-600/20 to-rosa/20 border-2 border-purple-600/40 rounded-lg"},[t.createVNode("div",{class:"text-xs font-medium text-purple-600 mb-2 flex items-center gap-1"},[t.createVNode("span",null,"üìÖ"),t.createVNode("span",null,"Pr√≥xima sesi√≥n agendada")]),t.createVNode("div",{class:"text-base font-bold text-cafe mb-3"},t.toDisplayString(formatearFechaCompleta(t.unref(Y).fecha_cita,t.unref(Y).hora_inicio)),1),t.createVNode("div",{class:"flex items-center gap-2 flex-wrap"},[t.createVNode("span",{class:"text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full font-medium flex items-center gap-1"},t.toDisplayString(obtenerIconoModalidad(t.unref(Y).modalidad))+" "+t.toDisplayString(t.unref(Y).modalidad),1),t.createVNode("span",{class:["text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full capitalize font-medium",{"text-green-600 border-green-300":"confirmada"===t.unref(Y).estado,"text-yellow-600 border-yellow-300":"pendiente"===t.unref(Y).estado,"text-blue-600 border-blue-300":"programada"===t.unref(Y).estado}]},t.toDisplayString(t.unref(Y).estado),3)]),t.unref(Y).notas?(t.openBlock(),t.createBlock("div",{key:0,class:"mt-3 pt-3 border-t border-purple-600/20"},[t.createVNode("div",{class:"text-xs text-cafe/70 mb-1"},"Notas:"),t.createVNode("div",{class:"text-xs text-cafe"},t.toDisplayString(t.unref(Y).notas),1)])):t.createCommentVNode("",!0)])):(t.openBlock(),t.createBlock("div",{key:1,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[t.createVNode("div",{class:"text-center"},[t.createVNode("span",{class:"text-3xl mb-2 block"},"‚è∞"),t.createVNode("div",{class:"text-sm font-medium text-yellow-800 mb-1"},"No hay sesi√≥n agendada"),t.createVNode("div",{class:"text-xs text-yellow-700"},"Recuerda agendar la pr√≥xima sesi√≥n"),t.createVNode("button",{onClick:agendarSesion,class:"mt-3 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-xs font-medium"}," Agendar ahora ")])])),t.createVNode("div",{class:"p-3 bg-base-bg rounded-lg"},[t.createVNode("div",{class:"text-xs text-cafe/60 mb-1"},"En proceso desde"),t.createVNode("div",{class:"text-sm font-medium text-cafe"},t.toDisplayString(calcularTiempoProceso(t.unref($).created_at)),1)])])];a(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-626e6619${r}><span class="text-2xl" data-v-626e6619${r}>üìã</span> Datos del Proceso </h2><div class="space-y-3" data-v-626e6619${r}><div class="p-3 bg-base-bg rounded-lg" data-v-626e6619${r}><div class="text-xs text-cafe/60 mb-1" data-v-626e6619${r}>Primera sesi√≥n</div><div class="text-sm font-medium text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(formatearFecha(t.unref(O))||"Sin registro")}</div></div><div class="p-3 bg-base-bg rounded-lg" data-v-626e6619${r}><div class="text-xs text-cafe/60 mb-1" data-v-626e6619${r}>√öltima sesi√≥n</div><div class="text-sm font-medium text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(formatearFecha(t.unref(W))||"Sin registro")}</div></div>`),t.unref(Y)?(a(`<div class="p-4 bg-gradient-to-br from-purple-600/20 to-rosa/20 border-2 border-purple-600/40 rounded-lg" data-v-626e6619${r}><div class="text-xs font-medium text-purple-600 mb-2 flex items-center gap-1" data-v-626e6619${r}><span data-v-626e6619${r}>üìÖ</span><span data-v-626e6619${r}>Pr√≥xima sesi√≥n agendada</span></div><div class="text-base font-bold text-cafe mb-3" data-v-626e6619${r}>${o.ssrInterpolate(formatearFechaCompleta(t.unref(Y).fecha_cita,t.unref(Y).hora_inicio))}</div><div class="flex items-center gap-2 flex-wrap" data-v-626e6619${r}><span class="text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full font-medium flex items-center gap-1" data-v-626e6619${r}>${o.ssrInterpolate(obtenerIconoModalidad(t.unref(Y).modalidad))} ${o.ssrInterpolate(t.unref(Y).modalidad)}</span><span class="${o.ssrRenderClass([{"text-green-600 border-green-300":"confirmada"===t.unref(Y).estado,"text-yellow-600 border-yellow-300":"pendiente"===t.unref(Y).estado,"text-blue-600 border-blue-300":"programada"===t.unref(Y).estado},"text-xs px-3 py-1.5 bg-white border border-purple-600/30 rounded-full capitalize font-medium"])}" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(Y).estado)}</span></div>`),t.unref(Y).notas?a(`<div class="mt-3 pt-3 border-t border-purple-600/20" data-v-626e6619${r}><div class="text-xs text-cafe/70 mb-1" data-v-626e6619${r}>Notas:</div><div class="text-xs text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(Y).notas)}</div></div>`):a("\x3c!----\x3e"),a("</div>")):a(`<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg" data-v-626e6619${r}><div class="text-center" data-v-626e6619${r}><span class="text-3xl mb-2 block" data-v-626e6619${r}>‚è∞</span><div class="text-sm font-medium text-yellow-800 mb-1" data-v-626e6619${r}>No hay sesi√≥n agendada</div><div class="text-xs text-yellow-700" data-v-626e6619${r}>Recuerda agendar la pr√≥xima sesi√≥n</div><button class="mt-3 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors text-xs font-medium" data-v-626e6619${r}> Agendar ahora </button></div></div>`),a(`<div class="p-3 bg-base-bg rounded-lg" data-v-626e6619${r}><div class="text-xs text-cafe/60 mb-1" data-v-626e6619${r}>En proceso desde</div><div class="text-sm font-medium text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(calcularTiempoProceso(t.unref($).created_at))}</div></div></div>`)}),_:1},r)),s('</div><div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6" data-v-626e6619>'),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("div",{class:"flex items-center justify-between mb-4"},[t.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2"},[t.createVNode("span",{class:"text-2xl"},"üìä"),t.createTextVNode(" Sesiones ")]),t.withDirectives(t.createVNode("select",{"onUpdate:modelValue":e=>t.isRef(C)?C.value=e:null,class:"px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(I),e=>(t.openBlock(),t.createBlock("option",{key:e,value:e},t.toDisplayString(e),9,["value"]))),128))],8,["onUpdate:modelValue"]),[[t.vModelSelect,t.unref(C)]])]),t.createVNode("div",{class:"grid grid-cols-2 gap-3"},[t.createVNode("div",{class:"p-3 bg-gradient-to-br from-purple-50 to-rosa/20 rounded-lg text-center"},[t.createVNode("div",{class:"text-3xl font-bold text-purple-600"},t.toDisplayString(t.unref(U).total),1),t.createVNode("div",{class:"text-xs text-cafe/70"},"Total")]),t.createVNode("div",{class:"p-3 bg-red-50 rounded-lg text-center"},[t.createVNode("div",{class:"text-3xl font-bold text-red-500"},t.toDisplayString(t.unref(U).canceladas),1),t.createVNode("div",{class:"text-xs text-cafe/70"},"Cancelaciones")]),t.createVNode("div",{class:"p-3 bg-yellow-50 rounded-lg text-center"},[t.createVNode("div",{class:"text-2xl font-bold text-yellow-600"},t.toDisplayString(t.unref(U).programadas),1),t.createVNode("div",{class:"text-xs text-cafe/70"},"Programadas")]),t.createVNode("div",{class:"p-3 bg-green-50 rounded-lg text-center"},[t.createVNode("div",{class:"text-2xl font-bold text-green-600"},t.toDisplayString(t.unref(U).realizadas),1),t.createVNode("div",{class:"text-xs text-cafe/70"},"Realizadas")])])];a(`<div class="flex items-center justify-between mb-4" data-v-626e6619${r}><h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2" data-v-626e6619${r}><span class="text-2xl" data-v-626e6619${r}>üìä</span> Sesiones </h2><select class="px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500 focus:border-purple-500" data-v-626e6619${r}>\x3c!--[--\x3e`),o.ssrRenderList(t.unref(I),e=>{a(`<option${o.ssrRenderAttr("value",e)} data-v-626e6619${o.ssrIncludeBooleanAttr(Array.isArray(t.unref(C))?o.ssrLooseContain(t.unref(C),e):o.ssrLooseEqual(t.unref(C),e))?" selected":""}${r}>${o.ssrInterpolate(e)}</option>`)}),a(`\x3c!--]--\x3e</select></div><div class="grid grid-cols-2 gap-3" data-v-626e6619${r}><div class="p-3 bg-gradient-to-br from-purple-50 to-rosa/20 rounded-lg text-center" data-v-626e6619${r}><div class="text-3xl font-bold text-purple-600" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(U).total)}</div><div class="text-xs text-cafe/70" data-v-626e6619${r}>Total</div></div><div class="p-3 bg-red-50 rounded-lg text-center" data-v-626e6619${r}><div class="text-3xl font-bold text-red-500" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(U).canceladas)}</div><div class="text-xs text-cafe/70" data-v-626e6619${r}>Cancelaciones</div></div><div class="p-3 bg-yellow-50 rounded-lg text-center" data-v-626e6619${r}><div class="text-2xl font-bold text-yellow-600" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(U).programadas)}</div><div class="text-xs text-cafe/70" data-v-626e6619${r}>Programadas</div></div><div class="p-3 bg-green-50 rounded-lg text-center" data-v-626e6619${r}><div class="text-2xl font-bold text-green-600" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(U).realizadas)}</div><div class="text-xs text-cafe/70" data-v-626e6619${r}>Realizadas</div></div></div>`)}),_:1},r)),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("div",{class:"flex items-center justify-between mb-4"},[t.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2"},[t.createVNode("span",{class:"text-2xl"},"üí≥"),t.createTextVNode(" Deuda ")]),t.withDirectives(t.createVNode("select",{"onUpdate:modelValue":e=>t.isRef(D)?D.value=e:null,class:"px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(I),e=>(t.openBlock(),t.createBlock("option",{key:e,value:e},t.toDisplayString(e),9,["value"]))),128))],8,["onUpdate:modelValue"]),[[t.vModelSelect,t.unref(D)]])]),t.createVNode("div",{class:["p-6 rounded-xl text-center",t.unref(H).haDeuda?"bg-gradient-to-br from-red-50 to-orange-50 border-2 border-red-200":"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200"]},[t.unref(H).haDeuda?(t.openBlock(),t.createBlock("div",{key:0},[t.createVNode("div",{class:"text-4xl font-bold text-red-600 mb-2"},t.toDisplayString(formatearPrecio(t.unref(H).totalPendiente)),1),t.createVNode("div",{class:"text-sm text-red-700"},"Pendiente de cobro"),t.createVNode("div",{class:"text-xs text-red-500 mt-1"},t.toDisplayString(t.unref(H).cantidadPendientes)+" sesi√≥n(es) sin cobrar",1)])):(t.openBlock(),t.createBlock("div",{key:1},[t.createVNode("div",{class:"text-4xl mb-2"},"‚úÖ"),t.createVNode("div",{class:"text-lg font-semibold text-green-700"},"Sin deuda"),t.createVNode("div",{class:"text-sm text-green-600"},"Todos los pagos al d√≠a")]))],2)];a(`<div class="flex items-center justify-between mb-4" data-v-626e6619${r}><h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2" data-v-626e6619${r}><span class="text-2xl" data-v-626e6619${r}>üí≥</span> Deuda </h2><select class="px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500 focus:border-purple-500" data-v-626e6619${r}>\x3c!--[--\x3e`),o.ssrRenderList(t.unref(I),e=>{a(`<option${o.ssrRenderAttr("value",e)} data-v-626e6619${o.ssrIncludeBooleanAttr(Array.isArray(t.unref(D))?o.ssrLooseContain(t.unref(D),e):o.ssrLooseEqual(t.unref(D),e))?" selected":""}${r}>${o.ssrInterpolate(e)}</option>`)}),a(`\x3c!--]--\x3e</select></div><div class="${o.ssrRenderClass([t.unref(H).haDeuda?"bg-gradient-to-br from-red-50 to-orange-50 border-2 border-red-200":"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200","p-6 rounded-xl text-center"])}" data-v-626e6619${r}>`),t.unref(H).haDeuda?a(`<div data-v-626e6619${r}><div class="text-4xl font-bold text-red-600 mb-2" data-v-626e6619${r}>${o.ssrInterpolate(formatearPrecio(t.unref(H).totalPendiente))}</div><div class="text-sm text-red-700" data-v-626e6619${r}>Pendiente de cobro</div><div class="text-xs text-red-500 mt-1" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(H).cantidadPendientes)} sesi√≥n(es) sin cobrar</div></div>`):a(`<div data-v-626e6619${r}><div class="text-4xl mb-2" data-v-626e6619${r}>‚úÖ</div><div class="text-lg font-semibold text-green-700" data-v-626e6619${r}>Sin deuda</div><div class="text-sm text-green-600" data-v-626e6619${r}>Todos los pagos al d√≠a</div></div>`),a("</div>")}),_:1},r)),s("</div>"),s(o.ssrRenderComponent(i,{class:"mb-6"},{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("div",{class:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-4"},[t.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2"},[t.createVNode("span",{class:"text-2xl"},"üìã"),t.createTextVNode(" Historial de Sesiones ")]),t.createVNode("div",{class:"flex items-center gap-3 flex-wrap"},[t.createVNode("div",{class:"flex items-center gap-2"},[t.createVNode("label",{class:"text-sm text-cafe/70"},"Desde:"),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>t.isRef(S)?S.value=e:null,type:"date",class:"px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500"},null,8,["onUpdate:modelValue"]),[[t.vModelText,t.unref(S)]])]),t.createVNode("div",{class:"flex items-center gap-2"},[t.createVNode("label",{class:"text-sm text-cafe/70"},"Hasta:"),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>t.isRef(B)?B.value=e:null,type:"date",class:"px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500"},null,8,["onUpdate:modelValue"]),[[t.vModelText,t.unref(B)]])]),t.unref(S)||t.unref(B)?(t.openBlock(),t.createBlock("button",{key:0,onClick:e=>{S.value="",B.value=""},class:"px-3 py-1.5 text-sm text-purple-600 hover:text-purple-800 transition-colors"}," Limpiar filtros ",8,["onClick"])):t.createCommentVNode("",!0)])]),t.unref(G).length>0?(t.openBlock(),t.createBlock("div",{key:0,class:"overflow-x-auto"},[t.createVNode("table",{class:"w-full text-sm"},[t.createVNode("thead",null,[t.createVNode("tr",{class:"bg-gradient-to-r from-purple-50 to-rosa/20 text-cafe"},[t.createVNode("th",{class:"px-4 py-3 text-left font-semibold rounded-tl-lg"},"#"),t.createVNode("th",{class:"px-4 py-3 text-left font-semibold"},"Fecha"),t.createVNode("th",{class:"px-4 py-3 text-left font-semibold"},"Modalidad"),t.createVNode("th",{class:"px-4 py-3 text-left font-semibold"},"Estado"),t.createVNode("th",{class:"px-4 py-3 text-right font-semibold"},"Precio"),t.createVNode("th",{class:"px-4 py-3 text-left font-semibold rounded-tr-lg"},"Pago")])]),t.createVNode("tbody",null,[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(G),(e,a)=>(t.openBlock(),t.createBlock("tr",{key:e.id,class:"border-b border-gray-100 hover:bg-rosa/10 transition-colors"},[t.createVNode("td",{class:"px-4 py-3 text-cafe/60"},t.toDisplayString(t.unref(G).length-a),1),t.createVNode("td",{class:"px-4 py-3"},[t.createVNode("div",{class:"font-medium text-cafe"},t.toDisplayString(formatearFecha(e.fecha_cita)),1),t.createVNode("div",{class:"text-xs text-cafe/60"},t.toDisplayString(e.hora_inicio)+" - "+t.toDisplayString(e.hora_fin),1)]),t.createVNode("td",{class:"px-4 py-3"},[t.createVNode("span",{class:["inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},t.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+t.toDisplayString(e.modalidad),3)]),t.createVNode("td",{class:"px-4 py-3"},[t.createVNode("span",{class:["px-2 py-1 text-xs rounded-full capitalize",obtenerEstiloEstado(e.estado)]},t.toDisplayString(e.estado),3)]),t.createVNode("td",{class:"px-4 py-3 text-right font-medium text-cafe"},t.toDisplayString(formatearPrecio(e.precio_sesion||0)),1),t.createVNode("td",{class:"px-4 py-3"},[e.pagado?(t.openBlock(),t.createBlock("span",{key:0,class:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-green-100 text-green-700"}," ‚úì Pagado ")):"realizada"===e.estado?(t.openBlock(),t.createBlock("span",{key:1,class:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-red-100 text-red-700"}," ‚è≥ Pendiente ")):(t.openBlock(),t.createBlock("span",{key:2,class:"text-xs text-cafe/50"}," - "))])]))),128))])])])):(t.openBlock(),t.createBlock("div",{key:1,class:"text-center py-12"},[t.createVNode("span",{class:"text-5xl mb-3 block opacity-40"},"üìã"),t.createVNode("p",{class:"text-cafe/60"},"No hay sesiones en el per√≠odo seleccionado")]))];a(`<div class="flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-4" data-v-626e6619${r}><h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2" data-v-626e6619${r}><span class="text-2xl" data-v-626e6619${r}>üìã</span> Historial de Sesiones </h2><div class="flex items-center gap-3 flex-wrap" data-v-626e6619${r}><div class="flex items-center gap-2" data-v-626e6619${r}><label class="text-sm text-cafe/70" data-v-626e6619${r}>Desde:</label><input${o.ssrRenderAttr("value",t.unref(S))} type="date" class="px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500" data-v-626e6619${r}></div><div class="flex items-center gap-2" data-v-626e6619${r}><label class="text-sm text-cafe/70" data-v-626e6619${r}>Hasta:</label><input${o.ssrRenderAttr("value",t.unref(B))} type="date" class="px-3 py-1.5 text-sm border border-purple-200 rounded-lg bg-white text-cafe focus:ring-2 focus:ring-purple-500" data-v-626e6619${r}></div>`),t.unref(S)||t.unref(B)?a(`<button class="px-3 py-1.5 text-sm text-purple-600 hover:text-purple-800 transition-colors" data-v-626e6619${r}> Limpiar filtros </button>`):a("\x3c!----\x3e"),a("</div></div>"),t.unref(G).length>0?(a(`<div class="overflow-x-auto" data-v-626e6619${r}><table class="w-full text-sm" data-v-626e6619${r}><thead data-v-626e6619${r}><tr class="bg-gradient-to-r from-purple-50 to-rosa/20 text-cafe" data-v-626e6619${r}><th class="px-4 py-3 text-left font-semibold rounded-tl-lg" data-v-626e6619${r}>#</th><th class="px-4 py-3 text-left font-semibold" data-v-626e6619${r}>Fecha</th><th class="px-4 py-3 text-left font-semibold" data-v-626e6619${r}>Modalidad</th><th class="px-4 py-3 text-left font-semibold" data-v-626e6619${r}>Estado</th><th class="px-4 py-3 text-right font-semibold" data-v-626e6619${r}>Precio</th><th class="px-4 py-3 text-left font-semibold rounded-tr-lg" data-v-626e6619${r}>Pago</th></tr></thead><tbody data-v-626e6619${r}>\x3c!--[--\x3e`),o.ssrRenderList(t.unref(G),(e,s)=>{a(`<tr class="border-b border-gray-100 hover:bg-rosa/10 transition-colors" data-v-626e6619${r}><td class="px-4 py-3 text-cafe/60" data-v-626e6619${r}>${o.ssrInterpolate(t.unref(G).length-s)}</td><td class="px-4 py-3" data-v-626e6619${r}><div class="font-medium text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(formatearFecha(e.fecha_cita))}</div><div class="text-xs text-cafe/60" data-v-626e6619${r}>${o.ssrInterpolate(e.hora_inicio)} - ${o.ssrInterpolate(e.hora_fin)}</div></td><td class="px-4 py-3" data-v-626e6619${r}><span class="${o.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full"])}" data-v-626e6619${r}>${o.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${o.ssrInterpolate(e.modalidad)}</span></td><td class="px-4 py-3" data-v-626e6619${r}><span class="${o.ssrRenderClass([obtenerEstiloEstado(e.estado),"px-2 py-1 text-xs rounded-full capitalize"])}" data-v-626e6619${r}>${o.ssrInterpolate(e.estado)}</span></td><td class="px-4 py-3 text-right font-medium text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(formatearPrecio(e.precio_sesion||0))}</td><td class="px-4 py-3" data-v-626e6619${r}>`),e.pagado?a(`<span class="inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-green-100 text-green-700" data-v-626e6619${r}> ‚úì Pagado </span>`):"realizada"===e.estado?a(`<span class="inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-red-100 text-red-700" data-v-626e6619${r}> ‚è≥ Pendiente </span>`):a(`<span class="text-xs text-cafe/50" data-v-626e6619${r}> - </span>`),a("</td></tr>")}),a("\x3c!--]--\x3e</tbody></table></div>")):a(`<div class="text-center py-12" data-v-626e6619${r}><span class="text-5xl mb-3 block opacity-40" data-v-626e6619${r}>üìã</span><p class="text-cafe/60" data-v-626e6619${r}>No hay sesiones en el per√≠odo seleccionado</p></div>`)}),_:1},r)),s('<div class="mb-6" data-v-626e6619><div class="border-b border-gray-200" data-v-626e6619><nav class="-mb-px flex space-x-8 overflow-x-auto" data-v-626e6619>\x3c!--[--\x3e'),o.ssrRenderList(t.unref(E),e=>{s(`<button class="${o.ssrRenderClass([t.unref(j)===e.id?"border-purple-600 text-purple-600":"border-transparent text-cafe/60 hover:text-cafe hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"])}" data-v-626e6619><span class="mr-2" data-v-626e6619>${o.ssrInterpolate(e.icono)}</span><span data-v-626e6619>${o.ssrInterpolate(e.nombre)}</span>`),e.badge?s(`<span class="ml-2 px-2 py-0.5 text-xs rounded-full bg-purple-600 text-white" data-v-626e6619>${o.ssrInterpolate(e.badge)}</span>`):s("\x3c!----\x3e"),s("</button>")}),s('\x3c!--]--\x3e</nav></div></div><div class="space-y-6" data-v-626e6619>'),"proximas"===t.unref(j)?(s("<div data-v-626e6619>"),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("div",{class:"flex items-center justify-between mb-4"},[t.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe"},"Pr√≥ximas Sesiones Agendadas"),t.createVNode("button",{onClick:agendarSesion,class:"text-sm text-purple-600 hover:text-cafe transition-colors"}," + Nueva sesi√≥n ")]),t.unref(z).length>0?(t.openBlock(),t.createBlock("div",{key:0,class:"space-y-3"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(z),e=>(t.openBlock(),t.createBlock("div",{key:e.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[t.createVNode("div",{class:"flex items-start justify-between gap-4"},[t.createVNode("div",{class:"flex-1"},[t.createVNode("div",{class:"flex items-center gap-2 mb-2"},[t.createVNode("span",{class:"text-lg font-semibold text-cafe"},t.toDisplayString(formatearFecha(e.fecha_cita)),1),t.createVNode("span",{class:"text-base font-medium text-purple-600"},t.toDisplayString(e.hora_inicio)+" - "+t.toDisplayString(e.hora_fin),1)]),t.createVNode("div",{class:"flex flex-wrap items-center gap-2 mb-2"},[t.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},t.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+t.toDisplayString(e.modalidad),3),t.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full capitalize",obtenerEstiloEstado(e.estado)]},t.toDisplayString(e.estado),3)]),e.observaciones?(t.openBlock(),t.createBlock("p",{key:0,class:"text-sm text-cafe/60 mt-2"},t.toDisplayString(e.observaciones),1)):t.createCommentVNode("",!0)]),t.createVNode("button",{onClick:t=>verDetallesCita(e.id),class:"px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors"}," Ver detalles ",8,["onClick"])])]))),128))])):(t.openBlock(),t.createBlock("div",{key:1,class:"text-center py-12"},[t.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"üìÖ"),t.createVNode("p",{class:"text-cafe/60 mb-4"},"No hay sesiones pr√≥ximas agendadas"),t.createVNode("button",{onClick:agendarSesion,class:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors"}," Agendar primera sesi√≥n ")]))];a(`<div class="flex items-center justify-between mb-4" data-v-626e6619${r}><h3 class="text-lg font-serif font-semibold text-cafe" data-v-626e6619${r}>Pr√≥ximas Sesiones Agendadas</h3><button class="text-sm text-purple-600 hover:text-cafe transition-colors" data-v-626e6619${r}> + Nueva sesi√≥n </button></div>`),t.unref(z).length>0?(a(`<div class="space-y-3" data-v-626e6619${r}>\x3c!--[--\x3e`),o.ssrRenderList(t.unref(z),e=>{a(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-626e6619${r}><div class="flex items-start justify-between gap-4" data-v-626e6619${r}><div class="flex-1" data-v-626e6619${r}><div class="flex items-center gap-2 mb-2" data-v-626e6619${r}><span class="text-lg font-semibold text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-base font-medium text-purple-600" data-v-626e6619${r}>${o.ssrInterpolate(e.hora_inicio)} - ${o.ssrInterpolate(e.hora_fin)}</span></div><div class="flex flex-wrap items-center gap-2 mb-2" data-v-626e6619${r}><span class="${o.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-626e6619${r}>${o.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${o.ssrInterpolate(e.modalidad)}</span><span class="${o.ssrRenderClass([obtenerEstiloEstado(e.estado),"px-2 py-0.5 text-xs rounded-full capitalize"])}" data-v-626e6619${r}>${o.ssrInterpolate(e.estado)}</span></div>`),e.observaciones?a(`<p class="text-sm text-cafe/60 mt-2" data-v-626e6619${r}>${o.ssrInterpolate(e.observaciones)}</p>`):a("\x3c!----\x3e"),a(`</div><button class="px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors" data-v-626e6619${r}> Ver detalles </button></div></div>`)}),a("\x3c!--]--\x3e</div>")):a(`<div class="text-center py-12" data-v-626e6619${r}><span class="text-6xl mb-3 block opacity-40" data-v-626e6619${r}>üìÖ</span><p class="text-cafe/60 mb-4" data-v-626e6619${r}>No hay sesiones pr√≥ximas agendadas</p><button class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors" data-v-626e6619${r}> Agendar primera sesi√≥n </button></div>`)}),_:1},r)),s("</div>")):s("\x3c!----\x3e"),"completadas"===t.unref(j)?(s("<div data-v-626e6619>"),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Historial de Sesiones Completadas"),t.unref(L).length>0?(t.openBlock(),t.createBlock("div",{key:0,class:"space-y-3"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(L),e=>(t.openBlock(),t.createBlock("div",{key:e.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[t.createVNode("div",{class:"flex items-start justify-between gap-4"},[t.createVNode("div",{class:"flex-1"},[t.createVNode("div",{class:"flex items-center gap-2 mb-2"},[t.createVNode("span",{class:"text-base font-semibold text-cafe"},t.toDisplayString(formatearFecha(e.fecha_cita)),1),t.createVNode("span",{class:"text-sm text-cafe/60"},t.toDisplayString(e.hora_inicio)+" - "+t.toDisplayString(e.hora_fin),1),t.createVNode("span",{class:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700"}," ‚úì Realizada ")]),t.createVNode("div",{class:"flex items-center gap-2 mb-2"},[t.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},t.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+t.toDisplayString(e.modalidad),3)]),e.notas_terapeuta?(t.openBlock(),t.createBlock("p",{key:0,class:"text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100"},[t.createVNode("strong",{class:"text-cafe"},"Notas:"),t.createTextVNode(" "+t.toDisplayString(e.notas_terapeuta),1)])):e.observaciones?(t.openBlock(),t.createBlock("p",{key:1,class:"text-sm text-cafe/60 mt-2"},t.toDisplayString(e.observaciones),1)):t.createCommentVNode("",!0)])])]))),128))])):(t.openBlock(),t.createBlock("div",{key:1,class:"text-center py-12"},[t.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"üìù"),t.createVNode("p",{class:"text-cafe/60"},"A√∫n no hay sesiones completadas")]))];a(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-626e6619${r}>Historial de Sesiones Completadas</h3>`),t.unref(L).length>0?(a(`<div class="space-y-3" data-v-626e6619${r}>\x3c!--[--\x3e`),o.ssrRenderList(t.unref(L),e=>{a(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-626e6619${r}><div class="flex items-start justify-between gap-4" data-v-626e6619${r}><div class="flex-1" data-v-626e6619${r}><div class="flex items-center gap-2 mb-2" data-v-626e6619${r}><span class="text-base font-semibold text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-sm text-cafe/60" data-v-626e6619${r}>${o.ssrInterpolate(e.hora_inicio)} - ${o.ssrInterpolate(e.hora_fin)}</span><span class="px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700" data-v-626e6619${r}> ‚úì Realizada </span></div><div class="flex items-center gap-2 mb-2" data-v-626e6619${r}><span class="${o.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-626e6619${r}>${o.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${o.ssrInterpolate(e.modalidad)}</span></div>`),e.notas_terapeuta?a(`<p class="text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100" data-v-626e6619${r}><strong class="text-cafe" data-v-626e6619${r}>Notas:</strong> ${o.ssrInterpolate(e.notas_terapeuta)}</p>`):e.observaciones?a(`<p class="text-sm text-cafe/60 mt-2" data-v-626e6619${r}>${o.ssrInterpolate(e.observaciones)}</p>`):a("\x3c!----\x3e"),a("</div></div></div>")}),a("\x3c!--]--\x3e</div>")):a(`<div class="text-center py-12" data-v-626e6619${r}><span class="text-6xl mb-3 block opacity-40" data-v-626e6619${r}>üìù</span><p class="text-cafe/60" data-v-626e6619${r}>A√∫n no hay sesiones completadas</p></div>`)}),_:1},r)),s("</div>")):s("\x3c!----\x3e"),"pendientes"===t.unref(j)?(s("<div data-v-626e6619>"),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Sesiones Pendientes de Confirmaci√≥n"),t.unref(F).length>0?(t.openBlock(),t.createBlock("div",{key:0,class:"space-y-3"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(F),e=>(t.openBlock(),t.createBlock("div",{key:e.id,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[t.createVNode("div",{class:"flex items-start justify-between gap-4"},[t.createVNode("div",{class:"flex-1"},[t.createVNode("div",{class:"flex items-center gap-2 mb-2"},[t.createVNode("span",{class:"text-lg"},"‚è≥"),t.createVNode("span",{class:"text-base font-semibold text-cafe"},t.toDisplayString(formatearFecha(e.fecha_cita)),1),t.createVNode("span",{class:"text-base font-medium text-purple-600"},t.toDisplayString(e.hora_inicio)+" - "+t.toDisplayString(e.hora_fin),1)]),t.createVNode("div",{class:"flex items-center gap-2 mb-2"},[t.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},t.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+t.toDisplayString(e.modalidad),3),t.createVNode("span",{class:"px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700"}," Pendiente de confirmar ")]),e.observaciones?(t.openBlock(),t.createBlock("p",{key:0,class:"text-sm text-cafe/60 mt-2"},t.toDisplayString(e.observaciones),1)):t.createCommentVNode("",!0)]),t.createVNode("div",{class:"flex gap-2"},[t.createVNode("button",{onClick:t=>(async e=>{try{const{data:t,error:a}=await p.rpc("confirmar_cita_y_descontar_bono",{p_cita_id:e});if(a)throw a;if(!t.success)return console.error("Error en la confirmaci√≥n:",t.error),void alert(t.error||"Error al confirmar la cita");let s=`Cita confirmada con ${t.paciente_nombre||"paciente"}`;t.bono_id&&(s+=`\nSesiones restantes en bono: ${t.sesiones_restantes}`,t.bono_agotado?s+="\n‚ö†Ô∏è BONO AGOTADO":t.sesiones_restantes<=2&&(s+="\n‚ö†Ô∏è Pocas sesiones restantes")),alert(s),await cargarDatosPaciente()}catch(e){console.error("Error al confirmar cita:",e),alert("Error al confirmar la cita: "+e.message)}})(e.id),class:"px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," ‚úì Confirmar ",8,["onClick"]),t.createVNode("button",{onClick:t=>verDetallesCita(e.id),class:"px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors"}," Ver ",8,["onClick"])])])]))),128))])):(t.openBlock(),t.createBlock("div",{key:1,class:"text-center py-12"},[t.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"‚úÖ"),t.createVNode("p",{class:"text-cafe/60"},"No hay sesiones pendientes de confirmaci√≥n")]))];a(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-626e6619${r}>Sesiones Pendientes de Confirmaci√≥n</h3>`),t.unref(F).length>0?(a(`<div class="space-y-3" data-v-626e6619${r}>\x3c!--[--\x3e`),o.ssrRenderList(t.unref(F),e=>{a(`<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg" data-v-626e6619${r}><div class="flex items-start justify-between gap-4" data-v-626e6619${r}><div class="flex-1" data-v-626e6619${r}><div class="flex items-center gap-2 mb-2" data-v-626e6619${r}><span class="text-lg" data-v-626e6619${r}>‚è≥</span><span class="text-base font-semibold text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-base font-medium text-purple-600" data-v-626e6619${r}>${o.ssrInterpolate(e.hora_inicio)} - ${o.ssrInterpolate(e.hora_fin)}</span></div><div class="flex items-center gap-2 mb-2" data-v-626e6619${r}><span class="${o.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-626e6619${r}>${o.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${o.ssrInterpolate(e.modalidad)}</span><span class="px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700" data-v-626e6619${r}> Pendiente de confirmar </span></div>`),e.observaciones?a(`<p class="text-sm text-cafe/60 mt-2" data-v-626e6619${r}>${o.ssrInterpolate(e.observaciones)}</p>`):a("\x3c!----\x3e"),a(`</div><div class="flex gap-2" data-v-626e6619${r}><button class="px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors" data-v-626e6619${r}> ‚úì Confirmar </button><button class="px-3 py-1.5 text-sm bg-white border border-purple-600/30 text-purple-600 hover:bg-purple-600 hover:text-white rounded-lg transition-colors" data-v-626e6619${r}> Ver </button></div></div></div>`)}),a("\x3c!--]--\x3e</div>")):a(`<div class="text-center py-12" data-v-626e6619${r}><span class="text-6xl mb-3 block opacity-40" data-v-626e6619${r}>‚úÖ</span><p class="text-cafe/60" data-v-626e6619${r}>No hay sesiones pendientes de confirmaci√≥n</p></div>`)}),_:1},r)),s("</div>")):s("\x3c!----\x3e"),"anteriores"===t.unref(j)?(s("<div data-v-626e6619>"),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"}," Historial Completo de Sesiones "),t.unref(M).length>0?(t.openBlock(),t.createBlock("div",{key:0,class:"space-y-3"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(M),e=>(t.openBlock(),t.createBlock("div",{key:e.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[t.createVNode("div",{class:"flex items-start justify-between gap-4"},[t.createVNode("div",{class:"flex-1"},[t.createVNode("div",{class:"flex items-center gap-2 mb-2"},[t.createVNode("span",{class:"text-base font-semibold text-cafe"},t.toDisplayString(formatearFecha(e.fecha_cita)),1),t.createVNode("span",{class:"text-sm text-cafe/60"},t.toDisplayString(e.hora_inicio)+" - "+t.toDisplayString(e.hora_fin),1)]),t.createVNode("div",{class:"flex flex-wrap items-center gap-2"},[t.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},t.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+t.toDisplayString(e.modalidad),3),t.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full capitalize",obtenerEstiloEstado(e.estado)]},t.toDisplayString(e.estado),3)])])])]))),128))])):(t.openBlock(),t.createBlock("div",{key:1,class:"text-center py-12"},[t.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"üìö"),t.createVNode("p",{class:"text-cafe/60"},"No hay sesiones registradas")]))];a(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-626e6619${r}> Historial Completo de Sesiones </h3>`),t.unref(M).length>0?(a(`<div class="space-y-3" data-v-626e6619${r}>\x3c!--[--\x3e`),o.ssrRenderList(t.unref(M),e=>{a(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-626e6619${r}><div class="flex items-start justify-between gap-4" data-v-626e6619${r}><div class="flex-1" data-v-626e6619${r}><div class="flex items-center gap-2 mb-2" data-v-626e6619${r}><span class="text-base font-semibold text-cafe" data-v-626e6619${r}>${o.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-sm text-cafe/60" data-v-626e6619${r}>${o.ssrInterpolate(e.hora_inicio)} - ${o.ssrInterpolate(e.hora_fin)}</span></div><div class="flex flex-wrap items-center gap-2" data-v-626e6619${r}><span class="${o.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-626e6619${r}>${o.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${o.ssrInterpolate(e.modalidad)}</span><span class="${o.ssrRenderClass([obtenerEstiloEstado(e.estado),"px-2 py-0.5 text-xs rounded-full capitalize"])}" data-v-626e6619${r}>${o.ssrInterpolate(e.estado)}</span></div></div></div></div>`)}),a("\x3c!--]--\x3e</div>")):a(`<div class="text-center py-12" data-v-626e6619${r}><span class="text-6xl mb-3 block opacity-40" data-v-626e6619${r}>üìö</span><p class="text-cafe/60" data-v-626e6619${r}>No hay sesiones registradas</p></div>`)}),_:1},r)),s("</div>")):s("\x3c!----\x3e"),s('</div><div class="mt-6" data-v-626e6619>'),s(o.ssrRenderComponent(i,null,{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[t.createVNode("span",{class:"text-2xl"},"üìù"),t.createTextVNode(" Notas Cl√≠nicas Privadas ")]),t.createVNode(c,{"paciente-id":t.unref(b),contenido:t.unref(V),"ultima-actualizacion":t.unref(w)||void 0,onGuardar:guardarNotas},null,8,["paciente-id","contenido","ultima-actualizacion"])];a(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-626e6619${r}><span class="text-2xl" data-v-626e6619${r}>üìù</span> Notas Cl√≠nicas Privadas </h2>`),a(o.ssrRenderComponent(c,{"paciente-id":t.unref(b),contenido:t.unref(V),"ultima-actualizacion":t.unref(w)||void 0,onGuardar:guardarNotas},null,s,r))}),_:1},r)),s("</div></div>")):s("\x3c!----\x3e"),s(o.ssrRenderComponent(x,{mostrar:t.unref(R),"paciente-preseleccionado":t.unref(P),onCerrar:cerrarModalCita,onCitaCreada:onCitaCreada},null,r)),s(o.ssrRenderComponent(f,{"is-open":t.unref(A),"cita-id":t.unref(T),onClose:cerrarModalDetalles},null,r)),s("</div>")}}}),v=f.setup;f.setup=(e,a)=>{const s=t.useSSRContext();return(s.modules||(s.modules=new Set)).add("pages/terapeuta/pacientes/[id].vue"),v?v(e,a):void 0};const m=n(f,[["__scopeId","data-v-626e6619"]]);export{m as default};
//# sourceMappingURL=_id_-CbY1VfLt.mjs.map
