import{v as e,s as a,e as t}from"./server.mjs";import{_ as s}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{u as r,_ as o}from"./ModalNuevaCitaEnhanced-Czyu9QM2.mjs";import{M as n}from"./ModalDetallesCita-DUTiJ_cw.mjs";import{u as l}from"./useSupabaseClient-DykwVqLQ.mjs";import{a as i}from"./usePacientes-C1psUwyL.mjs";import{r as d}from"./CheckCircleIcon-DZf4GX3q.mjs";import{r as c}from"./ArrowPathIcon-D0-dipB5.mjs";import{r as u}from"./ClipboardDocumentListIcon-tIc_vSd1.mjs";import{r as v}from"./PlusIcon-CHLzv-V9.mjs";import{r as p}from"./MagnifyingGlassIcon-GsbNDyPZ.mjs";import{r as m}from"./XMarkIcon-DCLwyE-W.mjs";import{r as b}from"./UserIcon-CrHYaeI9.mjs";import{r as g}from"./FunnelIcon-y4UDP9oS.mjs";import"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../_/shared.cjs.prod.mjs";import"../virtual/_commonjsHelpers.mjs";import"node:stream";import"../_/index2.mjs";import"@supabase/supabase-js";import"@vercel/analytics/nuxt";import"./useSupabase-DfFg84CY.mjs";import"./PaymentMethodSelector-B6WAV7CR.mjs";import"./CheckCircleIcon-CT9fzVFs.mjs";import"./PencilIcon-BKWXEWgS.mjs";import"./PhoneIcon-acGzPaDV.mjs";import"./CalendarDaysIcon-f8DhK37e.mjs";import"./ClockIcon-BxdFtPqx.mjs";import"./TicketIcon-zZdrc71S.mjs";import"./ChevronDownIcon-CvdhRGll.mjs";import"./ExclamationTriangleIcon-DQdM2y0F.mjs";function render$1(a,t){return e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})])}const x=e.defineComponent({__name:"EstadisticasBonos",__ssrInlineRender:!0,props:{citas:{}},setup(t){const s=t,r=e.computed(()=>{const e=s.citas.filter(e=>e.bono),a=new Map;e.forEach(e=>{e.bono&&a.set(e.bono.id,e.bono)});const t=Array.from(a.values()),r=t.length,o=t.filter(e=>"activo"===e.estado).length,n=t.filter(e=>e.sesiones_restantes<=2&&e.sesiones_restantes>0).length,l=t.filter(e=>0===e.sesiones_restantes||"completado"===e.estado).length,i=t.reduce((e,a)=>e+a.sesiones_restantes,0),d=t.reduce((e,a)=>e+a.sesiones_totales,0);return{totalBonos:r,bonosActivos:o,bonosConPocasSesiones:n,bonosAgotados:l,totalSesionesDisponibles:i,totalSesionesProgramadas:d,porcentajeUsado:d>0?Math.round((d-i)/d*100):0}}),o=e.computed(()=>r.value.bonosConPocasSesiones>0||r.value.bonosAgotados>0);return(e,t,s,n)=>{t(`\x3c!--[--\x3e<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4" data-v-44ce82a9><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5" data-v-44ce82a9><div class="flex items-center justify-between" data-v-44ce82a9><div data-v-44ce82a9><p class="text-sm font-medium text-gray-600" data-v-44ce82a9>Bonos Activos</p><p class="text-3xl font-bold text-blue-600 mt-1" data-v-44ce82a9>${a.ssrInterpolate(r.value.bonosActivos)}</p><p class="text-xs text-gray-500 mt-1" data-v-44ce82a9>de ${a.ssrInterpolate(r.value.totalBonos)} totales</p></div><div class="h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center" data-v-44ce82a9><svg class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-44ce82a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" data-v-44ce82a9></path></svg></div></div></div><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5" data-v-44ce82a9><div class="flex items-center justify-between" data-v-44ce82a9><div data-v-44ce82a9><p class="text-sm font-medium text-gray-600" data-v-44ce82a9>Sesiones Disponibles</p><p class="text-3xl font-bold text-green-600 mt-1" data-v-44ce82a9>${a.ssrInterpolate(r.value.totalSesionesDisponibles)}</p><p class="text-xs text-gray-500 mt-1" data-v-44ce82a9> de ${a.ssrInterpolate(r.value.totalSesionesProgramadas)} programadas </p></div><div class="h-12 w-12 bg-green-100 rounded-full flex items-center justify-center" data-v-44ce82a9><svg class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-44ce82a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" data-v-44ce82a9></path></svg></div></div></div><div class="${a.ssrRenderClass(["rounded-lg shadow-sm border p-5",r.value.bonosConPocasSesiones>0?"bg-yellow-50 border-yellow-300":"bg-white border-gray-200"])}" data-v-44ce82a9><div class="flex items-center justify-between" data-v-44ce82a9><div data-v-44ce82a9><p class="text-sm font-medium text-gray-600" data-v-44ce82a9>Bonos por Renovar</p><p class="${a.ssrRenderClass(["text-3xl font-bold mt-1",r.value.bonosConPocasSesiones>0?"text-yellow-600":"text-gray-400"])}" data-v-44ce82a9>${a.ssrInterpolate(r.value.bonosConPocasSesiones)}</p><p class="text-xs text-gray-500 mt-1" data-v-44ce82a9>‚â§2 sesiones restantes</p></div><div class="${a.ssrRenderClass(["h-12 w-12 rounded-full flex items-center justify-center",r.value.bonosConPocasSesiones>0?"bg-yellow-200":"bg-gray-100"])}" data-v-44ce82a9><svg class="${a.ssrRenderClass(["h-6 w-6",r.value.bonosConPocasSesiones>0?"text-yellow-600":"text-gray-400"])}" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-44ce82a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-44ce82a9></path></svg></div></div></div><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5" data-v-44ce82a9><div class="flex items-center justify-between" data-v-44ce82a9><div data-v-44ce82a9><p class="text-sm font-medium text-gray-600" data-v-44ce82a9>Bonos Completados</p><p class="text-3xl font-bold text-gray-600 mt-1" data-v-44ce82a9>${a.ssrInterpolate(r.value.bonosAgotados)}</p><p class="text-xs text-gray-500 mt-1" data-v-44ce82a9>0 sesiones restantes</p></div><div class="h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center" data-v-44ce82a9><svg class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-44ce82a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-44ce82a9></path></svg></div></div></div>`),r.value.totalSesionesProgramadas>0?t(`<div class="col-span-full bg-white rounded-lg shadow-sm border border-gray-200 p-5" data-v-44ce82a9><div class="flex items-center justify-between mb-2" data-v-44ce82a9><p class="text-sm font-medium text-gray-700" data-v-44ce82a9>Uso General de Bonos</p><p class="text-sm font-bold text-gray-900" data-v-44ce82a9>${a.ssrInterpolate(r.value.porcentajeUsado)}% usado</p></div><div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden" data-v-44ce82a9><div class="${a.ssrRenderClass(["h-full rounded-full transition-all duration-500",r.value.porcentajeUsado>=80?"bg-red-500":r.value.porcentajeUsado>=60?"bg-yellow-500":"bg-green-500"])}" style="${a.ssrRenderStyle({width:`${r.value.porcentajeUsado}%`})}" data-v-44ce82a9></div></div><div class="flex justify-between text-xs text-gray-500 mt-1" data-v-44ce82a9><span data-v-44ce82a9>${a.ssrInterpolate(r.value.totalSesionesProgramadas-r.value.totalSesionesDisponibles)} usadas</span><span data-v-44ce82a9>${a.ssrInterpolate(r.value.totalSesionesDisponibles)} disponibles</span></div></div>`):t("\x3c!----\x3e"),t("</div>"),o.value?(t('<div class="mt-4 bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-400 p-4 rounded-r-lg" data-v-44ce82a9><div class="flex items-start" data-v-44ce82a9><div class="flex-shrink-0" data-v-44ce82a9><svg class="h-5 w-5 text-yellow-400 mt-0.5" fill="currentColor" viewBox="0 0 20 20" data-v-44ce82a9><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-44ce82a9></path></svg></div><div class="ml-3 flex-1" data-v-44ce82a9><h3 class="text-sm font-medium text-yellow-800" data-v-44ce82a9> Acci√≥n Requerida </h3><div class="mt-2 text-sm text-yellow-700" data-v-44ce82a9><p data-v-44ce82a9>'),r.value.bonosConPocasSesiones>0?t(`<strong data-v-44ce82a9>${a.ssrInterpolate(r.value.bonosConPocasSesiones)} bono${a.ssrInterpolate(r.value.bonosConPocasSesiones>1?"s":"")}</strong>`):t("\x3c!----\x3e"),r.value.bonosConPocasSesiones>0?t(`<span data-v-44ce82a9>${a.ssrInterpolate(r.value.bonosConPocasSesiones>1?" necesitan":" necesita")} renovaci√≥n pronto. </span>`):t("\x3c!----\x3e"),r.value.bonosAgotados>0?t(`<strong class="ml-2" data-v-44ce82a9>${a.ssrInterpolate(r.value.bonosAgotados)} bono${a.ssrInterpolate(r.value.bonosAgotados>1?"s":"")} completado${a.ssrInterpolate(r.value.bonosAgotados>1?"s":"")}. </strong>`):t("\x3c!----\x3e"),t('</p><p class="mt-1 text-xs" data-v-44ce82a9> üí° Contacta a los pacientes para ofrecer renovaci√≥n de bonos </p></div></div></div></div>')):t("\x3c!----\x3e"),t("\x3c!--]--\x3e")}}}),h=x.setup;x.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/EstadisticasBonos.vue"),h?h(a,t):void 0};const f=Object.assign(s(x,[["__scopeId","data-v-44ce82a9"]]),{__name:"EstadisticasBonos"}),w=e.defineComponent({__name:"TarjetaCita",__ssrInlineRender:!0,props:{cita:{},compact:{type:Boolean}},emits:["completar","verHistorial"],setup(t,{emit:s}){const r=t,formatearHora=e=>e.substring(0,5),o=e.computed(()=>({pendiente:"bg-yellow-100 text-yellow-800 border-yellow-300",confirmada:"bg-blue-100 text-blue-800 border-blue-300",completada:"bg-green-100 text-green-800 border-green-300",realizada:"bg-green-100 text-green-800 border-green-300",cancelada:"bg-red-100 text-red-800 border-red-300"}[r.cita.estado]||"bg-gray-100 text-gray-800 border-gray-300")),n=e.computed(()=>{if(!r.cita.bono)return null;const e=r.cita.bono.sesiones_restantes,a=r.cita.bono.estado;return"completado"===a||0===e?{color:"text-red-600",icono:"üö´",alerta:!0,mensajeAlerta:"Bono agotado",clase:"bg-red-50 border-red-200"}:1===e?{color:"text-orange-600",icono:"‚ö†Ô∏è",alerta:!0,mensajeAlerta:"√öltima sesi√≥n del bono",clase:"bg-orange-50 border-orange-200"}:e<=2?{color:"text-yellow-600",icono:"‚ö†Ô∏è",alerta:!0,mensajeAlerta:"Pocas sesiones restantes",clase:"bg-yellow-50 border-yellow-200"}:"activo"===a?{color:"text-green-600",icono:"‚úì",alerta:!1,mensajeAlerta:null,clase:"bg-green-50 border-green-200"}:{color:"text-gray-600",icono:"‚ÑπÔ∏è",alerta:!1,mensajeAlerta:null,clase:"bg-gray-50 border-gray-200"}}),l=e.computed(()=>"pendiente"===r.cita.estado||"confirmada"===r.cita.estado);return(s,r,i,d)=>{r(`<div${a.ssrRenderAttrs(e.mergeProps({class:["border rounded-xl shadow-sm hover:shadow-md transition-all duration-200 bg-white overflow-hidden",t.compact?"p-3":"p-5"]},d))} data-v-3085384e><div class="flex items-start justify-between gap-4" data-v-3085384e><div class="flex-1 min-w-0" data-v-3085384e><div class="flex items-center gap-3 mb-2 flex-wrap" data-v-3085384e><h3 class="${a.ssrRenderClass([t.compact?"text-base":"text-lg","font-semibold text-gray-900 truncate"])}" data-v-3085384e>${a.ssrInterpolate(t.cita.paciente?.nombre_completo||"Paciente")}</h3><span class="${a.ssrRenderClass(["px-3 py-1 text-xs font-medium rounded-full border",e.unref(o)])}" data-v-3085384e>${a.ssrInterpolate(t.cita.estado.toUpperCase())}</span></div><div class="${a.ssrRenderClass(["space-y-1",t.compact?"text-xs":"text-sm","text-gray-600"])}" data-v-3085384e><div class="flex items-center gap-2" data-v-3085384e><svg class="h-4 w-4 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-3085384e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-3085384e></path></svg><span class="truncate" data-v-3085384e>${a.ssrInterpolate(formatearHora(t.cita.hora_inicio))} - ${a.ssrInterpolate(formatearHora(t.cita.hora_fin))}</span>`),t.cita.modalidad?r('<span class="text-gray-400" data-v-3085384e>‚Ä¢</span>'):r("\x3c!----\x3e"),t.cita.modalidad?r(`<span class="capitalize truncate" data-v-3085384e>${a.ssrInterpolate(t.cita.modalidad)}</span>`):r("\x3c!----\x3e"),r("</div>"),t.cita.paciente?.telefono&&!t.compact?r(`<div class="flex items-center gap-2" data-v-3085384e><svg class="h-4 w-4 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-3085384e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" data-v-3085384e></path></svg><span class="truncate" data-v-3085384e>${a.ssrInterpolate(t.cita.paciente.telefono)}</span></div>`):r("\x3c!----\x3e"),r("</div>"),t.cita.bono?(r(`<div class="${a.ssrRenderClass(["mt-3 p-3 rounded-lg border",e.unref(n)?.clase||"bg-gray-50 border-gray-200"])}" data-v-3085384e><div class="flex items-center justify-between gap-2" data-v-3085384e><div class="flex-1 min-w-0" data-v-3085384e><p class="text-xs font-medium text-gray-700 mb-1" data-v-3085384e>${a.ssrInterpolate(e.unref(n)?.icono)} Bono de Sesiones </p><div class="flex items-center gap-2 flex-wrap" data-v-3085384e><p class="${a.ssrRenderClass(["text-sm font-semibold",e.unref(n)?.color||"text-gray-900"])}" data-v-3085384e>${a.ssrInterpolate(t.cita.bono.sesiones_restantes)} / ${a.ssrInterpolate(t.cita.bono.sesiones_totales)} sesiones </p><span class="text-xs text-gray-500 capitalize" data-v-3085384e> (${a.ssrInterpolate(t.cita.bono.estado)}) </span></div>`),e.unref(n)?.alerta?r(`<p class="${a.ssrRenderClass(["mt-2 text-xs font-medium",e.unref(n).color])}" data-v-3085384e>${a.ssrInterpolate(e.unref(n).mensajeAlerta)}</p>`):r("\x3c!----\x3e"),r("</div>"),t.compact?r("\x3c!----\x3e"):r('<button class="text-xs text-blue-600 hover:text-blue-800 font-medium whitespace-nowrap px-2 py-1 hover:bg-blue-50 rounded transition-colors" type="button" data-v-3085384e> üìä Historial </button>'),r("</div></div>")):r('<div class="mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg" data-v-3085384e><p class="text-xs text-gray-500 italic flex items-center gap-2" data-v-3085384e><svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-3085384e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-3085384e></path></svg> Sin bono activo - Consulta individual </p></div>'),t.cita.observaciones&&!t.compact?r(`<div class="mt-3 p-2 bg-gray-50 rounded text-xs text-gray-700" data-v-3085384e><p class="font-medium text-gray-500 mb-1" data-v-3085384e>Observaciones:</p> ${a.ssrInterpolate(t.cita.observaciones)}</div>`):r("\x3c!----\x3e"),r('</div><div class="flex flex-col gap-2" data-v-3085384e>'),e.unref(l)?r(`<button class="${a.ssrRenderClass(["px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors",t.compact?"text-xs":"text-sm"])}" type="button" data-v-3085384e> ‚úÖ Completar </button>`):"completada"===t.cita.estado||"realizada"===t.cita.estado?r(`<span class="${a.ssrRenderClass(["px-4 py-2 bg-green-100 text-green-800 font-medium rounded-lg text-center",t.compact?"text-xs":"text-sm"])}" data-v-3085384e> ‚úì Completada </span>`):r("\x3c!----\x3e"),r("</div></div></div>")}}}),y=w.setup;w.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/TarjetaCita.vue"),y?y(a,t):void 0};const _=Object.assign(s(w,[["__scopeId","data-v-3085384e"]]),{__name:"TarjetaCita"});function useAgenda(){const a=l(),s=t(),r=e.ref([]),o=e.ref(!1),n=e.ref(null),i=e.ref(null),d=e.ref({});e.ref(new Map);const c=e.computed(()=>{const e=(new Date).toISOString().split("T")[0];return r.value.filter(a=>a.fecha_cita===e)}),u=e.computed(()=>r.value.filter(e=>"pendiente"===e.estado||"confirmada"===e.estado)),v=e.computed(()=>r.value.filter(e=>"completada"===e.estado||"realizada"===e.estado)),p=e.computed(()=>r.value.filter(e=>e.bono&&e.bono.sesiones_restantes<=2&&e.bono.sesiones_restantes>0&&("pendiente"===e.estado||"confirmada"===e.estado))),getCitasDelTerapeuta=async e=>{try{if(o.value=!0,n.value=null,!s.value?.id)throw new Error("Usuario no autenticado");let t=a.from("citas").select("\n          id,\n          fecha_cita,\n          hora_inicio,\n          hora_fin,\n          estado,\n          modalidad,\n          observaciones,\n          paciente_id,\n          terapeuta_id,\n          bono_id,\n          sesion_descontada,\n          consumo_registrado,\n          paciente:pacientes (\n            id,\n            nombre_completo,\n            telefono,\n            email\n          ),\n          bono:bonos (\n            id,\n            sesiones_restantes,\n            sesiones_totales,\n            estado\n          )\n        ").eq("terapeuta_id",s.value.id);e?.fechaInicio&&(t=t.gte("fecha_cita",e.fechaInicio)),e?.fechaFin&&(t=t.lte("fecha_cita",e.fechaFin)),e?.incluirCompletadas||(t=t.in("estado",["pendiente","confirmada"])),t=t.order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0});const{data:l,error:i}=await t;if(i)throw i;return r.value=l||[],console.log(`‚úÖ [Agenda] Cargadas ${r.value.length} citas`),r.value}catch(e){throw console.error("‚ùå [Agenda] Error al cargar citas:",e),n.value=e.message||"Error al cargar citas",e}finally{o.value=!1}},m=e.ref([]),detectarInconsistencias=async()=>{try{console.log("üîç [Agenda] Detectando inconsistencias...");const{data:e,error:t}=await a.from("citas").select("\n          id,\n          fecha_cita,\n          hora_inicio,\n          hora_fin,\n          estado,\n          modalidad,\n          observaciones,\n          paciente_id,\n          terapeuta_id,\n          bono_id,\n          sesion_descontada,\n          consumo_registrado,\n          paciente:pacientes (\n            id,\n            nombre_completo,\n            telefono,\n            email\n          ),\n          bono:bonos (\n            id,\n            sesiones_restantes,\n            sesiones_totales,\n            estado\n          )\n        ").in("estado",["completada","realizada"]).not("bono_id","is",null).or("sesion_descontada.eq.false,consumo_registrado.eq.false").eq("terapeuta_id",s.value?.id||"");if(t)throw t;return m.value=e||[],m.value.length>0?console.warn(`‚ö†Ô∏è [Agenda] ${m.value.length} cita(s) con inconsistencias detectadas`):console.log("‚úÖ [Agenda] No se detectaron inconsistencias"),m.value}catch(e){return console.error("‚ùå [Agenda] Error al detectar inconsistencias:",e),m.value=[],[]}},resincronizarBono=async e=>{try{console.log(`üîÑ [Agenda] Re-sincronizando bono para cita: ${e}`);const{data:t,error:s}=await a.rpc("actualizar_bono_por_cita",{p_cita_id:e});if(s)throw s;const r=t;return r.success?(console.log("‚úÖ [Agenda] Bono re-sincronizado exitosamente"),"ya_descontada"===r.warning?mostrarNotificacion("info","Esta sesi√≥n ya estaba descontada"):(mostrarNotificacion("success","Bono re-sincronizado correctamente"),r.alerta&&r.mensaje_alerta&&setTimeout(()=>{mostrarNotificacion("warning",r.mensaje_alerta)},500)),await Promise.all([getCitasDelTerapeuta(),detectarInconsistencias()]),r):(console.warn("‚ö†Ô∏è [Agenda] No se pudo re-sincronizar:",r.message),mostrarNotificacion("warning",r.message||"No se pudo re-sincronizar"),r)}catch(e){throw console.error("‚ùå [Agenda] Error al re-sincronizar bono:",e),mostrarNotificacion("error","Error al re-sincronizar el bono"),e}},suscribirCitasRealtime=()=>{s.value?.id?(i.value&&a.removeChannel(i.value),console.log("üì° [Agenda] Iniciando suscripci√≥n Realtime..."),i.value=a.channel(`citas_terapeuta_${s.value.id}`).on("postgres_changes",{event:"*",schema:"public",table:"citas",filter:`terapeuta_id=eq.${s.value.id}`},async e=>{console.log("üì° [Realtime] Cambio detectado en citas:",e.eventType),await getCitasDelTerapeuta(),"INSERT"===e.eventType?mostrarNotificacion("info","Nueva cita agregada a tu agenda"):"UPDATE"===e.eventType?mostrarNotificacion("info","Una cita ha sido actualizada"):"DELETE"===e.eventType&&mostrarNotificacion("warning","Una cita ha sido eliminada")}).subscribe(e=>{"SUBSCRIBED"===e?console.log("‚úÖ [Realtime] Suscripci√≥n activa"):"CHANNEL_ERROR"===e?console.error("‚ùå [Realtime] Error en suscripci√≥n"):"TIMED_OUT"===e&&console.warn("‚ö†Ô∏è [Realtime] Tiempo de espera agotado")})):console.warn("‚ö†Ô∏è [Agenda] No se puede suscribir sin usuario autenticado")},mostrarNotificacion=(e,a)=>{{const t={success:"‚úÖ",error:"‚ùå",warning:"‚ö†Ô∏è",info:"‚ÑπÔ∏è"};console.log(`${t[e]} [Agenda] ${a}`)}},mostrarAlerta=e=>{if(!e.alerta||!e.mensaje_alerta)return;const a="bono_agotado"===e.tipo_alerta?"success":(e.tipo_alerta,"warning");mostrarNotificacion(a,e.mensaje_alerta)};e.watchEffect(()=>{s.value?.id&&(getCitasDelTerapeuta(),suscribirCitasRealtime())});const b=e.computed(()=>{let e=r.value;if(d.value.paciente&&(e=e.filter(e=>e.paciente?.nombre_completo.toLowerCase().includes(d.value.paciente.toLowerCase()))),d.value.busqueda){const a=d.value.busqueda.toLowerCase();e=e.filter(e=>e.paciente?.nombre_completo.toLowerCase().includes(a)||e.observaciones?.toLowerCase().includes(a)||e.fecha_cita.includes(a))}return d.value.estado&&d.value.estado.length>0&&(e=e.filter(e=>d.value.estado.includes(e.estado))),d.value.area_terapeutica&&(e=e.filter(e=>e.area_terapeutica===d.value.area_terapeutica)),d.value.tipo_sesion&&d.value.tipo_sesion.length>0&&(e=e.filter(e=>e.tipo_sesion&&d.value.tipo_sesion.includes(e.tipo_sesion))),d.value.fecha_desde&&(e=e.filter(e=>e.fecha_cita>=d.value.fecha_desde)),d.value.fecha_hasta&&(e=e.filter(e=>e.fecha_cita<=d.value.fecha_hasta)),e}),calcularCargaDiaria=(e,a)=>{const t=r.value.filter(t=>{const s=t.fecha_cita===e,r=!a||t.terapeuta_id===a,o=["pendiente","confirmada"].includes(t.estado);return s&&r&&o});return{total:t.length,confirmadas:t.filter(e=>"confirmada"===e.estado).length,pendientes:t.filter(e=>"pendiente"===e.estado).length}};return{citas:r,loading:o,error:n,filtros:d,citasDelDia:c,citasPendientes:u,citasCompletadas:v,citasConBonoProximoAgotar:p,citasFiltradas:b,getCitasDelTerapeuta:getCitasDelTerapeuta,completarCita:async e=>{try{console.log(`üîÑ [Agenda] Completando cita: ${e}`);const{data:t,error:s}=await a.rpc("completar_cita",{p_cita_id:e});if(s)throw console.error("‚ùå [Agenda] Error en RPC:",s),s;const o=t;if(o.success){console.log("‚úÖ [Agenda] Cita completada exitosamente");const a=r.value.findIndex(a=>a.id===e);if(-1!==a){const e=r.value[a];e&&(e.estado="completada",e.sesion_descontada=!0,e.consumo_registrado=!0,e.bono&&void 0!==o.sesiones_despues&&(e.bono.sesiones_restantes=o.sesiones_despues,o.bono_completado&&(e.bono.estado="completado")))}return o.alerta?mostrarAlerta(o):mostrarNotificacion("success",o.message),await getCitasDelTerapeuta(),o}return o.warning?(console.warn("‚ö†Ô∏è [Agenda] Advertencia:",o.message),mostrarNotificacion("warning",o.message)):(console.error("‚ùå [Agenda] Error:",o.message),mostrarNotificacion("error",o.message||"No se pudo completar la cita")),o}catch(e){console.error("‚ùå [Agenda] Error al completar cita:",e);const a=e.message||"Error desconocido al completar cita";return mostrarNotificacion("error",a),{success:!1,message:a,error:e.code||"unknown_error"}}},obtenerHistorialBono:async e=>{try{const{data:t,error:s}=await a.rpc("obtener_historial_bono",{p_bono_id:e});if(s)throw s;return console.log(`‚úÖ [Agenda] Historial de bono obtenido: ${t?.length||0} movimientos`),t||[]}catch(e){throw console.error("‚ùå [Agenda] Error al obtener historial:",e),e}},verificarBonoCitas:async e=>{try{const{data:t,error:s}=await a.rpc("verificar_bono_citas",{p_bono_id:e});if(s)throw s;return console.log("‚úÖ [Agenda] Verificaci√≥n de bono:",t),t?.alerta&&console.warn("‚ö†Ô∏è [Agenda] Alerta en bono:",t.mensaje_alerta),t}catch(e){throw console.error("‚ùå [Agenda] Error al verificar bono:",e),e}},citasPendientesSync:m,detectarInconsistencias:detectarInconsistencias,resincronizarBono:resincronizarBono,resincronizarTodos:async()=>{if(0!==m.value.length)try{console.log(`üîÑ [Agenda] Re-sincronizando ${m.value.length} citas...`);let e=0,a=0,t=0;for(const s of m.value)try{const r=await resincronizarBono(s.id);r.success?"ya_descontada"===r.warning?t++:e++:a++,await new Promise(e=>setTimeout(e,300))}catch{a++}const s=[];e>0&&s.push(`${e} sincronizada(s)`),t>0&&s.push(`${t} ya estaba(n) descontada(s)`),a>0&&s.push(`${a} fallida(s)`);const r=`‚úÖ Re-sincronizaci√≥n completa: ${s.join(", ")}`;mostrarNotificacion(0===a?"success":"warning",r),console.log("‚úÖ [Agenda] Re-sincronizaci√≥n masiva completada:",{exitosos:e,yaDescontados:t,fallidos:a})}catch(e){console.error("‚ùå [Agenda] Error en re-sincronizaci√≥n masiva:",e),mostrarNotificacion("error","Error al re-sincronizar todas las citas")}else mostrarNotificacion("info","No hay citas pendientes de sincronizaci√≥n")},aplicarFiltros:e=>{d.value={...e}},limpiarFiltros:()=>{d.value={}},reprogramarCita:async(e,t,s,n)=>{try{o.value=!0;const{data:l,error:i}=await a.from("citas").update({fecha_cita:t,hora_inicio:s,hora_fin:n||s,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(i)throw i;const d=r.value.findIndex(a=>a.id===e);return-1!==d&&l&&(r.value[d]={...r.value[d],...l}),{success:!0,cita:l}}catch(e){return console.error("Error al reprogramar cita:",e),{success:!1,error:e.message}}finally{o.value=!1}},actualizarNotasRapidas:async(e,t,s)=>{try{const{data:o,error:n}=await a.from("citas").update({notas_rapidas:t,enlace_videollamada:s,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw n;const l=r.value.findIndex(a=>a.id===e);return-1!==l&&o&&(r.value[l]={...r.value[l],...o}),{success:!0}}catch(e){return console.error("Error al actualizar notas:",e),{success:!1,error:e.message}}},obtenerDisponibilidad:async e=>{try{const t=e||s.value?.id;if(!t)throw new Error("ID de terapeuta requerido");const{data:r,error:o}=await a.from("terapeutas").select("disponibilidad").eq("id",t).single();if(o)throw o;return r?.disponibilidad||[]}catch(e){return console.error("Error al obtener disponibilidad:",e),[]}},calcularHuecosLibres:(e,a)=>{const t=new Date(e+"T00:00:00").getDay(),s=r.value.filter(a=>a.fecha_cita===e),o=a.filter(e=>e.dia_semana===t&&e.disponible);if(0===o.length)return[];const n=[];return o.forEach(e=>{const a=e.hora_inicio,t=e.hora_fin;s.some(e=>e.hora_inicio>=a&&e.hora_inicio<t||e.hora_fin>a&&e.hora_fin<=t||e.hora_inicio<=a&&e.hora_fin>=t)||n.push({hora_inicio:a,hora_fin:t})}),n},programarRecordatorios:async e=>{try{const t=r.value.find(a=>a.id===e);if(!t||!t.paciente)return{success:!1,error:"Cita no encontrada"};const s=new Date(t.fecha_cita+"T"+t.hora_inicio),o=new Date;new Date(s.getTime()-864e5)>o&&!t.recordatorio_24h_enviado&&(await a.from("notificaciones").insert({usuario_id:t.paciente_id,tipo:"cita",titulo:"üìÖ Recordatorio: Cita ma√±ana",mensaje:`Tu cita est√° programada para ma√±ana ${t.fecha_cita} a las ${t.hora_inicio}`,metadata:{cita_id:e,tipo_recordatorio:"24h",fecha_cita:t.fecha_cita,hora:t.hora_inicio}}),await a.from("citas").update({recordatorio_24h_enviado:!0}).eq("id",e));return new Date(s.getTime()-144e5)>o&&!t.recordatorio_4h_enviado&&(await a.from("notificaciones").insert({usuario_id:t.paciente_id,tipo:"cita",titulo:"‚è∞ Recordatorio: Cita en 4 horas",mensaje:`Tu cita est√° programada para hoy ${t.fecha_cita} a las ${t.hora_inicio}`,metadata:{cita_id:e,tipo_recordatorio:"4h",fecha_cita:t.fecha_cita,hora:t.hora_inicio,enlace_videollamada:t.enlace_videollamada}}),await a.from("citas").update({recordatorio_4h_enviado:!0}).eq("id",e)),{success:!0}}catch(e){return console.error("Error al programar recordatorios:",e),{success:!1,error:e.message}}},calcularCargaDiaria:calcularCargaDiaria,obtenerResumenSemanal:e=>{const a=new Date(e+"T00:00:00"),t=[];for(let e=0;e<7;e++){const s=new Date(a);s.setDate(a.getDate()+e);const r=s.toISOString().split("T")[0]||"";if(!r)continue;const o=calcularCargaDiaria(r);t.push({fecha:r,dia:s.toLocaleDateString("es-ES",{weekday:"short"}),citas:o.total,confirmadas:o.confirmadas,pendientes:o.pendientes})}return t},obtenerResumenMensual:(e,a)=>{const t=new Date(e,a+1,0),s=new Map;for(let r=1;r<=t.getDate();r++){const t=new Date(e,a,r).toISOString().split("T")[0]||"";if(!t)continue;const o=calcularCargaDiaria(t);s.set(t,{dia:r,citas:o.total,confirmadas:o.confirmadas,pendientes:o.pendientes})}return s},suscribirCitasRealtime:suscribirCitasRealtime,desuscribirCitasRealtime:()=>{i.value&&(console.log("üì° [Realtime] Cerrando suscripci√≥n..."),a.removeChannel(i.value),i.value=null)}}}function render(a,t){return e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z","clip-rule":"evenodd"})])}const C=e.defineComponent({__name:"AgendaStatusFilters",__ssrInlineRender:!0,props:{citas:{},estadosActivos:{default:()=>["pendiente","confirmada","realizada","cancelada"]}},emits:["filtrar","update:estadosActivos"],setup(t,{emit:s}){const r=t,o=e.ref(new Set(r.estadosActivos)),n=[{key:"pendiente",label:"Pendientes",emoji:"‚è≥",bgInactive:"bg-white hover:bg-yellow-50",textInactive:"text-yellow-700",borderInactive:"border-yellow-300",bgActive:"bg-yellow-500",textActive:"text-white",borderActive:"border-yellow-600",ringColor:"ring-yellow-500"},{key:"confirmada",label:"Confirmadas",emoji:"‚úì",bgInactive:"bg-white hover:bg-emerald-50",textInactive:"text-emerald-700",borderInactive:"border-emerald-300",bgActive:"bg-emerald-500",textActive:"text-white",borderActive:"border-emerald-600",ringColor:"ring-emerald-500"},{key:"realizada",label:"Realizadas",emoji:"‚úî",bgInactive:"bg-white hover:bg-blue-50",textInactive:"text-blue-700",borderInactive:"border-blue-300",bgActive:"bg-blue-500",textActive:"text-white",borderActive:"border-blue-600",ringColor:"ring-blue-500"},{key:"cancelada",label:"Canceladas",emoji:"‚úï",bgInactive:"bg-white hover:bg-red-50",textInactive:"text-red-700",borderInactive:"border-red-300",bgActive:"bg-red-500",textActive:"text-white",borderActive:"border-red-600",ringColor:"ring-red-500"}],l=e.computed(()=>r.citas.length),i=e.computed(()=>0===o.value.size?r.citas.length:r.citas.filter(e=>o.value.has(e.estado)).length),c=e.computed(()=>o.value.size<n.length&&o.value.size>0),u=e.computed(()=>o.value.size===n.length),estaActivo=e=>o.value.has(e);return(t,s,v,p)=>{s(`<div${a.ssrRenderAttrs(e.mergeProps({class:"space-y-3"},p))} data-v-8acd89bc><div class="flex items-center justify-between" data-v-8acd89bc><div class="flex items-center gap-3" data-v-8acd89bc><h3 class="text-sm font-bold text-gray-800 uppercase tracking-wide" data-v-8acd89bc>Filtrar por Estado</h3>`),c.value?s(`<div class="px-3 py-1 bg-gradient-to-r from-teal-500 to-teal-600 text-white text-xs font-bold rounded-full shadow-sm" data-v-8acd89bc>${a.ssrInterpolate(i.value)} de ${a.ssrInterpolate(l.value)} citas </div>`):u.value?s(`<div class="px-3 py-1 bg-gray-100 text-gray-700 text-xs font-semibold rounded-full" data-v-8acd89bc>${a.ssrInterpolate(l.value)} citas totales </div>`):s('<div class="px-3 py-1 bg-orange-100 text-orange-700 text-xs font-bold rounded-full animate-pulse" data-v-8acd89bc> Sin filtros - 0 citas visibles </div>'),s('</div><div class="flex items-center gap-2" data-v-8acd89bc>'),u.value?s("\x3c!----\x3e"):(s('<button class="text-xs font-medium text-teal-600 hover:text-teal-700 hover:underline transition-colors flex items-center gap-1" data-v-8acd89bc>'),s(a.ssrRenderComponent(e.unref(d),{class:"w-4 h-4"},null,v)),s(" Seleccionar todos </button>")),c.value||!u.value?s('<button class="text-xs font-medium text-gray-500 hover:text-gray-700 hover:underline transition-colors flex items-center gap-1" data-v-8acd89bc><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-8acd89bc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-8acd89bc></path></svg> Limpiar filtros </button>'):s("\x3c!----\x3e"),s('</div></div><div class="flex flex-wrap gap-3" data-v-8acd89bc>\x3c!--[--\x3e'),a.ssrRenderList(n,t=>{s(`<div class="${a.ssrRenderClass((e=>["relative flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold border-2 transition-all duration-200 cursor-pointer select-none","hover:shadow-md hover:-translate-y-0.5 active:translate-y-0","focus:outline-none focus:ring-2 focus:ring-offset-2",estaActivo(e.key)?[e.bgActive,e.textActive,e.borderActive,"shadow-sm"]:[e.bgInactive,e.textInactive,e.borderInactive],e.ringColor])(t))}" role="button"${a.ssrRenderAttr("aria-pressed",estaActivo(t.key))} tabindex="0" data-v-8acd89bc>`),estaActivo(t.key)?(s(`<div class="${a.ssrRenderClass([t.borderActive,"absolute -top-2 -right-2 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-lg border-2"])}" data-v-8acd89bc>`),s(a.ssrRenderComponent(e.unref(d),{class:["w-5 h-5",t.textInactive]},null,v)),s("</div>")):s("\x3c!----\x3e"),s(`<span class="text-lg leading-none" data-v-8acd89bc>${a.ssrInterpolate(t.emoji)}</span><span class="font-bold" data-v-8acd89bc>${a.ssrInterpolate(t.label)}</span><span class="${a.ssrRenderClass([estaActivo(t.key)?"bg-white/30":"bg-gray-100","ml-1 px-2 py-0.5 rounded-full text-xs font-bold"])}" data-v-8acd89bc>${a.ssrInterpolate((e=>r.citas.filter(a=>a.estado===e).length)(t.key))}</span></div>`)}),s("\x3c!--]--\x3e</div>"),0===o.value.size?s('<div class="mt-4 text-center py-8 px-4 bg-orange-50 rounded-xl border-2 border-orange-200" data-v-8acd89bc><div class="text-4xl mb-2" data-v-8acd89bc>üîç</div><p class="text-sm font-semibold text-orange-800 mb-1" data-v-8acd89bc> No hay filtros activos </p><p class="text-xs text-orange-600 mb-3" data-v-8acd89bc> Selecciona al menos un estado para ver las citas </p><button class="px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm font-semibold rounded-lg transition-colors shadow-sm" data-v-8acd89bc> Mostrar todas las citas </button></div>'):0===i.value&&o.value.size>0?s('<div class="mt-4 text-center py-8 px-4 bg-gray-50 rounded-xl border-2 border-gray-200" data-v-8acd89bc><div class="text-4xl mb-2" data-v-8acd89bc>üì≠</div><p class="text-sm font-semibold text-gray-700 mb-1" data-v-8acd89bc> No hay citas con los estados seleccionados </p><p class="text-xs text-gray-500 mb-3" data-v-8acd89bc> Prueba seleccionando otros estados o todos </p><button class="text-sm font-medium text-teal-600 hover:text-teal-700 hover:underline" data-v-8acd89bc> Ver todas las citas </button></div>'):s("\x3c!----\x3e"),s("</div>")}}}),$=C.setup;C.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/agenda/AgendaStatusFilters.vue"),$?$(a,t):void 0};const k=Object.assign(s(C,[["__scopeId","data-v-8acd89bc"]]),{__name:"AgendaStatusFilters"}),formatearMesAnio=e=>new Date(e+"T00:00:00").toLocaleDateString("es-ES",{month:"long",year:"numeric"}),obtenerTituloAgenda=(e,a)=>{const t="string"==typeof a?a:a.toISOString().split("T")[0];switch(e){case"dia":return(e=>new Date(e+"T00:00:00").toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric"}))(t);case"5dias":return`${formatearMesAnio(t)} ‚Äî 5 d√≠as`;case"semana":return`${formatearMesAnio(t)} ‚Äî Semana ${(e=>{const a=new Date(e+"T00:00:00"),t=new Date(a.getFullYear(),0,1),s=a.getTime()-t.getTime();return Math.ceil((s/864e5+t.getDay()+1)/7)})(t)}`;case"mes":return formatearMesAnio(t);default:return""}},R=e.defineComponent({__name:"AgendaHeader",__ssrInlineRender:!0,props:e.mergeModels({rolActivo:{default:"terapeuta"},mostrarRol:{type:Boolean,default:!1}},{vista:{default:"semana"},vistaModifiers:{},fechaActual:{default:()=>new Date},fechaActualModifiers:{},darkMode:{type:Boolean,default:!1},darkModeModifiers:{}}),emits:e.mergeModels(["nueva-cita"],["update:vista","update:fechaActual","update:darkMode"]),setup(t,{emit:s}){const r=e.useModel(t,"vista"),o=e.useModel(t,"fechaActual"),n=e.useModel(t,"darkMode"),l=[{value:"dia",label:"D√≠a",shortcut:"1"},{value:"5dias",label:"5 D√≠as",shortcut:"4"},{value:"semana",label:"Semana",shortcut:"2"},{value:"mes",label:"Mes",shortcut:"3"}],i=e.computed(()=>obtenerTituloAgenda(r.value,o.value));return(s,o,d,c)=>{o(`<div${a.ssrRenderAttrs(e.mergeProps({class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 px-4 py-3 bg-white dark:bg-gray-900 border-b border-cafe/10 dark:border-gray-800"},c))}><div class="flex items-center gap-3"><div class="flex items-center gap-1"><button class="p-2 rounded-lg hover:bg-purple-50 dark:hover:bg-gray-800 text-cafe/70 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors" title="Anterior"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button><button class="px-3 py-1.5 text-sm font-medium rounded-lg border border-purple-200 dark:border-purple-700 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/30 transition-colors"> Hoy </button><button class="p-2 rounded-lg hover:bg-purple-50 dark:hover:bg-gray-800 text-cafe/70 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 transition-colors" title="Siguiente"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div><h1 class="text-lg sm:text-xl font-[&#39;Elms_Sans&#39;] font-bold text-neutral-800 dark:text-gray-100 capitalize">${a.ssrInterpolate(e.unref(i))}</h1></div><div class="flex items-center gap-3"><div class="flex items-center bg-gray-100 dark:bg-gray-800 rounded-lg p-1">\x3c!--[--\x3e`),a.ssrRenderList(l,e=>{o(`<button class="${a.ssrRenderClass([r.value===e.value?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-cafe/70 dark:text-gray-400 hover:text-cafe dark:hover:text-gray-200","px-3 py-1.5 text-sm font-medium rounded-md transition-all"])}"${a.ssrRenderAttr("title",`Vista ${e.label} (${e.shortcut})`)}>${a.ssrInterpolate(e.label)}</button>`)}),o(`\x3c!--]--\x3e</div><button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-cafe/70 dark:text-gray-400 transition-colors"${a.ssrRenderAttr("title",n.value?"Modo claro":"Modo oscuro")}>`),n.value?o('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'):o('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),o('</button><button class="flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium rounded-lg shadow-sm hover:shadow transition-all"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg><span class="hidden sm:inline">Nueva Cita</span></button>'),t.mostrarRol?o(`<div class="hidden lg:flex items-center gap-2"><div class="px-3 py-1.5 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700 rounded-lg"><span class="text-sm font-semibold text-purple-700 dark:text-purple-400">${a.ssrInterpolate("coordinadora"===t.rolActivo?"Coordinadora":"Terapeuta")}</span></div></div>`):o("\x3c!----\x3e"),o("</div></div>")}}}),A=R.setup;R.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/agenda/AgendaHeader.vue"),A?A(a,t):void 0};const I=Object.assign(R,{__name:"AgendaHeader"}),S=e.defineComponent({__name:"AgendaViewControls",__ssrInlineRender:!0,props:{vista:{},fechaActual:{},loading:{type:Boolean,default:!1},lastUpdateTime:{default:null}},emits:["cambiar-vista","navegar-fecha","ir-hoy","actualizar"],setup(t,{emit:s}){const r=t,o=e.computed(()=>r.fechaActual.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),n=e.computed(()=>o.value.charAt(0).toUpperCase()+o.value.slice(1));return(e,s,r,o)=>{s(`\x3c!--[--\x3e<div class="flex items-center justify-between gap-4 flex-wrap" data-v-c3b9a6c3><div class="flex items-center gap-3" data-v-c3b9a6c3><div class="text-sm" data-v-c3b9a6c3><span class="font-medium text-neutral-800" data-v-c3b9a6c3>${a.ssrInterpolate(n.value)}</span></div><div class="flex items-center gap-1 border border-neutral-200 rounded-lg p-1 bg-white" data-v-c3b9a6c3><button class="p-1.5 rounded hover:bg-neutral-100 text-neutral-600 hover:text-neutral-800 transition-colors"${a.ssrRenderAttr("aria-label","dia"===t.vista?"D√≠a anterior":"Semana anterior")} title="Anterior" data-v-c3b9a6c3><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-c3b9a6c3><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" data-v-c3b9a6c3></path></svg></button><button class="px-3 py-1.5 text-xs font-semibold text-teal-700 hover:bg-teal-50 rounded transition-colors" data-v-c3b9a6c3> Hoy </button><button class="p-1.5 rounded hover:bg-neutral-100 text-neutral-600 hover:text-neutral-800 transition-colors"${a.ssrRenderAttr("aria-label","dia"===t.vista?"D√≠a siguiente":"Semana siguiente")} title="Siguiente" data-v-c3b9a6c3><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-c3b9a6c3><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-c3b9a6c3></path></svg></button></div></div><div class="flex items-center gap-3" data-v-c3b9a6c3><div class="flex bg-neutral-100 rounded-lg p-1" role="tablist" data-v-c3b9a6c3><button role="tab"${a.ssrRenderAttr("aria-selected","dia"===t.vista)} class="${a.ssrRenderClass(["dia"===t.vista?"bg-white text-neutral-800 shadow-sm":"text-neutral-600 hover:text-neutral-800","px-3 py-1.5 rounded-md text-sm font-medium transition-all"])}" data-v-c3b9a6c3> D√≠a </button><button role="tab"${a.ssrRenderAttr("aria-selected","calendario"===t.vista)} class="${a.ssrRenderClass(["calendario"===t.vista?"bg-white text-neutral-800 shadow-sm":"text-neutral-600 hover:text-neutral-800","px-3 py-1.5 rounded-md text-sm font-medium transition-all"])}" data-v-c3b9a6c3> Semana </button><button role="tab"${a.ssrRenderAttr("aria-selected","lista"===t.vista)} class="${a.ssrRenderClass(["lista"===t.vista?"bg-white text-neutral-800 shadow-sm":"text-neutral-600 hover:text-neutral-800","px-3 py-1.5 rounded-md text-sm font-medium transition-all"])}" data-v-c3b9a6c3> Lista </button></div><button${a.ssrIncludeBooleanAttr(t.loading)?" disabled":""} class="flex items-center gap-2 px-3 py-2 bg-white border border-neutral-200 rounded-lg hover:bg-neutral-50 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Actualizar agenda" data-v-c3b9a6c3><svg class="${a.ssrRenderClass(["w-4 h-4 text-teal-600",t.loading?"animate-spin":""])}" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-c3b9a6c3><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" data-v-c3b9a6c3></path></svg>`),t.loading?s('<span class="text-sm font-medium text-neutral-500" data-v-c3b9a6c3>Actualizando...</span>'):s('<span class="text-sm font-medium text-neutral-700" data-v-c3b9a6c3>Actualizar</span>'),s("</button></div></div>"),t.lastUpdateTime&&!t.loading?s(`<div class="mt-2 text-right" data-v-c3b9a6c3><span class="text-xs text-neutral-400" data-v-c3b9a6c3>${a.ssrInterpolate(t.lastUpdateTime)}</span></div>`):s("\x3c!----\x3e"),s("\x3c!--]--\x3e")}}}),j=S.setup;S.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/agenda/AgendaViewControls.vue"),j?j(a,t):void 0};const D=Object.assign(s(S,[["__scopeId","data-v-c3b9a6c3"]]),{__name:"AgendaViewControls"}),z=e.defineComponent({__name:"AgendaUnifiedHeader",__ssrInlineRender:!0,props:{vista:{},fechaActual:{},loading:{type:Boolean,default:!1},modoCoordinadora:{type:Boolean,default:!1}},emits:["cambiar-vista","navegar-fecha","ir-hoy","actualizar","nueva-cita","nueva-tarea"],setup(t,{emit:s}){const r=t,o=e.computed(()=>{const e=new Date(r.fechaActual),a=new Date(e.getFullYear(),0,1),t=Math.floor((e.getTime()-a.getTime())/864e5);return Math.ceil((t+a.getDay()+1)/7)}),n=e.computed(()=>{const e=new Date(r.fechaActual),a=e.getDay(),t=0===a?-6:1-a,s=new Date(e);s.setDate(e.getDate()+t);const o=new Date(s);o.setDate(s.getDate()+6);const formatoCorto=e=>e.getDate(),mes=e=>e.toLocaleDateString("es-ES",{month:"short"}),a√±o=e=>e.getFullYear();return s.getMonth()===o.getMonth()?`${formatoCorto(s)}‚Äì${formatoCorto(o)} ${mes(o)} ${a√±o(o)}`:`${formatoCorto(s)} ${mes(s)} ‚Äì ${formatoCorto(o)} ${mes(o)} ${a√±o(o)}`}),l=e.computed(()=>r.fechaActual.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),i=e.computed(()=>{if("dia"===r.vista){const e=l.value;return e.charAt(0).toUpperCase()+e.slice(1)}return`Semana ${o.value} ¬∑ ${n.value}`}),d=[{value:"dia",label:"D√≠a"},{value:"calendario",label:"Semana"},{value:"lista",label:"Lista"}],p=e.computed(()=>"dia"===r.vista?{anterior:"D√≠a anterior",siguiente:"D√≠a siguiente"}:{anterior:"Semana anterior",siguiente:"Semana siguiente"});return(s,r,o,n)=>{r(`<header${a.ssrRenderAttrs(e.mergeProps({class:"agenda-unified-header"},n))} data-v-e95c8bd7><div class="header-left" data-v-e95c8bd7><h1 class="header-title" data-v-e95c8bd7>${a.ssrInterpolate(i.value)}</h1><nav class="nav-controls" aria-label="Navegaci√≥n temporal" data-v-e95c8bd7><button class="nav-btn"${a.ssrRenderAttr("aria-label",p.value.anterior)}${a.ssrRenderAttr("title",p.value.anterior)} data-v-e95c8bd7><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e95c8bd7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" data-v-e95c8bd7></path></svg></button><button class="nav-today" data-v-e95c8bd7> Hoy </button><button class="nav-btn"${a.ssrRenderAttr("aria-label",p.value.siguiente)}${a.ssrRenderAttr("title",p.value.siguiente)} data-v-e95c8bd7><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e95c8bd7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-e95c8bd7></path></svg></button></nav></div><div class="header-center" data-v-e95c8bd7><div class="view-selector" role="tablist" data-v-e95c8bd7>\x3c!--[--\x3e`),a.ssrRenderList(d,e=>{r(`<button role="tab"${a.ssrRenderAttr("aria-selected",t.vista===e.value)} class="${a.ssrRenderClass([{active:t.vista===e.value},"view-btn"])}" data-v-e95c8bd7>${a.ssrInterpolate(e.label)}</button>`)}),r(`\x3c!--]--\x3e</div></div><div class="header-right" data-v-e95c8bd7><button${a.ssrIncludeBooleanAttr(t.loading)?" disabled":""} class="action-btn action-btn-secondary" aria-label="Actualizar agenda" title="Actualizar" data-v-e95c8bd7>`),r(a.ssrRenderComponent(e.unref(c),{class:["w-4 h-4",t.loading?"animate-spin":""]},null,o)),r("</button>"),t.modoCoordinadora?(r('<button class="action-btn action-btn-secondary" aria-label="Crear nueva tarea" data-v-e95c8bd7>'),r(a.ssrRenderComponent(e.unref(u),{class:"w-4 h-4"},null,o)),r('<span class="hidden sm:inline" data-v-e95c8bd7>Nueva tarea</span></button>')):r("\x3c!----\x3e"),r('<button class="action-btn action-btn-primary" aria-label="Crear nueva cita" data-v-e95c8bd7>'),r(a.ssrRenderComponent(e.unref(v),{class:"w-4 h-4"},null,o)),r("<span data-v-e95c8bd7>Nueva cita</span></button></div></header>")}}}),B=z.setup;z.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/agenda/AgendaUnifiedHeader.vue"),B?B(a,t):void 0};const M=Object.assign(s(z,[["__scopeId","data-v-e95c8bd7"]]),{__name:"AgendaUnifiedHeader"}),L=e.defineComponent({__name:"AgendaFilterBar",__ssrInlineRender:!0,props:{citas:{},modoCoordinadora:{type:Boolean,default:!1},terapeutas:{default:()=>[]},terapeutaSeleccionado:{default:null},estadosActivos:{default:()=>["pendiente","confirmada","realizada","cancelada"]},busqueda:{default:""}},emits:["update:busqueda","update:terapeutaSeleccionado","update:estadosActivos","filtrar-estados"],setup(t,{emit:s}){const r=t,o=e.ref(r.busqueda),n=e.ref(new Set(r.estadosActivos));e.watch(()=>r.busqueda,e=>{o.value=e}),e.watch(()=>r.estadosActivos,e=>{n.value=new Set(e)});const l=[{key:"pendiente",label:"Pendientes",color:"#F59E0B",bgLight:"rgba(245, 158, 11, 0.1)"},{key:"confirmada",label:"Confirmadas",color:"#10B981",bgLight:"rgba(16, 185, 129, 0.1)"},{key:"realizada",label:"Realizadas",color:"#6366F1",bgLight:"rgba(99, 102, 241, 0.1)"},{key:"cancelada",label:"Canceladas",color:"#EF4444",bgLight:"rgba(239, 68, 68, 0.1)"}],i=e.computed(()=>0===n.value.size?0:r.citas.filter(e=>n.value.has(e.estado)).length),estaActivo=e=>n.value.has(e),d=e.computed(()=>n.value.size===l.length);return(s,n,c,u)=>{n(`<div${a.ssrRenderAttrs(e.mergeProps({class:"filter-bar"},u))} data-v-06d28784><div class="filter-row-main" data-v-06d28784><div class="search-container" data-v-06d28784>`),n(a.ssrRenderComponent(e.unref(p),{class:"search-icon"},null,c)),n(`<input${a.ssrRenderAttr("value",o.value)} type="search" placeholder="Buscar por paciente, terapeuta o nota..." class="search-input" aria-label="Buscar en la agenda" data-v-06d28784>`),o.value?(n('<button class="search-clear" aria-label="Limpiar b√∫squeda" data-v-06d28784>'),n(a.ssrRenderComponent(e.unref(m),{class:"w-4 h-4"},null,c)),n("</button>")):n("\x3c!----\x3e"),n("</div>"),t.modoCoordinadora&&t.terapeutas.length>0?(n('<div class="terapeuta-selector" data-v-06d28784>'),n(a.ssrRenderComponent(e.unref(b),{class:"w-4 h-4 text-gray-400"},null,c)),n(`<select${a.ssrRenderAttr("value",t.terapeutaSeleccionado)} class="terapeuta-select" aria-label="Filtrar por terapeuta" data-v-06d28784><option value="" data-v-06d28784>Todos los terapeutas</option>\x3c!--[--\x3e`),a.ssrRenderList(t.terapeutas,e=>{n(`<option${a.ssrRenderAttr("value",e.id)} data-v-06d28784>${a.ssrInterpolate(e.nombre)}</option>`)}),n("\x3c!--]--\x3e</select></div>")):n("\x3c!----\x3e"),n('</div><div class="filter-row-states" data-v-06d28784><div class="states-label" data-v-06d28784>'),n(a.ssrRenderComponent(e.unref(g),{class:"w-3.5 h-3.5"},null,c)),n('<span data-v-06d28784>Estado</span></div><div class="states-chips" data-v-06d28784>\x3c!--[--\x3e'),a.ssrRenderList(l,t=>{n(`<button class="${a.ssrRenderClass([{active:estaActivo(t.key)},"state-chip"])}" style="${a.ssrRenderStyle({"--chip-color":t.color,"--chip-bg":t.bgLight})}"${a.ssrRenderAttr("aria-pressed",estaActivo(t.key))} data-v-06d28784><span class="chip-dot" style="${a.ssrRenderStyle({backgroundColor:t.color})}" data-v-06d28784></span><span class="chip-label" data-v-06d28784>${a.ssrInterpolate(t.label)}</span><span class="chip-count" data-v-06d28784>${a.ssrInterpolate((e=>r.citas.filter(a=>a.estado===e).length)(t.key))}</span>`),estaActivo(t.key)?n(a.ssrRenderComponent(e.unref(render),{class:"chip-check"},null,c)):n("\x3c!----\x3e"),n("</button>")}),n('\x3c!--]--\x3e</div><div class="results-count" data-v-06d28784>'),d.value?n(`<span class="results-total" data-v-06d28784>${a.ssrInterpolate(t.citas.length)} citas </span>`):n(`<span class="results-filtered" data-v-06d28784>${a.ssrInterpolate(i.value)} de ${a.ssrInterpolate(t.citas.length)}</span>`),d.value?n("\x3c!----\x3e"):n('<button class="show-all-btn" data-v-06d28784> Ver todas </button>'),n("</div></div>"),o.value?(n(`<div class="search-indicator" data-v-06d28784><span class="search-indicator-text" data-v-06d28784> Buscando: <strong data-v-06d28784>&quot;${a.ssrInterpolate(o.value)}&quot;</strong></span><button class="search-indicator-clear" data-v-06d28784>`),n(a.ssrRenderComponent(e.unref(m),{class:"w-3.5 h-3.5"},null,c)),n(" Limpiar </button></div>")):n("\x3c!----\x3e"),n("</div>")}}}),E=L.setup;L.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/agenda/AgendaFilterBar.vue"),E?E(a,t):void 0};const T=Object.assign(s(L,[["__scopeId","data-v-06d28784"]]),{__name:"AgendaFilterBar"}),P=e.defineComponent({__name:"AgendaTerapeuta",__ssrInlineRender:!0,props:{modoCoordinadora:{type:Boolean,default:!1},mostrarFiltroTerapeuta:{type:Boolean,default:!1}},setup(t){const s=t,{citas:d,loading:c,error:u,citasConBonoProximoAgotar:v,lastUpdateTime:p,refreshAppointments:m}=r(),{completarCita:b,obtenerHistorialBono:g,verificarBonoCitas:x}=useAgenda();l();const toast_success=e=>{console.info("[SUCCESS]",e)},toast_error=e=>{console.error("[ERROR]",e),alert(e)},h=e.ref("hoy"),f=e.ref("calendario"),w=e.ref(new Date),y=e.ref(!1),C=e.ref(null),$=e.ref([]),R=e.ref(null),A=e.ref(!1),S=e.ref(null),j=e.ref([]),z=e.ref(["pendiente","confirmada","realizada","cancelada"]),B=e.ref(""),L=e.computed(()=>s.modoCoordinadora&&S.value?d.value.filter(e=>e.terapeuta?.id===S.value):d.value),E=e.computed(()=>0===z.value.length?[]:L.value.filter(e=>z.value.includes(e.estado))),P=e.computed(()=>{if(!B.value.trim())return E.value;const e=B.value.toLowerCase().trim();return E.value.filter(a=>{const t=(a.paciente_nombre||a.paciente?.nombre_completo||"").toLowerCase(),s=(a.terapeuta_nombre||a.terapeuta?.nombre_completo||"").toLowerCase(),r=(a.observaciones||"").toLowerCase(),o=(a.modalidad||"").toLowerCase();return t.includes(e)||s.includes(e)||r.includes(e)||o.includes(e)})}),V=e.computed(()=>P.value);e.ref(null);const H=e.ref(null),F=e.ref(!1),O=e.ref(null),q=e.ref(null),N=e.ref(null),U=e.ref(!1),G=e.ref(null),W=e.ref(null);e.ref(null),e.ref(null),e.ref(!1);const Y=e.ref(null),X=["11:00","12:00","13:00","17:00","18:00","19:00","20:00","21:00","22:00"],Z=e.computed(()=>{const e=new Date(w.value),a=e.getDay(),t=0===a?-6:1-a;e.setDate(e.getDate()+t);const s=[];for(let a=0;a<7;a++){const t=new Date(e);t.setDate(e.getDate()+a),s.push({fecha:t.toISOString().split("T")[0],nombreDia:t.toLocaleDateString("es-ES",{weekday:"short"}),numeroDia:t.getDate(),mes:t.toLocaleDateString("es-ES",{month:"short"})})}return s}),Q=e.computed(()=>{const e=V.value,a=(new Date).toISOString().split("T")[0];switch(h.value){case"hoy":return e.filter(e=>e.fecha_cita===a);case"pendientes":return e.filter(e=>"pendiente"===e.estado);case"completadas":return e.filter(e=>"completada"===e.estado||"realizada"===e.estado);default:return e}}),formatearHora=e=>e.substring(0,5),formatearFechaCompleta=e=>e.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),getBadgeEstado=e=>({pendiente:"bg-amber-100 text-amber-700 border border-amber-200",confirmada:"bg-green-100 text-green-700 border border-green-200",completada:"bg-blue-100 text-blue-700 border border-blue-200",realizada:"bg-blue-100 text-blue-700 border border-blue-200",cancelada:"bg-red-100 text-red-700 border border-red-200"}[e]||"bg-gray-100 text-gray-700 border border-gray-200"),esHoy=e=>e===(new Date).toISOString().split("T")[0],cambiarFecha=e=>{const a=new Date(w.value);"dia"===f.value?a.setDate(a.getDate()+e):a.setDate(a.getDate()+7*e),w.value=a},irHoy=()=>{w.value=new Date},citasPorHora=e=>{const a=w.value.toISOString().split("T")[0];return V.value.filter(t=>t.fecha_cita===a&&t.hora_inicio?.startsWith(e))},getClasesCita=e=>({pendiente:"bg-yellow-100 border-l-4 border-yellow-500",confirmada:"bg-green-100 border-l-4 border-green-500",completada:"bg-blue-100 border-l-4 border-blue-500",realizada:"bg-blue-100 border-l-4 border-blue-500",cancelada:"bg-red-100 border-l-4 border-red-500"}[e]||"bg-gray-100 border-l-4 border-gray-500"),getEstadoLabel=e=>({pendiente:"Pendiente",confirmada:"Confirmada",completada:"Completada",realizada:"Realizada",cancelada:"Cancelada"}[e]||e),citasPorDiaHora=(e,a)=>V.value.filter(t=>t.fecha_cita===e&&t.hora_inicio?.startsWith(a)),handleCitaCreated=async()=>{F.value=!1,O.value=null,q.value=null,await m(),toast_success("Cita creada exitosamente")},handleModalCerrar=()=>{F.value=!1,O.value=null,q.value=null,N.value=null,Y.value=null},handleCerrarDetallesCita=()=>{U.value=!1,setTimeout(()=>{G.value=null},300)},handleCitaActualizada=async()=>{await m(),toast_success("Cita actualizada correctamente")},K=e.ref(null),J=e.ref(null),ee=e.ref(null),ae=e.ref(!1),te=e.ref(null),se=e.ref(""),re=e.ref(""),oe=e.ref(""),ne=e.computed(()=>{if(!re.value)return X;const e=X.indexOf(re.value);return-1===e?X:[...X.slice(e+1),"23:00"]}),esCeldaEnRango=(e,a)=>{if(!Y.value)return!1;const{fechaInicio:t,horaInicio:s,fechaFin:r,horaFin:o}=Y.value;if(e===t&&e===r){const e=X.indexOf(a),t=X.indexOf(s),r=X.indexOf(o);if(-1===e||-1===t||-1===r)return!1;const n=Math.min(t,r),l=Math.max(t,r);return e>=n&&e<=l}return!1},esCeldaObjetivo=(e,a)=>H.value?.fecha===e&&H.value?.hora===a,handleCompletarCita=async e=>{if(confirm("¬øEst√°s seguro de marcar esta cita como completada?"))try{(await b(e)).success&&console.log("Cita completada")}catch(e){console.error("Error al completar cita:",e)}},abrirHistorial=async e=>{try{A.value=!0,C.value=e,y.value=!0;const[a,t]=await Promise.all([g(e),x(e)]);$.value=a,R.value=t}catch(e){console.error("Error al cargar historial:",e)}finally{A.value=!1}},recargarCitas=async()=>{try{await m(),toast_success("Agenda actualizada")}catch(e){console.error("Error al recargar citas:",e),toast_error("Error al actualizar la agenda")}},handleFiltrarPorEstado=e=>{z.value=e,i.debug("filter_change","Filtros de estado actualizados",{estados:e})};return(s,r,l,i)=>{const m=_,b=o,g=n;r(`<div${a.ssrRenderAttrs(e.mergeProps({class:["agenda-layout",{"modo-coordinadora":t.modoCoordinadora}]},i))} data-v-54ce6a32>`),t.modoCoordinadora?(r("\x3c!--[--\x3e"),r(a.ssrRenderComponent(M,{vista:f.value,"fecha-actual":w.value,loading:e.unref(c),"modo-coordinadora":!0,onCambiarVista:e=>f.value=e,onNavegarFecha:cambiarFecha,onIrHoy:irHoy,onActualizar:recargarCitas,onNuevaCita:e=>F.value=!0,onNuevaTarea:()=>{}},null,l)),r(a.ssrRenderComponent(T,{citas:e.unref(d),"modo-coordinadora":!0,terapeutas:j.value,"terapeuta-seleccionado":S.value,"estados-activos":z.value,busqueda:B.value,"onUpdate:busqueda":e=>B.value=e,"onUpdate:terapeutaSeleccionado":e=>S.value=e,"onUpdate:estadosActivos":handleFiltrarPorEstado,onFiltrarEstados:handleFiltrarPorEstado},null,l)),r("\x3c!--]--\x3e")):(r('\x3c!--[--\x3e<div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-sm border border-white/30 p-4" data-v-54ce6a32>'),r(a.ssrRenderComponent(I,{titulo:"Mi Agenda",subtitulo:"Tus citas programadas","rol-activo":"terapeuta","mostrar-rol":!1},null,l)),r('</div><div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-sm border border-white/30 p-4" data-v-54ce6a32>'),r(a.ssrRenderComponent(D,{vista:f.value,"fecha-actual":w.value,loading:e.unref(c),"last-update-time":e.unref(p),onCambiarVista:e=>f.value=e,onNavegarFecha:cambiarFecha,onIrHoy:irHoy,onActualizar:recargarCitas},null,l)),r(`</div><div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-sm border border-white/30 p-4 space-y-4" data-v-54ce6a32><div class="flex-1 relative" data-v-54ce6a32><label for="buscar-citas" class="sr-only" data-v-54ce6a32>Buscar paciente o cita</label><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none" data-v-54ce6a32><svg class="h-4 w-4 text-neutral-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-54ce6a32></path></svg></div><input id="buscar-citas"${a.ssrRenderAttr("value",B.value)} type="search" placeholder="Buscar por paciente o nota..." class="block w-full pl-10 pr-4 py-2.5 bg-white border border-neutral-200 rounded-xl text-sm text-neutral-800 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500 transition-all" aria-label="Buscar paciente o cita" data-v-54ce6a32>`),B.value?r('<button class="absolute inset-y-0 right-0 pr-3 flex items-center text-neutral-400 hover:text-neutral-600" aria-label="Limpiar b√∫squeda" data-v-54ce6a32><svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-54ce6a32></path></svg></button>'):r("\x3c!----\x3e"),r("</div>"),B.value?r(`<div class="flex items-center gap-2 text-sm" data-v-54ce6a32><span class="text-neutral-500" data-v-54ce6a32>${a.ssrInterpolate(V.value.length)} resultado${a.ssrInterpolate(1!==V.value.length?"s":"")} para </span><span class="px-2 py-0.5 bg-teal-50 text-teal-700 rounded-md font-medium" data-v-54ce6a32> &quot;${a.ssrInterpolate(B.value)}&quot; </span></div>`):r("\x3c!----\x3e"),r(a.ssrRenderComponent(k,{citas:e.unref(d),"estados-activos":z.value,onFiltrar:handleFiltrarPorEstado},null,l)),r("</div>\x3c!--]--\x3e")),e.unref(v).length>0?r(`<div class="bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4 mb-4 shadow-sm" data-v-54ce6a32><div class="flex items-center gap-3" data-v-54ce6a32><div class="w-10 h-10 rounded-xl bg-gradient-to-br from-[#F2B33D] to-[#F2B33D]/70 flex items-center justify-center flex-shrink-0" data-v-54ce6a32><svg class="h-5 w-5 text-white" fill="currentColor" viewBox="0 0 20 20" data-v-54ce6a32><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-54ce6a32></path></svg></div><div class="flex-1" data-v-54ce6a32><p class="text-sm font-medium text-amber-900" data-v-54ce6a32> Atenci√≥n: ${a.ssrInterpolate(e.unref(v).length)} paciente(s) con pocas sesiones restantes </p><p class="text-xs text-amber-700 mt-1" data-v-54ce6a32> Considera informar a estos pacientes para renovar sus bonos </p></div></div></div>`):r("\x3c!----\x3e"),"dia"===f.value?(r(`<div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-sm border border-white/30 overflow-hidden flex flex-col" style="${a.ssrRenderStyle({height:"calc(100vh - 200px)"})}" data-v-54ce6a32><div class="sticky top-0 z-10 bg-gradient-to-r from-white/95 via-white/90 to-white/95 backdrop-blur-md border-b border-neutral-200 shadow-sm p-4" data-v-54ce6a32><div class="flex items-center justify-between" data-v-54ce6a32><div data-v-54ce6a32><h3 class="font-[&#39;Elms_Sans&#39;] font-semibold text-lg text-neutral-800" data-v-54ce6a32>${a.ssrInterpolate(formatearFechaCompleta(w.value))}</h3><p class="text-sm text-neutral-600 mt-1" data-v-54ce6a32>${a.ssrInterpolate(citasPorHora?Object.values(X).reduce((e,a)=>e+citasPorHora(a).length,0):0)} citas programadas </p></div></div></div><div class="flex-1 overflow-y-auto" data-v-54ce6a32>`),0===Q.value.length?r(`<div class="flex items-center justify-center py-16" data-v-54ce6a32><div class="text-center" data-v-54ce6a32><div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-[#027368]/10 to-[#04BF9D]/10 flex items-center justify-center" data-v-54ce6a32><svg class="w-8 h-8 text-[#027368]" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-54ce6a32></path></svg></div><h3 class="font-[&#39;Elms_Sans&#39;] font-medium text-neutral-800 mb-2" data-v-54ce6a32>No hay citas programadas</h3><p class="text-neutral-600 text-sm" data-v-54ce6a32>${a.ssrInterpolate(formatearFechaCompleta(w.value))} est√° libre</p></div></div>`):(r('<div class="divide-y divide-neutral-100" data-v-54ce6a32>\x3c!--[--\x3e'),a.ssrRenderList(X,(s,o)=>{r(`<div${a.ssrRenderAttr("data-hora",s)} class="flex hover:bg-neutral-50/50 transition-colors" data-v-54ce6a32><div class="w-20 p-3 text-sm font-medium text-neutral-600 border-r border-neutral-200 bg-neutral-50/50 flex-shrink-0" data-v-54ce6a32>${a.ssrInterpolate(s)}</div><div class="flex-1 p-3 cursor-pointer hover:bg-[#027368]/5 transition-colors relative group/cell" data-v-54ce6a32>`),0===citasPorHora(s).length?r('<button class="absolute right-3 top-1/2 -translate-y-1/2 w-7 h-7 rounded-full bg-[#027368] text-white flex items-center justify-center opacity-0 group-hover/cell:opacity-100 transition-all hover:bg-[#025a52] hover:scale-110 shadow-sm" title="Crear nueva cita" aria-label="Crear nueva cita a las {{ hora }}" data-v-54ce6a32><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" data-v-54ce6a32></path></svg></button>'):r("\x3c!----\x3e"),r("\x3c!--[--\x3e"),a.ssrRenderList(citasPorHora(s),s=>{r(`<div draggable="true" class="${a.ssrRenderClass([[getClasesCita(s.estado),W.value===s.id?"opacity-60 pointer-events-none":"cursor-pointer"],"mb-2 p-3 rounded-xl transition-all hover:shadow-md hover:ring-2 hover:ring-[#027368]/30 group relative backdrop-blur-sm"])}" role="button" tabindex="0"${a.ssrRenderAttr("aria-label",`Cita ${s.estado} de ${s.paciente_nombre||"paciente"}, ${formatearHora(s.hora_inicio)} a ${formatearHora(s.hora_fin)}, ${s.modalidad}${"pendiente"===s.estado?". Pulsa para ver detalles o confirmar.":". Pulsa para ver detalles."}`)}${a.ssrRenderAttr("title",`${s.paciente_nombre||"Sin paciente"} - ${formatearHora(s.hora_inicio)} a ${formatearHora(s.hora_fin)}. Click para ver detalles.`)} data-v-54ce6a32><div class="absolute top-2 right-2 flex items-center gap-1 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-all z-10" data-v-54ce6a32>`),"pendiente"===s.estado?(r(`<button class="${a.ssrRenderClass([{"animate-pulse":W.value===s.id},"w-6 h-6 rounded-full bg-emerald-500 text-white flex items-center justify-center hover:bg-emerald-600 hover:scale-110 shadow-sm transition-all"])}"${a.ssrIncludeBooleanAttr(W.value===s.id)?" disabled":""}${a.ssrRenderAttr("title",W.value===s.id?"Confirmando...":"Confirmar cita")}${a.ssrRenderAttr("aria-label",`Confirmar cita de ${s.paciente_nombre||"paciente"}`)} type="button" data-v-54ce6a32>`),W.value===s.id?r('<svg class="w-3.5 h-3.5 animate-spin" fill="none" viewBox="0 0 24 24" data-v-54ce6a32><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-54ce6a32></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-54ce6a32></path></svg>'):r('<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20" data-v-54ce6a32><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" data-v-54ce6a32></path></svg>'),r("</button>")):r("\x3c!----\x3e"),"confirmada"===s.estado||"pendiente"===s.estado?(r(`<button class="${a.ssrRenderClass([{"animate-pulse":ee.value===s.id},"w-6 h-6 rounded-full bg-blue-500 text-white flex items-center justify-center hover:bg-blue-600 hover:scale-110 shadow-sm transition-all"])}"${a.ssrIncludeBooleanAttr(ee.value===s.id)?" disabled":""}${a.ssrRenderAttr("title",ee.value===s.id?"Marcando...":"Marcar como realizada")}${a.ssrRenderAttr("aria-label",`Marcar como realizada cita de ${s.paciente_nombre||"paciente"}`)} type="button" data-v-54ce6a32>`),ee.value===s.id?r('<svg class="w-3.5 h-3.5 animate-spin" fill="none" viewBox="0 0 24 24" data-v-54ce6a32><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-54ce6a32></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-54ce6a32></path></svg>'):r('<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20" data-v-54ce6a32><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" data-v-54ce6a32></path></svg>'),r("</button>")):r("\x3c!----\x3e"),"cancelada"!==s.estado?r(`<button class="w-6 h-6 rounded-full bg-indigo-500 text-white flex items-center justify-center hover:bg-indigo-600 hover:scale-110 shadow-sm transition-all"${a.ssrIncludeBooleanAttr(J.value===s.id)?" disabled":""} title="Reprogramar cita"${a.ssrRenderAttr("aria-label",`Reprogramar cita de ${s.paciente_nombre||"paciente"}`)} type="button" data-v-54ce6a32><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-54ce6a32></path></svg></button>`):r("\x3c!----\x3e"),"cancelada"!==s.estado&&"completada"!==s.estado&&"realizada"!==s.estado?(r(`<button class="${a.ssrRenderClass([{"animate-pulse":K.value===s.id},"w-6 h-6 rounded-full bg-red-500 text-white flex items-center justify-center hover:bg-red-600 hover:scale-110 shadow-sm transition-all"])}"${a.ssrIncludeBooleanAttr(K.value===s.id)?" disabled":""}${a.ssrRenderAttr("title",K.value===s.id?"Cancelando...":"Cancelar cita")}${a.ssrRenderAttr("aria-label",`Cancelar cita de ${s.paciente_nombre||"paciente"}`)} type="button" data-v-54ce6a32>`),K.value===s.id?r('<svg class="w-3.5 h-3.5 animate-spin" fill="none" viewBox="0 0 24 24" data-v-54ce6a32><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-54ce6a32></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-54ce6a32></path></svg>'):r('<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20" data-v-54ce6a32><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" data-v-54ce6a32></path></svg>'),r("</button>")):r("\x3c!----\x3e"),r('</div><div class="flex items-start justify-between gap-3" data-v-54ce6a32><div class="opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0" data-v-54ce6a32>'),r(a.ssrRenderComponent(e.unref(render$1),{class:"w-4 h-4 text-neutral-500"},null,l)),r(`</div><div class="flex-1 min-w-0" data-v-54ce6a32><p class="font-medium text-sm text-neutral-800 truncate" data-v-54ce6a32>${a.ssrInterpolate(s.paciente_nombre||s.paciente?.nombre_completo||"Sin paciente")}</p><div class="flex items-center flex-wrap gap-2 mt-1" data-v-54ce6a32><span class="text-xs text-neutral-600 font-medium" data-v-54ce6a32>${a.ssrInterpolate(formatearHora(s.hora_inicio))} - ${a.ssrInterpolate(formatearHora(s.hora_fin))}</span><span class="inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-lg bg-white/60 text-neutral-700" data-v-54ce6a32>`),"online"===s.modalidad?r('<span title="Online" data-v-54ce6a32>üíª</span>'):r('<span title="Presencial" data-v-54ce6a32>üè•</span>'),r(` ${a.ssrInterpolate("online"===s.modalidad?"Online":"Presencial")}</span>`),void 0!==s.bono_sesiones_restantes&&null!==s.bono_sesiones_restantes?r(`<span class="${a.ssrRenderClass([{"bg-red-100 text-red-700":0===s.bono_sesiones_restantes,"bg-orange-100 text-orange-700":1===s.bono_sesiones_restantes,"bg-yellow-100 text-yellow-700":2===s.bono_sesiones_restantes,"bg-green-100 text-green-700":s.bono_sesiones_restantes>2},"text-xs px-2 py-0.5 rounded-lg font-medium"])}" data-v-54ce6a32>${a.ssrInterpolate(s.bono_sesiones_restantes)}/${a.ssrInterpolate(s.bono_sesiones_totales||"?")} sesiones </span>`):r("\x3c!----\x3e"),r("</div>"),t.modoCoordinadora&&(s.terapeuta_nombre||s.terapeuta?.nombre_completo)?r(`<p class="text-xs text-neutral-500 mt-1 flex items-center gap-1" data-v-54ce6a32><span data-v-54ce6a32>üë§</span> ${a.ssrInterpolate(s.terapeuta_nombre||s.terapeuta?.nombre_completo)}</p>`):r("\x3c!----\x3e"),r(`</div><div class="flex items-center gap-2 flex-shrink-0" data-v-54ce6a32><span class="${a.ssrRenderClass([getBadgeEstado(s.estado),"text-xs px-2 py-1 rounded-lg font-medium whitespace-nowrap"])}" data-v-54ce6a32>${a.ssrInterpolate(getEstadoLabel(s.estado))}</span></div></div></div>`)}),r("\x3c!--]--\x3e</div></div>")}),r("\x3c!--]--\x3e</div>")),r("</div></div>")):"calendario"===f.value?(r(`<div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-sm border border-white/30 overflow-hidden flex flex-col" style="${a.ssrRenderStyle({height:"calc(100vh - 200px)"})}" data-v-54ce6a32><div class="min-w-[800px] overflow-x-auto flex-1 flex flex-col" data-v-54ce6a32><div class="sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm" data-v-54ce6a32><div class="grid grid-cols-8" data-v-54ce6a32><div class="p-2 border-r border-gray-200 bg-gray-50" data-v-54ce6a32></div>\x3c!--[--\x3e`),a.ssrRenderList(Z.value,e=>{r(`<div class="${a.ssrRenderClass([esHoy(e.fecha)?"bg-blue-50":"bg-white","p-2 text-center border-r border-gray-200 last:border-r-0"])}" data-v-54ce6a32><div class="flex items-center justify-center gap-1" data-v-54ce6a32><span class="text-xs font-medium text-gray-600 uppercase" data-v-54ce6a32>${a.ssrInterpolate(e.nombreDia)}</span><span class="${a.ssrRenderClass([esHoy(e.fecha)?"text-blue-600":"","text-lg font-bold text-gray-900"])}" data-v-54ce6a32>${a.ssrInterpolate(e.numeroDia)}</span></div><div class="text-xs text-gray-500" data-v-54ce6a32>${a.ssrInterpolate(e.mes)}</div></div>`)}),r('\x3c!--]--\x3e</div></div><div class="flex-1 overflow-y-auto" data-v-54ce6a32><div class="divide-y divide-gray-100" data-v-54ce6a32>\x3c!--[--\x3e'),a.ssrRenderList(X,s=>{r(`<div${a.ssrRenderAttr("data-hora",s)} class="grid grid-cols-8" data-v-54ce6a32><div class="p-3 text-sm font-medium text-gray-600 border-r border-gray-100 bg-gray-50 sticky left-0" data-v-54ce6a32>${a.ssrInterpolate(s)}</div>\x3c!--[--\x3e`),a.ssrRenderList(Z.value,o=>{r(`<div class="${a.ssrRenderClass([[esHoy(o.fecha)?"bg-blue-50/20":"",esCeldaObjetivo(o.fecha,s)?"bg-blue-100 ring-2 ring-blue-500 ring-inset":"",esCeldaEnRango(o.fecha,s)?"bg-[#027368]/20 ring-2 ring-[#027368] ring-inset":""],"p-2 border-r border-gray-100 last:border-r-0 hover:bg-blue-50/30 transition-colors min-h-[70px] cursor-pointer relative group/cell"])}" data-v-54ce6a32>`),0===citasPorDiaHora(o.fecha,s).length?r(`<div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover/cell:opacity-100 transition-all duration-200 pointer-events-none" data-v-54ce6a32><div class="w-6 h-6 rounded-full bg-teal-500/90 text-white flex items-center justify-center shadow-md transform scale-90 group-hover/cell:scale-100 transition-transform"${a.ssrRenderAttr("title",`Crear cita el ${o.nombreDia} ${o.numeroDia} a las ${s}`)} data-v-54ce6a32><svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" data-v-54ce6a32></path></svg></div></div>`):r("\x3c!----\x3e"),r("\x3c!--[--\x3e"),a.ssrRenderList(citasPorDiaHora(o.fecha,s),s=>{r(`<div draggable="true" class="${a.ssrRenderClass([[getClasesCita(s.estado),W.value===s.id?"opacity-60 pointer-events-none":"cursor-pointer"],"text-xs p-2 rounded-lg mb-1.5 hover:shadow-lg hover:ring-2 hover:ring-teal-400 transition-all group relative border-l-3"])}" role="button" tabindex="0"${a.ssrRenderAttr("aria-label",`Cita ${s.estado} de ${s.paciente_nombre||"paciente"}, ${formatearHora(s.hora_inicio)} a ${formatearHora(s.hora_fin)}, ${s.modalidad}${"pendiente"===s.estado?". Pulsa para ver detalles o confirmar.":". Pulsa para ver detalles."}`)}${a.ssrRenderAttr("title",`${s.paciente_nombre||"Sin paciente"} - ${formatearHora(s.hora_inicio)} a ${formatearHora(s.hora_fin)}. Click para ver detalles.`)} data-v-54ce6a32><div class="absolute top-0.5 right-0.5 flex items-center gap-0.5 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-all z-10" data-v-54ce6a32>`),"pendiente"===s.estado?(r(`<button class="${a.ssrRenderClass([{"animate-pulse":W.value===s.id},"w-5 h-5 rounded-full bg-emerald-500 text-white flex items-center justify-center hover:bg-emerald-600 hover:scale-110 shadow-sm transition-all"])}"${a.ssrIncludeBooleanAttr(W.value===s.id)?" disabled":""}${a.ssrRenderAttr("title",W.value===s.id?"Confirmando...":"Confirmar cita")}${a.ssrRenderAttr("aria-label",`Confirmar cita de ${s.paciente_nombre||"paciente"}`)} type="button" data-v-54ce6a32>`),W.value===s.id?r('<svg class="w-2.5 h-2.5 animate-spin" fill="none" viewBox="0 0 24 24" data-v-54ce6a32><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-54ce6a32></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-54ce6a32></path></svg>'):r('<svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" data-v-54ce6a32><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" data-v-54ce6a32></path></svg>'),r("</button>")):r("\x3c!----\x3e"),"confirmada"===s.estado||"pendiente"===s.estado?(r(`<button class="${a.ssrRenderClass([{"animate-pulse":ee.value===s.id},"w-5 h-5 rounded-full bg-blue-500 text-white flex items-center justify-center hover:bg-blue-600 hover:scale-110 shadow-sm transition-all"])}"${a.ssrIncludeBooleanAttr(ee.value===s.id)?" disabled":""}${a.ssrRenderAttr("title",ee.value===s.id?"Marcando...":"Marcar como realizada")}${a.ssrRenderAttr("aria-label",`Marcar como realizada cita de ${s.paciente_nombre||"paciente"}`)} type="button" data-v-54ce6a32>`),ee.value===s.id?r('<svg class="w-2.5 h-2.5 animate-spin" fill="none" viewBox="0 0 24 24" data-v-54ce6a32><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-54ce6a32></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-54ce6a32></path></svg>'):r('<svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" data-v-54ce6a32><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" data-v-54ce6a32></path></svg>'),r("</button>")):r("\x3c!----\x3e"),"cancelada"!==s.estado?r(`<button class="w-5 h-5 rounded-full bg-indigo-500 text-white flex items-center justify-center hover:bg-indigo-600 hover:scale-110 shadow-sm transition-all"${a.ssrIncludeBooleanAttr(J.value===s.id)?" disabled":""} title="Reprogramar cita"${a.ssrRenderAttr("aria-label",`Reprogramar cita de ${s.paciente_nombre||"paciente"}`)} type="button" data-v-54ce6a32><svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-54ce6a32></path></svg></button>`):r("\x3c!----\x3e"),"cancelada"!==s.estado&&"completada"!==s.estado&&"realizada"!==s.estado?(r(`<button class="${a.ssrRenderClass([{"animate-pulse":K.value===s.id},"w-5 h-5 rounded-full bg-red-500 text-white flex items-center justify-center hover:bg-red-600 hover:scale-110 shadow-sm transition-all"])}"${a.ssrIncludeBooleanAttr(K.value===s.id)?" disabled":""}${a.ssrRenderAttr("title",K.value===s.id?"Cancelando...":"Cancelar cita")}${a.ssrRenderAttr("aria-label",`Cancelar cita de ${s.paciente_nombre||"paciente"}`)} type="button" data-v-54ce6a32>`),K.value===s.id?r('<svg class="w-2.5 h-2.5 animate-spin" fill="none" viewBox="0 0 24 24" data-v-54ce6a32><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-54ce6a32></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-54ce6a32></path></svg>'):r('<svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" data-v-54ce6a32><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" data-v-54ce6a32></path></svg>'),r("</button>")):r("\x3c!----\x3e"),r('<div class="w-5 h-5 flex items-center justify-center" data-v-54ce6a32>'),r(a.ssrRenderComponent(e.unref(render$1),{class:"w-3 h-3 text-gray-500"},null,l)),r(`</div></div><div class="pr-8" data-v-54ce6a32><p class="font-semibold truncate text-sm text-gray-800" data-v-54ce6a32>${a.ssrInterpolate(s.paciente_nombre||s.paciente?.nombre_completo||"Sin paciente")}</p><p class="text-xs text-gray-500 mt-0.5 font-medium" data-v-54ce6a32>${a.ssrInterpolate(formatearHora(s.hora_inicio))} ‚Äì ${a.ssrInterpolate(formatearHora(s.hora_fin))}</p><div class="flex items-center gap-1.5 mt-1.5 flex-wrap" data-v-54ce6a32><span class="inline-flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded bg-white/70 text-gray-600" data-v-54ce6a32>`),"online"===s.modalidad?r('<span title="Online" data-v-54ce6a32>üíª</span>'):"presencial"===s.modalidad?r('<span title="Presencial" data-v-54ce6a32>üè•</span>'):r('<span title="Telef√≥nica" data-v-54ce6a32>üìû</span>'),r(`<span class="hidden sm:inline" data-v-54ce6a32>${a.ssrInterpolate(s.modalidad)}</span></span><span class="${a.ssrRenderClass([getBadgeEstado(s.estado),"text-[10px] px-1.5 py-0.5 rounded-full font-semibold"])}" data-v-54ce6a32>${a.ssrInterpolate(getEstadoLabel(s.estado))}</span>`),s.bono_id?r(`<span class="text-[10px] px-1.5 py-0.5 rounded bg-emerald-100 text-emerald-700 font-medium"${a.ssrRenderAttr("title",`Bono: ${s.bono_sesiones_restantes||0}/${s.bono_sesiones_totales||0} sesiones`)} data-v-54ce6a32> üé´ ${a.ssrInterpolate(s.bono_sesiones_restantes||0)}</span>`):r("\x3c!----\x3e"),r("</div>"),t.modoCoordinadora&&(s.terapeuta_nombre||s.terapeuta?.nombre_completo)?r(`<p class="text-[10px] text-gray-400 mt-1 truncate" data-v-54ce6a32> üë§ ${a.ssrInterpolate(s.terapeuta_nombre||s.terapeuta?.nombre_completo)}</p>`):r("\x3c!----\x3e"),r("</div></div>")}),r("\x3c!--]--\x3e</div>")}),r("\x3c!--]--\x3e</div>")}),r("\x3c!--]--\x3e</div></div></div></div>")):(r('<div data-v-54ce6a32><div class="flex flex-wrap gap-2 mb-6" data-v-54ce6a32>\x3c!--[--\x3e'),a.ssrRenderList([{key:"hoy",label:"Hoy",count:V.value.filter(e=>e.fecha_cita===(new Date).toISOString().split("T")[0]).length},{key:"pendientes",label:"Pendientes",count:V.value.filter(e=>"pendiente"===e.estado).length},{key:"completadas",label:"Completadas",count:V.value.filter(e=>"completada"===e.estado||"realizada"===e.estado).length},{key:"todas",label:"Todas",count:V.value.length}],e=>{r(`<button class="${a.ssrRenderClass(["px-4 py-2 rounded-lg font-medium transition-colors",h.value===e.key?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"])}" data-v-54ce6a32>${a.ssrInterpolate(e.label)} (${a.ssrInterpolate(e.count)}) </button>`)}),r("\x3c!--]--\x3e</div>"),e.unref(u)?r(`<div class="bg-red-50 border-l-4 border-red-400 p-4 mb-6" data-v-54ce6a32><p class="text-red-700" data-v-54ce6a32>${a.ssrInterpolate(e.unref(u))}</p></div>`):r("\x3c!----\x3e"),e.unref(c)&&0===e.unref(d).length?r('<div class="text-center py-12" data-v-54ce6a32><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4" data-v-54ce6a32></div><p class="text-gray-600" data-v-54ce6a32>Cargando citas...</p></div>'):0===Q.value.length?r(`<div class="text-center py-12 bg-gray-50 rounded-lg" data-v-54ce6a32><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-54ce6a32></path></svg><h3 class="mt-2 text-sm font-medium text-gray-900" data-v-54ce6a32>No hay citas</h3><p class="mt-1 text-sm text-gray-500" data-v-54ce6a32>${a.ssrInterpolate("hoy"===h.value?"No tienes citas programadas para hoy.":"No hay citas en esta categor√≠a.")}</p></div>`):(r('<div class="space-y-4" data-v-54ce6a32>\x3c!--[--\x3e'),a.ssrRenderList(Q.value,e=>{r(a.ssrRenderComponent(m,{key:e.id,cita:e,onCompletar:handleCompletarCita,onVerHistorial:abrirHistorial},null,l))}),r("\x3c!--]--\x3e</div>")),r("</div>")),a.ssrRenderTeleport(r,e=>{var t;y.value?(e('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" data-v-54ce6a32><div class="bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden" data-v-54ce6a32><div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between" data-v-54ce6a32><h2 class="text-xl font-bold text-gray-900" data-v-54ce6a32>Historial del Bono</h2><button class="text-gray-400 hover:text-gray-600 transition-colors" data-v-54ce6a32><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-54ce6a32></path></svg></button></div><div class="px-6 py-4 overflow-y-auto max-h-[calc(90vh-140px)]" data-v-54ce6a32>'),A.value?e('<div class="text-center py-8" data-v-54ce6a32><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto" data-v-54ce6a32></div></div>'):(e("<div data-v-54ce6a32>"),R.value?(e(`<div class="mb-6 p-4 bg-blue-50 rounded-lg" data-v-54ce6a32><h3 class="font-semibold text-gray-900 mb-3" data-v-54ce6a32>Resumen</h3><div class="grid grid-cols-3 gap-4 text-center" data-v-54ce6a32><div data-v-54ce6a32><p class="text-2xl font-bold text-blue-600" data-v-54ce6a32>${a.ssrInterpolate(R.value.bono.sesiones_totales)}</p><p class="text-xs text-gray-600" data-v-54ce6a32>Sesiones Totales</p></div><div data-v-54ce6a32><p class="text-2xl font-bold text-green-600" data-v-54ce6a32>${a.ssrInterpolate(R.value.bono.sesiones_usadas)}</p><p class="text-xs text-gray-600" data-v-54ce6a32>Sesiones Usadas</p></div><div data-v-54ce6a32><p class="${a.ssrRenderClass(["text-2xl font-bold",(t=R.value.bono.sesiones_restantes,0===t?"text-red-600 font-bold":1===t?"text-orange-600 font-semibold":t<=2?"text-yellow-600 font-medium":"text-green-600")])}" data-v-54ce6a32>${a.ssrInterpolate(R.value.bono.sesiones_restantes)}</p><p class="text-xs text-gray-600" data-v-54ce6a32>Sesiones Restantes</p></div></div>`),R.value.alerta?e(`<div class="mt-3 p-2 bg-yellow-100 border border-yellow-300 rounded text-sm text-yellow-800" data-v-54ce6a32>${a.ssrInterpolate(R.value.mensaje_alerta)}</div>`):e("\x3c!----\x3e"),e("</div>")):e("\x3c!----\x3e"),e('<div data-v-54ce6a32><h3 class="font-semibold text-gray-900 mb-3" data-v-54ce6a32>Movimientos</h3>'),0===$.value.length?e('<div class="text-center py-8 text-gray-500" data-v-54ce6a32> No hay movimientos registrados </div>'):(e('<div class="space-y-3" data-v-54ce6a32>\x3c!--[--\x3e'),a.ssrRenderList($.value,t=>{e(`<div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors" data-v-54ce6a32><div class="flex items-start justify-between" data-v-54ce6a32><div class="flex-1" data-v-54ce6a32><div class="flex items-center gap-2 mb-1" data-v-54ce6a32><span class="${a.ssrRenderClass(["px-2 py-1 text-xs font-medium rounded","descuento"===t.tipo_movimiento?"bg-red-100 text-red-700":"reembolso"===t.tipo_movimiento?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])}" data-v-54ce6a32>${a.ssrInterpolate(t.tipo_movimiento)}</span><span class="text-xs text-gray-500" data-v-54ce6a32>${a.ssrInterpolate(new Date(t.fecha).toLocaleString("es-ES"))}</span></div><p class="text-sm text-gray-700" data-v-54ce6a32>${a.ssrInterpolate(t.motivo)}</p></div><div class="text-right ml-4" data-v-54ce6a32><p class="text-sm font-semibold text-gray-900" data-v-54ce6a32>${a.ssrInterpolate(t.sesiones_antes)} ‚Üí ${a.ssrInterpolate(t.sesiones_despues)}</p><p class="${a.ssrRenderClass(["text-xs font-medium",t.sesiones_modificadas>0?"text-red-600":"text-green-600"])}" data-v-54ce6a32>${a.ssrInterpolate(t.sesiones_modificadas>0?"-":"+")}${a.ssrInterpolate(Math.abs(t.sesiones_modificadas))}</p></div></div></div>`)}),e("\x3c!--]--\x3e</div>")),e("</div></div>")),e('</div><div class="px-6 py-4 border-t border-gray-200 flex justify-end" data-v-54ce6a32><button class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors" data-v-54ce6a32> Cerrar </button></div></div></div>')):e("\x3c!----\x3e")},"body",!1,l),r(a.ssrRenderComponent(b,{"is-open":F.value,"fecha-inicial":O.value||void 0,"hora-inicial":q.value||void 0,"hora-final":N.value||void 0,onCreated:handleCitaCreated,onClose:handleModalCerrar},null,l)),r(a.ssrRenderComponent(g,{"cita-id":G.value,onClose:handleCerrarDetallesCita,onCitaActualizada:handleCitaActualizada,onActualizado:handleCitaActualizada},null,l)),a.ssrRenderTeleport(r,e=>{var t;ae.value&&te.value?(e(`<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" data-v-54ce6a32><div class="bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden" data-v-54ce6a32><div class="px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50" data-v-54ce6a32><div class="flex items-center justify-between" data-v-54ce6a32><div data-v-54ce6a32><h2 class="text-lg font-semibold text-gray-900" data-v-54ce6a32>Reprogramar Cita</h2><p class="text-sm text-gray-500 mt-0.5" data-v-54ce6a32>${a.ssrInterpolate(te.value.paciente_nombre||te.value.paciente?.nombre_completo||"Paciente")}</p></div><button class="w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-white transition-all" data-v-54ce6a32><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-54ce6a32></path></svg></button></div></div><div class="p-6 space-y-5" data-v-54ce6a32><div class="bg-gray-50 rounded-xl p-4" data-v-54ce6a32><p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-2" data-v-54ce6a32>Cita actual</p><div class="flex items-center gap-3" data-v-54ce6a32><div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center" data-v-54ce6a32><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-54ce6a32><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-54ce6a32></path></svg></div><div data-v-54ce6a32><p class="font-medium text-gray-900" data-v-54ce6a32>${a.ssrInterpolate((t=te.value.fecha_cita,new Date(t+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"})))}</p><p class="text-sm text-gray-500" data-v-54ce6a32>${a.ssrInterpolate(formatearHora(te.value.hora_inicio))} - ${a.ssrInterpolate(formatearHora(te.value.hora_fin))}</p></div></div></div><div data-v-54ce6a32><label class="block text-sm font-medium text-gray-700 mb-2" data-v-54ce6a32>Nueva fecha</label><input type="date"${a.ssrRenderAttr("value",se.value)}${a.ssrRenderAttr("min",(new Date).toISOString().split("T")[0])} class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all" data-v-54ce6a32></div><div class="grid grid-cols-2 gap-4" data-v-54ce6a32><div data-v-54ce6a32><label class="block text-sm font-medium text-gray-700 mb-2" data-v-54ce6a32>Hora inicio</label><select class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all" data-v-54ce6a32>\x3c!--[--\x3e`),a.ssrRenderList(X,t=>{e(`<option${a.ssrRenderAttr("value",t)} data-v-54ce6a32${a.ssrIncludeBooleanAttr(Array.isArray(re.value)?a.ssrLooseContain(re.value,t):a.ssrLooseEqual(re.value,t))?" selected":""}>${a.ssrInterpolate(t)}</option>`)}),e('\x3c!--]--\x3e</select></div><div data-v-54ce6a32><label class="block text-sm font-medium text-gray-700 mb-2" data-v-54ce6a32>Hora fin</label><select class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all" data-v-54ce6a32>\x3c!--[--\x3e'),a.ssrRenderList(ne.value,t=>{e(`<option${a.ssrRenderAttr("value",t)} data-v-54ce6a32${a.ssrIncludeBooleanAttr(Array.isArray(oe.value)?a.ssrLooseContain(oe.value,t):a.ssrLooseEqual(oe.value,t))?" selected":""}>${a.ssrInterpolate(t)}</option>`)}),e(`\x3c!--]--\x3e</select></div></div></div><div class="px-6 py-4 border-t border-gray-100 bg-gray-50 flex items-center justify-end gap-3" data-v-54ce6a32><button class="px-5 py-2.5 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition-colors" data-v-54ce6a32> Cancelar </button><button${a.ssrIncludeBooleanAttr(!se.value||!re.value||!oe.value||J.value)?" disabled":""} class="px-5 py-2.5 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2" data-v-54ce6a32>`),J.value?e('<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24" data-v-54ce6a32><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-54ce6a32></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-54ce6a32></path></svg>'):e("\x3c!----\x3e"),e(` ${a.ssrInterpolate(J.value?"Reprogramando...":"Confirmar")}</button></div></div></div>`)):e("\x3c!----\x3e")},"body",!1,l),r("</div>")}}}),V=P.setup;P.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/AgendaTerapeuta.vue"),V?V(a,t):void 0};const H=Object.assign(s(P,[["__scopeId","data-v-54ce6a32"]]),{__name:"AgendaTerapeuta"}),F=e.defineComponent({__name:"ejemplo-agenda",__ssrInlineRender:!0,setup(t){const{citas:s,citasDelDia:r}=useAgenda();return(t,o,n,l)=>{const i=f,d=_,c=H;o(`<div${a.ssrRenderAttrs(e.mergeProps({class:"p-6 max-w-7xl mx-auto"},l))}><h1 class="text-3xl font-bold mb-6">Dashboard - Ejemplo</h1>`),o(a.ssrRenderComponent(i,{citas:e.unref(s),class:"mb-8"},null,n)),o(`<section class="mb-8"><h2 class="text-xl font-bold mb-4">Citas de Hoy (${a.ssrInterpolate(e.unref(r).length)})</h2><div class="space-y-4">\x3c!--[--\x3e`),a.ssrRenderList(e.unref(r),e=>{o(a.ssrRenderComponent(d,{key:e.id,cita:e,onCompletar:e=>console.log("Completar:",e),onVerHistorial:e=>console.log("Historial:",e)},null,n))}),o("\x3c!--]--\x3e</div></section>"),o(a.ssrRenderComponent(c,null,null,n)),o("</div>")}}}),O=F.setup;F.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("pages/ejemplo-agenda.vue"),O?O(a,t):void 0};export{F as default};
//# sourceMappingURL=ejemplo-agenda-BLItG2nk.mjs.map
