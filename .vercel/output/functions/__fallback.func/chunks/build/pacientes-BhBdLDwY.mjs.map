{"version":3,"file":"pacientes-BhBdLDwY.mjs","sources":["../../../../../../node_modules/.cache/nuxt/.nuxt/dist/server/_nuxt/useToast-CW-71pJZ.js","../../../../../../node_modules/.cache/nuxt/.nuxt/dist/server/_nuxt/pacientes-BhBdLDwY.js"],"sourcesContent":null,"names":["toasts","vueExports","ref","toastIdCounter","useToast","addToast","type","message","duration","id","toast","value","push","setTimeout","removeToast","index","findIndex","t","splice","success","error","warning","info","render$4","_ctx","_cache","openBlock","createElementBlock","xmlns","fill","viewBox","stroke","createElementVNode","d","render$3","render$2","render$1","render","_sfc_main$a","__name","__ssrInlineRender","props","paciente","Object","required","emits","setup","__props","nombreMostrar","computed","nombreCompleto","nombre","partes","trim","split","length","charAt","iniciales","toUpperCase","avatarColor","colors","charCodeAt","estadoVinculoTexto","activo","en_pausa","estadoVinculoClasses","estadoVinculoPuntoClass","ultimaSesionTexto","ultima_sesion","fecha","Date","ahora","diffDias","Math","floor","toLocaleDateString","day","month","proximaSesion","proxima_sesion","fechaStr","includes","isNaN","getTime","weekday","hour","minute","totalSesiones","total_sesiones","evolucionPorcentaje","evolucion_porcentaje","evolucionDotColor","valor","diasInactividad","tieneAlertaInactividad","bonoActivo","bono_activo","tipoBonoTexto","tipo","otro","quincenal","semanal","mensual","personalizado","estadoBonoTexto","estado","pendiente","vencido","completado","estadoBonoClasses","fechaFinCorta","fecha_fin","fechaFinClases","diasRestantes","sesionesUsadas","sesiones_totales","sesiones_restantes","sesionesTotales","sesionesColorClass","restantes","bonoIconColor","tieneAlertaBonoCritica","tieneAlertaBonoAdvertencia","tieneAlertaCritica","_push","_parent","_attrs","serverRenderer_cjs_prodExports","ssrRenderAttrs","mergeProps","class","role","unref","tabindex","ssrRenderAttr","ssrRenderComponent","render$5","render$6","render$7","ssrRenderStyle","backgroundColor","ssrInterpolate","ssrRenderClass","render$8","render$9","render$a","render$b","_sfc_setup$a","ctx","ssrContext","useSSRContext","modules","Set","add","__nuxt_component_0$1","_export_sfc","_sfc_main$9","mostrar","Boolean","default","emit","__emit","useSupabase","useBonos","useCitas","useSupabaseUser","formulario","apellido","email","telefono","fecha_nacimiento","tipo_bono","primera_sesion","notas_iniciales","crear_bono","bono_monto","bono_renovacion_automatica","guardando","PRECIOS_BASE","sesionesSegunTipo","nombreTipoBono","precioPorSesionBono","sesiones","monto","toFixed","precioSugeridoBono","esADemanda","opcionesHorarioRapido","hoy","opciones","formatearDateTime","hora","getFullYear","String","getMonth","padStart","getDate","manana","setDate","label","datetime","proximoLunes","diasHastaLunes","getDay","unaSemana","formularioValido","base","watch","nuevoTipo","crear","nuevo","resetearFormulario","ssrIncludeBooleanAttr","Array","isArray","ssrLooseContain","ssrLooseEqual","ssrRenderList","opcion","_sfc_setup$9","__nuxt_component_2","assign","_sfc_main$8","supabase","precio_sesion","bono_sesiones_usadas","cargandoBono","enviandoRecordatorio","diasRestantesPausa","fechaPausa","metadata","fecha_pausa","inicioPausa","diasPasados","max","sesionesRestantesBono","sesionesAutomaticas","a_demanda","precioPorSesion","cargarDatosPaciente","async","p","nombre_completo","slice","join","apellido_paterno","cargarBonoActivo","data","bonoError","from","select","eq","in","order","ascending","limit","single","sesiones_usadas","err","console","log","width","_sfc_setup$8","__nuxt_component_3","_sfc_main$7","procesando","pacienteNombre","_sfc_setup$7","__nuxt_component_4","_sfc_main$6","defineComponent","isOpen","citaId","useSupabaseClient","getCitasPorDia","cita","cargando","conflictoHorario","fecha_cita","hora_inicio","hora_fin","duracion","modalidad","observaciones","fechaFormateada","year","opcionesFechaRapida","formatearFecha","fecha2","toISOString","diasLaborables","contadorDias","diaSemana","horasDisponibles","cargarCita","substring","warn","horaAMinutos","horas","minutos","map","Number","nuevaHora","totalMinutos","horaFin","minutosFin","nuevaDuracion","citasActivas","filter","c","inicioNueva","finNueva","some","inicioExistente","finExistente","minNuevaInicio","minNuevaFin","minExistenteInicio","minExistenteFin","verificarConflicto","nuevoCitaId","ssrRenderTeleport","_push2","paciente_nombre","icono","_sfc_setup$6","__nuxt_component_5","_sfc_main$5","toastClasses","classes","render$c","render$d","render$e","_sfc_setup$5","__nuxt_component_6","_sfc_main$4","accept","maxSize","supportedFormats","ariaLabel","expose","__expose","file","isDragging","errorMessage","hasError","maxSizeMB","round","removeFile","render$g","render$f","name","bytes","i","pow","formatFileSize","size","_sfc_setup$4","__nuxt_component_0","_sfc_main$3","detectedColumns","mappings","validation","requiredFields","field","contactFields","treatmentFields","otherFields","allFields","getMappedField","sourceColumn","mapping","find","m","targetField","isFieldUsed","currentColumn","isRequiredField","f","mappedFields","previewData","sampleCount","min","sampleValues","preview","row","column","keys","idx","errors","warnings","render$h","getFieldLabel","_sfc_setup$3","__nuxt_component_1","_sfc_main$2","modelValue","existingPatients","importMapping","config","importResult","detecting","validating","importing","validateMapping","response","fetch","method","headers","body","JSON","stringify","configId","ok","errorData","json","Error","statusMessage","isValid","hasRequiredFields","hasNombre","has","hasContacto","detectColumns","formData","FormData","append","updateMapping","executeImport","action","results","reset","getPreviewData","useImportMapping","currentStep","selectedFile","downloadingTemplate","updateDuplicates","importSuccess","fieldLabels","documento_identidad","direccion","contacto_emergencia","area_de_acompanamiento","frecuencia","derivacion","medicacion","orientacion_diagnostica","inicio_tratamiento","comision","notas","handleFileSelected","handleFileRemoved","handleDropzoneError","handleMappingUpdate","_component_SharedFileDropzone","_component_PatientsColumnMappingTable","step","onFileSelected","onFileRemoved","onError","total","created","updated","skipped","incompleteProfiles","profile","missingFields","_sfc_setup$2","__nuxt_component_7","_sfc_main$1","totalPatients","filteredCount","selectedCount","hasFilters","currentFilters","selectedIds","format","scope","selectedFields","exporting","availableFields","watchEffect","render$i","_sfc_setup$1","__nuxt_component_8","_sfc_main","router","useRouter","getUserId","mostrarModalNuevo","mostrarModalEditar","mostrarModalEliminar","mostrarModalAsignarCita","mostrarModalEditarCita","mostrarModalImportar","mostrarModalExportar","citaIdSeleccionada","pacienteSeleccionado","pacienteSeleccionadoCita","pacientes","loading","busqueda","busquedaDebounced","estadoSeleccionado","areaSeleccionada","mostrarFiltrosAvanzados","filtrosActivos","sinProximaCita","sinSesionRegistrada","requiereAtencion","filtrosEstado","contadores","activos","enPausa","finalizados","filtrosEstadoConContadores","filtro","count","contadorFiltroActivo","areasDisponibles","areas","sort","hayFiltrosActivos","contadorFiltrosActivos","tieneAlgunFiltro","cargarPacientes","userId","pacientesData","pacientesError","pacientesEnriquecidos","Promise","all","ultimaCita","maybeSingle","proximaCita","gte","head","bonoData","sesionesCompletadasBono","totalSesionesBono","hace7Dias","emocionesRecientes","estadoEmocionalPromedio","promedioAnimo","reduce","sum","e","estado_animo","ultimosTres","every","proxima_cita_id","estado_emocional_promedio","requiere_atencion","created_at","sesiones_completadas","pacientesFiltrados","resultado","busquedaLower","toLowerCase","totalPacientes","cerrarModalNuevo","abrirModalEditar","cerrarModalEditar","abrirModalEliminar","cerrarModalEliminar","manejarPacienteCreado","manejarPacienteActualizado","manejarPacienteEliminado","pacienteId","manejarPacienteDesactivado","cerrarModalAsignarCita","manejarCitaCreada","verCitasPaciente","gestionarBonosPaciente","handleImportComplete","filtrosActualesParaExport","filters","area","abrirModalEditarCita","cerrarModalEditarCita","handleCitaActualizada","newUserId","_component_PacienteCard","_component_ModalNuevaCita","__nuxt_component_2$1","_component_ModalNuevoPaciente","_component_ModalEditarPaciente","_component_ModalEliminarPaciente","_component_ModalEditarCita","_component_ToastContainer","_component_PatientsImportModal","_component_PatientsExportModal","render$j","render$k","render$l","render$m","render$n","render$o","render$p","onEditar","onEliminar","onVerCitas","onGestionarBonos","onEditarCita","onCerrar","onCitaCreada","onPacienteCreado","onPacienteActualizado","onPacienteEliminado","onPacienteDesactivado","onClose","onActualizado","$event","isRef","onImportComplete","_sfc_setup"],"mappings":"","x_google_ignoreList":[0,1]}