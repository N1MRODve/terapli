import{_ as e}from"./server.mjs";import{_ as a}from"./ModalNuevaCita-6Mm-k6WH.mjs";import{defineComponent as t,ref as o,watch as r,withCtx as s,unref as n,createVNode as i,createBlock as l,withDirectives as d,isRef as c,openBlock as u,Fragment as p,renderList as m,toDisplayString as b,vModelSelect as f,createTextVNode as g,vModelText as x,createCommentVNode as v,useSSRContext as h}from"vue";import{ssrRenderAttrs as $,ssrRenderComponent as y,ssrIncludeBooleanAttr as w,ssrLooseContain as D,ssrLooseEqual as C,ssrRenderList as k,ssrRenderAttr as _,ssrInterpolate as E,ssrRenderClass as A}from"vue/server-renderer";import{u as S}from"./useCitas-DyEZH6RI.mjs";import{u as j}from"./useSupabaseClient-DykwVqLQ.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../routes/renderer.mjs";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"vue-router";import"@supabase/ssr";import"@vercel/analytics/nuxt";import"@heroicons/vue/24/outline";import"./useSupabase-DljD0dj8.mjs";import"./_plugin-vue_export-helper-1tPrXgE0.mjs";const F=t({__name:"agenda",__ssrInlineRender:!0,setup(t){const{getCitasPorDia:h}=S(),F=j(),N=o("dia"),V=o(formatearFecha(new Date)),M=o(""),L=o(!1),T=o([]),H=o([]);o(null);const I=o(!1),G=o(""),U=o(""),q=[{id:"dia",nombre:"D√≠a",icono:"üìÖ"},{id:"semana",nombre:"Semana",icono:"üìÜ"},{id:"mes",nombre:"Mes",icono:"üóìÔ∏è"}];async function cargarCitasDelDia(){L.value=!0;try{if(M.value)T.value=await h(V.value,M.value);else{const{data:e,error:a}=await F.from("vista_agenda_terapeutas").select("*").eq("fecha_cita",V.value).neq("estado","cancelada").order("hora_inicio",{ascending:!0});a?(console.error("Error al cargar citas:",a),T.value=[]):T.value=e||[]}}finally{L.value=!1}}function cargarCitasSegunVista(){"dia"===N.value&&cargarCitasDelDia()}function cambiarDia(e){const a=new Date(V.value);a.setDate(a.getDate()+e),V.value=formatearFecha(a),cargarCitasDelDia()}function irHoy(){V.value=formatearFecha(new Date),cargarCitasDelDia()}function cerrarModalNuevaCita(){I.value=!1,G.value=""}function onCitaCreada(){cargarCitasDelDia()}function formatearFecha(e){return e.toISOString().split("T")[0]||""}function formatearFechaLegible(e){const a=new Date(e+"T00:00:00");return`${a.getDate()} de ${["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][a.getMonth()]} de ${a.getFullYear()}`}function obtenerIconoTipo(e){return{presencial:"üè•",online:"üíª",telefonica:"üìû"}[e]||"üìÖ"}function obtenerColorEstado(e){return{confirmada:"border-green-400",pendiente:"border-yellow-400",cancelada:"border-red-400",realizada:"border-blue-400"}[e]||"border-gray-400"}function obtenerEstiloEstado(e){return{confirmada:"bg-green-100 text-green-700",pendiente:"bg-yellow-100 text-yellow-700",cancelada:"bg-red-100 text-red-700",realizada:"bg-blue-100 text-blue-700"}[e]||"bg-gray-100 text-gray-700"}return r([N,V,M],()=>{cargarCitasSegunVista()}),(t,o,r,h)=>{const S=e,j=a;o(`<div${$(h)}>`),o(y(S,{name:"coordinacion"},{default:s((e,a,t,o)=>{if(!a)return[i("div",{class:"mb-8"},[i("h1",{class:"text-4xl font-serif font-bold text-cafe mb-2"}," Agenda Global "),i("p",{class:"text-lg text-cafe/70"}," Gesti√≥n y coordinaci√≥n de todas las sesiones de terapeutas ")]),i("div",{class:"mb-6 flex flex-wrap gap-3"},[d(i("select",{"onUpdate:modelValue":e=>c(M)?M.value=e:null,class:"px-4 py-2 rounded-lg border border-[#EAD5D3]/40 bg-white text-cafe focus:ring-2 focus:ring-terracota focus:border-transparent",onChange:cargarCitasSegunVista},[i("option",{value:""},"Todos los terapeutas"),(u(!0),l(p,null,m(n(H),e=>(u(),l("option",{key:e.id,value:e.id},b(e.nombre_completo),9,["value"]))),128))],40,["onUpdate:modelValue"]),[[f,n(M)]]),(u(),l(p,null,m(q,e=>i("button",{key:e.id,onClick:a=>N.value=e.id,class:["px-5 py-2.5 rounded-lg font-medium transition-all",n(N)===e.id?"bg-terracota text-white shadow-md":"bg-white text-cafe hover:bg-terracota/10 border border-[#EAD5D3]/40"]},[i("span",{class:"mr-2"},b(e.icono),1),g(" "+b(e.nombre),1)],10,["onClick"])),64)),i("button",{onClick:e=>(G.value=V.value,void(I.value=!0)),class:"ml-auto px-5 py-2.5 rounded-lg font-medium bg-gradient-to-r from-terracota to-rosa text-white hover:from-terracota/90 hover:to-rosa/90 shadow-md transition-all"},[i("span",{class:"mr-2"},"+"),g(" Nueva Cita ")],8,["onClick"])]),"dia"===n(N)?(u(),l("div",{key:0,class:"bg-white rounded-xl shadow-sm border border-[#EAD5D3]/40 p-6"},[i("div",{class:"mb-6 flex items-center gap-4"},[i("button",{onClick:e=>cambiarDia(-1),class:"p-2 hover:bg-terracota/10 rounded-lg transition-colors"}," ‚Üê Anterior ",8,["onClick"]),d(i("input",{"onUpdate:modelValue":e=>c(V)?V.value=e:null,type:"date",class:"flex-1 px-4 py-2 bg-base-bg rounded-lg border border-transparent focus:border-terracota focus:outline-none focus:ring-2 focus:ring-terracota/20"},null,8,["onUpdate:modelValue"]),[[x,n(V)]]),i("button",{onClick:irHoy,class:"px-4 py-2 bg-terracota/10 text-terracota rounded-lg hover:bg-terracota/20 transition-colors font-medium"}," Hoy "),i("button",{onClick:e=>cambiarDia(1),class:"p-2 hover:bg-terracota/10 rounded-lg transition-colors"}," Siguiente ‚Üí ",8,["onClick"])]),i("div",{class:"mb-6"},[i("h2",{class:"text-2xl font-serif font-semibold text-cafe mb-1"},b(formatearFechaLegible(n(V))),1),i("p",{class:"text-cafe/60"},b(n(T).length)+" cita"+b(1!==n(T).length?"s":"")+" programada"+b(1!==n(T).length?"s":""),1)]),n(L)?(u(),l("div",{key:0,class:"text-center py-12"},[i("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-terracota"})])):0===n(T).length?(u(),l("div",{key:1,class:"text-center py-12"},[i("span",{class:"text-6xl mb-4 block"},"üìÖ"),i("p",{class:"text-lg text-cafe font-medium mb-2"},"Sin citas programadas"),i("p",{class:"text-cafe/60"},"No hay citas para "+b(formatearFechaLegible(n(V))),1)])):(u(),l("div",{key:2,class:"space-y-4"},[(u(!0),l(p,null,m(n(T),e=>(u(),l("div",{key:e.cita_id,class:["bg-gradient-to-r from-base-bg to-white rounded-lg p-5 border-l-4 hover:shadow-md transition-all",obtenerColorEstado(e.estado)]},[i("div",{class:"flex items-start justify-between"},[i("div",{class:"flex-1"},[i("div",{class:"flex items-center gap-3 mb-2"},[i("span",{class:"text-3xl"},b(obtenerIconoTipo(e.modalidad)),1),i("div",null,[i("h3",{class:"text-lg font-semibold text-cafe"},b(e.paciente_nombre),1),i("p",{class:"text-sm text-cafe/60"},b(e.hora_inicio)+" - "+b(e.hora_fin)+" ¬∑ "+b(e.terapeuta_nombre),1)])]),e.observaciones?(u(),l("div",{key:0,class:"mt-3 p-3 bg-white/50 rounded-lg"},[i("p",{class:"text-sm text-cafe/70"},[i("span",{class:"font-medium"},"Notas:"),g(" "+b(e.observaciones),1)])])):v("",!0)]),i("div",{class:"flex flex-col gap-2"},[i("span",{class:["px-3 py-1 rounded-full text-xs font-medium",obtenerEstiloEstado(e.estado)]},b(e.estado),3)])])],2))),128))]))])):(u(),l("div",{key:1,class:"bg-white rounded-xl shadow-sm border border-[#EAD5D3]/40 p-6"},[i("div",{class:"text-center py-12"},[i("span",{class:"text-6xl mb-4 block"},"üóìÔ∏è"),i("p",{class:"text-lg text-cafe font-medium mb-2"},"Vista en desarrollo"),i("p",{class:"text-cafe/60"},"La vista "+b(n(N))+" estar√° disponible pronto",1)])])),i(j,{mostrar:n(I),"fecha-preseleccionada":n(G),"hora-preseleccionada":n(U),onCerrar:cerrarModalNuevaCita,onCitaCreada:onCitaCreada},null,8,["mostrar","fecha-preseleccionada","hora-preseleccionada"])];a(`<div class="mb-8"${o}><h1 class="text-4xl font-serif font-bold text-cafe mb-2"${o}> Agenda Global </h1><p class="text-lg text-cafe/70"${o}> Gesti√≥n y coordinaci√≥n de todas las sesiones de terapeutas </p></div><div class="mb-6 flex flex-wrap gap-3"${o}><select class="px-4 py-2 rounded-lg border border-[#EAD5D3]/40 bg-white text-cafe focus:ring-2 focus:ring-terracota focus:border-transparent"${o}><option value=""${w(Array.isArray(n(M))?D(n(M),""):C(n(M),""))?" selected":""}${o}>Todos los terapeutas</option>\x3c!--[--\x3e`),k(n(H),e=>{a(`<option${_("value",e.id)}${w(Array.isArray(n(M))?D(n(M),e.id):C(n(M),e.id))?" selected":""}${o}>${E(e.nombre_completo)}</option>`)}),a("\x3c!--]--\x3e</select>\x3c!--[--\x3e"),k(q,e=>{a(`<button class="${A(["px-5 py-2.5 rounded-lg font-medium transition-all",n(N)===e.id?"bg-terracota text-white shadow-md":"bg-white text-cafe hover:bg-terracota/10 border border-[#EAD5D3]/40"])}"${o}><span class="mr-2"${o}>${E(e.icono)}</span> ${E(e.nombre)}</button>`)}),a(`\x3c!--]--\x3e<button class="ml-auto px-5 py-2.5 rounded-lg font-medium bg-gradient-to-r from-terracota to-rosa text-white hover:from-terracota/90 hover:to-rosa/90 shadow-md transition-all"${o}><span class="mr-2"${o}>+</span> Nueva Cita </button></div>`),"dia"===n(N)?(a(`<div class="bg-white rounded-xl shadow-sm border border-[#EAD5D3]/40 p-6"${o}><div class="mb-6 flex items-center gap-4"${o}><button class="p-2 hover:bg-terracota/10 rounded-lg transition-colors"${o}> ‚Üê Anterior </button><input${_("value",n(V))} type="date" class="flex-1 px-4 py-2 bg-base-bg rounded-lg border border-transparent focus:border-terracota focus:outline-none focus:ring-2 focus:ring-terracota/20"${o}><button class="px-4 py-2 bg-terracota/10 text-terracota rounded-lg hover:bg-terracota/20 transition-colors font-medium"${o}> Hoy </button><button class="p-2 hover:bg-terracota/10 rounded-lg transition-colors"${o}> Siguiente ‚Üí </button></div><div class="mb-6"${o}><h2 class="text-2xl font-serif font-semibold text-cafe mb-1"${o}>${E(formatearFechaLegible(n(V)))}</h2><p class="text-cafe/60"${o}>${E(n(T).length)} cita${E(1!==n(T).length?"s":"")} programada${E(1!==n(T).length?"s":"")}</p></div>`),n(L)?a(`<div class="text-center py-12"${o}><div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-terracota"${o}></div></div>`):0===n(T).length?a(`<div class="text-center py-12"${o}><span class="text-6xl mb-4 block"${o}>üìÖ</span><p class="text-lg text-cafe font-medium mb-2"${o}>Sin citas programadas</p><p class="text-cafe/60"${o}>No hay citas para ${E(formatearFechaLegible(n(V)))}</p></div>`):(a(`<div class="space-y-4"${o}>\x3c!--[--\x3e`),k(n(T),e=>{a(`<div class="${A([obtenerColorEstado(e.estado),"bg-gradient-to-r from-base-bg to-white rounded-lg p-5 border-l-4 hover:shadow-md transition-all"])}"${o}><div class="flex items-start justify-between"${o}><div class="flex-1"${o}><div class="flex items-center gap-3 mb-2"${o}><span class="text-3xl"${o}>${E(obtenerIconoTipo(e.modalidad))}</span><div${o}><h3 class="text-lg font-semibold text-cafe"${o}>${E(e.paciente_nombre)}</h3><p class="text-sm text-cafe/60"${o}>${E(e.hora_inicio)} - ${E(e.hora_fin)} ¬∑ ${E(e.terapeuta_nombre)}</p></div></div>`),e.observaciones?a(`<div class="mt-3 p-3 bg-white/50 rounded-lg"${o}><p class="text-sm text-cafe/70"${o}><span class="font-medium"${o}>Notas:</span> ${E(e.observaciones)}</p></div>`):a("\x3c!----\x3e"),a(`</div><div class="flex flex-col gap-2"${o}><span class="${A(["px-3 py-1 rounded-full text-xs font-medium",obtenerEstiloEstado(e.estado)])}"${o}>${E(e.estado)}</span></div></div></div>`)}),a("\x3c!--]--\x3e</div>")),a("</div>")):a(`<div class="bg-white rounded-xl shadow-sm border border-[#EAD5D3]/40 p-6"${o}><div class="text-center py-12"${o}><span class="text-6xl mb-4 block"${o}>üóìÔ∏è</span><p class="text-lg text-cafe font-medium mb-2"${o}>Vista en desarrollo</p><p class="text-cafe/60"${o}>La vista ${E(n(N))} estar√° disponible pronto</p></div></div>`),a(y(j,{mostrar:n(I),"fecha-preseleccionada":n(G),"hora-preseleccionada":n(U),onCerrar:cerrarModalNuevaCita,onCitaCreada:onCitaCreada},null,t,o))}),_:1},r)),o("</div>")}}}),N=F.setup;F.setup=(e,a)=>{const t=h();return(t.modules||(t.modules=new Set)).add("pages/coordinacion/agenda.vue"),N?N(e,a):void 0};export{F as default};
//# sourceMappingURL=agenda-DDKzFh-k.mjs.map
