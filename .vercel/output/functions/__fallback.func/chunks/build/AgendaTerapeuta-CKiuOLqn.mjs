import{e,v as a,s as t}from"./server.mjs";import{_ as r}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{u as s}from"./useSupabaseClient-DykwVqLQ.mjs";import{r as o}from"./ArrowsPointingOutIcon-BV3CcMOB.mjs";function useAgenda(){const t=s(),r=e(),o=a.ref([]),n=a.ref(!1),d=a.ref(null),i=a.ref(null),l=a.ref({});a.ref(new Map);const c=a.computed(()=>{const e=(new Date).toISOString().split("T")[0];return o.value.filter(a=>a.fecha_cita===e)}),u=a.computed(()=>o.value.filter(e=>"pendiente"===e.estado||"confirmada"===e.estado)),v=a.computed(()=>o.value.filter(e=>"completada"===e.estado||"realizada"===e.estado)),p=a.computed(()=>o.value.filter(e=>e.bono&&e.bono.sesiones_restantes<=2&&e.bono.sesiones_restantes>0&&("pendiente"===e.estado||"confirmada"===e.estado))),getCitasDelTerapeuta=async e=>{try{if(n.value=!0,d.value=null,!r.value?.id)throw new Error("Usuario no autenticado");let a=t.from("citas").select("\n          id,\n          fecha_cita,\n          hora_inicio,\n          hora_fin,\n          estado,\n          modalidad,\n          observaciones,\n          paciente_id,\n          terapeuta_id,\n          bono_id,\n          sesion_descontada,\n          consumo_registrado,\n          paciente:pacientes (\n            id,\n            nombre_completo,\n            telefono,\n            email\n          ),\n          bono:bonos (\n            id,\n            sesiones_restantes,\n            sesiones_totales,\n            estado\n          )\n        ").eq("terapeuta_id",r.value.id);e?.fechaInicio&&(a=a.gte("fecha_cita",e.fechaInicio)),e?.fechaFin&&(a=a.lte("fecha_cita",e.fechaFin)),e?.incluirCompletadas||(a=a.in("estado",["pendiente","confirmada"])),a=a.order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0});const{data:s,error:i}=await a;if(i)throw i;return o.value=s||[],console.log(`‚úÖ [Agenda] Cargadas ${o.value.length} citas`),o.value}catch(e){throw console.error("‚ùå [Agenda] Error al cargar citas:",e),d.value=e.message||"Error al cargar citas",e}finally{n.value=!1}},m=a.ref([]),detectarInconsistencias=async()=>{try{console.log("üîç [Agenda] Detectando inconsistencias...");const{data:e,error:a}=await t.from("citas").select("\n          id,\n          fecha_cita,\n          hora_inicio,\n          hora_fin,\n          estado,\n          modalidad,\n          observaciones,\n          paciente_id,\n          terapeuta_id,\n          bono_id,\n          sesion_descontada,\n          consumo_registrado,\n          paciente:pacientes (\n            id,\n            nombre_completo,\n            telefono,\n            email\n          ),\n          bono:bonos (\n            id,\n            sesiones_restantes,\n            sesiones_totales,\n            estado\n          )\n        ").in("estado",["completada","realizada"]).not("bono_id","is",null).or("sesion_descontada.eq.false,consumo_registrado.eq.false").eq("terapeuta_id",r.value?.id||"");if(a)throw a;return m.value=e||[],m.value.length>0?console.warn(`‚ö†Ô∏è [Agenda] ${m.value.length} cita(s) con inconsistencias detectadas`):console.log("‚úÖ [Agenda] No se detectaron inconsistencias"),m.value}catch(e){return console.error("‚ùå [Agenda] Error al detectar inconsistencias:",e),m.value=[],[]}},resincronizarBono=async e=>{try{console.log(`üîÑ [Agenda] Re-sincronizando bono para cita: ${e}`);const{data:a,error:r}=await t.rpc("actualizar_bono_por_cita",{p_cita_id:e});if(r)throw r;const s=a;return s.success?(console.log("‚úÖ [Agenda] Bono re-sincronizado exitosamente"),"ya_descontada"===s.warning?mostrarNotificacion("info","Esta sesi√≥n ya estaba descontada"):(mostrarNotificacion("success","Bono re-sincronizado correctamente"),s.alerta&&s.mensaje_alerta&&setTimeout(()=>{mostrarNotificacion("warning",s.mensaje_alerta)},500)),await Promise.all([getCitasDelTerapeuta(),detectarInconsistencias()]),s):(console.warn("‚ö†Ô∏è [Agenda] No se pudo re-sincronizar:",s.message),mostrarNotificacion("warning",s.message||"No se pudo re-sincronizar"),s)}catch(e){throw console.error("‚ùå [Agenda] Error al re-sincronizar bono:",e),mostrarNotificacion("error","Error al re-sincronizar el bono"),e}},suscribirCitasRealtime=()=>{r.value?.id?(i.value&&t.removeChannel(i.value),console.log("üì° [Agenda] Iniciando suscripci√≥n Realtime..."),i.value=t.channel(`citas_terapeuta_${r.value.id}`).on("postgres_changes",{event:"*",schema:"public",table:"citas",filter:`terapeuta_id=eq.${r.value.id}`},async e=>{console.log("üì° [Realtime] Cambio detectado en citas:",e.eventType),await getCitasDelTerapeuta(),"INSERT"===e.eventType?mostrarNotificacion("info","Nueva cita agregada a tu agenda"):"UPDATE"===e.eventType?mostrarNotificacion("info","Una cita ha sido actualizada"):"DELETE"===e.eventType&&mostrarNotificacion("warning","Una cita ha sido eliminada")}).subscribe(e=>{"SUBSCRIBED"===e?console.log("‚úÖ [Realtime] Suscripci√≥n activa"):"CHANNEL_ERROR"===e?console.error("‚ùå [Realtime] Error en suscripci√≥n"):"TIMED_OUT"===e&&console.warn("‚ö†Ô∏è [Realtime] Tiempo de espera agotado")})):console.warn("‚ö†Ô∏è [Agenda] No se puede suscribir sin usuario autenticado")},mostrarNotificacion=(e,a)=>{{const t={success:"‚úÖ",error:"‚ùå",warning:"‚ö†Ô∏è",info:"‚ÑπÔ∏è"};console.log(`${t[e]} [Agenda] ${a}`)}},mostrarAlerta=e=>{if(!e.alerta||!e.mensaje_alerta)return;const a="bono_agotado"===e.tipo_alerta?"success":(e.tipo_alerta,"warning");mostrarNotificacion(a,e.mensaje_alerta)};a.watchEffect(()=>{r.value?.id&&(getCitasDelTerapeuta(),suscribirCitasRealtime())});const g=a.computed(()=>{let e=o.value;if(l.value.paciente&&(e=e.filter(e=>e.paciente?.nombre_completo.toLowerCase().includes(l.value.paciente.toLowerCase()))),l.value.busqueda){const a=l.value.busqueda.toLowerCase();e=e.filter(e=>e.paciente?.nombre_completo.toLowerCase().includes(a)||e.observaciones?.toLowerCase().includes(a)||e.fecha_cita.includes(a))}return l.value.estado&&l.value.estado.length>0&&(e=e.filter(e=>l.value.estado.includes(e.estado))),l.value.area_terapeutica&&(e=e.filter(e=>e.area_terapeutica===l.value.area_terapeutica)),l.value.tipo_sesion&&l.value.tipo_sesion.length>0&&(e=e.filter(e=>e.tipo_sesion&&l.value.tipo_sesion.includes(e.tipo_sesion))),l.value.fecha_desde&&(e=e.filter(e=>e.fecha_cita>=l.value.fecha_desde)),l.value.fecha_hasta&&(e=e.filter(e=>e.fecha_cita<=l.value.fecha_hasta)),e}),calcularCargaDiaria=(e,a)=>{const t=o.value.filter(t=>{const r=t.fecha_cita===e,s=!a||t.terapeuta_id===a,o=["pendiente","confirmada"].includes(t.estado);return r&&s&&o});return{total:t.length,confirmadas:t.filter(e=>"confirmada"===e.estado).length,pendientes:t.filter(e=>"pendiente"===e.estado).length}};return{citas:o,loading:n,error:d,filtros:l,citasDelDia:c,citasPendientes:u,citasCompletadas:v,citasConBonoProximoAgotar:p,citasFiltradas:g,getCitasDelTerapeuta:getCitasDelTerapeuta,completarCita:async e=>{try{console.log(`üîÑ [Agenda] Completando cita: ${e}`);const{data:a,error:r}=await t.rpc("completar_cita",{p_cita_id:e});if(r)throw console.error("‚ùå [Agenda] Error en RPC:",r),r;const s=a;if(s.success){console.log("‚úÖ [Agenda] Cita completada exitosamente");const a=o.value.findIndex(a=>a.id===e);if(-1!==a){const e=o.value[a];e&&(e.estado="completada",e.sesion_descontada=!0,e.consumo_registrado=!0,e.bono&&void 0!==s.sesiones_despues&&(e.bono.sesiones_restantes=s.sesiones_despues,s.bono_completado&&(e.bono.estado="completado")))}return s.alerta?mostrarAlerta(s):mostrarNotificacion("success",s.message),await getCitasDelTerapeuta(),s}return s.warning?(console.warn("‚ö†Ô∏è [Agenda] Advertencia:",s.message),mostrarNotificacion("warning",s.message)):(console.error("‚ùå [Agenda] Error:",s.message),mostrarNotificacion("error",s.message||"No se pudo completar la cita")),s}catch(e){console.error("‚ùå [Agenda] Error al completar cita:",e);const a=e.message||"Error desconocido al completar cita";return mostrarNotificacion("error",a),{success:!1,message:a,error:e.code||"unknown_error"}}},obtenerHistorialBono:async e=>{try{const{data:a,error:r}=await t.rpc("obtener_historial_bono",{p_bono_id:e});if(r)throw r;return console.log(`‚úÖ [Agenda] Historial de bono obtenido: ${a?.length||0} movimientos`),a||[]}catch(e){throw console.error("‚ùå [Agenda] Error al obtener historial:",e),e}},verificarBonoCitas:async e=>{try{const{data:a,error:r}=await t.rpc("verificar_bono_citas",{p_bono_id:e});if(r)throw r;return console.log("‚úÖ [Agenda] Verificaci√≥n de bono:",a),a?.alerta&&console.warn("‚ö†Ô∏è [Agenda] Alerta en bono:",a.mensaje_alerta),a}catch(e){throw console.error("‚ùå [Agenda] Error al verificar bono:",e),e}},citasPendientesSync:m,detectarInconsistencias:detectarInconsistencias,resincronizarBono:resincronizarBono,resincronizarTodos:async()=>{if(0!==m.value.length)try{console.log(`üîÑ [Agenda] Re-sincronizando ${m.value.length} citas...`);let e=0,a=0,t=0;for(const r of m.value)try{const s=await resincronizarBono(r.id);s.success?"ya_descontada"===s.warning?t++:e++:a++,await new Promise(e=>setTimeout(e,300))}catch{a++}const r=[];e>0&&r.push(`${e} sincronizada(s)`),t>0&&r.push(`${t} ya estaba(n) descontada(s)`),a>0&&r.push(`${a} fallida(s)`);const s=`‚úÖ Re-sincronizaci√≥n completa: ${r.join(", ")}`;mostrarNotificacion(0===a?"success":"warning",s),console.log("‚úÖ [Agenda] Re-sincronizaci√≥n masiva completada:",{exitosos:e,yaDescontados:t,fallidos:a})}catch(e){console.error("‚ùå [Agenda] Error en re-sincronizaci√≥n masiva:",e),mostrarNotificacion("error","Error al re-sincronizar todas las citas")}else mostrarNotificacion("info","No hay citas pendientes de sincronizaci√≥n")},aplicarFiltros:e=>{l.value={...e}},limpiarFiltros:()=>{l.value={}},reprogramarCita:async(e,a,r,s)=>{try{n.value=!0;const{data:d,error:i}=await t.from("citas").update({fecha_cita:a,hora_inicio:r,hora_fin:s||r,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(i)throw i;const l=o.value.findIndex(a=>a.id===e);return-1!==l&&d&&(o.value[l]={...o.value[l],...d}),{success:!0,cita:d}}catch(e){return console.error("Error al reprogramar cita:",e),{success:!1,error:e.message}}finally{n.value=!1}},actualizarNotasRapidas:async(e,a,r)=>{try{const{data:s,error:n}=await t.from("citas").update({notas_rapidas:a,enlace_videollamada:r,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw n;const d=o.value.findIndex(a=>a.id===e);return-1!==d&&s&&(o.value[d]={...o.value[d],...s}),{success:!0}}catch(e){return console.error("Error al actualizar notas:",e),{success:!1,error:e.message}}},obtenerDisponibilidad:async e=>{try{const a=e||r.value?.id;if(!a)throw new Error("ID de terapeuta requerido");const{data:s,error:o}=await t.from("terapeutas").select("disponibilidad").eq("id",a).single();if(o)throw o;return s?.disponibilidad||[]}catch(e){return console.error("Error al obtener disponibilidad:",e),[]}},calcularHuecosLibres:(e,a)=>{const t=new Date(e+"T00:00:00").getDay(),r=o.value.filter(a=>a.fecha_cita===e),s=a.filter(e=>e.dia_semana===t&&e.disponible);if(0===s.length)return[];const n=[];return s.forEach(e=>{const a=e.hora_inicio,t=e.hora_fin;r.some(e=>e.hora_inicio>=a&&e.hora_inicio<t||e.hora_fin>a&&e.hora_fin<=t||e.hora_inicio<=a&&e.hora_fin>=t)||n.push({hora_inicio:a,hora_fin:t})}),n},programarRecordatorios:async e=>{try{const a=o.value.find(a=>a.id===e);if(!a||!a.paciente)return{success:!1,error:"Cita no encontrada"};const r=new Date(a.fecha_cita+"T"+a.hora_inicio),s=new Date;new Date(r.getTime()-864e5)>s&&!a.recordatorio_24h_enviado&&(await t.from("notificaciones").insert({usuario_id:a.paciente_id,tipo:"cita",titulo:"üìÖ Recordatorio: Cita ma√±ana",mensaje:`Tu cita est√° programada para ma√±ana ${a.fecha_cita} a las ${a.hora_inicio}`,metadata:{cita_id:e,tipo_recordatorio:"24h",fecha_cita:a.fecha_cita,hora:a.hora_inicio}}),await t.from("citas").update({recordatorio_24h_enviado:!0}).eq("id",e));return new Date(r.getTime()-144e5)>s&&!a.recordatorio_4h_enviado&&(await t.from("notificaciones").insert({usuario_id:a.paciente_id,tipo:"cita",titulo:"‚è∞ Recordatorio: Cita en 4 horas",mensaje:`Tu cita est√° programada para hoy ${a.fecha_cita} a las ${a.hora_inicio}`,metadata:{cita_id:e,tipo_recordatorio:"4h",fecha_cita:a.fecha_cita,hora:a.hora_inicio,enlace_videollamada:a.enlace_videollamada}}),await t.from("citas").update({recordatorio_4h_enviado:!0}).eq("id",e)),{success:!0}}catch(e){return console.error("Error al programar recordatorios:",e),{success:!1,error:e.message}}},calcularCargaDiaria:calcularCargaDiaria,obtenerResumenSemanal:e=>{const a=new Date(e+"T00:00:00"),t=[];for(let e=0;e<7;e++){const r=new Date(a);r.setDate(a.getDate()+e);const s=r.toISOString().split("T")[0]||"";if(!s)continue;const o=calcularCargaDiaria(s);t.push({fecha:s,dia:r.toLocaleDateString("es-ES",{weekday:"short"}),citas:o.total,confirmadas:o.confirmadas,pendientes:o.pendientes})}return t},obtenerResumenMensual:(e,a)=>{const t=new Date(e,a+1,0),r=new Map;for(let s=1;s<=t.getDate();s++){const t=new Date(e,a,s).toISOString().split("T")[0]||"";if(!t)continue;const o=calcularCargaDiaria(t);r.set(t,{dia:s,citas:o.total,confirmadas:o.confirmadas,pendientes:o.pendientes})}return r},suscribirCitasRealtime:suscribirCitasRealtime,desuscribirCitasRealtime:()=>{i.value&&(console.log("üì° [Realtime] Cerrando suscripci√≥n..."),t.removeChannel(i.value),i.value=null)}}}const n=a.defineComponent({__name:"TarjetaCita",__ssrInlineRender:!0,props:{cita:{},compact:{type:Boolean}},emits:["completar","verHistorial"],setup(e,{emit:r}){const s=e,formatearHora=e=>e.substring(0,5),o=a.computed(()=>({pendiente:"bg-yellow-100 text-yellow-800 border-yellow-300",confirmada:"bg-blue-100 text-blue-800 border-blue-300",completada:"bg-green-100 text-green-800 border-green-300",realizada:"bg-green-100 text-green-800 border-green-300",cancelada:"bg-red-100 text-red-800 border-red-300"}[s.cita.estado]||"bg-gray-100 text-gray-800 border-gray-300")),n=a.computed(()=>{if(!s.cita.bono)return null;const e=s.cita.bono.sesiones_restantes,a=s.cita.bono.estado;return"completado"===a||0===e?{color:"text-red-600",icono:"üö´",alerta:!0,mensajeAlerta:"Bono agotado",clase:"bg-red-50 border-red-200"}:1===e?{color:"text-orange-600",icono:"‚ö†Ô∏è",alerta:!0,mensajeAlerta:"√öltima sesi√≥n del bono",clase:"bg-orange-50 border-orange-200"}:e<=2?{color:"text-yellow-600",icono:"‚ö†Ô∏è",alerta:!0,mensajeAlerta:"Pocas sesiones restantes",clase:"bg-yellow-50 border-yellow-200"}:"activo"===a?{color:"text-green-600",icono:"‚úì",alerta:!1,mensajeAlerta:null,clase:"bg-green-50 border-green-200"}:{color:"text-gray-600",icono:"‚ÑπÔ∏è",alerta:!1,mensajeAlerta:null,clase:"bg-gray-50 border-gray-200"}}),d=a.computed(()=>"pendiente"===s.cita.estado||"confirmada"===s.cita.estado);return(r,s,i,l)=>{s(`<div${t.ssrRenderAttrs(a.mergeProps({class:["border rounded-xl shadow-sm hover:shadow-md transition-all duration-200 bg-white overflow-hidden",e.compact?"p-3":"p-5"]},l))} data-v-3085384e><div class="flex items-start justify-between gap-4" data-v-3085384e><div class="flex-1 min-w-0" data-v-3085384e><div class="flex items-center gap-3 mb-2 flex-wrap" data-v-3085384e><h3 class="${t.ssrRenderClass([e.compact?"text-base":"text-lg","font-semibold text-gray-900 truncate"])}" data-v-3085384e>${t.ssrInterpolate(e.cita.paciente?.nombre_completo||"Paciente")}</h3><span class="${t.ssrRenderClass(["px-3 py-1 text-xs font-medium rounded-full border",a.unref(o)])}" data-v-3085384e>${t.ssrInterpolate(e.cita.estado.toUpperCase())}</span></div><div class="${t.ssrRenderClass(["space-y-1",e.compact?"text-xs":"text-sm","text-gray-600"])}" data-v-3085384e><div class="flex items-center gap-2" data-v-3085384e><svg class="h-4 w-4 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-3085384e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-3085384e></path></svg><span class="truncate" data-v-3085384e>${t.ssrInterpolate(formatearHora(e.cita.hora_inicio))} - ${t.ssrInterpolate(formatearHora(e.cita.hora_fin))}</span>`),e.cita.modalidad?s('<span class="text-gray-400" data-v-3085384e>‚Ä¢</span>'):s("\x3c!----\x3e"),e.cita.modalidad?s(`<span class="capitalize truncate" data-v-3085384e>${t.ssrInterpolate(e.cita.modalidad)}</span>`):s("\x3c!----\x3e"),s("</div>"),e.cita.paciente?.telefono&&!e.compact?s(`<div class="flex items-center gap-2" data-v-3085384e><svg class="h-4 w-4 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-3085384e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" data-v-3085384e></path></svg><span class="truncate" data-v-3085384e>${t.ssrInterpolate(e.cita.paciente.telefono)}</span></div>`):s("\x3c!----\x3e"),s("</div>"),e.cita.bono?(s(`<div class="${t.ssrRenderClass(["mt-3 p-3 rounded-lg border",a.unref(n)?.clase||"bg-gray-50 border-gray-200"])}" data-v-3085384e><div class="flex items-center justify-between gap-2" data-v-3085384e><div class="flex-1 min-w-0" data-v-3085384e><p class="text-xs font-medium text-gray-700 mb-1" data-v-3085384e>${t.ssrInterpolate(a.unref(n)?.icono)} Bono de Sesiones </p><div class="flex items-center gap-2 flex-wrap" data-v-3085384e><p class="${t.ssrRenderClass(["text-sm font-semibold",a.unref(n)?.color||"text-gray-900"])}" data-v-3085384e>${t.ssrInterpolate(e.cita.bono.sesiones_restantes)} / ${t.ssrInterpolate(e.cita.bono.sesiones_totales)} sesiones </p><span class="text-xs text-gray-500 capitalize" data-v-3085384e> (${t.ssrInterpolate(e.cita.bono.estado)}) </span></div>`),a.unref(n)?.alerta?s(`<p class="${t.ssrRenderClass(["mt-2 text-xs font-medium",a.unref(n).color])}" data-v-3085384e>${t.ssrInterpolate(a.unref(n).mensajeAlerta)}</p>`):s("\x3c!----\x3e"),s("</div>"),e.compact?s("\x3c!----\x3e"):s('<button class="text-xs text-blue-600 hover:text-blue-800 font-medium whitespace-nowrap px-2 py-1 hover:bg-blue-50 rounded transition-colors" type="button" data-v-3085384e> üìä Historial </button>'),s("</div></div>")):s('<div class="mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg" data-v-3085384e><p class="text-xs text-gray-500 italic flex items-center gap-2" data-v-3085384e><svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-3085384e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-3085384e></path></svg> Sin bono activo - Consulta individual </p></div>'),e.cita.observaciones&&!e.compact?s(`<div class="mt-3 p-2 bg-gray-50 rounded text-xs text-gray-700" data-v-3085384e><p class="font-medium text-gray-500 mb-1" data-v-3085384e>Observaciones:</p> ${t.ssrInterpolate(e.cita.observaciones)}</div>`):s("\x3c!----\x3e"),s('</div><div class="flex flex-col gap-2" data-v-3085384e>'),a.unref(d)?s(`<button class="${t.ssrRenderClass(["px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors",e.compact?"text-xs":"text-sm"])}" type="button" data-v-3085384e> ‚úÖ Completar </button>`):"completada"===e.cita.estado||"realizada"===e.cita.estado?s(`<span class="${t.ssrRenderClass(["px-4 py-2 bg-green-100 text-green-800 font-medium rounded-lg text-center",e.compact?"text-xs":"text-sm"])}" data-v-3085384e> ‚úì Completada </span>`):s("\x3c!----\x3e"),s("</div></div></div>")}}}),d=n.setup;n.setup=(e,t)=>{const r=a.useSSRContext();return(r.modules||(r.modules=new Set)).add("components/TarjetaCita.vue"),d?d(e,t):void 0};const i=Object.assign(r(n,[["__scopeId","data-v-3085384e"]]),{__name:"TarjetaCita"}),l=a.defineComponent({__name:"AgendaTerapeuta",__ssrInlineRender:!0,setup(e){const{citas:r,loading:n,error:d,citasDelDia:l,citasPendientes:c,citasCompletadas:u,citasConBonoProximoAgotar:v,completarCita:p,obtenerHistorialBono:m,verificarBonoCitas:g}=useAgenda();s();const b=a.ref("hoy"),x=a.ref("calendario"),f=a.ref(new Date),h=a.ref(!1),y=a.ref(null),w=a.ref([]),_=a.ref(null),$=a.ref(!1);a.ref(null);const C=a.ref(null),I=["11:00","12:00","13:00","17:00","18:00","19:00","20:00","21:00","22:00"],R=a.computed(()=>{const e=new Date(f.value),a=e.getDay(),t=0===a?-6:1-a;e.setDate(e.getDate()+t);const r=[];for(let a=0;a<7;a++){const t=new Date(e);t.setDate(e.getDate()+a),r.push({fecha:t.toISOString().split("T")[0],nombreDia:t.toLocaleDateString("es-ES",{weekday:"short"}),numeroDia:t.getDate(),mes:t.toLocaleDateString("es-ES",{month:"short"})})}return r}),A=a.computed(()=>{switch(b.value){case"hoy":return l.value;case"pendientes":return c.value;case"completadas":return u.value;default:return r.value}}),formatearHora=e=>e.substring(0,5),formatearFechaCompleta=e=>e.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),esHoy=e=>e===(new Date).toISOString().split("T")[0],citasPorHora=e=>{const a=f.value.toISOString().split("T")[0];return r.value.filter(t=>t.fecha_cita===a&&t.hora_inicio?.startsWith(e))},getClasesCita=e=>({pendiente:"bg-yellow-100 border-l-4 border-yellow-500",confirmada:"bg-green-100 border-l-4 border-green-500",completada:"bg-blue-100 border-l-4 border-blue-500",realizada:"bg-blue-100 border-l-4 border-blue-500",cancelada:"bg-red-100 border-l-4 border-red-500"}[e]||"bg-gray-100 border-l-4 border-gray-500"),citasPorDiaHora=(e,a)=>r.value.filter(t=>t.fecha_cita===e&&t.hora_inicio?.startsWith(a)),esCeldaObjetivo=(e,a)=>C.value?.fecha===e&&C.value?.hora===a,handleCompletarCita=async e=>{if(confirm("¬øEst√°s seguro de marcar esta cita como completada?"))try{(await p(e)).success&&console.log("Cita completada")}catch(e){console.error("Error al completar cita:",e)}},abrirHistorial=async e=>{try{$.value=!0,y.value=e,h.value=!0;const[a,t]=await Promise.all([m(e),g(e)]);w.value=a,_.value=t}catch(e){console.error("Error al cargar historial:",e)}finally{$.value=!1}};return(e,s,p,m)=>{const g=i;var y;s(`<div${t.ssrRenderAttrs(a.mergeProps({class:"space-y-3"},m))} data-v-040d0550><div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-sm border border-white/30 p-4" data-v-040d0550><div class="flex items-center justify-between gap-3 mb-3" data-v-040d0550><div class="flex items-center gap-3" data-v-040d0550><h1 class="text-xl font-[&#39;Elms_Sans&#39;] font-bold text-neutral-800" data-v-040d0550>Mi Agenda</h1><span class="text-sm text-neutral-600" data-v-040d0550>${t.ssrInterpolate((y=f.value,y.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))}</span></div><div class="flex items-center gap-2" data-v-040d0550><div class="flex bg-neutral-100 rounded-xl p-1" data-v-040d0550><button class="${t.ssrRenderClass(["dia"===x.value?"bg-white text-neutral-800 shadow-sm":"text-neutral-600 hover:text-neutral-800","px-3 py-1.5 rounded-lg text-sm font-medium transition-all"])}" data-v-040d0550> D√≠a </button><button class="${t.ssrRenderClass(["calendario"===x.value?"bg-white text-neutral-800 shadow-sm":"text-neutral-600 hover:text-neutral-800","px-3 py-1.5 rounded-lg text-sm font-medium transition-all"])}" data-v-040d0550> Semana </button><button class="${t.ssrRenderClass(["lista"===x.value?"bg-white text-neutral-800 shadow-sm":"text-neutral-600 hover:text-neutral-800","px-3 py-1.5 rounded-lg text-sm font-medium transition-all"])}" data-v-040d0550> Lista </button></div><div class="flex items-center gap-1" data-v-040d0550><button class="p-2 rounded-lg hover:bg-neutral-100 text-neutral-700 transition-all" title="Anterior" data-v-040d0550> ‚Üê </button><button class="px-3 py-1.5 bg-gradient-to-r from-[#04BF9D] to-[#027368] text-white hover:from-[#027368] hover:to-[#04BF9D] rounded-lg text-sm font-medium transition-all" data-v-040d0550> Hoy </button><button class="p-2 rounded-lg hover:bg-neutral-100 text-neutral-700 transition-all" title="Siguiente" data-v-040d0550> ‚Üí </button></div><button class="px-4 py-2 bg-white/80 backdrop-blur-sm border border-neutral-200 rounded-xl hover:bg-neutral-50 transition-all text-sm font-medium shadow-sm"${t.ssrIncludeBooleanAttr(a.unref(n))?" disabled":""} data-v-040d0550>`),a.unref(n)?s("<span data-v-040d0550>Actualizando...</span>"):s("<span data-v-040d0550>‚Üª Actualizar</span>"),s("</button></div></div>"),"lista"===x.value?(s('<div class="flex flex-wrap gap-2" data-v-040d0550>\x3c!--[--\x3e'),t.ssrRenderList([{key:"hoy",label:"Hoy",count:a.unref(l).length},{key:"pendientes",label:"Pendientes",count:a.unref(c).length},{key:"completadas",label:"Completadas",count:a.unref(u).length},{key:"todas",label:"Todas",count:a.unref(r).length}],e=>{s(`<button class="${t.ssrRenderClass(["px-3 py-1.5 rounded-xl text-sm font-medium transition-all shadow-sm",b.value===e.key?"bg-gradient-to-r from-[#04BF9D] to-[#027368] text-white":"bg-white text-neutral-700 hover:bg-neutral-50 border border-neutral-200"])}" data-v-040d0550>${t.ssrInterpolate(e.label)} (${t.ssrInterpolate(e.count)}) </button>`)}),s("\x3c!--]--\x3e</div>")):s("\x3c!----\x3e"),s("</div>"),a.unref(v).length>0?s(`<div class="bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4 mb-4 shadow-sm" data-v-040d0550><div class="flex items-center gap-3" data-v-040d0550><div class="w-10 h-10 rounded-xl bg-gradient-to-br from-[#F2B33D] to-[#F2B33D]/70 flex items-center justify-center flex-shrink-0" data-v-040d0550><svg class="h-5 w-5 text-white" fill="currentColor" viewBox="0 0 20 20" data-v-040d0550><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-040d0550></path></svg></div><div class="flex-1" data-v-040d0550><p class="text-sm font-medium text-amber-900" data-v-040d0550> Atenci√≥n: ${t.ssrInterpolate(a.unref(v).length)} paciente(s) con pocas sesiones restantes </p><p class="text-xs text-amber-700 mt-1" data-v-040d0550> Considera informar a estos pacientes para renovar sus bonos </p></div></div></div>`):s("\x3c!----\x3e"),"dia"===x.value?(s(`<div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-sm border border-white/30 overflow-hidden flex flex-col" style="${t.ssrRenderStyle({height:"calc(100vh - 200px)"})}" data-v-040d0550><div class="sticky top-0 z-10 bg-gradient-to-r from-white/95 via-white/90 to-white/95 backdrop-blur-md border-b border-neutral-200 shadow-sm p-4" data-v-040d0550><div class="flex items-center justify-between" data-v-040d0550><div data-v-040d0550><h3 class="font-[&#39;Elms_Sans&#39;] font-semibold text-lg text-neutral-800" data-v-040d0550>${t.ssrInterpolate(formatearFechaCompleta(f.value))}</h3><p class="text-sm text-neutral-600 mt-1" data-v-040d0550>${t.ssrInterpolate(citasPorHora?Object.values(I).reduce((e,a)=>e+citasPorHora(a).length,0):0)} citas programadas </p></div></div></div><div class="flex-1 overflow-y-auto" data-v-040d0550>`),0===A.value.length?s(`<div class="flex items-center justify-center py-16" data-v-040d0550><div class="text-center" data-v-040d0550><div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-[#027368]/10 to-[#04BF9D]/10 flex items-center justify-center" data-v-040d0550><svg class="w-8 h-8 text-[#027368]" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-040d0550><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-040d0550></path></svg></div><h3 class="font-[&#39;Elms_Sans&#39;] font-medium text-neutral-800 mb-2" data-v-040d0550>No hay citas programadas</h3><p class="text-neutral-600 text-sm" data-v-040d0550>${t.ssrInterpolate(formatearFechaCompleta(f.value))} est√° libre</p></div></div>`):(s('<div class="divide-y divide-neutral-100" data-v-040d0550>\x3c!--[--\x3e'),t.ssrRenderList(I,(e,r)=>{s(`<div${t.ssrRenderAttr("data-hora",e)} class="flex hover:bg-neutral-50/50 transition-colors" data-v-040d0550><div class="w-20 p-3 text-sm font-medium text-neutral-600 border-r border-neutral-200 bg-neutral-50/50 flex-shrink-0" data-v-040d0550>${t.ssrInterpolate(e)}</div><div class="flex-1 p-3 cursor-pointer hover:bg-[#027368]/5 transition-colors relative group/cell" data-v-040d0550>`),0===citasPorHora(e).length?s('<div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover/cell:opacity-100 transition-opacity pointer-events-none" data-v-040d0550><span class="text-xs text-[#027368] font-medium bg-white px-3 py-1.5 rounded-full shadow-sm border border-white/50" data-v-040d0550> Horario libre </span></div>'):s("\x3c!----\x3e"),s("\x3c!--[--\x3e"),t.ssrRenderList(citasPorHora(e),e=>{var r;s(`<div draggable="true" class="${t.ssrRenderClass([getClasesCita(e.estado),"mb-2 p-3 rounded-xl transition-all hover:shadow-md hover:ring-2 hover:ring-[#027368]/30 group relative cursor-move backdrop-blur-sm"])}" title="Arrastra para mover a otra hora" data-v-040d0550><div class="flex items-start justify-between gap-3" data-v-040d0550><div class="opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0" data-v-040d0550>`),s(t.ssrRenderComponent(a.unref(o),{class:"w-4 h-4 text-neutral-500"},null,p)),s(`</div><div class="flex-1" data-v-040d0550><p class="font-medium text-sm text-neutral-800" data-v-040d0550>${t.ssrInterpolate(e.paciente?.nombre_completo||"Sin nombre")}</p><div class="flex items-center gap-2 mt-1" data-v-040d0550><span class="text-xs text-neutral-600 font-medium" data-v-040d0550>${t.ssrInterpolate(formatearHora(e.hora_inicio))} - ${t.ssrInterpolate(formatearHora(e.hora_fin))}</span><span class="text-xs px-2 py-1 rounded-lg bg-white/60 text-neutral-700" data-v-040d0550>${t.ssrInterpolate(e.modalidad)}</span></div></div><div class="flex items-center gap-2" data-v-040d0550><span class="${t.ssrRenderClass([(r=e.estado,{pendiente:"bg-amber-100 text-amber-700 border border-amber-200",confirmada:"bg-green-100 text-green-700 border border-green-200",completada:"bg-blue-100 text-blue-700 border border-blue-200",realizada:"bg-blue-100 text-blue-700 border border-blue-200",cancelada:"bg-red-100 text-red-700 border border-red-200"}[r]||"bg-gray-100 text-gray-700 border border-gray-200"),"text-xs px-2 py-1 rounded-lg font-medium whitespace-nowrap"])}" data-v-040d0550>${t.ssrInterpolate((e=>({pendiente:"Pendiente",confirmada:"Confirmada",completada:"Completada",realizada:"Realizada",cancelada:"Cancelada"}[e]||e))(e.estado))}</span></div></div></div>`)}),s("\x3c!--]--\x3e"),0===citasPorHora(e).length?s('<div class="text-xs text-neutral-400 italic" data-v-040d0550> Sin citas programadas </div>'):s("\x3c!----\x3e"),s("</div></div>")}),s("\x3c!--]--\x3e</div>")),s("</div></div>")):"calendario"===x.value?(s(`<div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-sm border border-white/30 overflow-hidden flex flex-col" style="${t.ssrRenderStyle({height:"calc(100vh - 200px)"})}" data-v-040d0550><div class="min-w-[800px] overflow-x-auto flex-1 flex flex-col" data-v-040d0550><div class="sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm" data-v-040d0550><div class="grid grid-cols-8" data-v-040d0550><div class="p-2 border-r border-gray-200 bg-gray-50" data-v-040d0550></div>\x3c!--[--\x3e`),t.ssrRenderList(R.value,e=>{s(`<div class="${t.ssrRenderClass([esHoy(e.fecha)?"bg-blue-50":"bg-white","p-2 text-center border-r border-gray-200 last:border-r-0"])}" data-v-040d0550><div class="flex items-center justify-center gap-1" data-v-040d0550><span class="text-xs font-medium text-gray-600 uppercase" data-v-040d0550>${t.ssrInterpolate(e.nombreDia)}</span><span class="${t.ssrRenderClass([esHoy(e.fecha)?"text-blue-600":"","text-lg font-bold text-gray-900"])}" data-v-040d0550>${t.ssrInterpolate(e.numeroDia)}</span></div><div class="text-xs text-gray-500" data-v-040d0550>${t.ssrInterpolate(e.mes)}</div></div>`)}),s('\x3c!--]--\x3e</div></div><div class="flex-1 overflow-y-auto" data-v-040d0550><div class="divide-y divide-gray-100" data-v-040d0550>\x3c!--[--\x3e'),t.ssrRenderList(I,e=>{s(`<div${t.ssrRenderAttr("data-hora",e)} class="grid grid-cols-8" data-v-040d0550><div class="p-3 text-sm font-medium text-gray-600 border-r border-gray-100 bg-gray-50 sticky left-0" data-v-040d0550>${t.ssrInterpolate(e)}</div>\x3c!--[--\x3e`),t.ssrRenderList(R.value,r=>{s(`<div class="${t.ssrRenderClass([[esHoy(r.fecha)?"bg-blue-50/20":"",esCeldaObjetivo(r.fecha,e)?"bg-blue-100 ring-2 ring-blue-500 ring-inset":""],"p-2 border-r border-gray-100 last:border-r-0 hover:bg-blue-50/30 transition-colors min-h-[70px] cursor-pointer relative group/cell"])}" data-v-040d0550>`),0===citasPorDiaHora(r.fecha,e).length?s('<div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover/cell:opacity-100 transition-opacity pointer-events-none" data-v-040d0550><span class="text-xs text-blue-600 font-medium bg-white px-2 py-1 rounded-full shadow-sm" data-v-040d0550> Libre </span></div>'):s("\x3c!----\x3e"),s("\x3c!--[--\x3e"),t.ssrRenderList(citasPorDiaHora(r.fecha,e),e=>{s(`<div draggable="true" class="${t.ssrRenderClass([getClasesCita(e.estado),"text-xs p-2 rounded-lg mb-1.5 hover:shadow-lg hover:ring-2 hover:ring-blue-400 transition-all group relative cursor-move"])}" title="Arrastra para mover" data-v-040d0550><div class="opacity-0 group-hover:opacity-100 transition-opacity absolute top-1 left-1" data-v-040d0550>`),s(t.ssrRenderComponent(a.unref(o),{class:"w-3 h-3 text-gray-500"},null,p)),s(`</div><div class="pl-5" data-v-040d0550><p class="font-semibold truncate text-sm" data-v-040d0550>${t.ssrInterpolate(e.paciente?.nombre_completo||"Sin nombre")}</p><p class="text-xs text-gray-600 mt-0.5" data-v-040d0550>${t.ssrInterpolate(formatearHora(e.hora_inicio))} - ${t.ssrInterpolate(formatearHora(e.hora_fin))}</p><div class="flex items-center gap-1 mt-1" data-v-040d0550><span class="text-xs px-1.5 py-0.5 rounded-full bg-white/60" data-v-040d0550>${t.ssrInterpolate(e.modalidad)}</span>`),e.bono?s('<span class="text-xs text-green-700" data-v-040d0550> Bono </span>'):s("\x3c!----\x3e"),s("</div></div></div>")}),s("\x3c!--]--\x3e</div>")}),s("\x3c!--]--\x3e</div>")}),s("\x3c!--]--\x3e</div></div></div></div>")):(s('<div data-v-040d0550><div class="flex flex-wrap gap-2 mb-6" data-v-040d0550>\x3c!--[--\x3e'),t.ssrRenderList([{key:"hoy",label:"Hoy",count:a.unref(l).length},{key:"pendientes",label:"Pendientes",count:a.unref(c).length},{key:"completadas",label:"Completadas",count:a.unref(u).length},{key:"todas",label:"Todas",count:a.unref(r).length}],e=>{s(`<button class="${t.ssrRenderClass(["px-4 py-2 rounded-lg font-medium transition-colors",b.value===e.key?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"])}" data-v-040d0550>${t.ssrInterpolate(e.label)} (${t.ssrInterpolate(e.count)}) </button>`)}),s("\x3c!--]--\x3e</div>"),a.unref(d)?s(`<div class="bg-red-50 border-l-4 border-red-400 p-4 mb-6" data-v-040d0550><p class="text-red-700" data-v-040d0550>${t.ssrInterpolate(a.unref(d))}</p></div>`):s("\x3c!----\x3e"),a.unref(n)&&0===a.unref(r).length?s('<div class="text-center py-12" data-v-040d0550><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4" data-v-040d0550></div><p class="text-gray-600" data-v-040d0550>Cargando citas...</p></div>'):0===A.value.length?s(`<div class="text-center py-12 bg-gray-50 rounded-lg" data-v-040d0550><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-040d0550><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-040d0550></path></svg><h3 class="mt-2 text-sm font-medium text-gray-900" data-v-040d0550>No hay citas</h3><p class="mt-1 text-sm text-gray-500" data-v-040d0550>${t.ssrInterpolate("hoy"===b.value?"No tienes citas programadas para hoy.":"No hay citas en esta categor√≠a.")}</p></div>`):(s('<div class="space-y-4" data-v-040d0550>\x3c!--[--\x3e'),t.ssrRenderList(A.value,e=>{s(t.ssrRenderComponent(g,{key:e.id,cita:e,onCompletar:handleCompletarCita,onVerHistorial:abrirHistorial},null,p))}),s("\x3c!--]--\x3e</div>")),s("</div>")),t.ssrRenderTeleport(s,e=>{var a;h.value?(e('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" data-v-040d0550><div class="bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden" data-v-040d0550><div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between" data-v-040d0550><h2 class="text-xl font-bold text-gray-900" data-v-040d0550>Historial del Bono</h2><button class="text-gray-400 hover:text-gray-600 transition-colors" data-v-040d0550><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-040d0550><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-040d0550></path></svg></button></div><div class="px-6 py-4 overflow-y-auto max-h-[calc(90vh-140px)]" data-v-040d0550>'),$.value?e('<div class="text-center py-8" data-v-040d0550><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto" data-v-040d0550></div></div>'):(e("<div data-v-040d0550>"),_.value?(e(`<div class="mb-6 p-4 bg-blue-50 rounded-lg" data-v-040d0550><h3 class="font-semibold text-gray-900 mb-3" data-v-040d0550>Resumen</h3><div class="grid grid-cols-3 gap-4 text-center" data-v-040d0550><div data-v-040d0550><p class="text-2xl font-bold text-blue-600" data-v-040d0550>${t.ssrInterpolate(_.value.bono.sesiones_totales)}</p><p class="text-xs text-gray-600" data-v-040d0550>Sesiones Totales</p></div><div data-v-040d0550><p class="text-2xl font-bold text-green-600" data-v-040d0550>${t.ssrInterpolate(_.value.bono.sesiones_usadas)}</p><p class="text-xs text-gray-600" data-v-040d0550>Sesiones Usadas</p></div><div data-v-040d0550><p class="${t.ssrRenderClass(["text-2xl font-bold",(a=_.value.bono.sesiones_restantes,0===a?"text-red-600 font-bold":1===a?"text-orange-600 font-semibold":a<=2?"text-yellow-600 font-medium":"text-green-600")])}" data-v-040d0550>${t.ssrInterpolate(_.value.bono.sesiones_restantes)}</p><p class="text-xs text-gray-600" data-v-040d0550>Sesiones Restantes</p></div></div>`),_.value.alerta?e(`<div class="mt-3 p-2 bg-yellow-100 border border-yellow-300 rounded text-sm text-yellow-800" data-v-040d0550>${t.ssrInterpolate(_.value.mensaje_alerta)}</div>`):e("\x3c!----\x3e"),e("</div>")):e("\x3c!----\x3e"),e('<div data-v-040d0550><h3 class="font-semibold text-gray-900 mb-3" data-v-040d0550>Movimientos</h3>'),0===w.value.length?e('<div class="text-center py-8 text-gray-500" data-v-040d0550> No hay movimientos registrados </div>'):(e('<div class="space-y-3" data-v-040d0550>\x3c!--[--\x3e'),t.ssrRenderList(w.value,a=>{e(`<div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors" data-v-040d0550><div class="flex items-start justify-between" data-v-040d0550><div class="flex-1" data-v-040d0550><div class="flex items-center gap-2 mb-1" data-v-040d0550><span class="${t.ssrRenderClass(["px-2 py-1 text-xs font-medium rounded","descuento"===a.tipo_movimiento?"bg-red-100 text-red-700":"reembolso"===a.tipo_movimiento?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])}" data-v-040d0550>${t.ssrInterpolate(a.tipo_movimiento)}</span><span class="text-xs text-gray-500" data-v-040d0550>${t.ssrInterpolate(new Date(a.fecha).toLocaleString("es-ES"))}</span></div><p class="text-sm text-gray-700" data-v-040d0550>${t.ssrInterpolate(a.motivo)}</p></div><div class="text-right ml-4" data-v-040d0550><p class="text-sm font-semibold text-gray-900" data-v-040d0550>${t.ssrInterpolate(a.sesiones_antes)} ‚Üí ${t.ssrInterpolate(a.sesiones_despues)}</p><p class="${t.ssrRenderClass(["text-xs font-medium",a.sesiones_modificadas>0?"text-red-600":"text-green-600"])}" data-v-040d0550>${t.ssrInterpolate(a.sesiones_modificadas>0?"-":"+")}${t.ssrInterpolate(Math.abs(a.sesiones_modificadas))}</p></div></div></div>`)}),e("\x3c!--]--\x3e</div>")),e("</div></div>")),e('</div><div class="px-6 py-4 border-t border-gray-200 flex justify-end" data-v-040d0550><button class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors" data-v-040d0550> Cerrar </button></div></div></div>')):e("\x3c!----\x3e")},"body",!1,p),s("</div>")}}}),c=l.setup;l.setup=(e,t)=>{const r=a.useSSRContext();return(r.modules||(r.modules=new Set)).add("components/AgendaTerapeuta.vue"),c?c(e,t):void 0};const u=Object.assign(r(l,[["__scopeId","data-v-040d0550"]]),{__name:"AgendaTerapeuta"});export{u as _,i as a,useAgenda as u};
//# sourceMappingURL=AgendaTerapeuta-CKiuOLqn.mjs.map
