import{_ as e}from"./DashboardCard-DLsboU2i.mjs";import{v as a,j as t,a as s,e as r,s as o}from"./server.mjs";import{_ as c}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{_ as n}from"./ModalNuevaCita-QWHLrbsw.mjs";import{M as d}from"./ModalDetallesCita-BtNMrRBN.mjs";import{u as l}from"./useCitas-DyEZH6RI.mjs";import{u as i}from"./useSupabaseClient-DykwVqLQ.mjs";import"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../_/shared.cjs.prod.mjs";import"node:stream";import"devalue";import"@supabase/ssr";import"@vercel/analytics/nuxt";import"./useSupabase-CA5R4uuJ.mjs";import"./CheckCircleIcon-CT9fzVFs.mjs";import"./CalendarIcon-BrsGHJBC.mjs";import"./TicketIcon-zZdrc71S.mjs";import"./MagnifyingGlassIcon-GsbNDyPZ.mjs";import"./UserIcon-CrHYaeI9.mjs";import"./ExclamationTriangleIcon-DQdM2y0F.mjs";import"./UserGroupIcon-BhthmHUw.mjs";import"./ClockIcon-BxdFtPqx.mjs";import"./XCircleIcon-BCxujS_I.mjs";import"./ExclamationCircleIcon-DhXgUVTW.mjs";import"./XMarkIcon-DCLwyE-W.mjs";const p={__name:"NotasPrivadas",__ssrInlineRender:!0,props:{pacienteId:{type:String,required:!0},contenido:{type:String,default:""},ultimaActualizacion:{type:String,default:null}},emits:["guardar","actualizar"],setup(e,{emit:t}){const s=e,r=a.ref(!1),c=a.ref(!1),n=a.ref(s.contenido),d=a.ref(s.contenido);a.ref(null),a.watch(()=>s.contenido,e=>{r.value||(n.value=e,d.value=e)});const formatearFecha=e=>{if(!e)return"";return new Date(e).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})};return(t,s,d,l)=>{s(`<div${o.ssrRenderAttrs(a.mergeProps({class:"bg-white rounded-xl shadow-sm border border-[#EAD5D3]/40 p-6"},l))} data-v-a439e157><div class="flex items-center justify-between mb-4" data-v-a439e157><h3 class="font-serif text-lg font-semibold text-cafe flex items-center gap-2" data-v-a439e157><span class="text-xl" data-v-a439e157>üìù</span> Notas Cl√≠nicas Privadas </h3>`),a.unref(r)?s("\x3c!----\x3e"):s('<button class="px-3 py-1.5 text-sm bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors" data-v-a439e157> ‚úèÔ∏è Editar </button>'),s('</div><div class="mb-4 p-3 bg-rosa/20 border border-rosa rounded-lg" data-v-a439e157><p class="text-xs text-cafe/70 flex items-start gap-2" data-v-a439e157><span class="text-terracota" data-v-a439e157>üîí</span><span data-v-a439e157> Esta informaci√≥n es estrictamente confidencial y solo visible para ti como terapeuta. Cumple con los est√°ndares de protecci√≥n de datos cl√≠nicos. </span></p></div>'),a.unref(r)?(s(`<div data-v-a439e157><textarea placeholder="Anota observaciones, reflexiones o aspectos a seguir trabajando...\n\n‚Ä¢ Progreso observado en la sesi√≥n\n‚Ä¢ Temas pendientes de abordar\n‚Ä¢ Estrategias que funcionan\n‚Ä¢ Aspectos que requieren atenci√≥n" class="w-full min-h-[300px] px-4 py-3 bg-base-bg rounded-lg border border-terracota/30 focus:border-terracota focus:outline-none focus:ring-2 focus:ring-terracota/20 transition-all text-cafe resize-y" data-v-a439e157>${o.ssrInterpolate(a.unref(n))}</textarea><div class="mt-2 flex items-center justify-between text-xs text-cafe/60" data-v-a439e157><span data-v-a439e157> üí° Presiona Cmd/Ctrl + Enter para guardar r√°pidamente </span>`),e.ultimaActualizacion?s(`<span data-v-a439e157> √öltima actualizaci√≥n: ${o.ssrInterpolate(formatearFecha(e.ultimaActualizacion))}</span>`):s("\x3c!----\x3e"),s(`</div><div class="mt-4 flex items-center gap-3" data-v-a439e157><button${o.ssrIncludeBooleanAttr(a.unref(c))?" disabled":""} class="px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2" data-v-a439e157>`),a.unref(c)?s("<span data-v-a439e157>‚è≥</span>"):s("<span data-v-a439e157>üíæ</span>"),s(`<span data-v-a439e157>${o.ssrInterpolate(a.unref(c)?"Guardando...":"Guardar cambios")}</span></button><button${o.ssrIncludeBooleanAttr(a.unref(c))?" disabled":""} class="px-4 py-2 bg-white border border-cafe/20 text-cafe rounded-lg hover:bg-gray-50 transition-colors" data-v-a439e157> Cancelar </button></div></div>`)):(s('<div class="min-h-[200px]" data-v-a439e157>'),a.unref(n)?s(`<div class="prose prose-sm max-w-none text-cafe/80 whitespace-pre-wrap" data-v-a439e157>${o.ssrInterpolate(a.unref(n))}</div>`):s('<div class="text-center py-8" data-v-a439e157><span class="text-5xl mb-3 block opacity-40" data-v-a439e157>üìã</span><p class="text-cafe/50 italic" data-v-a439e157> A√∫n no hay notas registradas para este paciente </p><button class="mt-4 px-4 py-2 text-sm bg-terracota/10 text-terracota rounded-lg hover:bg-terracota/20 transition-colors" data-v-a439e157> A√±adir primera nota </button></div>'),s("</div>")),!a.unref(r)&&e.ultimaActualizacion?s(`<div class="mt-4 pt-4 border-t border-gray-100" data-v-a439e157><p class="text-xs text-cafe/50" data-v-a439e157> √öltima modificaci√≥n: ${o.ssrInterpolate(formatearFecha(e.ultimaActualizacion))}</p></div>`):s("\x3c!----\x3e"),s("</div>")}}},x=p.setup;p.setup=(e,t)=>{const s=a.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/NotasPrivadas.vue"),x?x(e,t):void 0};const u=c(p,[["__scopeId","data-v-a439e157"]]),f=a.defineComponent({__name:"[id]",__ssrInlineRender:!0,setup(c){const p=t(),x=s(),f=i(),v=r(),{getCitas:m}=l(),b=a.computed(()=>p.params.id),g=a.ref(!0),y=a.ref(null),$=a.ref(null),h=a.ref(null),N=a.ref([]),V=a.ref(""),w=a.ref(null),_=a.ref("proximas"),k=a.ref(!1),C=a.ref(null),S=a.ref(!1),D=a.ref(null),I=a.computed(()=>[{id:"proximas",nombre:"Pr√≥ximas Sesiones",icono:"üìÖ",badge:P.value.proximas||null},{id:"completadas",nombre:"Completadas",icono:"‚úÖ",badge:P.value.completadas||null},{id:"pendientes",nombre:"Pendientes",icono:"‚è≥",badge:P.value.pendientes||null},{id:"anteriores",nombre:"Historial",icono:"üìö",badge:null}]),cargarDatosPaciente=async()=>{g.value=!0,y.value=null;try{if(!v.value)return void(y.value="Usuario no autenticado");const{data:e,error:a}=await f.from("pacientes").select("*").eq("id",b.value).single();if(a)throw a;const t=e.nombre||e.email||"Sin nombre";$.value={...e,nombre_completo:t,email:e.email||"",telefono:e.telefono||""};const s=await m();N.value=s.filter(e=>e.paciente_id===b.value),await cargarBonoActivo(),await cargarNotas()}catch(e){console.error("Error al cargar paciente:",e),y.value=e.message||"Error desconocido"}finally{g.value=!1}},cargarBonoActivo=async()=>{try{const{data:e,error:a}=await f.from("bonos").select("*").eq("paciente_id",b.value).eq("estado","activo").maybeSingle();if(a)return void console.warn("[Bonos] Error en consulta:",a.message);if(e){const a=e.sesiones_usadas||0,t=e.sesiones_totales||0,s=t-a;h.value={...e,sesiones_disponibles:s,porcentaje_uso:t>0?Math.round(a/t*100):0}}}catch(e){console.warn("[Bonos] Error inesperado:",e)}},cargarNotas=async()=>{try{const{data:e}=await f.from("notas_terapeuticas").select("contenido, updated_at").eq("paciente_id",b.value).eq("terapeuta_id",v.value?.id).order("updated_at",{ascending:!1}).limit(1).maybeSingle();e&&(V.value=e.contenido||"",w.value=e.updated_at)}catch(e){console.error("Error al cargar notas:",e)}},guardarNotas=async({pacienteId:e,contenido:a})=>{try{const{data:t}=await f.from("notas_terapeuticas").select("id").eq("paciente_id",e).eq("terapeuta_id",v.value?.id).maybeSingle();t?await f.from("notas_terapeuticas").update({contenido:a,updated_at:(new Date).toISOString()}).eq("id",t.id):await f.from("notas_terapeuticas").insert({paciente_id:e,terapeuta_id:v.value?.id,contenido:a}),V.value=a,w.value=(new Date).toISOString()}catch(e){throw console.error("Error al guardar notas:",e),e}},B=a.computed(()=>{const e=new Date;return N.value.filter(a=>["pendiente","confirmada"].includes(a.estado)&&new Date(a.fecha_cita)>=e).sort((e,a)=>new Date(e.fecha_cita).getTime()-new Date(a.fecha_cita).getTime())}),j=a.computed(()=>N.value.filter(e=>"realizada"===e.estado).sort((e,a)=>new Date(a.fecha_cita).getTime()-new Date(e.fecha_cita).getTime())),R=a.computed(()=>N.value.filter(e=>"pendiente"===e.estado).sort((e,a)=>new Date(e.fecha_cita).getTime()-new Date(a.fecha_cita).getTime())),A=a.computed(()=>N.value.sort((e,a)=>new Date(a.fecha_cita).getTime()-new Date(e.fecha_cita).getTime())),P=a.computed(()=>({total:N.value.length,completadas:j.value.length,pendientes:R.value.length,proximas:B.value.length})),E=a.computed(()=>{const e=j.value;return e.length>0?e[e.length-1].fecha_cita:null}),T=a.computed(()=>{const e=j.value;return e.length>0?e[0].fecha_cita:null}),z=a.computed(()=>B.value.length>0?B.value[0]:null),L=a.computed(()=>$.value?.nombre_completo||"Sin nombre"),q=a.computed(()=>{if(!L.value)return"?";const e=L.value.split(" ");return e.length>=2&&e[0]&&e[1]?`${e[0][0]}${e[1][0]}`.toUpperCase():L.value.substring(0,2).toUpperCase()}),G=a.computed(()=>{const e=["#D8AFA0","#C89B8A","#B7C6B0","#A8C5B5","#D4A5A5","#C4B5A0"];return e[b.value.charCodeAt(0)%e.length]}),M=a.computed(()=>$.value?$.value.activo?$.value.metadata?.en_pausa?"En pausa":"En proceso":"Finalizado":""),F=a.computed(()=>$.value?$.value.activo?$.value.metadata?.en_pausa?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700":"bg-gray-100 text-gray-600":""),H=a.computed(()=>{if(!$.value?.tipo_bono)return"";return{a_demanda:"A Demanda (1 sesi√≥n)",quincenal:"Quincenal (2 sesiones/mes)",semanal:"Semanal (4 sesiones/mes)"}[$.value.tipo_bono]||$.value.tipo_bono}),formatearFecha=e=>{if(!e)return"";try{return new Date(e+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}catch{return e}},formatearFechaCompleta=(e,a)=>{if(!e)return"";try{return new Date(e+"T"+(a||"00:00:00")).toLocaleString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}},formatearPrecio=e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(e||0),calcularTiempoProceso=e=>{if(!e)return"";const a=new Date(e),t=new Date,s=Math.floor((t.getTime()-a.getTime())/864e5);return s<30?`${s} d√≠as`:s<365?`${Math.floor(s/30)} meses`:`${Math.floor(s/365)} a√±os`},obtenerIconoModalidad=e=>({presencial:"üè•",online:"üíª",telefonica:"üìû"}[e]||"üìã"),obtenerEstiloModalidad=e=>({presencial:"bg-green-100 text-green-700",online:"bg-terracota/20 text-terracota",telefonica:"bg-blue-100 text-blue-700"}[e]||"bg-gray-100 text-gray-700"),obtenerEstiloEstado=e=>({pendiente:"bg-yellow-100 text-yellow-700",confirmada:"bg-green-100 text-green-700",realizada:"bg-blue-100 text-blue-700",cancelada:"bg-red-100 text-red-700"}[e]||"bg-gray-100 text-gray-700"),irABonos=()=>{x.push(`/terapeuta/pacientes/${b.value}/bonos`)},abrirWhatsApp=()=>{const e=$.value?.telefono;if(!e)return void alert("Este paciente no tiene tel√©fono registrado");const a=`https://wa.me/${e.replace(/\D/g,"")}?text=${encodeURIComponent(`Hola ${L.value}, ¬øc√≥mo est√°s?`)}`;(void 0).open(a,"_blank")},agendarSesion=()=>{$.value&&(C.value={id:$.value.id,nombre:L.value,email:$.value.email,telefono:$.value.telefono,frecuencia:$.value.frecuencia||"semanal",area_acompanamiento:$.value.area_de_acompanamiento},k.value=!0)},cerrarModalCita=()=>{k.value=!1,C.value=null},onCitaCreada=()=>{cargarDatosPaciente()},verDetallesCita=e=>{D.value=e,S.value=!0},cerrarModalDetalles=()=>{S.value=!1,D.value=null},editarPaciente=()=>{alert("Funci√≥n de editar en desarrollo")};return a.watch(()=>p.params.id,()=>{p.params.id&&cargarDatosPaciente()}),(t,s,r,c)=>{const l=e,i=u,p=n,x=d;s(`<div${o.ssrRenderAttrs(a.mergeProps({class:"pb-20"},c))} data-v-cc632d3a><button class="mb-6 flex items-center gap-2 text-cafe hover:text-terracota transition-colors" data-v-cc632d3a><span data-v-cc632d3a>‚Üê</span><span data-v-cc632d3a>Volver a lista de pacientes</span></button>`),a.unref(g)?s('<div class="text-center py-12" data-v-cc632d3a><div class="animate-spin w-12 h-12 border-4 border-terracota border-t-transparent rounded-full mx-auto mb-4" data-v-cc632d3a></div><p class="text-cafe/60" data-v-cc632d3a>Cargando informaci√≥n del paciente...</p></div>'):a.unref(y)?(s('<div class="text-center py-12" data-v-cc632d3a>'),s(o.ssrRenderComponent(l,null,{default:a.withCtx((e,s,r,c)=>{if(!s)return[a.createVNode("span",{class:"text-6xl mb-4 block"},"‚ùå"),a.createVNode("h3",{class:"text-xl font-serif font-semibold text-cafe mb-2"}," No se pudo cargar la informaci√≥n "),a.createVNode("p",{class:"text-cafe/60 mb-4"},a.toDisplayString(a.unref(y)),1),a.createVNode("button",{onClick:e=>t.$router.push("/terapeuta/pacientes"),class:"px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors"}," Volver a la lista ",8,["onClick"])];s(`<span class="text-6xl mb-4 block" data-v-cc632d3a${c}>‚ùå</span><h3 class="text-xl font-serif font-semibold text-cafe mb-2" data-v-cc632d3a${c}> No se pudo cargar la informaci√≥n </h3><p class="text-cafe/60 mb-4" data-v-cc632d3a${c}>${o.ssrInterpolate(a.unref(y))}</p><button class="px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors" data-v-cc632d3a${c}> Volver a la lista </button>`)}),_:1},r)),s("</div>")):a.unref($)?(s("<div data-v-cc632d3a>"),s(o.ssrRenderComponent(l,{class:"mb-6"},{default:a.withCtx((e,t,s,r)=>{if(!t)return[a.createVNode("div",{class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6"},[a.createVNode("div",{class:"flex items-start gap-4"},[a.createVNode("div",{class:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0",style:{backgroundColor:a.unref(G)}},a.toDisplayString(a.unref(q)),5),a.createVNode("div",null,[a.createVNode("h1",{class:"text-3xl font-serif font-bold text-cafe mb-2"},a.toDisplayString(a.unref(L)),1),a.createVNode("div",{class:"flex flex-wrap items-center gap-3 mb-3"},[a.createVNode("span",{class:["px-3 py-1 text-sm font-medium rounded-full",a.unref(F)]},a.toDisplayString(a.unref(M)),3),a.createVNode("span",{class:"text-cafe/60 text-sm flex items-center gap-1"},[a.createVNode("span",null,"üìß"),a.createVNode("span",null,a.toDisplayString(a.unref($).email),1)])]),a.createVNode("div",{class:"space-y-1 text-sm"},[a.unref($).telefono?(a.openBlock(),a.createBlock("div",{key:0,class:"text-cafe/70 flex items-center gap-2"},[a.createVNode("span",null,"üì±"),a.createVNode("span",null,a.toDisplayString(a.unref($).telefono),1)])):a.createCommentVNode("",!0),a.unref($).area_de_acompanamiento?(a.openBlock(),a.createBlock("div",{key:1,class:"text-cafe/70 flex items-center gap-2"},[a.createVNode("span",null,"üéØ"),a.createVNode("span",null,[a.createVNode("strong",null,"√Årea:"),a.createTextVNode(" "+a.toDisplayString(a.unref($).area_de_acompanamiento),1)])])):a.createCommentVNode("",!0),a.unref($).tipo_bono?(a.openBlock(),a.createBlock("div",{key:2,class:"text-cafe/70 flex items-center gap-2"},[a.createVNode("span",null,"üé´"),a.createVNode("span",null,[a.createVNode("strong",null,"Tipo de Bono:"),a.createTextVNode(" "+a.toDisplayString(a.unref(H)),1)])])):a.createCommentVNode("",!0)])])]),a.createVNode("div",{class:"flex flex-wrap gap-2"},[a.createVNode("button",{onClick:irABonos,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2"},[a.createVNode("span",null,"üé´"),a.createVNode("span",null,"Gestionar Bonos")]),a.createVNode("button",{onClick:abrirWhatsApp,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2"},[a.createVNode("span",null,"üí¨"),a.createVNode("span",null,"WhatsApp")]),a.createVNode("button",{onClick:agendarSesion,class:"px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors text-sm flex items-center gap-2"},[a.createVNode("span",null,"üìÖ"),a.createVNode("span",null,"Agendar sesi√≥n")]),a.createVNode("button",{onClick:editarPaciente,class:"px-4 py-2 bg-white border border-terracota/30 text-terracota rounded-lg hover:bg-terracota/5 transition-colors text-sm flex items-center gap-2"},[a.createVNode("span",null,"‚úèÔ∏è"),a.createVNode("span",null,"Editar")])])])];t(`<div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6" data-v-cc632d3a${r}><div class="flex items-start gap-4" data-v-cc632d3a${r}><div class="w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl flex-shrink-0" style="${o.ssrRenderStyle({backgroundColor:a.unref(G)})}" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(q))}</div><div data-v-cc632d3a${r}><h1 class="text-3xl font-serif font-bold text-cafe mb-2" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(L))}</h1><div class="flex flex-wrap items-center gap-3 mb-3" data-v-cc632d3a${r}><span class="${o.ssrRenderClass([a.unref(F),"px-3 py-1 text-sm font-medium rounded-full"])}" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(M))}</span><span class="text-cafe/60 text-sm flex items-center gap-1" data-v-cc632d3a${r}><span data-v-cc632d3a${r}>üìß</span><span data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref($).email)}</span></span></div><div class="space-y-1 text-sm" data-v-cc632d3a${r}>`),a.unref($).telefono?t(`<div class="text-cafe/70 flex items-center gap-2" data-v-cc632d3a${r}><span data-v-cc632d3a${r}>üì±</span><span data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref($).telefono)}</span></div>`):t("\x3c!----\x3e"),a.unref($).area_de_acompanamiento?t(`<div class="text-cafe/70 flex items-center gap-2" data-v-cc632d3a${r}><span data-v-cc632d3a${r}>üéØ</span><span data-v-cc632d3a${r}><strong data-v-cc632d3a${r}>√Årea:</strong> ${o.ssrInterpolate(a.unref($).area_de_acompanamiento)}</span></div>`):t("\x3c!----\x3e"),a.unref($).tipo_bono?t(`<div class="text-cafe/70 flex items-center gap-2" data-v-cc632d3a${r}><span data-v-cc632d3a${r}>üé´</span><span data-v-cc632d3a${r}><strong data-v-cc632d3a${r}>Tipo de Bono:</strong> ${o.ssrInterpolate(a.unref(H))}</span></div>`):t("\x3c!----\x3e"),t(`</div></div></div><div class="flex flex-wrap gap-2" data-v-cc632d3a${r}><button class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm flex items-center gap-2" data-v-cc632d3a${r}><span data-v-cc632d3a${r}>üé´</span><span data-v-cc632d3a${r}>Gestionar Bonos</span></button><button class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center gap-2" data-v-cc632d3a${r}><span data-v-cc632d3a${r}>üí¨</span><span data-v-cc632d3a${r}>WhatsApp</span></button><button class="px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors text-sm flex items-center gap-2" data-v-cc632d3a${r}><span data-v-cc632d3a${r}>üìÖ</span><span data-v-cc632d3a${r}>Agendar sesi√≥n</span></button><button class="px-4 py-2 bg-white border border-terracota/30 text-terracota rounded-lg hover:bg-terracota/5 transition-colors text-sm flex items-center gap-2" data-v-cc632d3a${r}><span data-v-cc632d3a${r}>‚úèÔ∏è</span><span data-v-cc632d3a${r}>Editar</span></button></div></div>`)}),_:1},r)),s('<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6" data-v-cc632d3a>'),s(o.ssrRenderComponent(l,null,{default:a.withCtx((e,t,s,r)=>{if(!t)return[a.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[a.createVNode("span",{class:"text-2xl"},"üìä"),a.createTextVNode(" Resumen ")]),a.createVNode("div",{class:"space-y-3"},[a.createVNode("div",{class:"flex items-center justify-between p-3 bg-base-bg rounded-lg"},[a.createVNode("span",{class:"text-sm text-cafe/70"},"Total sesiones"),a.createVNode("span",{class:"font-bold text-cafe text-lg"},a.toDisplayString(a.unref(P).total),1)]),a.createVNode("div",{class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},[a.createVNode("span",{class:"text-sm text-cafe/70"},"Completadas"),a.createVNode("span",{class:"font-bold text-green-600 text-lg"},a.toDisplayString(a.unref(P).completadas),1)]),a.createVNode("div",{class:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg"},[a.createVNode("span",{class:"text-sm text-cafe/70"},"Pendientes"),a.createVNode("span",{class:"font-bold text-yellow-600 text-lg"},a.toDisplayString(a.unref(P).pendientes),1)]),a.createVNode("div",{class:"flex items-center justify-between p-3 bg-blue-50 rounded-lg"},[a.createVNode("span",{class:"text-sm text-cafe/70"},"Pr√≥ximas"),a.createVNode("span",{class:"font-bold text-blue-600 text-lg"},a.toDisplayString(a.unref(P).proximas),1)])])];t(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-cc632d3a${r}><span class="text-2xl" data-v-cc632d3a${r}>üìä</span> Resumen </h2><div class="space-y-3" data-v-cc632d3a${r}><div class="flex items-center justify-between p-3 bg-base-bg rounded-lg" data-v-cc632d3a${r}><span class="text-sm text-cafe/70" data-v-cc632d3a${r}>Total sesiones</span><span class="font-bold text-cafe text-lg" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(P).total)}</span></div><div class="flex items-center justify-between p-3 bg-green-50 rounded-lg" data-v-cc632d3a${r}><span class="text-sm text-cafe/70" data-v-cc632d3a${r}>Completadas</span><span class="font-bold text-green-600 text-lg" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(P).completadas)}</span></div><div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg" data-v-cc632d3a${r}><span class="text-sm text-cafe/70" data-v-cc632d3a${r}>Pendientes</span><span class="font-bold text-yellow-600 text-lg" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(P).pendientes)}</span></div><div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg" data-v-cc632d3a${r}><span class="text-sm text-cafe/70" data-v-cc632d3a${r}>Pr√≥ximas</span><span class="font-bold text-blue-600 text-lg" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(P).proximas)}</span></div></div>`)}),_:1},r)),s(o.ssrRenderComponent(l,null,{default:a.withCtx((e,t,s,r)=>{if(!t)return[a.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[a.createVNode("span",{class:"text-2xl"},"üé´"),a.createTextVNode(" Bono Contratado ")]),a.unref(h)?(a.openBlock(),a.createBlock("div",{key:0,class:"space-y-4"},[a.createVNode("div",{class:"p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg"},[a.createVNode("div",{class:"text-xs text-purple-700 font-medium mb-1"},"Tipo de Bono"),a.createVNode("div",{class:"text-sm font-bold text-purple-900"},a.toDisplayString(a.unref(H)),1)]),a.createVNode("div",{class:"text-center p-4 bg-gradient-to-br from-terracota/10 to-rosa/20 rounded-xl"},[a.createVNode("div",{class:"text-4xl font-bold text-terracota mb-1"},a.toDisplayString(a.unref(h).sesiones_disponibles),1),a.createVNode("div",{class:"text-sm text-cafe/70"}," de "+a.toDisplayString(a.unref(h).sesiones_totales)+" sesiones disponibles ",1)]),a.createVNode("div",{class:"space-y-2"},[a.createVNode("div",{class:"flex justify-between text-sm"},[a.createVNode("span",{class:"text-cafe/70"},"Progreso"),a.createVNode("span",{class:"font-medium text-cafe"},a.toDisplayString(a.unref(h).porcentaje_uso)+"%",1)]),a.createVNode("div",{class:"w-full bg-gray-200 rounded-full h-2.5"},[a.createVNode("div",{class:"h-2.5 rounded-full bg-gradient-to-r from-terracota to-rosa transition-all",style:{width:`${a.unref(h).porcentaje_uso}%`}},null,4)])]),a.createVNode("div",{class:"pt-3 border-t space-y-2 text-sm"},[a.createVNode("div",{class:"flex justify-between"},[a.createVNode("span",{class:"text-cafe/70"},"Sesiones usadas:"),a.createVNode("span",{class:"font-medium text-cafe"},a.toDisplayString(a.unref(h).sesiones_usadas),1)]),a.createVNode("div",{class:"flex justify-between"},[a.createVNode("span",{class:"text-cafe/70"},"Monto total:"),a.createVNode("span",{class:"font-medium text-cafe"},a.toDisplayString(formatearPrecio(a.unref(h).monto_total||a.unref(h).precio)),1)]),a.createVNode("div",{class:"flex justify-between"},[a.createVNode("span",{class:"text-cafe/70"},"Precio por sesi√≥n:"),a.createVNode("span",{class:"font-medium text-cafe"},a.toDisplayString(formatearPrecio((a.unref(h).monto_total||a.unref(h).precio)/a.unref(h).sesiones_totales)),1)]),a.createVNode("div",{class:"flex justify-between"},[a.createVNode("span",{class:"text-cafe/70"},"Estado:"),a.createVNode("span",{class:["font-medium capitalize",{"text-green-600":"activo"===a.unref(h).estado,"text-yellow-600":"pendiente"===a.unref(h).estado,"text-gray-600":"vencido"===a.unref(h).estado}]},a.toDisplayString(a.unref(h).estado),3)])])])):(a.openBlock(),a.createBlock("div",{key:1,class:"text-center py-8"},[a.createVNode("span",{class:"text-5xl mb-3 block opacity-40"},"üé´"),a.createVNode("p",{class:"text-sm text-cafe/50 mb-2"},"No hay bono activo"),a.createVNode("p",{class:"text-xs text-cafe/40 mb-4"},[a.createTextVNode(" Tipo de bono del paciente: "),a.createVNode("strong",null,a.toDisplayString(a.unref(H)||"No definido"),1)]),a.createVNode("button",{onClick:irABonos,class:"mt-2 text-sm text-terracota hover:text-cafe transition-colors font-medium"}," Gestionar bonos ‚Üí ")]))];t(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-cc632d3a${r}><span class="text-2xl" data-v-cc632d3a${r}>üé´</span> Bono Contratado </h2>`),a.unref(h)?t(`<div class="space-y-4" data-v-cc632d3a${r}><div class="p-3 bg-gradient-to-r from-purple-100 to-purple-50 border border-purple-200 rounded-lg" data-v-cc632d3a${r}><div class="text-xs text-purple-700 font-medium mb-1" data-v-cc632d3a${r}>Tipo de Bono</div><div class="text-sm font-bold text-purple-900" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(H))}</div></div><div class="text-center p-4 bg-gradient-to-br from-terracota/10 to-rosa/20 rounded-xl" data-v-cc632d3a${r}><div class="text-4xl font-bold text-terracota mb-1" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(h).sesiones_disponibles)}</div><div class="text-sm text-cafe/70" data-v-cc632d3a${r}> de ${o.ssrInterpolate(a.unref(h).sesiones_totales)} sesiones disponibles </div></div><div class="space-y-2" data-v-cc632d3a${r}><div class="flex justify-between text-sm" data-v-cc632d3a${r}><span class="text-cafe/70" data-v-cc632d3a${r}>Progreso</span><span class="font-medium text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(h).porcentaje_uso)}%</span></div><div class="w-full bg-gray-200 rounded-full h-2.5" data-v-cc632d3a${r}><div class="h-2.5 rounded-full bg-gradient-to-r from-terracota to-rosa transition-all" style="${o.ssrRenderStyle({width:`${a.unref(h).porcentaje_uso}%`})}" data-v-cc632d3a${r}></div></div></div><div class="pt-3 border-t space-y-2 text-sm" data-v-cc632d3a${r}><div class="flex justify-between" data-v-cc632d3a${r}><span class="text-cafe/70" data-v-cc632d3a${r}>Sesiones usadas:</span><span class="font-medium text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(h).sesiones_usadas)}</span></div><div class="flex justify-between" data-v-cc632d3a${r}><span class="text-cafe/70" data-v-cc632d3a${r}>Monto total:</span><span class="font-medium text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(formatearPrecio(a.unref(h).monto_total||a.unref(h).precio))}</span></div><div class="flex justify-between" data-v-cc632d3a${r}><span class="text-cafe/70" data-v-cc632d3a${r}>Precio por sesi√≥n:</span><span class="font-medium text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(formatearPrecio((a.unref(h).monto_total||a.unref(h).precio)/a.unref(h).sesiones_totales))}</span></div><div class="flex justify-between" data-v-cc632d3a${r}><span class="text-cafe/70" data-v-cc632d3a${r}>Estado:</span><span class="${o.ssrRenderClass([{"text-green-600":"activo"===a.unref(h).estado,"text-yellow-600":"pendiente"===a.unref(h).estado,"text-gray-600":"vencido"===a.unref(h).estado},"font-medium capitalize"])}" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(h).estado)}</span></div></div></div>`):t(`<div class="text-center py-8" data-v-cc632d3a${r}><span class="text-5xl mb-3 block opacity-40" data-v-cc632d3a${r}>üé´</span><p class="text-sm text-cafe/50 mb-2" data-v-cc632d3a${r}>No hay bono activo</p><p class="text-xs text-cafe/40 mb-4" data-v-cc632d3a${r}> Tipo de bono del paciente: <strong data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(H)||"No definido")}</strong></p><button class="mt-2 text-sm text-terracota hover:text-cafe transition-colors font-medium" data-v-cc632d3a${r}> Gestionar bonos ‚Üí </button></div>`)}),_:1},r)),s(o.ssrRenderComponent(l,null,{default:a.withCtx((e,t,s,r)=>{if(!t)return[a.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[a.createVNode("span",{class:"text-2xl"},"üìã"),a.createTextVNode(" Datos del Proceso ")]),a.createVNode("div",{class:"space-y-3"},[a.createVNode("div",{class:"p-3 bg-base-bg rounded-lg"},[a.createVNode("div",{class:"text-xs text-cafe/60 mb-1"},"Primera sesi√≥n"),a.createVNode("div",{class:"text-sm font-medium text-cafe"},a.toDisplayString(formatearFecha(a.unref(E))||"Sin registro"),1)]),a.createVNode("div",{class:"p-3 bg-base-bg rounded-lg"},[a.createVNode("div",{class:"text-xs text-cafe/60 mb-1"},"√öltima sesi√≥n"),a.createVNode("div",{class:"text-sm font-medium text-cafe"},a.toDisplayString(formatearFecha(a.unref(T))||"Sin registro"),1)]),a.unref(z)?(a.openBlock(),a.createBlock("div",{key:0,class:"p-4 bg-gradient-to-br from-terracota/20 to-rosa/20 border-2 border-terracota/40 rounded-lg"},[a.createVNode("div",{class:"text-xs font-medium text-terracota mb-2 flex items-center gap-1"},[a.createVNode("span",null,"üìÖ"),a.createVNode("span",null,"Pr√≥xima sesi√≥n agendada")]),a.createVNode("div",{class:"text-base font-bold text-cafe mb-3"},a.toDisplayString(formatearFechaCompleta(a.unref(z).fecha_cita,a.unref(z).hora_inicio)),1),a.createVNode("div",{class:"flex items-center gap-2 flex-wrap"},[a.createVNode("span",{class:"text-xs px-3 py-1.5 bg-white border border-terracota/30 rounded-full font-medium flex items-center gap-1"},a.toDisplayString(obtenerIconoModalidad(a.unref(z).modalidad))+" "+a.toDisplayString(a.unref(z).modalidad),1),a.createVNode("span",{class:["text-xs px-3 py-1.5 bg-white border border-terracota/30 rounded-full capitalize font-medium",{"text-green-600 border-green-300":"confirmada"===a.unref(z).estado,"text-yellow-600 border-yellow-300":"pendiente"===a.unref(z).estado,"text-blue-600 border-blue-300":"programada"===a.unref(z).estado}]},a.toDisplayString(a.unref(z).estado),3)]),a.unref(z).notas?(a.openBlock(),a.createBlock("div",{key:0,class:"mt-3 pt-3 border-t border-terracota/20"},[a.createVNode("div",{class:"text-xs text-cafe/70 mb-1"},"Notas:"),a.createVNode("div",{class:"text-xs text-cafe"},a.toDisplayString(a.unref(z).notas),1)])):a.createCommentVNode("",!0)])):(a.openBlock(),a.createBlock("div",{key:1,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[a.createVNode("div",{class:"text-center"},[a.createVNode("span",{class:"text-3xl mb-2 block"},"‚è∞"),a.createVNode("div",{class:"text-sm font-medium text-yellow-800 mb-1"},"No hay sesi√≥n agendada"),a.createVNode("div",{class:"text-xs text-yellow-700"},"Recuerda agendar la pr√≥xima sesi√≥n"),a.createVNode("button",{onClick:agendarSesion,class:"mt-3 px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors text-xs font-medium"}," Agendar ahora ")])])),a.createVNode("div",{class:"p-3 bg-base-bg rounded-lg"},[a.createVNode("div",{class:"text-xs text-cafe/60 mb-1"},"En proceso desde"),a.createVNode("div",{class:"text-sm font-medium text-cafe"},a.toDisplayString(calcularTiempoProceso(a.unref($).created_at)),1)])])];t(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-cc632d3a${r}><span class="text-2xl" data-v-cc632d3a${r}>üìã</span> Datos del Proceso </h2><div class="space-y-3" data-v-cc632d3a${r}><div class="p-3 bg-base-bg rounded-lg" data-v-cc632d3a${r}><div class="text-xs text-cafe/60 mb-1" data-v-cc632d3a${r}>Primera sesi√≥n</div><div class="text-sm font-medium text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(formatearFecha(a.unref(E))||"Sin registro")}</div></div><div class="p-3 bg-base-bg rounded-lg" data-v-cc632d3a${r}><div class="text-xs text-cafe/60 mb-1" data-v-cc632d3a${r}>√öltima sesi√≥n</div><div class="text-sm font-medium text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(formatearFecha(a.unref(T))||"Sin registro")}</div></div>`),a.unref(z)?(t(`<div class="p-4 bg-gradient-to-br from-terracota/20 to-rosa/20 border-2 border-terracota/40 rounded-lg" data-v-cc632d3a${r}><div class="text-xs font-medium text-terracota mb-2 flex items-center gap-1" data-v-cc632d3a${r}><span data-v-cc632d3a${r}>üìÖ</span><span data-v-cc632d3a${r}>Pr√≥xima sesi√≥n agendada</span></div><div class="text-base font-bold text-cafe mb-3" data-v-cc632d3a${r}>${o.ssrInterpolate(formatearFechaCompleta(a.unref(z).fecha_cita,a.unref(z).hora_inicio))}</div><div class="flex items-center gap-2 flex-wrap" data-v-cc632d3a${r}><span class="text-xs px-3 py-1.5 bg-white border border-terracota/30 rounded-full font-medium flex items-center gap-1" data-v-cc632d3a${r}>${o.ssrInterpolate(obtenerIconoModalidad(a.unref(z).modalidad))} ${o.ssrInterpolate(a.unref(z).modalidad)}</span><span class="${o.ssrRenderClass([{"text-green-600 border-green-300":"confirmada"===a.unref(z).estado,"text-yellow-600 border-yellow-300":"pendiente"===a.unref(z).estado,"text-blue-600 border-blue-300":"programada"===a.unref(z).estado},"text-xs px-3 py-1.5 bg-white border border-terracota/30 rounded-full capitalize font-medium"])}" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(z).estado)}</span></div>`),a.unref(z).notas?t(`<div class="mt-3 pt-3 border-t border-terracota/20" data-v-cc632d3a${r}><div class="text-xs text-cafe/70 mb-1" data-v-cc632d3a${r}>Notas:</div><div class="text-xs text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(a.unref(z).notas)}</div></div>`):t("\x3c!----\x3e"),t("</div>")):t(`<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg" data-v-cc632d3a${r}><div class="text-center" data-v-cc632d3a${r}><span class="text-3xl mb-2 block" data-v-cc632d3a${r}>‚è∞</span><div class="text-sm font-medium text-yellow-800 mb-1" data-v-cc632d3a${r}>No hay sesi√≥n agendada</div><div class="text-xs text-yellow-700" data-v-cc632d3a${r}>Recuerda agendar la pr√≥xima sesi√≥n</div><button class="mt-3 px-4 py-2 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors text-xs font-medium" data-v-cc632d3a${r}> Agendar ahora </button></div></div>`),t(`<div class="p-3 bg-base-bg rounded-lg" data-v-cc632d3a${r}><div class="text-xs text-cafe/60 mb-1" data-v-cc632d3a${r}>En proceso desde</div><div class="text-sm font-medium text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(calcularTiempoProceso(a.unref($).created_at))}</div></div></div>`)}),_:1},r)),s('</div><div class="mb-6" data-v-cc632d3a><div class="border-b border-gray-200" data-v-cc632d3a><nav class="-mb-px flex space-x-8 overflow-x-auto" data-v-cc632d3a>\x3c!--[--\x3e'),o.ssrRenderList(a.unref(I),e=>{s(`<button class="${o.ssrRenderClass([a.unref(_)===e.id?"border-terracota text-terracota":"border-transparent text-cafe/60 hover:text-cafe hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors"])}" data-v-cc632d3a><span class="mr-2" data-v-cc632d3a>${o.ssrInterpolate(e.icono)}</span><span data-v-cc632d3a>${o.ssrInterpolate(e.nombre)}</span>`),e.badge?s(`<span class="ml-2 px-2 py-0.5 text-xs rounded-full bg-terracota text-white" data-v-cc632d3a>${o.ssrInterpolate(e.badge)}</span>`):s("\x3c!----\x3e"),s("</button>")}),s('\x3c!--]--\x3e</nav></div></div><div class="space-y-6" data-v-cc632d3a>'),"proximas"===a.unref(_)?(s("<div data-v-cc632d3a>"),s(o.ssrRenderComponent(l,null,{default:a.withCtx((e,t,s,r)=>{if(!t)return[a.createVNode("div",{class:"flex items-center justify-between mb-4"},[a.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe"},"Pr√≥ximas Sesiones Agendadas"),a.createVNode("button",{onClick:agendarSesion,class:"text-sm text-terracota hover:text-cafe transition-colors"}," + Nueva sesi√≥n ")]),a.unref(B).length>0?(a.openBlock(),a.createBlock("div",{key:0,class:"space-y-3"},[(a.openBlock(!0),a.createBlock(a.Fragment,null,a.renderList(a.unref(B),e=>(a.openBlock(),a.createBlock("div",{key:e.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[a.createVNode("div",{class:"flex items-start justify-between gap-4"},[a.createVNode("div",{class:"flex-1"},[a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:"text-lg font-semibold text-cafe"},a.toDisplayString(formatearFecha(e.fecha_cita)),1),a.createVNode("span",{class:"text-base font-medium text-terracota"},a.toDisplayString(e.hora_inicio)+" - "+a.toDisplayString(e.hora_fin),1)]),a.createVNode("div",{class:"flex flex-wrap items-center gap-2 mb-2"},[a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},a.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+a.toDisplayString(e.modalidad),3),a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full capitalize",obtenerEstiloEstado(e.estado)]},a.toDisplayString(e.estado),3)]),e.observaciones?(a.openBlock(),a.createBlock("p",{key:0,class:"text-sm text-cafe/60 mt-2"},a.toDisplayString(e.observaciones),1)):a.createCommentVNode("",!0)]),a.createVNode("button",{onClick:a=>verDetallesCita(e.id),class:"px-3 py-1.5 text-sm bg-white border border-terracota/30 text-terracota hover:bg-terracota hover:text-white rounded-lg transition-colors"}," Ver detalles ",8,["onClick"])])]))),128))])):(a.openBlock(),a.createBlock("div",{key:1,class:"text-center py-12"},[a.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"üìÖ"),a.createVNode("p",{class:"text-cafe/60 mb-4"},"No hay sesiones pr√≥ximas agendadas"),a.createVNode("button",{onClick:agendarSesion,class:"px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors"}," Agendar primera sesi√≥n ")]))];t(`<div class="flex items-center justify-between mb-4" data-v-cc632d3a${r}><h3 class="text-lg font-serif font-semibold text-cafe" data-v-cc632d3a${r}>Pr√≥ximas Sesiones Agendadas</h3><button class="text-sm text-terracota hover:text-cafe transition-colors" data-v-cc632d3a${r}> + Nueva sesi√≥n </button></div>`),a.unref(B).length>0?(t(`<div class="space-y-3" data-v-cc632d3a${r}>\x3c!--[--\x3e`),o.ssrRenderList(a.unref(B),e=>{t(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-cc632d3a${r}><div class="flex items-start justify-between gap-4" data-v-cc632d3a${r}><div class="flex-1" data-v-cc632d3a${r}><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${r}><span class="text-lg font-semibold text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-base font-medium text-terracota" data-v-cc632d3a${r}>${o.ssrInterpolate(e.hora_inicio)} - ${o.ssrInterpolate(e.hora_fin)}</span></div><div class="flex flex-wrap items-center gap-2 mb-2" data-v-cc632d3a${r}><span class="${o.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-cc632d3a${r}>${o.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${o.ssrInterpolate(e.modalidad)}</span><span class="${o.ssrRenderClass([obtenerEstiloEstado(e.estado),"px-2 py-0.5 text-xs rounded-full capitalize"])}" data-v-cc632d3a${r}>${o.ssrInterpolate(e.estado)}</span></div>`),e.observaciones?t(`<p class="text-sm text-cafe/60 mt-2" data-v-cc632d3a${r}>${o.ssrInterpolate(e.observaciones)}</p>`):t("\x3c!----\x3e"),t(`</div><button class="px-3 py-1.5 text-sm bg-white border border-terracota/30 text-terracota hover:bg-terracota hover:text-white rounded-lg transition-colors" data-v-cc632d3a${r}> Ver detalles </button></div></div>`)}),t("\x3c!--]--\x3e</div>")):t(`<div class="text-center py-12" data-v-cc632d3a${r}><span class="text-6xl mb-3 block opacity-40" data-v-cc632d3a${r}>üìÖ</span><p class="text-cafe/60 mb-4" data-v-cc632d3a${r}>No hay sesiones pr√≥ximas agendadas</p><button class="px-6 py-3 bg-terracota text-white rounded-lg hover:bg-terracota/90 transition-colors" data-v-cc632d3a${r}> Agendar primera sesi√≥n </button></div>`)}),_:1},r)),s("</div>")):s("\x3c!----\x3e"),"completadas"===a.unref(_)?(s("<div data-v-cc632d3a>"),s(o.ssrRenderComponent(l,null,{default:a.withCtx((e,t,s,r)=>{if(!t)return[a.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Historial de Sesiones Completadas"),a.unref(j).length>0?(a.openBlock(),a.createBlock("div",{key:0,class:"space-y-3"},[(a.openBlock(!0),a.createBlock(a.Fragment,null,a.renderList(a.unref(j),e=>(a.openBlock(),a.createBlock("div",{key:e.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[a.createVNode("div",{class:"flex items-start justify-between gap-4"},[a.createVNode("div",{class:"flex-1"},[a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:"text-base font-semibold text-cafe"},a.toDisplayString(formatearFecha(e.fecha_cita)),1),a.createVNode("span",{class:"text-sm text-cafe/60"},a.toDisplayString(e.hora_inicio)+" - "+a.toDisplayString(e.hora_fin),1),a.createVNode("span",{class:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700"}," ‚úì Realizada ")]),a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},a.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+a.toDisplayString(e.modalidad),3)]),e.notas_terapeuta?(a.openBlock(),a.createBlock("p",{key:0,class:"text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100"},[a.createVNode("strong",{class:"text-cafe"},"Notas:"),a.createTextVNode(" "+a.toDisplayString(e.notas_terapeuta),1)])):e.observaciones?(a.openBlock(),a.createBlock("p",{key:1,class:"text-sm text-cafe/60 mt-2"},a.toDisplayString(e.observaciones),1)):a.createCommentVNode("",!0)])])]))),128))])):(a.openBlock(),a.createBlock("div",{key:1,class:"text-center py-12"},[a.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"üìù"),a.createVNode("p",{class:"text-cafe/60"},"A√∫n no hay sesiones completadas")]))];t(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-cc632d3a${r}>Historial de Sesiones Completadas</h3>`),a.unref(j).length>0?(t(`<div class="space-y-3" data-v-cc632d3a${r}>\x3c!--[--\x3e`),o.ssrRenderList(a.unref(j),e=>{t(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-cc632d3a${r}><div class="flex items-start justify-between gap-4" data-v-cc632d3a${r}><div class="flex-1" data-v-cc632d3a${r}><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${r}><span class="text-base font-semibold text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-sm text-cafe/60" data-v-cc632d3a${r}>${o.ssrInterpolate(e.hora_inicio)} - ${o.ssrInterpolate(e.hora_fin)}</span><span class="px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700" data-v-cc632d3a${r}> ‚úì Realizada </span></div><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${r}><span class="${o.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-cc632d3a${r}>${o.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${o.ssrInterpolate(e.modalidad)}</span></div>`),e.notas_terapeuta?t(`<p class="text-sm text-cafe/70 mt-2 bg-white p-3 rounded-lg border border-gray-100" data-v-cc632d3a${r}><strong class="text-cafe" data-v-cc632d3a${r}>Notas:</strong> ${o.ssrInterpolate(e.notas_terapeuta)}</p>`):e.observaciones?t(`<p class="text-sm text-cafe/60 mt-2" data-v-cc632d3a${r}>${o.ssrInterpolate(e.observaciones)}</p>`):t("\x3c!----\x3e"),t("</div></div></div>")}),t("\x3c!--]--\x3e</div>")):t(`<div class="text-center py-12" data-v-cc632d3a${r}><span class="text-6xl mb-3 block opacity-40" data-v-cc632d3a${r}>üìù</span><p class="text-cafe/60" data-v-cc632d3a${r}>A√∫n no hay sesiones completadas</p></div>`)}),_:1},r)),s("</div>")):s("\x3c!----\x3e"),"pendientes"===a.unref(_)?(s("<div data-v-cc632d3a>"),s(o.ssrRenderComponent(l,null,{default:a.withCtx((e,t,s,r)=>{if(!t)return[a.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"},"Sesiones Pendientes de Confirmaci√≥n"),a.unref(R).length>0?(a.openBlock(),a.createBlock("div",{key:0,class:"space-y-3"},[(a.openBlock(!0),a.createBlock(a.Fragment,null,a.renderList(a.unref(R),e=>(a.openBlock(),a.createBlock("div",{key:e.id,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},[a.createVNode("div",{class:"flex items-start justify-between gap-4"},[a.createVNode("div",{class:"flex-1"},[a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:"text-lg"},"‚è≥"),a.createVNode("span",{class:"text-base font-semibold text-cafe"},a.toDisplayString(formatearFecha(e.fecha_cita)),1),a.createVNode("span",{class:"text-base font-medium text-terracota"},a.toDisplayString(e.hora_inicio)+" - "+a.toDisplayString(e.hora_fin),1)]),a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},a.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+a.toDisplayString(e.modalidad),3),a.createVNode("span",{class:"px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700"}," Pendiente de confirmar ")]),e.observaciones?(a.openBlock(),a.createBlock("p",{key:0,class:"text-sm text-cafe/60 mt-2"},a.toDisplayString(e.observaciones),1)):a.createCommentVNode("",!0)]),a.createVNode("div",{class:"flex gap-2"},[a.createVNode("button",{onClick:a=>(async e=>{try{const{data:a,error:t}=await f.rpc("confirmar_cita_y_descontar_bono",{p_cita_id:e});if(t)throw t;if(!a.success)return console.error("Error en la confirmaci√≥n:",a.error),void alert(a.error||"Error al confirmar la cita");let s=`Cita confirmada con ${a.paciente_nombre||"paciente"}`;a.bono_id&&(s+=`\nSesiones restantes en bono: ${a.sesiones_restantes}`,a.bono_agotado?s+="\n‚ö†Ô∏è BONO AGOTADO":a.sesiones_restantes<=2&&(s+="\n‚ö†Ô∏è Pocas sesiones restantes")),alert(s),await cargarDatosPaciente()}catch(e){console.error("Error al confirmar cita:",e),alert("Error al confirmar la cita: "+e.message)}})(e.id),class:"px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"}," ‚úì Confirmar ",8,["onClick"]),a.createVNode("button",{onClick:a=>verDetallesCita(e.id),class:"px-3 py-1.5 text-sm bg-white border border-terracota/30 text-terracota hover:bg-terracota hover:text-white rounded-lg transition-colors"}," Ver ",8,["onClick"])])])]))),128))])):(a.openBlock(),a.createBlock("div",{key:1,class:"text-center py-12"},[a.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"‚úÖ"),a.createVNode("p",{class:"text-cafe/60"},"No hay sesiones pendientes de confirmaci√≥n")]))];t(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-cc632d3a${r}>Sesiones Pendientes de Confirmaci√≥n</h3>`),a.unref(R).length>0?(t(`<div class="space-y-3" data-v-cc632d3a${r}>\x3c!--[--\x3e`),o.ssrRenderList(a.unref(R),e=>{t(`<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg" data-v-cc632d3a${r}><div class="flex items-start justify-between gap-4" data-v-cc632d3a${r}><div class="flex-1" data-v-cc632d3a${r}><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${r}><span class="text-lg" data-v-cc632d3a${r}>‚è≥</span><span class="text-base font-semibold text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-base font-medium text-terracota" data-v-cc632d3a${r}>${o.ssrInterpolate(e.hora_inicio)} - ${o.ssrInterpolate(e.hora_fin)}</span></div><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${r}><span class="${o.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-cc632d3a${r}>${o.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${o.ssrInterpolate(e.modalidad)}</span><span class="px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700" data-v-cc632d3a${r}> Pendiente de confirmar </span></div>`),e.observaciones?t(`<p class="text-sm text-cafe/60 mt-2" data-v-cc632d3a${r}>${o.ssrInterpolate(e.observaciones)}</p>`):t("\x3c!----\x3e"),t(`</div><div class="flex gap-2" data-v-cc632d3a${r}><button class="px-3 py-1.5 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors" data-v-cc632d3a${r}> ‚úì Confirmar </button><button class="px-3 py-1.5 text-sm bg-white border border-terracota/30 text-terracota hover:bg-terracota hover:text-white rounded-lg transition-colors" data-v-cc632d3a${r}> Ver </button></div></div></div>`)}),t("\x3c!--]--\x3e</div>")):t(`<div class="text-center py-12" data-v-cc632d3a${r}><span class="text-6xl mb-3 block opacity-40" data-v-cc632d3a${r}>‚úÖ</span><p class="text-cafe/60" data-v-cc632d3a${r}>No hay sesiones pendientes de confirmaci√≥n</p></div>`)}),_:1},r)),s("</div>")):s("\x3c!----\x3e"),"anteriores"===a.unref(_)?(s("<div data-v-cc632d3a>"),s(o.ssrRenderComponent(l,null,{default:a.withCtx((e,t,s,r)=>{if(!t)return[a.createVNode("h3",{class:"text-lg font-serif font-semibold text-cafe mb-4"}," Historial Completo de Sesiones "),a.unref(A).length>0?(a.openBlock(),a.createBlock("div",{key:0,class:"space-y-3"},[(a.openBlock(!0),a.createBlock(a.Fragment,null,a.renderList(a.unref(A),e=>(a.openBlock(),a.createBlock("div",{key:e.id,class:"p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors"},[a.createVNode("div",{class:"flex items-start justify-between gap-4"},[a.createVNode("div",{class:"flex-1"},[a.createVNode("div",{class:"flex items-center gap-2 mb-2"},[a.createVNode("span",{class:"text-base font-semibold text-cafe"},a.toDisplayString(formatearFecha(e.fecha_cita)),1),a.createVNode("span",{class:"text-sm text-cafe/60"},a.toDisplayString(e.hora_inicio)+" - "+a.toDisplayString(e.hora_fin),1)]),a.createVNode("div",{class:"flex flex-wrap items-center gap-2"},[a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full",obtenerEstiloModalidad(e.modalidad)]},a.toDisplayString(obtenerIconoModalidad(e.modalidad))+" "+a.toDisplayString(e.modalidad),3),a.createVNode("span",{class:["px-2 py-0.5 text-xs rounded-full capitalize",obtenerEstiloEstado(e.estado)]},a.toDisplayString(e.estado),3)])])])]))),128))])):(a.openBlock(),a.createBlock("div",{key:1,class:"text-center py-12"},[a.createVNode("span",{class:"text-6xl mb-3 block opacity-40"},"üìö"),a.createVNode("p",{class:"text-cafe/60"},"No hay sesiones registradas")]))];t(`<h3 class="text-lg font-serif font-semibold text-cafe mb-4" data-v-cc632d3a${r}> Historial Completo de Sesiones </h3>`),a.unref(A).length>0?(t(`<div class="space-y-3" data-v-cc632d3a${r}>\x3c!--[--\x3e`),o.ssrRenderList(a.unref(A),e=>{t(`<div class="p-4 bg-base-bg rounded-lg hover:bg-rosa/20 transition-colors" data-v-cc632d3a${r}><div class="flex items-start justify-between gap-4" data-v-cc632d3a${r}><div class="flex-1" data-v-cc632d3a${r}><div class="flex items-center gap-2 mb-2" data-v-cc632d3a${r}><span class="text-base font-semibold text-cafe" data-v-cc632d3a${r}>${o.ssrInterpolate(formatearFecha(e.fecha_cita))}</span><span class="text-sm text-cafe/60" data-v-cc632d3a${r}>${o.ssrInterpolate(e.hora_inicio)} - ${o.ssrInterpolate(e.hora_fin)}</span></div><div class="flex flex-wrap items-center gap-2" data-v-cc632d3a${r}><span class="${o.ssrRenderClass([obtenerEstiloModalidad(e.modalidad),"px-2 py-0.5 text-xs rounded-full"])}" data-v-cc632d3a${r}>${o.ssrInterpolate(obtenerIconoModalidad(e.modalidad))} ${o.ssrInterpolate(e.modalidad)}</span><span class="${o.ssrRenderClass([obtenerEstiloEstado(e.estado),"px-2 py-0.5 text-xs rounded-full capitalize"])}" data-v-cc632d3a${r}>${o.ssrInterpolate(e.estado)}</span></div></div></div></div>`)}),t("\x3c!--]--\x3e</div>")):t(`<div class="text-center py-12" data-v-cc632d3a${r}><span class="text-6xl mb-3 block opacity-40" data-v-cc632d3a${r}>üìö</span><p class="text-cafe/60" data-v-cc632d3a${r}>No hay sesiones registradas</p></div>`)}),_:1},r)),s("</div>")):s("\x3c!----\x3e"),s('</div><div class="mt-6" data-v-cc632d3a>'),s(o.ssrRenderComponent(l,null,{default:a.withCtx((e,t,s,r)=>{if(!t)return[a.createVNode("h2",{class:"font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4"},[a.createVNode("span",{class:"text-2xl"},"üìù"),a.createTextVNode(" Notas Cl√≠nicas Privadas ")]),a.createVNode(i,{"paciente-id":a.unref(b),contenido:a.unref(V),"ultima-actualizacion":a.unref(w)||void 0,onGuardar:guardarNotas},null,8,["paciente-id","contenido","ultima-actualizacion"])];t(`<h2 class="font-serif text-xl font-semibold text-cafe flex items-center gap-2 mb-4" data-v-cc632d3a${r}><span class="text-2xl" data-v-cc632d3a${r}>üìù</span> Notas Cl√≠nicas Privadas </h2>`),t(o.ssrRenderComponent(i,{"paciente-id":a.unref(b),contenido:a.unref(V),"ultima-actualizacion":a.unref(w)||void 0,onGuardar:guardarNotas},null,s,r))}),_:1},r)),s("</div></div>")):s("\x3c!----\x3e"),s(o.ssrRenderComponent(p,{mostrar:a.unref(k),"paciente-preseleccionado":a.unref(C),onCerrar:cerrarModalCita,onCitaCreada:onCitaCreada},null,r)),s(o.ssrRenderComponent(x,{"is-open":a.unref(S),"cita-id":a.unref(D),onClose:cerrarModalDetalles},null,r)),s("</div>")}}}),v=f.setup;f.setup=(e,t)=>{const s=a.useSSRContext();return(s.modules||(s.modules=new Set)).add("pages/terapeuta/pacientes/[id].vue"),v?v(e,t):void 0};const m=c(f,[["__scopeId","data-v-cc632d3a"]]);export{m as default};
//# sourceMappingURL=_id_-DClW0389.mjs.map
