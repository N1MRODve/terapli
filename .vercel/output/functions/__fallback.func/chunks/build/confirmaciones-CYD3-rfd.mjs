import{_ as e}from"./nuxt-link-C_f1d2Rj.mjs";import{e as a,v as t,s}from"./server.mjs";import{u as r}from"./useCitas-DyEZH6RI.mjs";import{u as n}from"./useSupabaseClient-DykwVqLQ.mjs";import{_ as o}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{r as i}from"./ClockIcon-BxdFtPqx.mjs";import{r as d}from"./CalendarIcon-BrsGHJBC.mjs";import{r as l}from"./ChatBubbleLeftRightIcon-iHDVVAxi.mjs";import{r as c}from"./CheckCircleIcon-CT9fzVFs.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../routes/renderer.mjs";import"../_/shared.cjs.prod.mjs";import"../virtual/_commonjsHelpers.mjs";import"node:stream";import"../_/index2.mjs";import"@supabase/supabase-js";import"@vercel/analytics/nuxt";function render$1(e,a){return t.openBlock(),t.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})])}function render(e,a){return t.openBlock(),t.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}const v=t.defineComponent({__name:"ModalCancelarCita",__ssrInlineRender:!0,props:{cita:{},isOpen:{type:Boolean}},emits:["close","cancelada"],setup(e,{emit:a}){const n=e;r();const o=t.ref(""),i=t.ref(!0),d=t.ref(!1),l=t.computed(()=>{if(!n.cita)return 0;const e=new Date(`${n.cita.fecha_cita}T${n.cita.hora_inicio}`),a=new Date,t=e.getTime()-a.getTime();return Math.floor(t/36e5)}),c=t.computed(()=>l.value>=24),v=t.computed(()=>n.cita?.bono_id?l.value<24?`La cita estÃ¡ a menos de 24 horas (${l.value}h). No se puede reintegrar la sesiÃ³n al bono segÃºn la polÃ­tica de cancelaciÃ³n.`:l.value<0?"Esta cita ya ha pasado. La sesiÃ³n no se puede reintegrar.":`La cita estÃ¡ a ${l.value} horas. Puedes elegir si devolver la sesiÃ³n al bono del paciente.`:"Esta cita no tiene bono asociado. Se cancelarÃ¡ sin afectar ningÃºn bono.");return(a,t,r,n)=>{s.ssrRenderTeleport(t,a=>{var t;e.isOpen&&e.cita?(a(`<div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[60]"><div class="bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto"><div class="bg-gradient-to-r from-red-50 to-orange-50 border-b border-red-100 px-6 py-5"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-12 h-12 rounded-xl bg-red-500 flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></div><div><h3 class="text-xl font-bold text-cafe">Cancelar Cita</h3><p class="text-sm text-cafe/60">GestiÃ³n de sesiÃ³n del bono</p></div></div><button class="p-2 hover:bg-red-100 rounded-lg transition-colors" title="Cerrar"><svg class="w-5 h-5 text-cafe" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div><div class="p-6 space-y-5"><div class="bg-gray-50 border border-gray-200 rounded-xl p-4 space-y-2"><div class="flex items-start gap-2"><svg class="w-5 h-5 text-cafe/60 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg><div class="flex-1"><p class="text-xs text-cafe/60 font-medium">Paciente</p><p class="text-sm font-semibold text-cafe">${s.ssrInterpolate(e.cita.paciente_nombre||"Sin nombre")}</p></div></div><div class="flex items-start gap-2"><svg class="w-5 h-5 text-cafe/60 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><div class="flex-1"><p class="text-xs text-cafe/60 font-medium">Fecha y Hora</p><p class="text-sm font-semibold text-cafe capitalize">${s.ssrInterpolate((t=e.cita.fecha_cita,new Date(t).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))}</p><p class="text-xs text-cafe/70">${s.ssrInterpolate(e.cita.hora_inicio)} - ${s.ssrInterpolate(e.cita.hora_fin)}</p></div></div>`),e.cita.terapeuta_nombre?a(`<div class="flex items-start gap-2"><svg class="w-5 h-5 text-cafe/60 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg><div class="flex-1"><p class="text-xs text-cafe/60 font-medium">Terapeuta</p><p class="text-sm font-semibold text-cafe">${s.ssrInterpolate(e.cita.terapeuta_nombre)}</p></div></div>`):a("\x3c!----\x3e"),a(`</div><div class="${s.ssrRenderClass(["flex items-start gap-3 p-4 rounded-xl border-l-4",c.value?"bg-blue-50 border-blue-500":"bg-orange-50 border-orange-500"])}"><svg class="${s.ssrRenderClass(["w-5 h-5 flex-shrink-0 mt-0.5",c.value?"text-blue-600":"text-orange-600"])}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="flex-1"><p class="${s.ssrRenderClass(["text-sm font-semibold mb-1",c.value?"text-blue-800":"text-orange-800"])}">${s.ssrInterpolate(c.value?"âœ“ CancelaciÃ³n con anticipaciÃ³n":"âš ï¸ CancelaciÃ³n sin anticipaciÃ³n suficiente")}</p><p class="${s.ssrRenderClass(["text-xs",c.value?"text-blue-700":"text-orange-700"])}">${s.ssrInterpolate(v.value)}</p></div></div>`),e.cita.bono_id&&c.value?a(`<div class="space-y-3"><label class="block text-sm font-semibold text-cafe mb-2"> Â¿Devolver sesiÃ³n al bono? </label><div class="space-y-2"><label class="${s.ssrRenderClass(["flex items-start gap-3 p-4 rounded-xl border-2 cursor-pointer transition-all",i.value?"border-verde bg-verde/5":"border-gray-200 hover:border-verde/50"])}"><input type="radio"${s.ssrRenderAttr("value",!0)}${s.ssrIncludeBooleanAttr(s.ssrLooseEqual(i.value,!0))?" checked":""} class="mt-1 text-verde focus:ring-verde"><div class="flex-1"><p class="font-semibold text-cafe text-sm">SÃ­, devolver sesiÃ³n</p><p class="text-xs text-cafe/70 mt-1"> La sesiÃ³n se reintegrarÃ¡ al bono del paciente. PodrÃ¡ usarla en otra ocasiÃ³n. </p></div></label><label class="${s.ssrRenderClass(["flex items-start gap-3 p-4 rounded-xl border-2 cursor-pointer transition-all",i.value?"border-gray-200 hover:border-red-300":"border-red-500 bg-red-50"])}"><input type="radio"${s.ssrRenderAttr("value",!1)}${s.ssrIncludeBooleanAttr(s.ssrLooseEqual(i.value,!1))?" checked":""} class="mt-1 text-red-500 focus:ring-red-500"><div class="flex-1"><p class="font-semibold text-cafe text-sm">No, descontar sesiÃ³n</p><p class="text-xs text-cafe/70 mt-1"> La sesiÃ³n se descontarÃ¡ del bono como si se hubiera realizado. </p></div></label></div></div>`):a("\x3c!----\x3e"),a(`<div><label class="block text-sm font-semibold text-cafe mb-2"> Motivo de cancelaciÃ³n (opcional) </label><textarea rows="3" placeholder="Describe el motivo de la cancelaciÃ³n..." class="w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-cafe/20 focus:border-cafe transition-colors resize-none text-sm">${s.ssrInterpolate(o.value)}</textarea></div><div class="bg-red-50 border border-red-200 rounded-xl p-4 flex items-start gap-3"><svg class="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="flex-1"><p class="text-sm font-semibold text-red-800 mb-1"> Esta acciÃ³n no se puede deshacer </p><p class="text-xs text-red-700"> La cita serÃ¡ marcada como cancelada y ya no aparecerÃ¡ en la agenda activa. </p></div></div></div><div class="px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3"><button${s.ssrIncludeBooleanAttr(d.value)?" disabled":""} class="flex-1 px-4 py-2.5 bg-white border border-gray-300 text-cafe rounded-xl hover:bg-gray-50 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed"> Volver </button><button${s.ssrIncludeBooleanAttr(d.value)?" disabled":""} class="flex-1 px-4 py-2.5 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2">`),d.value?a('<span class="inline-block animate-spin">â³</span>'):a('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>'),a(`<span>${s.ssrInterpolate(d.value?"Cancelando...":"Cancelar Cita")}</span></button></div></div></div>`)):a("\x3c!----\x3e")},"body",!1,r)}}}),p=v.setup;v.setup=(e,a)=>{const s=t.useSSRContext();return(s.modules||(s.modules=new Set)).add("components/ModalCancelarCita.vue"),p?p(e,a):void 0};const f=Object.assign(v,{__name:"ModalCancelarCita"}),u={__name:"confirmaciones",__ssrInlineRender:!0,setup(r){const o=n();a();const v=t.ref(!0),p=t.ref([]),u=t.ref(0),x=t.ref("--"),m=t.ref(0),g=t.ref(!1),b=t.ref(null),h=t.ref(null),w=t.ref("");t.ref(!1);const _=t.ref([]),y=t.ref(0),C=t.ref(0);t.ref(0),t.ref(0);const $=t.ref(0),k=t.ref({visible:!1,tipo:"success",titulo:"",mensaje:""}),obtenerIniciales=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"PA",formatearFechaCita=e=>{if(!e)return"Sin fecha";const a=new Date(e),t=new Date,s=new Date(t);return s.setDate(s.getDate()+1),t.setHours(0,0,0,0),s.setHours(0,0,0,0),a.setHours(0,0,0,0),a.getTime()===t.getTime()?"Hoy":a.getTime()===s.getTime()?"MaÃ±ana":a.toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short"})},calcularTiempoRestante=(e,a)=>{if(!e||!a)return"--";const t=new Date,s=new Date(`${e}T${a}`)-t;if(s<0)return"Pasada";const r=Math.floor(s/36e5),n=Math.floor(s%36e5/6e4);if(r<1)return`${n}min`;if(r<24)return`${r}h ${n}min`;{const e=Math.floor(r/24);return`${e} dÃ­a${e>1?"s":""}`}},estaListaParaConfirmar=(e,a)=>{if(!e||!a)return!1;const t=new Date,s=new Date(`${e}T${a}`)-t;return s>0&&s<=864e5},estaListaParaRecordatorio=(e,a)=>{if(!e||!a)return!1;const t=new Date,s=new Date(`${e}T${a}`)-t;return s>0&&s<=144e5},cerrarModalCancelar=()=>{g.value=!1,b.value=null,h.value=null,w.value=""},handleCitaCancelada=e=>{cerrarModalCancelar();((e,a,t="success")=>{k.value={visible:!0,tipo:t,titulo:e,mensaje:a},setTimeout(()=>{k.value.visible=!1},5e3)})("Cita Cancelada",e?.reintegrada?"Se devolviÃ³ 1 sesiÃ³n al bono del paciente":"La sesiÃ³n se descontÃ³ del bono segÃºn polÃ­tica de cancelaciÃ³n","success"),(async()=>{try{const e=new Date;e.setHours(0,0,0,0);const a=e.toISOString().split("T")[0],{data:t,error:s}=await o.from("citas").select("\n        id,\n        fecha_cita,\n        hora_inicio,\n        modalidad,\n        estado,\n        paciente_id,\n        terapeuta_id\n      ").eq("estado","pendiente").gte("fecha_cita",a).order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0}).limit(50);if(s)throw s;if(!t||0===t.length)return p.value=[],u.value=0,x.value="--",void(m.value=0);const r=[...new Set(t.map(e=>e.paciente_id))],n=[...new Set(t.map(e=>e.terapeuta_id).filter(Boolean))],{data:i}=await o.from("pacientes").select("id, nombre_completo, telefono, email").in("id",r);let d=[];if(n.length>0){const{data:e}=await o.from("terapeutas").select("id, nombre_completo").in("id",n);d=e||[]}const l=new Map(i?.map(e=>[e.id,e])||[]),c=new Map(d.map(e=>[e.id,e]));if(p.value=t.map(a=>{const t=l.get(a.paciente_id),s=a.terapeuta_id?c.get(a.terapeuta_id):null,r=new Date(e);r.setDate(r.getDate()+2);const n=r.toISOString().split("T")[0];return{id:a.id,fecha:a.fecha_cita,hora_inicio:a.hora_inicio,modalidad:a.modalidad,estado:a.estado,esUrgente:a.fecha_cita<n,listaParaConfirmar:estaListaParaConfirmar(a.fecha_cita,a.hora_inicio),paciente:{nombre:t?.nombre_completo||"Sin nombre",telefono:t?.telefono,email:t?.email},terapeuta:{nombre:s?.nombre_completo||"Sin terapeuta"}}}),u.value=p.value.filter(e=>e.esUrgente).length,p.value.length>0){const e=p.value[0];x.value=calcularTiempoRestante(e.fecha,e.hora_inicio)}m.value=p.value.filter(e=>e.listaParaConfirmar&&e.paciente?.telefono).length}catch(e){console.error("Error al cargar citas por confirmar:",e)}finally{v.value=!1}})(),cargarCitasConfirmadas()},cargarCitasConfirmadas=async()=>{try{const e=new Date;e.setHours(0,0,0,0);const a=e.toISOString().split("T")[0],{data:t,error:s}=await o.from("citas").select("\n        id,\n        fecha_cita,\n        hora_inicio,\n        modalidad,\n        estado,\n        paciente_id,\n        terapeuta_id,\n        bono_id\n      ").eq("estado","confirmada").gte("fecha_cita",a).order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0}).limit(50);if(s)throw s;if(!t||0===t.length)return _.value=[],C.value=0,void(y.value=0);const r=[...new Set(t.map(e=>e.paciente_id))],n=[...new Set(t.map(e=>e.terapeuta_id).filter(Boolean))],i=[...new Set(t.map(e=>e.bono_id).filter(Boolean))],{data:d}=await o.from("pacientes").select("id, nombre_completo, telefono").in("id",r);let l=[];if(i.length>0){const{data:e}=await o.from("bonos").select("id, sesiones_totales, sesiones_restantes, estado").in("id",i);l=e||[]}let c=[];if(n.length>0){const{data:e}=await o.from("terapeutas").select("id, nombre_completo").in("id",n);c=e||[]}const v=new Map(d?.map(e=>[e.id,e])||[]),p=new Map(c.map(e=>[e.id,e])),f=new Map(l.map(e=>[e.id,e]));_.value=t.map(e=>{const a=v.get(e.paciente_id),t=e.terapeuta_id?p.get(e.terapeuta_id):null,s=e.bono_id?f.get(e.bono_id):null;return{id:e.id,fecha:e.fecha_cita,hora_inicio:e.hora_inicio,modalidad:e.modalidad,estado:e.estado,listaParaRecordatorio:estaListaParaRecordatorio(e.fecha_cita,e.hora_inicio),paciente:{nombre:a?.nombre_completo||"Sin nombre",telefono:a?.telefono},terapeuta:{nombre:t?.nombre_completo||"Sin terapeuta"},bono:s?{id:s.id,sesiones_totales:s.sesiones_totales,sesiones_restantes:s.sesiones_restantes,estado:s.estado,tiene_bono:!0}:null}}),C.value=_.value.filter(e=>e.fecha===a).length;const u=new Date(e);u.setDate(u.getDate()+7);const x=u.toISOString().split("T")[0];y.value=_.value.filter(e=>e.fecha<=x).length,$.value=_.value.filter(e=>e.listaParaRecordatorio&&e.paciente?.telefono).length}catch(e){console.error("Error al cargar citas confirmadas:",e)}};return(a,r,n,o)=>{const b=e,w=f;r(`<div${s.ssrRenderAttrs(o)} data-v-10e941a7><div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-8" data-v-10e941a7><div class="px-8 py-6 border-b border-gray-100" data-v-10e941a7><div class="flex items-center justify-between" data-v-10e941a7><div class="flex items-center gap-3" data-v-10e941a7><div class="w-12 h-12 bg-arena rounded-xl flex items-center justify-center" data-v-10e941a7>`),r(s.ssrRenderComponent(t.unref(i),{class:"w-7 h-7 text-purple-600"},null,n)),r('</div><div data-v-10e941a7><h2 class="text-xl font-semibold text-cafe" data-v-10e941a7> Citas pendientes de confirmaciÃ³n </h2><p class="text-sm text-cafe/60 mt-0.5" data-v-10e941a7> Gestiona las citas que requieren confirmaciÃ³n con el paciente </p></div></div>'),r(s.ssrRenderComponent(b,{to:"/coordinadora/agenda",class:"text-sm text-purple-600 hover:text-purple-600/80 font-medium transition-colors flex items-center gap-1"},{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("span",null,"Ver agenda completa"),t.createVNode("span",null,"â†’")];a(`<span data-v-10e941a7${r}>Ver agenda completa</span><span data-v-10e941a7${r}>â†’</span>`)}),_:1},n)),r('</div></div><div class="px-8 py-6" data-v-10e941a7><div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6" data-v-10e941a7><div class="bg-arena/30 rounded-xl p-4 hover:shadow-sm transition-shadow" data-v-10e941a7><div class="flex items-center gap-3" data-v-10e941a7><div class="w-10 h-10 bg-purple-600/10 rounded-lg flex items-center justify-center flex-shrink-0" data-v-10e941a7>'),r(s.ssrRenderComponent(t.unref(i),{class:"w-6 h-6 text-purple-600"},null,n)),r(`</div><div class="flex-1 min-w-0" data-v-10e941a7><p class="text-2xl font-semibold text-cafe" data-v-10e941a7>${s.ssrInterpolate(t.unref(p).length)}</p><p class="text-xs text-cafe/60 font-medium" data-v-10e941a7>Pendientes</p></div></div></div><div class="bg-orange-50/50 rounded-xl p-4 hover:shadow-sm transition-shadow" data-v-10e941a7><div class="flex items-center gap-3" data-v-10e941a7><div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0" data-v-10e941a7>`),r(s.ssrRenderComponent(t.unref(render$1),{class:"w-6 h-6 text-orange-600"},null,n)),r(`</div><div class="flex-1 min-w-0" data-v-10e941a7><p class="text-2xl font-semibold text-cafe" data-v-10e941a7>${s.ssrInterpolate(t.unref(u))}</p><p class="text-xs text-cafe/60 font-medium" data-v-10e941a7>Urgentes</p></div></div></div><div class="bg-verde/10 rounded-xl p-4 hover:shadow-sm transition-shadow" data-v-10e941a7><div class="flex items-center gap-3" data-v-10e941a7><div class="w-10 h-10 bg-verde/20 rounded-lg flex items-center justify-center flex-shrink-0" data-v-10e941a7>`),r(s.ssrRenderComponent(t.unref(d),{class:"w-6 h-6 text-verde"},null,n)),r(`</div><div class="flex-1 min-w-0" data-v-10e941a7><p class="text-lg font-semibold text-cafe truncate" data-v-10e941a7>${s.ssrInterpolate(t.unref(x))}</p><p class="text-xs text-cafe/60 font-medium" data-v-10e941a7>PrÃ³xima cita</p></div></div></div><div class="bg-green-50/50 rounded-xl p-4 hover:shadow-sm transition-shadow" data-v-10e941a7><div class="flex items-center gap-3" data-v-10e941a7><div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0" data-v-10e941a7>`),r(s.ssrRenderComponent(t.unref(l),{class:"w-6 h-6 text-green-600"},null,n)),r(`</div><div class="flex-1 min-w-0" data-v-10e941a7><p class="text-2xl font-semibold text-cafe" data-v-10e941a7>${s.ssrInterpolate(t.unref(m))}</p><p class="text-xs text-cafe/60 font-medium" data-v-10e941a7>Listas para confirmar</p></div></div></div></div>`),t.unref(v)?r('<div class="text-center py-12" data-v-10e941a7><div class="inline-flex flex-col items-center gap-3" data-v-10e941a7><div class="w-12 h-12 border-3 border-purple-600/20 border-t-purple-600 rounded-full animate-spin" data-v-10e941a7></div><p class="text-cafe/60 font-medium text-sm" data-v-10e941a7>Cargando citas...</p></div></div>'):t.unref(p).length>0?(r('<div class="space-y-3" data-v-10e941a7>\x3c!--[--\x3e'),s.ssrRenderList(t.unref(p),e=>{r(`<div class="group bg-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-200 overflow-hidden" data-v-10e941a7><div class="flex items-stretch" data-v-10e941a7><div class="${s.ssrRenderClass([{"bg-purple-600":e.esUrgente,"bg-verde":!e.esUrgente},"w-1 flex-shrink-0"])}" data-v-10e941a7></div><div class="flex-1 p-5" data-v-10e941a7><div class="flex items-center gap-4" data-v-10e941a7><div class="flex-shrink-0" data-v-10e941a7><div class="${s.ssrRenderClass([{"bg-purple-600":e.esUrgente,"bg-cafe/80":!e.esUrgente},"w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold shadow-sm"])}" data-v-10e941a7>${s.ssrInterpolate(obtenerIniciales(e.paciente.nombre))}</div></div><div class="flex-1 grid grid-cols-1 md:grid-cols-5 gap-4 items-center" data-v-10e941a7><div class="md:col-span-2" data-v-10e941a7><div class="flex items-center gap-2 mb-1" data-v-10e941a7><h4 class="font-semibold text-cafe" data-v-10e941a7>${s.ssrInterpolate(e.paciente.nombre)}</h4>`),e.esUrgente?r('<span class="px-2 py-0.5 bg-purple-600/10 text-purple-600 text-xs font-medium rounded-full" data-v-10e941a7> Urgente </span>'):r("\x3c!----\x3e"),e.listaParaConfirmar?r('<span class="inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full animate-pulse" data-v-10e941a7><span data-v-10e941a7>ğŸ””</span><span data-v-10e941a7>Lista para confirmar</span></span>'):r("\x3c!----\x3e"),r(`</div><p class="text-sm text-cafe/60" data-v-10e941a7>${s.ssrInterpolate(e.terapeuta.nombre)}</p></div><div data-v-10e941a7><p class="text-sm font-medium text-cafe mb-0.5" data-v-10e941a7>${s.ssrInterpolate(formatearFechaCita(e.fecha))}</p><p class="text-sm text-cafe/60" data-v-10e941a7>${s.ssrInterpolate(e.hora_inicio)}</p></div><div data-v-10e941a7><span class="${s.ssrRenderClass([{"bg-purple-50 text-purple-700":"online"===e.modalidad,"bg-verde/10 text-verde":"presencial"===e.modalidad},"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium"])}" data-v-10e941a7><span data-v-10e941a7>${s.ssrInterpolate("online"===e.modalidad?"ğŸ’»":"ğŸ¥")}</span><span class="capitalize" data-v-10e941a7>${s.ssrInterpolate(e.modalidad)}</span></span></div><div class="text-right" data-v-10e941a7><p class="${s.ssrRenderClass([{"text-purple-600":e.esUrgente,"text-cafe/70":!e.esUrgente},"text-sm font-semibold"])}" data-v-10e941a7>${s.ssrInterpolate(calcularTiempoRestante(e.fecha,e.hora_inicio))}</p><p class="text-xs text-cafe/50" data-v-10e941a7>restante</p></div></div><div class="flex-shrink-0 flex items-center gap-2" data-v-10e941a7><div class="relative" data-v-10e941a7>`),e.paciente.telefono?r(`<button class="${s.ssrRenderClass(["p-2.5 rounded-lg transition-colors",e.listaParaConfirmar?"bg-green-500 text-white hover:bg-green-600 animate-pulse":"bg-green-500/10 text-green-600 hover:bg-green-500 hover:text-white"])}"${s.ssrRenderAttr("title",e.listaParaConfirmar?"Â¡Lista para confirmar! Enviar WhatsApp":"Enviar WhatsApp")} data-v-10e941a7><span class="text-lg" data-v-10e941a7>ğŸ’¬</span></button>`):r("\x3c!----\x3e"),e.listaParaConfirmar?r('<span class="absolute -top-1 -right-1 flex h-3 w-3" data-v-10e941a7><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75" data-v-10e941a7></span><span class="relative inline-flex rounded-full h-3 w-3 bg-red-500" data-v-10e941a7></span></span>'):r("\x3c!----\x3e"),r('</div><button class="p-2.5 bg-verde/10 text-verde hover:bg-verde hover:text-white rounded-lg transition-colors" title="Confirmar cita" data-v-10e941a7><span class="text-lg" data-v-10e941a7>âœ“</span></button><button class="p-2.5 bg-red-50 text-red-600 hover:bg-red-500 hover:text-white rounded-lg transition-colors" title="Cancelar cita" data-v-10e941a7><span class="text-lg" data-v-10e941a7>âœ•</span></button></div></div></div></div></div>')}),r("\x3c!--]--\x3e</div>")):(r('<div class="text-center py-16" data-v-10e941a7><div class="inline-flex flex-col items-center gap-4" data-v-10e941a7><div class="w-20 h-20 bg-verde/10 rounded-2xl flex items-center justify-center" data-v-10e941a7>'),r(s.ssrRenderComponent(t.unref(render),{class:"w-12 h-12 text-verde"},null,n)),r('</div><div class="space-y-1" data-v-10e941a7><h3 class="text-lg font-semibold text-cafe" data-v-10e941a7> No hay citas pendientes por confirmar </h3><p class="text-sm text-cafe/60 max-w-sm" data-v-10e941a7> Todo estÃ¡ organizado, puedes revisar la agenda completa </p></div>'),r(s.ssrRenderComponent(b,{to:"/coordinadora/agenda",class:"mt-2 px-5 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-600/90 transition-colors font-medium text-sm"},{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createTextVNode(" Ver agenda ")];a(" Ver agenda ")}),_:1},n)),r("</div></div>")),r('</div></div><div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-8" data-v-10e941a7><div class="px-8 py-6 border-b border-gray-100" data-v-10e941a7><div class="flex items-center justify-between" data-v-10e941a7><div class="flex items-center gap-3" data-v-10e941a7><div class="w-12 h-12 bg-verde/10 rounded-xl flex items-center justify-center" data-v-10e941a7>'),r(s.ssrRenderComponent(t.unref(c),{class:"w-7 h-7 text-verde"},null,n)),r('</div><div data-v-10e941a7><h2 class="text-xl font-semibold text-cafe" data-v-10e941a7> Citas confirmadas </h2><p class="text-sm text-cafe/60 mt-0.5" data-v-10e941a7> Citas ya confirmadas con los pacientes </p></div></div>'),r(s.ssrRenderComponent(b,{to:"/coordinadora/agenda?estado=confirmada",class:"text-sm text-verde hover:text-verde/80 font-medium transition-colors flex items-center gap-1"},{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createVNode("span",null,"Ver todas"),t.createVNode("span",null,"â†’")];a(`<span data-v-10e941a7${r}>Ver todas</span><span data-v-10e941a7${r}>â†’</span>`)}),_:1},n)),r('</div></div><div class="px-8 py-6" data-v-10e941a7><div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6" data-v-10e941a7><div class="bg-verde/10 rounded-xl p-4 hover:shadow-sm transition-shadow" data-v-10e941a7><div class="flex items-center gap-3" data-v-10e941a7><div class="w-10 h-10 bg-verde/20 rounded-lg flex items-center justify-center flex-shrink-0" data-v-10e941a7>'),r(s.ssrRenderComponent(t.unref(c),{class:"w-6 h-6 text-verde"},null,n)),r(`</div><div class="flex-1 min-w-0" data-v-10e941a7><p class="text-2xl font-semibold text-cafe" data-v-10e941a7>${s.ssrInterpolate(t.unref(_).length)}</p><p class="text-xs text-cafe/60 font-medium" data-v-10e941a7>Confirmadas</p></div></div></div><div class="bg-blue-50/50 rounded-xl p-4 hover:shadow-sm transition-shadow" data-v-10e941a7><div class="flex items-center gap-3" data-v-10e941a7><div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0" data-v-10e941a7>`),r(s.ssrRenderComponent(t.unref(d),{class:"w-6 h-6 text-blue-600"},null,n)),r(`</div><div class="flex-1 min-w-0" data-v-10e941a7><p class="text-2xl font-semibold text-cafe" data-v-10e941a7>${s.ssrInterpolate(t.unref(y))}</p><p class="text-xs text-cafe/60 font-medium" data-v-10e941a7>PrÃ³ximos 7 dÃ­as</p></div></div></div><div class="bg-purple-50/50 rounded-xl p-4 hover:shadow-sm transition-shadow" data-v-10e941a7><div class="flex items-center gap-3" data-v-10e941a7><div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0" data-v-10e941a7>`),r(s.ssrRenderComponent(t.unref(i),{class:"w-6 h-6 text-purple-600"},null,n)),r(`</div><div class="flex-1 min-w-0" data-v-10e941a7><p class="text-2xl font-semibold text-cafe" data-v-10e941a7>${s.ssrInterpolate(t.unref(C))}</p><p class="text-xs text-cafe/60 font-medium" data-v-10e941a7>Hoy</p></div></div></div><div class="bg-amber-50/50 rounded-xl p-4 hover:shadow-sm transition-shadow" data-v-10e941a7><div class="flex items-center gap-3" data-v-10e941a7><div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0" data-v-10e941a7>`),r(s.ssrRenderComponent(t.unref(l),{class:"w-6 h-6 text-amber-600"},null,n)),r(`</div><div class="flex-1 min-w-0" data-v-10e941a7><p class="text-2xl font-semibold text-cafe" data-v-10e941a7>${s.ssrInterpolate(t.unref($))}</p><p class="text-xs text-cafe/60 font-medium" data-v-10e941a7>Recordatorios listos</p></div></div></div></div>`),t.unref(_).length>0?(r('<div data-v-10e941a7><div class="space-y-3" data-v-10e941a7>\x3c!--[--\x3e'),s.ssrRenderList(t.unref(_),e=>{r(`<div class="group bg-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-200 overflow-hidden" data-v-10e941a7><div class="flex items-stretch" data-v-10e941a7><div class="w-1 bg-verde flex-shrink-0" data-v-10e941a7></div><div class="flex-1 p-5" data-v-10e941a7><div class="flex items-center gap-4" data-v-10e941a7><div class="flex-shrink-0 relative" data-v-10e941a7><div class="w-12 h-12 rounded-full bg-verde flex items-center justify-center text-white font-semibold shadow-sm" data-v-10e941a7>${s.ssrInterpolate(obtenerIniciales(e.paciente.nombre))}</div><div class="absolute -bottom-1 -right-1 w-5 h-5 bg-white rounded-full flex items-center justify-center shadow-sm" data-v-10e941a7><span class="text-verde text-xs" data-v-10e941a7>âœ“</span></div></div><div class="flex-1 grid grid-cols-1 lg:grid-cols-6 gap-3 items-center" data-v-10e941a7><div class="lg:col-span-2" data-v-10e941a7><div class="flex items-center gap-2 mb-1" data-v-10e941a7><h4 class="font-semibold text-cafe" data-v-10e941a7>${s.ssrInterpolate(e.paciente.nombre)}</h4>`),e.listaParaRecordatorio?r('<span class="inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded-full animate-pulse" data-v-10e941a7><span data-v-10e941a7>â°</span><span data-v-10e941a7>Enviar recordatorio</span></span>'):r("\x3c!----\x3e"),r(`</div><p class="text-sm text-cafe/60" data-v-10e941a7>${s.ssrInterpolate(e.terapeuta.nombre)}</p></div><div data-v-10e941a7><p class="text-sm font-medium text-cafe mb-0.5" data-v-10e941a7>${s.ssrInterpolate(formatearFechaCita(e.fecha))}</p><p class="text-sm text-cafe/60" data-v-10e941a7>${s.ssrInterpolate(e.hora_inicio)}</p></div><div data-v-10e941a7><span class="${s.ssrRenderClass([{"bg-purple-50 text-purple-700":"online"===e.modalidad,"bg-verde/10 text-verde":"presencial"===e.modalidad},"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium"])}" data-v-10e941a7><span data-v-10e941a7>${s.ssrInterpolate("online"===e.modalidad?"ğŸ’»":"ğŸ¥")}</span><span class="capitalize" data-v-10e941a7>${s.ssrInterpolate(e.modalidad)}</span></span></div><div data-v-10e941a7>`),e.bono?(r(`<div class="flex flex-col gap-1" data-v-10e941a7><div class="flex items-center gap-1.5" data-v-10e941a7><span class="text-xs text-cafe/60" data-v-10e941a7>ğŸ« Bono:</span><span class="${s.ssrRenderClass([{"text-red-600":0===e.bono.sesiones_restantes,"text-orange-600":1===e.bono.sesiones_restantes,"text-amber-600":2===e.bono.sesiones_restantes,"text-verde":e.bono.sesiones_restantes>2},"text-xs font-semibold"])}" data-v-10e941a7>${s.ssrInterpolate(e.bono.sesiones_restantes)}/${s.ssrInterpolate(e.bono.sesiones_totales)}</span></div><div class="flex items-center gap-1" data-v-10e941a7><div class="flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden" data-v-10e941a7><div class="${s.ssrRenderClass([{"bg-red-500":0===e.bono.sesiones_restantes,"bg-orange-500":1===e.bono.sesiones_restantes,"bg-amber-500":2===e.bono.sesiones_restantes,"bg-verde":e.bono.sesiones_restantes>2},"h-full transition-all duration-300 rounded-full"])}" style="${s.ssrRenderStyle({width:e.bono.sesiones_restantes/e.bono.sesiones_totales*100+"%"})}" data-v-10e941a7></div></div></div>`),e.bono.sesiones_restantes<=2?r(`<span class="${s.ssrRenderClass([{"text-red-600":0===e.bono.sesiones_restantes,"text-orange-600":1===e.bono.sesiones_restantes,"text-amber-600":2===e.bono.sesiones_restantes},"text-[10px] font-medium"])}" data-v-10e941a7>${s.ssrInterpolate(0===e.bono.sesiones_restantes?"âš ï¸ Agotado":"âš ï¸ Renovar pronto")}</span>`):r("\x3c!----\x3e"),r("</div>")):r('<div class="text-xs text-cafe/40 italic" data-v-10e941a7> Sin bono </div>'),r('</div><div class="text-right" data-v-10e941a7><span class="inline-flex items-center gap-1 px-2.5 py-1 bg-verde/10 text-verde rounded-full text-xs font-medium" data-v-10e941a7><span data-v-10e941a7>âœ“</span><span data-v-10e941a7>Confirmada</span></span></div></div><div class="flex-shrink-0 flex items-center gap-2" data-v-10e941a7>'),e.paciente.telefono?(r(`<div class="relative" data-v-10e941a7><button class="${s.ssrRenderClass(["p-2.5 rounded-lg transition-colors",e.listaParaRecordatorio?"bg-blue-500 text-white hover:bg-blue-600 animate-pulse":"bg-blue-500/10 text-blue-600 hover:bg-blue-500 hover:text-white"])}"${s.ssrRenderAttr("title",e.listaParaRecordatorio?"Â¡Lista para recordatorio! Enviar WhatsApp":"Enviar recordatorio por WhatsApp")} data-v-10e941a7><span class="text-lg" data-v-10e941a7>ğŸ’¬</span></button>`),e.listaParaRecordatorio?r('<span class="absolute -top-1 -right-1 flex h-3 w-3" data-v-10e941a7><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75" data-v-10e941a7></span><span class="relative inline-flex rounded-full h-3 w-3 bg-blue-500" data-v-10e941a7></span></span>'):r("\x3c!----\x3e"),r("</div>")):r("\x3c!----\x3e"),r('<button class="p-2.5 bg-orange-50 text-orange-600 hover:bg-orange-500 hover:text-white rounded-lg transition-colors" title="Volver a pendiente" data-v-10e941a7><span class="text-lg" data-v-10e941a7>â†º</span></button></div></div></div></div></div>')}),r("\x3c!--]--\x3e</div></div>")):(r('<div class="text-center py-16" data-v-10e941a7><div class="inline-flex flex-col items-center gap-4" data-v-10e941a7><div class="w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center" data-v-10e941a7><span class="text-4xl" data-v-10e941a7>ğŸ“‹</span></div><div class="space-y-1" data-v-10e941a7><h3 class="text-lg font-semibold text-cafe" data-v-10e941a7> No hay citas confirmadas </h3><p class="text-sm text-cafe/60 max-w-sm" data-v-10e941a7> Las citas confirmadas con los pacientes aparecerÃ¡n aquÃ­ </p></div>'),r(s.ssrRenderComponent(b,{to:"/coordinadora/agenda",class:"mt-2 px-5 py-2 bg-verde text-white rounded-lg hover:bg-verde/90 transition-colors font-medium text-sm"},{default:t.withCtx((e,a,s,r)=>{if(!a)return[t.createTextVNode(" Ver agenda completa ")];a(" Ver agenda completa ")}),_:1},n)),r("</div></div>")),r("</div></div>"),t.unref(h)?r(s.ssrRenderComponent(w,{cita:t.unref(h),"is-open":t.unref(g),onClose:cerrarModalCancelar,onCancelada:handleCitaCancelada},null,n)):r("\x3c!----\x3e"),s.ssrRenderTeleport(r,e=>{t.unref(k).visible?e(`<div class="fixed top-4 right-4 z-[70] animate-[slideIn_0.3s_ease-out]" data-v-10e941a7><div class="${s.ssrRenderClass([{"border-green-500":"success"===t.unref(k).tipo,"border-red-500":"error"===t.unref(k).tipo},"bg-white rounded-lg shadow-2xl border-l-4 p-4 min-w-[320px] max-w-md"])}" data-v-10e941a7><div class="flex items-start gap-3" data-v-10e941a7><div class="${s.ssrRenderClass([{"bg-green-100":"success"===t.unref(k).tipo,"bg-red-100":"error"===t.unref(k).tipo},"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0"])}" data-v-10e941a7><span class="text-2xl" data-v-10e941a7>${s.ssrInterpolate("success"===t.unref(k).tipo?"âœ“":"âœ—")}</span></div><div class="flex-1" data-v-10e941a7><p class="${s.ssrRenderClass([{"text-green-700":"success"===t.unref(k).tipo,"text-red-700":"error"===t.unref(k).tipo},"font-bold mb-1"])}" data-v-10e941a7>${s.ssrInterpolate(t.unref(k).titulo)}</p><p class="text-sm text-cafe/70" data-v-10e941a7>${s.ssrInterpolate(t.unref(k).mensaje)}</p></div><button class="text-cafe/40 hover:text-cafe/60 transition-colors" data-v-10e941a7><span class="text-xl" data-v-10e941a7>Ã—</span></button></div></div></div>`):e("\x3c!----\x3e")},"body",!1,n),r("</div>")}}},x=u.setup;u.setup=(e,a)=>{const s=t.useSSRContext();return(s.modules||(s.modules=new Set)).add("pages/coordinadora/confirmaciones.vue"),x?x(e,a):void 0};const m=o(u,[["__scopeId","data-v-10e941a7"]]);export{m as default};
//# sourceMappingURL=confirmaciones-CYD3-rfd.mjs.map
