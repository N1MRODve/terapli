import{u as e,_ as a}from"./ModalNuevaCitaEnhanced-CK2odB5s.mjs";import{M as t}from"./ModalDetallesCita-Db71gcxb.mjs";import{v as r,s}from"./server.mjs";import{u as l}from"./useSupabaseClient-DykwVqLQ.mjs";import{_ as o}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";const d=r.defineComponent({__name:"AgendaCalendario",__ssrInlineRender:!0,props:{modoCoordinadora:{type:Boolean,default:!1}},emits:["nueva-cita","ver-cita"],setup(o,{emit:d}){const n=o,{citas:i,loading:c,refreshAppointments:v}=e();l();const u=r.ref("semana"),p=r.ref(new Date),g=r.ref(""),b=r.ref(!1),f=r.ref(["pendiente","confirmada","realizada","cancelada"]);r.ref([]);const m=r.ref(null),x=r.ref(!1),h=r.ref(null),y=r.ref(null),w=r.ref(!1),C=r.ref(null),k=r.ref(null),$=r.ref(null),S=r.ref(null),R=r.ref(!1),j=r.ref(null),D=r.ref(""),M=r.ref(!1),z=r.ref(null),I=r.ref(""),L=r.ref(""),_=r.ref(""),A=r.ref(""),B=r.ref("info"),E=r.ref(!1),H=r.computed(()=>{const e=[];for(let a=9;a<=21;a++)e.push(`${String(a).padStart(2,"0")}:00`),a<21&&e.push(`${String(a).padStart(2,"0")}:30`);return e}),V=r.computed(()=>{const e=new Date(p.value),a=[],t=(new Date).toISOString().split("T")[0];if("dia"===u.value){const r=e.toISOString().split("T")[0];a.push({fecha:r,diaSemana:e.toLocaleDateString("es-ES",{weekday:"long"}).toUpperCase(),numeroDia:e.getDate(),mes:e.toLocaleDateString("es-ES",{month:"short"}),esHoy:r===t})}else if("5dias"===u.value)for(let r=0;r<5;r++){const s=new Date(e);s.setDate(e.getDate()+r);const l=s.toISOString().split("T")[0];a.push({fecha:l,diaSemana:s.toLocaleDateString("es-ES",{weekday:"long"}).toUpperCase(),numeroDia:s.getDate(),mes:s.toLocaleDateString("es-ES",{month:"short"}),esHoy:l===t})}else if("semana"===u.value){const r=e.getDay(),s=new Date(e);s.setDate(e.getDate()-(6===r?0:r+1));for(let e=0;e<7;e++){const r=new Date(s);r.setDate(s.getDate()+e);const l=r.toISOString().split("T")[0];a.push({fecha:l,diaSemana:r.toLocaleDateString("es-ES",{weekday:"long"}).toUpperCase(),numeroDia:r.getDate(),mes:r.toLocaleDateString("es-ES",{month:"short"}),esHoy:l===t})}}return a}),T=r.computed(()=>{const e=p.value,a=e.toLocaleDateString("es-ES",{month:"long"}),t=e.getFullYear(),r=new Date(e.getFullYear(),0,1),s=Math.floor((e.getTime()-r.getTime())/864e5),l=Math.ceil((s+r.getDay()+1)/7);return`${a.charAt(0).toUpperCase()+a.slice(1)} De ${t} — Semana ${l}`}),O=r.computed(()=>{let e=i.value;if(n.modoCoordinadora&&m.value&&(e=e.filter(e=>e.terapeuta_id===m.value)),f.value.length>0&&f.value.length<4&&(e=e.filter(e=>f.value.includes(e.estado))),g.value.trim()){const a=g.value.toLowerCase();e=e.filter(e=>{const t=(e.paciente_nombre||e.paciente?.nombre_completo||"").toLowerCase(),r=(e.terapeuta_nombre||e.terapeuta?.nombre_completo||"").toLowerCase(),s=(e.observaciones||"").toLowerCase();return t.includes(a)||r.includes(a)||s.includes(a)})}return e}),N=r.computed(()=>({pendiente:i.value.filter(e=>"pendiente"===e.estado).length,confirmada:i.value.filter(e=>"confirmada"===e.estado).length,realizada:i.value.filter(e=>"realizada"===e.estado||"completada"===e.estado).length,cancelada:i.value.filter(e=>"cancelada"===e.estado).length})),citasPorDiaHora=(e,a)=>O.value.filter(t=>{if(t.fecha_cita!==e)return!1;const r=t.hora_inicio?.substring(0,5);return r===a}),P=r.ref(new Date),F=r.computed(()=>{const e=P.value,a=e.getHours(),t=e.getMinutes();if(a<9||a>=21)return null;return(60*(a-9)+t)/30*44}),getColorEstado=e=>{const a={pendiente:{bg:"bg-amber-50",border:"border-l-amber-400",text:"text-amber-700",dot:"bg-amber-400"},confirmada:{bg:"bg-emerald-50",border:"border-l-emerald-400",text:"text-emerald-700",dot:"bg-emerald-400"},realizada:{bg:"bg-blue-50",border:"border-l-blue-400",text:"text-blue-700",dot:"bg-blue-400"},completada:{bg:"bg-blue-50",border:"border-l-blue-400",text:"text-blue-700",dot:"bg-blue-400"},cancelada:{bg:"bg-red-50",border:"border-l-red-400",text:"text-red-700",dot:"bg-red-400"}};return a[e]||a.pendiente},formatearHora=e=>e?.substring(0,5)||"",formatearFecha=e=>{if(!e)return"";return new Date(e+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"})},U=r.computed(()=>{const e=[];for(let a=9;a<=21;a++)e.push(`${String(a).padStart(2,"0")}:00`),a<21&&e.push(`${String(a).padStart(2,"0")}:30`);return e}),q=r.computed(()=>{if(!L.value)return U.value;const e=U.value.indexOf(L.value);return-1===e?U.value:[...U.value.slice(e+1),"22:00"]});return(e,l,o,d)=>{const n=a,i=t;l(`<div${s.ssrRenderAttrs(r.mergeProps({class:"agenda-calendario min-h-screen bg-gray-50/50"},d))} data-v-1a7e683c><div class="bg-white border-b border-gray-100 px-6 py-4" data-v-1a7e683c><div class="flex items-center justify-between gap-4" data-v-1a7e683c><div class="flex items-center gap-3" data-v-1a7e683c><button class="w-9 h-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 hover:border-gray-300 transition-all" data-v-1a7e683c><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" data-v-1a7e683c></path></svg></button><button class="px-4 py-2 rounded-full border-2 border-violet-500 text-violet-600 font-semibold text-sm hover:bg-violet-50 transition-all" data-v-1a7e683c> Hoy </button><button class="w-9 h-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 hover:border-gray-300 transition-all" data-v-1a7e683c><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-1a7e683c></path></svg></button></div><h1 class="text-xl font-bold text-gray-800 tracking-tight" data-v-1a7e683c>${s.ssrInterpolate(T.value)}</h1><div class="flex items-center gap-4" data-v-1a7e683c><div class="flex items-center bg-gray-100 rounded-full p-1" data-v-1a7e683c>\x3c!--[--\x3e`),s.ssrRenderList([{key:"dia",label:"Día"},{key:"5dias",label:"5 Días"},{key:"semana",label:"Semana"},{key:"mes",label:"Mes"}],e=>{l(`<button class="${s.ssrRenderClass([u.value===e.key?"bg-violet-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900","px-4 py-1.5 rounded-full text-sm font-medium transition-all"])}" data-v-1a7e683c>${s.ssrInterpolate(e.label)}</button>`)}),l(`\x3c!--]--\x3e</div><button class="w-9 h-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-400 hover:bg-gray-50 transition-all" data-v-1a7e683c><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" data-v-1a7e683c></path></svg></button><button class="flex items-center gap-2 px-5 py-2.5 bg-violet-500 text-white font-semibold rounded-full hover:bg-violet-600 shadow-sm hover:shadow transition-all" data-v-1a7e683c><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" data-v-1a7e683c></path></svg> Nueva Cita </button></div></div></div><div class="bg-white border-b border-gray-100 px-6 py-3" data-v-1a7e683c><div class="flex items-center gap-4" data-v-1a7e683c><div class="flex-1 relative" data-v-1a7e683c><div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none" data-v-1a7e683c><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-1a7e683c></path></svg></div><input${s.ssrRenderAttr("value",g.value)} type="text" placeholder="Buscar por paciente, terapeuta, notas..." class="w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-400 transition-all" data-v-1a7e683c></div><button class="${s.ssrRenderClass([{"bg-violet-50 border-violet-300 text-violet-600":b.value},"flex items-center gap-2 px-5 py-3 border border-gray-200 rounded-xl text-gray-600 font-medium hover:bg-gray-50 hover:border-gray-300 transition-all"])}" data-v-1a7e683c><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" data-v-1a7e683c></path></svg> Filtros </button></div></div><div class="bg-white border-b border-gray-100 px-6 py-4" data-v-1a7e683c><p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3" data-v-1a7e683c>Estado</p><div class="flex flex-wrap items-center gap-3 mb-4" data-v-1a7e683c><button class="${s.ssrRenderClass([f.value.includes("pendiente")?"bg-amber-50 border-amber-200 text-amber-700":"bg-gray-50 border-gray-200 text-gray-400","flex items-center gap-2 px-4 py-2 rounded-full border transition-all"])}" data-v-1a7e683c><span class="w-2 h-2 rounded-full bg-amber-400" data-v-1a7e683c></span><span class="font-medium" data-v-1a7e683c>Pendientes</span><span class="text-sm" data-v-1a7e683c>${s.ssrInterpolate(N.value.pendiente)}</span></button><button class="${s.ssrRenderClass([f.value.includes("confirmada")?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-gray-50 border-gray-200 text-gray-400","flex items-center gap-2 px-4 py-2 rounded-full border transition-all"])}" data-v-1a7e683c><span class="w-2 h-2 rounded-full bg-emerald-400" data-v-1a7e683c></span><span class="font-medium" data-v-1a7e683c>Confirmadas</span><span class="text-sm" data-v-1a7e683c>${s.ssrInterpolate(N.value.confirmada)}</span></button><button class="${s.ssrRenderClass([f.value.includes("realizada")?"bg-blue-50 border-blue-200 text-blue-700":"bg-gray-50 border-gray-200 text-gray-400","flex items-center gap-2 px-4 py-2 rounded-full border transition-all"])}" data-v-1a7e683c><span class="w-2 h-2 rounded-full bg-blue-400" data-v-1a7e683c></span><span class="font-medium" data-v-1a7e683c>Realizadas</span><span class="text-sm" data-v-1a7e683c>${s.ssrInterpolate(N.value.realizada)}</span></button><button class="${s.ssrRenderClass([f.value.includes("cancelada")?"bg-red-50 border-red-200 text-red-700":"bg-gray-50 border-gray-200 text-gray-400","flex items-center gap-2 px-4 py-2 rounded-full border transition-all"])}" data-v-1a7e683c><span class="w-2 h-2 rounded-full bg-red-400" data-v-1a7e683c></span><span class="font-medium" data-v-1a7e683c>Canceladas</span><span class="text-sm" data-v-1a7e683c>${s.ssrInterpolate(N.value.cancelada)}</span></button></div><div class="flex items-center gap-6 text-xs font-medium text-gray-500" data-v-1a7e683c><div class="flex items-center gap-1.5" data-v-1a7e683c><span class="w-2 h-2 rounded-full bg-amber-400" data-v-1a7e683c></span> PENDIENTE </div><div class="flex items-center gap-1.5" data-v-1a7e683c><span class="w-2 h-2 rounded-full bg-emerald-400" data-v-1a7e683c></span> CONFIRMADA </div><div class="flex items-center gap-1.5" data-v-1a7e683c><span class="w-2 h-2 rounded-full bg-blue-400" data-v-1a7e683c></span> REALIZADA </div><div class="flex items-center gap-1.5" data-v-1a7e683c><span class="w-2 h-2 rounded-full bg-red-400" data-v-1a7e683c></span> CANCELADA </div></div></div><div class="flex-1 overflow-auto" style="${s.ssrRenderStyle({height:"calc(100vh - 320px)"})}" data-v-1a7e683c>`),r.unref(c)?l('<div class="flex items-center justify-center h-full" data-v-1a7e683c><div class="flex items-center gap-3 text-gray-500" data-v-1a7e683c><svg class="w-6 h-6 animate-spin" fill="none" viewBox="0 0 24 24" data-v-1a7e683c><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-1a7e683c></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-1a7e683c></path></svg> Cargando agenda... </div></div>'):(l(`<div class="min-w-max" data-v-1a7e683c><div class="sticky top-0 z-20 bg-white border-b border-gray-200 grid" style="${s.ssrRenderStyle({gridTemplateColumns:`70px repeat(${V.value.length}, 1fr)`})}" data-v-1a7e683c><div class="border-r border-gray-100" data-v-1a7e683c></div>\x3c!--[--\x3e`),s.ssrRenderList(V.value,e=>{l(`<div class="${s.ssrRenderClass([{"bg-violet-50/50":e.esHoy},"px-4 py-3 text-center border-r border-gray-100 last:border-r-0"])}" data-v-1a7e683c><p class="text-xs font-medium text-gray-400 uppercase tracking-wider" data-v-1a7e683c>${s.ssrInterpolate(e.diaSemana)}</p><p class="${s.ssrRenderClass([e.esHoy?"text-violet-600":"text-gray-800","text-2xl font-bold mt-1"])}" data-v-1a7e683c>${s.ssrInterpolate(e.numeroDia)}</p>`),e.esHoy?l('<div class="w-6 h-0.5 bg-violet-500 mx-auto mt-1 rounded-full" data-v-1a7e683c></div>'):l("\x3c!----\x3e"),l("</div>")}),l('\x3c!--]--\x3e</div><div class="relative" data-v-1a7e683c>'),null!==F.value?l(`<div class="absolute left-0 right-0 z-10 flex items-center pointer-events-none" style="${s.ssrRenderStyle({top:`${F.value}px`})}" data-v-1a7e683c><div class="flex items-center" data-v-1a7e683c><span class="px-1.5 py-0.5 bg-red-500 text-white text-xs font-bold rounded" data-v-1a7e683c>${s.ssrInterpolate(P.value.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}))}</span></div><div class="flex-1 h-0.5 bg-red-500" data-v-1a7e683c></div></div>`):l("\x3c!----\x3e"),l("\x3c!--[--\x3e"),s.ssrRenderList(H.value,e=>{l(`<div class="grid border-b border-gray-100" style="${s.ssrRenderStyle({gridTemplateColumns:`70px repeat(${V.value.length}, 1fr)`})}" data-v-1a7e683c><div class="px-3 py-2 text-xs font-medium text-gray-400 text-right border-r border-gray-100 h-11" data-v-1a7e683c>${s.ssrInterpolate(e)}</div>\x3c!--[--\x3e`),s.ssrRenderList(V.value,a=>{l(`<div class="${s.ssrRenderClass([{"bg-violet-50/20":a.esHoy},"relative border-r border-gray-100 last:border-r-0 h-11 hover:bg-violet-50/30 transition-colors cursor-pointer group"])}" data-v-1a7e683c>`),0===citasPorDiaHora(a.fecha,e).length?l('<div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity" data-v-1a7e683c><div class="w-6 h-6 rounded-full bg-violet-500/80 text-white flex items-center justify-center" data-v-1a7e683c><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" data-v-1a7e683c></path></svg></div></div>'):l("\x3c!----\x3e"),l("\x3c!--[--\x3e"),s.ssrRenderList(citasPorDiaHora(a.fecha,e),e=>{l(`<div role="button" tabindex="0"${s.ssrRenderAttr("aria-label",`Cita ${e.estado} de ${e.paciente_nombre||e.paciente?.nombre_completo||"paciente"}, ${formatearHora(e.hora_inicio)} a ${formatearHora(e.hora_fin)}`)} class="${s.ssrRenderClass([[getColorEstado(e.estado).bg,getColorEstado(e.estado).border],"absolute inset-x-1 top-0.5 p-2 rounded-lg border-l-4 cursor-pointer hover:shadow-md transition-all z-10 group/card"])}" style="${s.ssrRenderStyle({minHeight:"40px"})}" data-v-1a7e683c><div class="absolute top-0.5 right-0.5 flex items-center gap-0.5 opacity-0 group-hover/card:opacity-100 focus-within:opacity-100 transition-opacity z-20" data-v-1a7e683c>`),"pendiente"===e.estado?(l(`<button class="${s.ssrRenderClass([{"animate-pulse":k.value===e.id},"w-5 h-5 rounded-full bg-emerald-500 text-white flex items-center justify-center hover:bg-emerald-600 hover:scale-110 shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-1"])}"${s.ssrIncludeBooleanAttr(k.value===e.id)?" disabled":""}${s.ssrRenderAttr("title",k.value===e.id?"Confirmando...":"Confirmar cita")}${s.ssrRenderAttr("aria-label",`Confirmar cita de ${e.paciente_nombre||"paciente"}`)} type="button" data-v-1a7e683c>`),k.value===e.id?l('<svg class="w-2.5 h-2.5 animate-spin" fill="none" viewBox="0 0 24 24" data-v-1a7e683c><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-1a7e683c></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-1a7e683c></path></svg>'):l('<svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" data-v-1a7e683c><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" data-v-1a7e683c></path></svg>'),l("</button>")):l("\x3c!----\x3e"),"cancelada"!==e.estado&&"realizada"!==e.estado&&"completada"!==e.estado?l(`<button class="w-5 h-5 rounded-full bg-blue-500 text-white flex items-center justify-center hover:bg-blue-600 hover:scale-110 shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-1" title="Reprogramar cita"${s.ssrRenderAttr("aria-label",`Reprogramar cita de ${e.paciente_nombre||"paciente"}`)} type="button" data-v-1a7e683c><svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-1a7e683c></path></svg></button>`):l("\x3c!----\x3e"),"cancelada"!==e.estado&&"realizada"!==e.estado&&"completada"!==e.estado?l(`<button class="w-5 h-5 rounded-full bg-red-500 text-white flex items-center justify-center hover:bg-red-600 hover:scale-110 shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-1" title="Cancelar cita"${s.ssrRenderAttr("aria-label",`Cancelar cita de ${e.paciente_nombre||"paciente"}`)} type="button" data-v-1a7e683c><svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" data-v-1a7e683c><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" data-v-1a7e683c></path></svg></button>`):l("\x3c!----\x3e"),l(`</div><div class="pr-16" data-v-1a7e683c><p class="text-xs text-gray-500 font-medium" data-v-1a7e683c>${s.ssrInterpolate(formatearHora(e.hora_inicio))} - ${s.ssrInterpolate(formatearHora(e.hora_fin))}</p><p class="text-sm font-semibold text-gray-800 truncate mt-0.5" data-v-1a7e683c>${s.ssrInterpolate(e.paciente_nombre||e.paciente?.nombre_completo||"Sin paciente")}</p></div></div>`)}),l("\x3c!--]--\x3e</div>")}),l("\x3c!--]--\x3e</div>")}),l("\x3c!--]--\x3e</div></div>")),l("</div>"),l(s.ssrRenderComponent(n,{"is-open":x.value,"fecha-inicial":h.value||void 0,"hora-inicial":y.value||void 0,onCreated:e=>{x.value=!1,r.unref(v)()},onClose:e=>{x.value=!1,h.value=null,y.value=null}},null,o)),s.ssrRenderTeleport(l,e=>{w.value&&C.value?e(s.ssrRenderComponent(i,{"cita-id":C.value,onClose:e=>{w.value=!1,C.value=null},onCitaActualizada:e=>r.unref(v)(),onActualizado:e=>r.unref(v)()},null,o)):e("\x3c!----\x3e")},"body",!1,o),s.ssrRenderTeleport(l,e=>{R.value&&j.value?(e(`<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-cancelar-titulo" data-v-1a7e683c><div class="bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-modal-enter" data-v-1a7e683c><div class="px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-red-50 to-rose-50" data-v-1a7e683c><div class="flex items-center justify-between" data-v-1a7e683c><div data-v-1a7e683c><h2 id="modal-cancelar-titulo" class="text-lg font-semibold text-gray-900" data-v-1a7e683c>Cancelar Cita</h2><p class="text-sm text-gray-500 mt-0.5" data-v-1a7e683c>Esta acción no se puede deshacer</p></div><button class="w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-white transition-all focus:outline-none focus:ring-2 focus:ring-red-400" aria-label="Cerrar modal" data-v-1a7e683c><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-1a7e683c></path></svg></button></div></div><div class="p-6 space-y-5" data-v-1a7e683c><div class="bg-gray-50 rounded-xl p-4" data-v-1a7e683c><p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-3" data-v-1a7e683c>Resumen de la cita</p><div class="space-y-3" data-v-1a7e683c><div class="flex items-center gap-3" data-v-1a7e683c><div class="w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center" data-v-1a7e683c><svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" data-v-1a7e683c></path></svg></div><div data-v-1a7e683c><p class="font-medium text-gray-900" data-v-1a7e683c>${s.ssrInterpolate(j.value.paciente_nombre||j.value.paciente?.nombre_completo||"Paciente")}</p><p class="text-sm text-gray-500" data-v-1a7e683c>Paciente</p></div></div><div class="flex items-center gap-3" data-v-1a7e683c><div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center" data-v-1a7e683c><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-1a7e683c></path></svg></div><div data-v-1a7e683c><p class="font-medium text-gray-900" data-v-1a7e683c>${s.ssrInterpolate(formatearFecha(j.value.fecha_cita))}</p><p class="text-sm text-gray-500" data-v-1a7e683c>${s.ssrInterpolate(formatearHora(j.value.hora_inicio))} - ${s.ssrInterpolate(formatearHora(j.value.hora_fin))}</p></div></div></div></div><div data-v-1a7e683c><label for="motivo-cancelacion" class="block text-sm font-medium text-gray-700 mb-2" data-v-1a7e683c> Motivo de cancelación <span class="text-gray-400" data-v-1a7e683c>(opcional)</span></label><textarea id="motivo-cancelacion" rows="3" placeholder="Ej: Solicitud del paciente, reagendamiento..." class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500/30 focus:border-red-400 transition-all resize-none" data-v-1a7e683c>${s.ssrInterpolate(D.value)}</textarea></div><div class="flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-200" data-v-1a7e683c><svg class="w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20" data-v-1a7e683c><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-1a7e683c></path></svg><p class="text-sm text-amber-800" data-v-1a7e683c> Al cancelar esta cita, el paciente podría recibir una notificación y se actualizará el estado en el sistema. </p></div></div><div class="px-6 py-4 border-t border-gray-100 bg-gray-50 flex items-center justify-end gap-3" data-v-1a7e683c><button class="px-5 py-2.5 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300" data-v-1a7e683c> Volver </button><button${s.ssrIncludeBooleanAttr(null!==$.value)?" disabled":""} class="px-5 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-red-400" data-v-1a7e683c>`),$.value?e('<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24" data-v-1a7e683c><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-1a7e683c></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-1a7e683c></path></svg>'):e("\x3c!----\x3e"),e(` ${s.ssrInterpolate($.value?"Cancelando...":"Cancelar cita")}</button></div></div></div>`)):e("\x3c!----\x3e")},"body",!1,o),s.ssrRenderTeleport(l,e=>{M.value&&z.value?(e(`<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-reprogramar-titulo" data-v-1a7e683c><div class="bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-modal-enter" data-v-1a7e683c><div class="px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50" data-v-1a7e683c><div class="flex items-center justify-between" data-v-1a7e683c><div data-v-1a7e683c><h2 id="modal-reprogramar-titulo" class="text-lg font-semibold text-gray-900" data-v-1a7e683c>Reprogramar Cita</h2><p class="text-sm text-gray-500 mt-0.5" data-v-1a7e683c>${s.ssrInterpolate(z.value.paciente_nombre||z.value.paciente?.nombre_completo||"Paciente")}</p></div><button class="w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-white transition-all focus:outline-none focus:ring-2 focus:ring-blue-400" aria-label="Cerrar modal" data-v-1a7e683c><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-1a7e683c></path></svg></button></div></div><div class="p-6 space-y-5" data-v-1a7e683c><div class="bg-gray-50 rounded-xl p-4" data-v-1a7e683c><p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-2" data-v-1a7e683c>Cita actual</p><div class="flex items-center gap-3" data-v-1a7e683c><div class="w-10 h-10 rounded-lg bg-gray-200 flex items-center justify-center" data-v-1a7e683c><svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-1a7e683c></path></svg></div><div data-v-1a7e683c><p class="font-medium text-gray-900" data-v-1a7e683c>${s.ssrInterpolate(formatearFecha(z.value.fecha_cita))}</p><p class="text-sm text-gray-500" data-v-1a7e683c>${s.ssrInterpolate(formatearHora(z.value.hora_inicio))} - ${s.ssrInterpolate(formatearHora(z.value.hora_fin))}</p></div></div></div><div class="flex justify-center" data-v-1a7e683c><div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center" data-v-1a7e683c><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" data-v-1a7e683c></path></svg></div></div><div data-v-1a7e683c><label for="nueva-fecha" class="block text-sm font-medium text-gray-700 mb-2" data-v-1a7e683c>Nueva fecha</label><input id="nueva-fecha" type="date"${s.ssrRenderAttr("value",I.value)}${s.ssrRenderAttr("min",(new Date).toISOString().split("T")[0])} class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all" data-v-1a7e683c></div><div class="grid grid-cols-2 gap-4" data-v-1a7e683c><div data-v-1a7e683c><label for="nueva-hora-inicio" class="block text-sm font-medium text-gray-700 mb-2" data-v-1a7e683c>Hora inicio</label><select id="nueva-hora-inicio" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all" data-v-1a7e683c>\x3c!--[--\x3e`),s.ssrRenderList(U.value,a=>{e(`<option${s.ssrRenderAttr("value",a)} data-v-1a7e683c${s.ssrIncludeBooleanAttr(Array.isArray(L.value)?s.ssrLooseContain(L.value,a):s.ssrLooseEqual(L.value,a))?" selected":""}>${s.ssrInterpolate(a)}</option>`)}),e('\x3c!--]--\x3e</select></div><div data-v-1a7e683c><label for="nueva-hora-fin" class="block text-sm font-medium text-gray-700 mb-2" data-v-1a7e683c>Hora fin</label><select id="nueva-hora-fin" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all" data-v-1a7e683c>\x3c!--[--\x3e'),s.ssrRenderList(q.value,a=>{e(`<option${s.ssrRenderAttr("value",a)} data-v-1a7e683c${s.ssrIncludeBooleanAttr(Array.isArray(_.value)?s.ssrLooseContain(_.value,a):s.ssrLooseEqual(_.value,a))?" selected":""}>${s.ssrInterpolate(a)}</option>`)}),e(`\x3c!--]--\x3e</select></div></div></div><div class="px-6 py-4 border-t border-gray-100 bg-gray-50 flex items-center justify-end gap-3" data-v-1a7e683c><button class="px-5 py-2.5 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300" data-v-1a7e683c> Cancelar </button><button${s.ssrIncludeBooleanAttr(!I.value||!L.value||!_.value||null!==S.value)?" disabled":""} class="px-5 py-2.5 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-blue-400" data-v-1a7e683c>`),S.value?e('<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24" data-v-1a7e683c><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-1a7e683c></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-1a7e683c></path></svg>'):e("\x3c!----\x3e"),e(` ${s.ssrInterpolate(S.value?"Reprogramando...":"Confirmar")}</button></div></div></div>`)):e("\x3c!----\x3e")},"body",!1,o),s.ssrRenderTeleport(l,e=>{E.value?(e(`<div class="fixed bottom-6 right-6 z-[100] max-w-sm" role="alert" aria-live="polite" data-v-1a7e683c><div class="${s.ssrRenderClass([{"bg-emerald-50 border-emerald-200 text-emerald-800":"success"===B.value,"bg-red-50 border-red-200 text-red-800":"error"===B.value,"bg-blue-50 border-blue-200 text-blue-800":"info"===B.value},"flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg border"])}" data-v-1a7e683c><div class="${s.ssrRenderClass([{"bg-emerald-100":"success"===B.value,"bg-red-100":"error"===B.value,"bg-blue-100":"info"===B.value},"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"])}" data-v-1a7e683c>`),"success"===B.value?e('<svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20" data-v-1a7e683c><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" data-v-1a7e683c></path></svg>'):"error"===B.value?e('<svg class="w-5 h-5 text-red-600" fill="currentColor" viewBox="0 0 20 20" data-v-1a7e683c><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" data-v-1a7e683c></path></svg>'):e('<svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20" data-v-1a7e683c><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" data-v-1a7e683c></path></svg>'),e(`</div><p class="text-sm font-medium flex-1" data-v-1a7e683c>${s.ssrInterpolate(A.value)}</p><button class="w-6 h-6 rounded-full flex items-center justify-center hover:bg-black/5 transition-colors" aria-label="Cerrar notificación" data-v-1a7e683c><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1a7e683c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-1a7e683c></path></svg></button></div></div>`)):e("\x3c!----\x3e")},"body",!1,o),l("</div>")}}}),n=d.setup;d.setup=(e,a)=>{const t=r.useSSRContext();return(t.modules||(t.modules=new Set)).add("components/AgendaCalendario.vue"),n?n(e,a):void 0};const i=Object.assign(o(d,[["__scopeId","data-v-1a7e683c"]]),{__name:"AgendaCalendario"});export{i as _};
//# sourceMappingURL=AgendaCalendario-c_ky9932.mjs.map
