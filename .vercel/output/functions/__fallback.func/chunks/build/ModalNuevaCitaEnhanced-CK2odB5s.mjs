import{e,v as t,s as a}from"./server.mjs";import{a as o,u as l}from"./usePacientes-BPAABr51.mjs";import{u as r}from"./useSupabaseClient-DykwVqLQ.mjs";import{_ as n}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";function t$4(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}function o$3(){let e=[],t={addEventListener:(e,a,o,l)=>(e.addEventListener(a,o,l),t.add(()=>e.removeEventListener(a,o,l))),requestAnimationFrame(...e){let a=requestAnimationFrame(...e);t.add(()=>cancelAnimationFrame(a))},nextFrame(...e){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...e)})},setTimeout(...e){let a=setTimeout(...e);t.add(()=>clearTimeout(a))},microTask(...e){let a={current:!0};return t$4(()=>{a.current&&e[0]()}),t.add(()=>{a.current=!1})},style(e,t,a){let o=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:a}),this.add(()=>{Object.assign(e.style,{[t]:o})})},group(e){let t=o$3();return e(t),this.add(()=>t.dispose())},add:t=>(e.push(t),()=>{let a=e.indexOf(t);if(a>=0)for(let t of e.splice(a,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}var i;let s=Symbol("headlessui.useid"),d=0;const u=null!=(i=t.useId)?i:function(){return t.inject(s,()=>""+ ++d)()};function o$1(e){var t;if(null==e||null==e.value)return null;let a=null!=(t=e.value.$el)?t:e.value;return a instanceof Node?a:null}function u$5(e,t,...a){if(e in t){let o=t[e];return"function"==typeof o?o(...a):o}let o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,u$5),o}var p=Object.defineProperty,n$3=(e,t,a)=>(((e,t,a)=>{t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);let v=new class{constructor(){n$3(this,"current",this.detect()),n$3(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"server"}};function i$3(e){if(v.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(null!=e&&e.hasOwnProperty("value")){let t=o$1(e);if(t)return t.ownerDocument}}let f=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var h,x,y,w=((y=w||{})[y.First=1]="First",y[y.Previous=2]="Previous",y[y.Next=4]="Next",y[y.Last=8]="Last",y[y.WrapAround=16]="WrapAround",y[y.NoScroll=32]="NoScroll",y),k=((x=k||{})[x.Error=0]="Error",x[x.Overflow=1]="Overflow",x[x.Success=2]="Success",x[x.Underflow=3]="Underflow",x),V=((h=V||{})[h.Previous=-1]="Previous",h[h.Next=1]="Next",h);var N=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(N||{});var C=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(C||{});function S$1(e){null==e||e.focus({preventScroll:!0})}let $=["textarea","input"].join(",");function P(e,t,{sorted:a=!0,relativeTo:o=null,skipElements:l=[]}={}){var r;let n=null!=(r=Array.isArray(e)?e.length>0?e[0].ownerDocument:void 0:null==e?void 0:e.ownerDocument)?r:void 0,i=Array.isArray(e)?a?function(e,t=e=>e){return e.slice().sort((e,a)=>{let o=t(e),l=t(a);if(null===o||null===l)return 0;let r=o.compareDocumentPosition(l);return r&Node.DOCUMENT_POSITION_FOLLOWING?-1:r&Node.DOCUMENT_POSITION_PRECEDING?1:0})}(e):e:function(e=(void 0).body){return null==e?[]:Array.from(e.querySelectorAll(f)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e);l.length>0&&i.length>1&&(i=i.filter(e=>!l.includes(e))),o=null!=o?o:n.activeElement;let s,d=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,i.indexOf(o))-1;if(4&t)return Math.max(0,i.indexOf(o))+1;if(8&t)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=32&t?{preventScroll:!0}:{},v=0,h=i.length;do{if(v>=h||v+h<=0)return 0;let e=u+v;if(16&t)e=(e+h)%h;else{if(e<0)return 3;if(e>=h)return 1}s=i[e],null==s||s.focus(p),v+=d}while(s!==n.activeElement);return 6&t&&function(e){var t,a;return null!=(a=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,$))&&a}(s)&&s.select(),2}function t$3(){return/iPhone/gi.test((void 0).navigator.platform)||/Mac/gi.test((void 0).navigator.platform)&&(void 0).navigator.maxTouchPoints>0}function u$4(e,a,o){v.isServer||t.watchEffect(t=>{(void 0).addEventListener(e,a,o),t(()=>(void 0).removeEventListener(e,a,o))})}function w$3(e,a,o){v.isServer||t.watchEffect(t=>{(void 0).addEventListener(e,a,o),t(()=>(void 0).removeEventListener(e,a,o))})}function w$2(e,a,o=t.computed(()=>!0)){function a2(t,l){if(!o.value||t.defaultPrevented)return;let r=l(t);if(null===r||!r.getRootNode().contains(r))return;let n=function o2(e){return"function"==typeof e?o2(e()):Array.isArray(e)||e instanceof Set?e:[e]}(e);for(let e of n){if(null===e)continue;let a=e instanceof HTMLElement?e:o$1(e);if(null!=a&&a.contains(r)||t.composed&&t.composedPath().includes(a))return}return!function(e,t=0){var a;return e!==(null==(a=i$3(e))?void 0:a.body)&&u$5(t,{0:()=>e.matches(f),1(){let t=e;for(;null!==t;){if(t.matches(f))return!0;t=t.parentElement}return!1}})}(r,N.Loose)&&-1!==r.tabIndex&&t.preventDefault(),a(t,r)}let l=t.ref(null);u$4("pointerdown",e=>{var t,a;o.value&&(l.value=(null==(a=null==(t=e.composedPath)?void 0:t.call(e))?void 0:a[0])||e.target)},!0),u$4("mousedown",e=>{var t,a;o.value&&(l.value=(null==(a=null==(t=e.composedPath)?void 0:t.call(e))?void 0:a[0])||e.target)},!0),u$4("click",e=>{t$3()||/Android/gi.test((void 0).navigator.userAgent)||l.value&&(a2(e,()=>l.value),l.value=null)},!0),u$4("touchend",e=>a2(e,()=>e.target instanceof HTMLElement?e.target:null),!0),w$3("blur",e=>a2(e,()=>(void 0).document.activeElement instanceof HTMLIFrameElement?(void 0).document.activeElement:null),!0)}var _,S=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(S||{}),D=((_=D||{})[_.Unmount=0]="Unmount",_[_.Hidden=1]="Hidden",_);function A$2({visible:e=!0,features:t=0,ourProps:a,theirProps:o,...l}){var r;let n=j(o,a),i=Object.assign(l,{props:n});if(e||2&t&&n.static)return y$1(i);if(1&t){return u$5(null==(r=n.unmount)||r?0:1,{0:()=>null,1:()=>y$1({...l,props:{...n,hidden:!0,style:{display:"none"}}})})}return y$1(i)}function y$1({props:e,attrs:a,slots:o,slot:l,name:r}){var n,i;let{as:s,...d}=T$1(e,["unmount","static"]),u=null==(n=o.default)?void 0:n.call(o,l),p={};if(l){let e=!1,t=[];for(let[a,o]of Object.entries(l))"boolean"==typeof o&&(e=!0),!0===o&&t.push(a);e&&(p["data-headlessui-state"]=t.join(" "))}if("template"===s){if(u=b(null!=u?u:[]),Object.keys(d).length>0||Object.keys(a).length>0){let[e,...o]=null!=u?u:[];if(!function(e){return null!=e&&("string"==typeof e.type||"object"==typeof e.type||"function"==typeof e.type)}(e)||o.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${r} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(d).concat(Object.keys(a)).map(e=>e.trim()).filter((e,t,a)=>a.indexOf(e)===t).sort((e,t)=>e.localeCompare(t)).map(e=>`  - ${e}`).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join("\n")].join("\n"));let l=j(null!=(i=e.props)?i:{},d,p),n=t.cloneVNode(e,l,!0);for(let e in l)e.startsWith("on")&&(n.props||(n.props={}),n.props[e]=l[e]);return n}return Array.isArray(u)&&1===u.length?u[0]:u}return t.h(s,Object.assign({},d,p),{default:()=>u})}function b(e){return e.flatMap(e=>e.type===t.Fragment?b(e.children):[e])}function j(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},a={};for(let o of e)for(let e in o)e.startsWith("on")&&"function"==typeof o[e]?(null!=a[e]||(a[e]=[]),a[e].push(o[e])):t[e]=o[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(a).map(e=>[e,void 0])));for(let e in a)Object.assign(t,{[e](t,...o){let l=a[e];for(let e of l){if(t instanceof Event&&t.defaultPrevented)return;e(t,...o)}}});return t}function T$1(e,t=[]){let a=Object.assign({},e);for(let e of t)e in a&&delete a[e];return a}var A=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(A||{});let z=t.defineComponent({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup:(e,{slots:t,attrs:a})=>()=>{var o;let{features:l,...r}=e;return A$2({ourProps:{"aria-hidden":!(2&~l)||(null!=(o=r["aria-hidden"])?o:void 0),hidden:!(4&~l)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~l)&&!!(2&~l)&&{display:"none"}}},theirProps:r,slot:{},attrs:a,slots:t,name:"Hidden"})}}),H=Symbol("Context");var U=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(U||{});function l$1(){return t.inject(H,null)}var O,F=((O=F||{}).Space=" ",O.Enter="Enter",O.Escape="Escape",O.Backspace="Backspace",O.Delete="Delete",O.ArrowLeft="ArrowLeft",O.ArrowUp="ArrowUp",O.ArrowRight="ArrowRight",O.ArrowDown="ArrowDown",O.Home="Home",O.End="End",O.PageUp="PageUp",O.PageDown="PageDown",O.Tab="Tab",O);let R=[];function E$1(e,a,o,l){v.isServer||t.watchEffect(t=>{(e=null!=e?e:void 0).addEventListener(a,o,l),t(()=>e.removeEventListener(a,o,l))})}var I=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(I||{});function B(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let a of e.value){let e=o$1(a);e instanceof HTMLElement&&t.add(e)}return t}var q=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(q||{});let W=Object.assign(t.defineComponent({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:t.ref(new Set)}},inheritAttrs:!1,setup(e,{attrs:a,slots:o,expose:l}){let r=t.ref(null);l({el:r,$el:r});let n=t.computed(()=>i$3(r)),i=t.ref(!1);!function({ownerDocument:e},a){!function(e){let a=t.ref(R.slice());t.watch([e],([e],[t])=>{!0===t&&!1===e?t$4(()=>{a.value.splice(0)}):!1===t&&!0===e&&(a.value=R.slice())},{flush:"post"})}(a)}({ownerDocument:n},t.computed(()=>i.value&&Boolean(16&e.features)));let s=function({ownerDocument:e,container:a,initialFocus:o}){let l=t.ref(null);return t.ref(!1),l}({ownerDocument:n,container:r,initialFocus:t.computed(()=>e.initialFocus)},t.computed(()=>i.value&&Boolean(2&e.features)));!function({ownerDocument:e,container:t,containers:a,previousActiveElement:o},l){var r;E$1(null==(r=e.value)?void 0:r.defaultView,"focus",e=>{if(!l.value)return;let r=B(a);o$1(t)instanceof HTMLElement&&r.add(o$1(t));let n=o.value;if(!n)return;let i=e.target;i&&i instanceof HTMLElement?N$2(r,i)?(o.value=i,S$1(i)):(e.preventDefault(),e.stopPropagation(),S$1(n)):S$1(o.value)},!0)}({ownerDocument:n,container:r,containers:e.containers,previousActiveElement:s},t.computed(()=>i.value&&Boolean(8&e.features)));let d=function(){let e=t.ref(0);return w$3("keydown",t=>{"Tab"===t.key&&(e.value=t.shiftKey?1:0)}),e}();function a2(e){let t=o$1(r);t&&u$5(d.value,{[I.Forwards]:()=>{P(t,w.First,{skipElements:[e.relatedTarget]})},[I.Backwards]:()=>{P(t,w.Last,{skipElements:[e.relatedTarget]})}})}let u=t.ref(!1);function F2(e){"Tab"===e.key&&(u.value=!0,requestAnimationFrame(()=>{u.value=!1}))}function H2(t){if(!i.value)return;let a=B(e.containers);o$1(r)instanceof HTMLElement&&a.add(o$1(r));let o=t.relatedTarget;o instanceof HTMLElement&&"true"!==o.dataset.headlessuiFocusGuard&&(N$2(a,o)||(u.value?P(o$1(r),u$5(d.value,{[I.Forwards]:()=>w.Next,[I.Backwards]:()=>w.Previous})|w.WrapAround,{relativeTo:t.target}):t.target instanceof HTMLElement&&S$1(t.target)))}return()=>{let l={ref:r,onKeydown:F2,onFocusout:H2},{features:n,initialFocus:i,containers:s,...d}=e;return t.h(t.Fragment,[Boolean(4&n)&&t.h(z,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:a2,features:A.Focusable}),A$2({ourProps:l,theirProps:{...a,...d},slot:{},attrs:a,slots:o,name:"FocusTrap"}),Boolean(4&n)&&t.h(z,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:a2,features:A.Focusable})])}}}),{features:q});function N$2(e,t){for(let a of e)if(a.contains(t))return!0;return!1}function c(){let e;return{before({doc:t}){var a;let o=t.documentElement;e=(null!=(a=t.defaultView)?a:void 0).innerWidth-o.clientWidth},after({doc:t,d:a}){let o=t.documentElement,l=o.clientWidth-o.offsetWidth,r=e-l;a.style(o,"paddingRight",`${r}px`)}}}function m(e){let t={};for(let a of e)Object.assign(t,a(t));return t}let Y=function(e,t){let a=e(),o=new Set;return{getSnapshot:()=>a,subscribe:e=>(o.add(e),()=>o.delete(e)),dispatch(e,...l){let r=t[e].call(a,...l);r&&(a=r,o.forEach(e=>e()))}}}(()=>new Map,{PUSH(e,t){var a;let o=null!=(a=this.get(e))?a:{doc:e,count:0,d:o$3(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let a=this.get(e);return a&&(a.count--,a.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:a}){let o={doc:e,d:t,meta:m(a)},l=[t$3()?{before({doc:e,d:t,meta:a}){function a2(e){return a.containers.flatMap(e=>e()).some(t=>t.contains(e))}t.microTask(()=>{var a;if("auto"!==(void 0).getComputedStyle(e.documentElement).scrollBehavior){let a=o$3();a.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>a.dispose()))}let o=null!=(a=(void 0).scrollY)?a:(void 0).pageYOffset,l=null;t.addEventListener(e,"click",t=>{if(t.target instanceof HTMLElement)try{let a=t.target.closest("a");if(!a)return;let{hash:o}=new URL(a.href),r=e.querySelector(o);r&&!a2(r)&&(l=r)}catch{}},!0),t.addEventListener(e,"touchstart",e=>{if(e.target instanceof HTMLElement)if(a2(e.target)){let a=e.target;for(;a.parentElement&&a2(a.parentElement);)a=a.parentElement;t.style(a,"overscrollBehavior","contain")}else t.style(e.target,"touchAction","none")}),t.addEventListener(e,"touchmove",e=>{if(e.target instanceof HTMLElement){if("INPUT"===e.target.tagName)return;if(a2(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}},{passive:!1}),t.add(()=>{var e;let t=null!=(e=(void 0).scrollY)?e:(void 0).pageYOffset;o!==t&&(void 0).scrollTo(0,o),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{},c(),{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];l.forEach(({before:e})=>null==e?void 0:e(o)),l.forEach(({after:e})=>null==e?void 0:e(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function d$1(e,a,o){let l=function(e){return t.shallowRef(e.getSnapshot())}(Y),r=t.computed(()=>{let t=e.value?l.value.get(e.value):void 0;return!!t&&t.count>0});return t.watch([e,a],([e,t],[a],l)=>{if(!e||!t)return;Y.dispatch("PUSH",e,o);let r=!1;l(()=>{r||(Y.dispatch("POP",null!=a?a:e,o),r=!0)})},{immediate:!0}),r}Y.subscribe(()=>{let e=Y.getSnapshot(),t=new Map;for(let[a]of e)t.set(a,a.documentElement.style.overflow);for(let a of e.values()){let e="hidden"===t.get(a.doc),o=0!==a.count;(o&&!e||!o&&e)&&Y.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),0===a.count&&Y.dispatch("TEARDOWN",a)}});let G=new Map,K=new Map;function E(e,a=t.ref(!0)){t.watchEffect(t=>{var o;if(!a.value)return;let l=o$1(e);if(!l)return;t(function(){var e;if(!l)return;let t=null!=(e=K.get(l))?e:1;if(1===t?K.delete(l):K.set(l,t-1),1!==t)return;let a=G.get(l);a&&(null===a["aria-hidden"]?l.removeAttribute("aria-hidden"):l.setAttribute("aria-hidden",a["aria-hidden"]),l.inert=a.inert,G.delete(l))});let r=null!=(o=K.get(l))?o:0;K.set(l,r+1),0===r&&(G.set(l,{"aria-hidden":l.getAttribute("aria-hidden"),inert:l.inert}),l.setAttribute("aria-hidden","true"),l.inert=!0)})}let X=Symbol("ForcePortalRootContext");let J=t.defineComponent({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup:(e,{slots:a,attrs:o})=>(t.provide(X,e.force),()=>{let{force:t,...l}=e;return A$2({theirProps:l,ourProps:{},slot:{},slots:a,attrs:o,name:"ForcePortalRoot"})})}),Z=Symbol("StackContext");var ee=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(ee||{});function R$1({type:e,enabled:a,element:o,onUpdate:l}){let r=t.inject(Z,()=>{});t.provide(Z,function(...e){null==l||l(...e),r(...e)})}let te=Symbol("DescriptionContext");t.defineComponent({name:"Description",props:{as:{type:[Object,String],default:"p"},id:{type:String,default:null}},setup(e,{attrs:a,slots:o}){var l;let r=null!=(l=e.id)?l:`headlessui-description-${u()}`,n=function(){let e=t.inject(te,null);if(null===e)throw new Error("Missing parent");return e}();return()=>{let{name:l="Description",slot:i=t.ref({}),props:s={}}=n,{...d}=e;return A$2({ourProps:{...Object.entries(s).reduce((e,[a,o])=>Object.assign(e,{[a]:t.unref(o)}),{}),id:r},theirProps:d,slot:i.value,attrs:a,slots:o,name:l})}}});const ae=new WeakMap;function M(e,t){let a=t(function(e){var t;return null!=(t=ae.get(e))?t:0}(e));return a<=0?ae.delete(e):ae.set(e,a),a}let oe=t.defineComponent({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:a,attrs:o}){let l=t.ref(null);t.computed(()=>i$3(l));let r=t.inject(X,!1),n=t.inject(re,null),i=t.ref(!0===r||null==n?function(e){let t=i$3(e);if(!t){if(null===e)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let a=t.getElementById("headlessui-portal-root");if(a)return a;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)}(l.value):n.resolveTarget());i.value&&M(i.value,e=>e+1);let s=t.ref(!1);t.watchEffect(()=>{r||null!=n&&(i.value=n.resolveTarget())});let d=t.inject(le,null),u=!1;return t.getCurrentInstance(),t.watch(l,()=>{if(u||!d)return;o$1(l)&&(u=!0)}),()=>{if(!s.value||null===i.value)return null;let r={ref:l,"data-headlessui-portal":""};return t.h(t.Teleport,{to:i.value},A$2({ourProps:r,theirProps:e,slot:{},attrs:o,slots:a,name:"Portal"}))}}}),le=Symbol("PortalParentContext");let re=Symbol("PortalGroupContext"),ne=t.defineComponent({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:a,slots:o}){let l=t.reactive({resolveTarget:()=>e.target});return t.provide(re,l),()=>{let{target:t,...l}=e;return A$2({theirProps:l,ourProps:{},slot:{},attrs:a,slots:o,name:"PortalGroup"})}}});var ie,se=((ie=se||{})[ie.Open=0]="Open",ie[ie.Closed=1]="Closed",ie);let ce=Symbol("DialogContext");function T(e){let a=t.inject(ce,null);if(null===a){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,T),t}return a}let de="DC8F892D-2EBD-447C-A4C8-A03058436FF4",ue=t.defineComponent({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:de},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:a,attrs:o,slots:l,expose:r}){var n,i;let s=null!=(n=e.id)?n:`headlessui-dialog-${u()}`,d=t.ref(!1),p=!1,v=t.computed(()=>"dialog"===e.role||"alertdialog"===e.role?e.role:(p||(p=!0,console.warn(`Invalid role [${v}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),f=t.ref(0),h=l$1(),x=t.computed(()=>e.open===de&&null!==h?(h.value&U.Open)===U.Open:e.open),y=t.ref(null),w=t.computed(()=>i$3(y));if(r({el:y,$el:y}),e.open===de&&null===h)throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if("boolean"!=typeof x.value)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${x.value===de?void 0:e.open}`);let k=t.computed(()=>d.value&&x.value?0:1),V=t.computed(()=>0===k.value),N=t.computed(()=>f.value>1),C=null!==t.inject(ce,null),[$,_]=function(){let e=t.inject(le,null),a=t.ref([]);function r2(t){let o=a.value.indexOf(t);-1!==o&&a.value.splice(o,1),e&&e.unregister(t)}let o={register:function(t){return a.value.push(t),e&&e.register(t),()=>r2(t)},unregister:r2,portals:a};return[a,t.defineComponent({name:"PortalWrapper",setup:(e,{slots:a})=>(t.provide(le,o),()=>{var e;return null==(e=a.default)?void 0:e.call(a)})})]}(),{resolveContainers:D,mainTreeNodeRef:H,MainTreeNode:O}=function({defaultContainers:e=[],portals:a,mainTreeNodeRef:o}={}){let l=t.ref(null),r=i$3(l);function u2(){var t,o,n;let i=[];for(let t of e)null!==t&&(t instanceof HTMLElement?i.push(t):"value"in t&&t.value instanceof HTMLElement&&i.push(t.value));if(null!=a&&a.value)for(let e of a.value)i.push(e);for(let e of null!=(t=null==r?void 0:r.querySelectorAll("html > *, body > *"))?t:[])e!==(void 0).body&&e!==(void 0).head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(e.contains(o$1(l))||e.contains(null==(n=null==(o=o$1(l))?void 0:o.getRootNode())?void 0:n.host)||i.some(t=>e.contains(t))||i.push(e));return i}return{resolveContainers:u2,contains:e=>u2().some(t=>t.contains(e)),mainTreeNodeRef:l,MainTreeNode:()=>null!=o?null:t.h(z,{features:A.Hidden,ref:l})}}({portals:$,defaultContainers:[t.computed(()=>{var e;return null!=(e=ae.panelRef.value)?e:y.value})]}),R=t.computed(()=>N.value?"parent":"leaf"),I=t.computed(()=>null!==h&&(h.value&U.Closing)===U.Closing),q=t.computed(()=>!C&&!I.value&&V.value),Y=t.computed(()=>{var e,t,a;return null!=(a=Array.from(null!=(t=null==(e=w.value)?void 0:e.querySelectorAll("body > *"))?t:[]).find(e=>"headlessui-portal-root"!==e.id&&(e.contains(o$1(H))&&e instanceof HTMLElement)))?a:null});E(Y,q);let G=t.computed(()=>!!N.value||V.value),K=t.computed(()=>{var e,t,a;return null!=(a=Array.from(null!=(t=null==(e=w.value)?void 0:e.querySelectorAll("[data-headlessui-portal]"))?t:[]).find(e=>e.contains(o$1(H))&&e instanceof HTMLElement))?a:null});E(K,G),R$1({type:"Dialog",enabled:t.computed(()=>0===k.value),element:y,onUpdate:(e,t)=>{if("Dialog"===t)return u$5(e,{[ee.Add]:()=>f.value+=1,[ee.Remove]:()=>f.value-=1})}});let X=function({slot:e=t.ref({}),name:a="Description",props:o={}}={}){let l=t.ref([]);return t.provide(te,{register:function(e){return l.value.push(e),()=>{let t=l.value.indexOf(e);-1!==t&&l.value.splice(t,1)}},slot:e,name:a,props:o}),t.computed(()=>l.value.length>0?l.value.join(" "):void 0)}({name:"DialogDescription",slot:t.computed(()=>({open:x.value}))}),Z=t.ref(null),ae={titleId:Z,panelRef:t.ref(null),dialogState:k,setTitleId(e){Z.value!==e&&(Z.value=e)},close(){a("close",!1)}};t.provide(ce,ae);let re=t.computed(()=>!(!V.value||N.value));w$2(D,(e,a)=>{e.preventDefault(),ae.close(),t.nextTick(()=>null==a?void 0:a.focus())},re);let ie=t.computed(()=>!(N.value||0!==k.value));E$1(null==(i=w.value)?void 0:i.defaultView,"keydown",e=>{ie.value&&(e.defaultPrevented||e.key===F.Escape&&(e.preventDefault(),e.stopPropagation(),ae.close()))});let se=t.computed(()=>!(I.value||0!==k.value||C));return d$1(w,se,e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],D]}}),t.watchEffect(e=>{if(0!==k.value)return;let t=o$1(y);if(!t)return;let a=new ResizeObserver(e=>{for(let t of e){let e=t.target.getBoundingClientRect();0===e.x&&0===e.y&&0===e.width&&0===e.height&&ae.close()}});a.observe(t),e(()=>a.disconnect())}),()=>{let{open:a,initialFocus:r,...n}=e,i={...o,ref:y,id:s,role:v.value,"aria-modal":0===k.value||void 0,"aria-labelledby":Z.value,"aria-describedby":X.value},d={open:0===k.value};return t.h(J,{force:!0},()=>[t.h(oe,()=>t.h(ne,{target:y.value},()=>t.h(J,{force:!1},()=>t.h(W,{initialFocus:r,containers:D,features:V.value?u$5(R.value,{parent:W.features.RestoreFocus,leaf:W.features.All&~W.features.FocusLock}):W.features.None},()=>t.h(_,{},()=>A$2({ourProps:i,theirProps:{...n,...o},slot:d,attrs:o,slots:l,visible:0===k.value,features:S.RenderStrategy|S.Static,name:"Dialog"})))))),t.h(O)])}}});t.defineComponent({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:a}){var o;let l=null!=(o=e.id)?o:`headlessui-dialog-overlay-${u()}`,r=T("DialogOverlay");function n2(e){e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),r.close())}return()=>{let{...o}=e;return A$2({ourProps:{id:l,"aria-hidden":!0,onClick:n2},theirProps:o,slot:{open:0===r.dialogState.value},attrs:t,slots:a,name:"DialogOverlay"})}}}),t.defineComponent({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:a,slots:o,expose:l}){var r;let n=null!=(r=e.id)?r:`headlessui-dialog-backdrop-${u()}`,i=T("DialogBackdrop"),s=t.ref(null);return l({el:s,$el:s}),()=>{let{...l}=e,r={id:n,ref:s,"aria-hidden":!0};return t.h(J,{force:!0},()=>t.h(oe,()=>A$2({ourProps:r,theirProps:{...a,...l},slot:{open:0===i.dialogState.value},attrs:a,slots:o,name:"DialogBackdrop"})))}}});let pe=t.defineComponent({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:a,expose:o}){var l;let r=null!=(l=e.id)?l:`headlessui-dialog-panel-${u()}`,n=T("DialogPanel");function u2(e){e.stopPropagation()}return o({el:n.panelRef,$el:n.panelRef}),()=>{let{...o}=e;return A$2({ourProps:{id:r,ref:n.panelRef,onClick:u2},theirProps:o,slot:{open:0===n.dialogState.value},attrs:t,slots:a,name:"DialogPanel"})}}}),ve=t.defineComponent({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:null}},setup(e,{attrs:t,slots:a}){var o;let l=null!=(o=e.id)?o:`headlessui-dialog-title-${u()}`,r=T("DialogTitle");return()=>{let{...o}=e;return A$2({ourProps:{id:l},theirProps:o,slot:{open:0===r.dialogState.value},attrs:t,slots:a,name:"DialogTitle"})}}});function g(e=""){return e.split(/\s+/).filter(e=>e.length>1)}let fe=Symbol("TransitionContext");var me,be=((me=be||{}).Visible="visible",me.Hidden="hidden",me);let he=Symbol("NestingContext");function L(e){return"children"in e?L(e.children):e.value.filter(({state:e})=>"visible"===e).length>0}function Q(e){let a=t.ref([]),o=t.ref(!1);function s3(t,l=D.Hidden){let r=a.value.findIndex(({id:e})=>e===t);-1!==r&&(u$5(l,{[D.Unmount](){a.value.splice(r,1)},[D.Hidden](){a.value[r].state="hidden"}}),!L(a)&&o.value&&(null==e||e()))}return{children:a,register:function(e){let t=a.value.find(({id:t})=>t===e);return t?"visible"!==t.state&&(t.state="visible"):a.value.push({id:e,state:"visible"}),()=>s3(e,D.Unmount)},unregister:s3}}let xe=S.RenderStrategy,ge=t.defineComponent({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:a,attrs:o,slots:l,expose:r}){let n=t.ref(0);function r2(){n.value|=U.Opening,a("beforeEnter")}function l2(){n.value&=~U.Opening,a("afterEnter")}function f2(){n.value|=U.Closing,a("beforeLeave")}function S$12(){n.value&=~U.Closing,a("afterLeave")}if(null===t.inject(fe,null)&&null!==l$1())return()=>t.h(we,{...e,onBeforeEnter:r2,onAfterEnter:l2,onBeforeLeave:f2,onAfterLeave:S$12},l);let i=t.ref(null),s=t.computed(()=>e.unmount?D.Unmount:D.Hidden);r({el:i,$el:i});let{show:d,appear:p}=function(){let e=t.inject(fe,null);if(null===e)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}(),{register:f,unregister:h}=function(){let e=t.inject(he,null);if(null===e)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}(),x=t.ref(d.value?"visible":"hidden"),y=u(),w=Q(()=>{"hidden"!==x.value&&(x.value="hidden",h(y),S$12())});t.watchEffect(()=>{if(s.value===D.Hidden&&y){if(d.value&&"visible"!==x.value)return void(x.value="visible");u$5(x.value,{hidden:()=>h(y),visible:()=>f(y)})}});let k=g(e.enter),V=g(e.enterFrom);return g(e.enterTo),g(e.entered),g(e.leave),g(e.leaveFrom),g(e.leaveTo),t.provide(he,w),function(e){t.provide(H,e)}(t.computed(()=>u$5(x.value,{visible:U.Open,hidden:U.Closed})|n.value)),()=>{let{appear:a,show:r,enter:n,enterFrom:s,enterTo:u,entered:f,leave:h,leaveFrom:y,leaveTo:w,...N}=e,C={ref:i};return A$2({theirProps:{...N,...p.value&&d.value&&v.isServer?{class:t.normalizeClass([o.class,N.class,...k,...V])}:{}},ourProps:C,slot:{},slots:l,attrs:o,features:xe,visible:"visible"===x.value,name:"TransitionChild"})}}}),ye=ge,we=t.defineComponent({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:a,attrs:o,slots:l}){let r=l$1(),n=t.computed(()=>null===e.show&&null!==r?(r.value&U.Open)===U.Open:e.show);t.watchEffect(()=>{if(![!0,!1].includes(n.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let i=t.ref(n.value?"visible":"hidden"),s=Q(()=>{i.value="hidden"}),d=t.ref(!0),u={show:n,appear:t.computed(()=>e.appear||!d.value)};return t.provide(he,s),t.provide(fe,u),()=>{let r=T$1(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),n={unmount:e.unmount};return A$2({ourProps:{...n,as:"template"},theirProps:{},slot:{},slots:{...l,default:()=>[t.h(ye,{onBeforeEnter:()=>a("beforeEnter"),onAfterEnter:()=>a("afterEnter"),onBeforeLeave:()=>a("beforeLeave"),onAfterLeave:()=>a("afterLeave"),...o,...n,...r},l.default)]},attrs:{},features:xe,visible:"visible"===i.value,name:"Transition"})}}});const ke={pending:["confirmed","canceled"],confirmed:["completed","canceled"],completed:[],canceled:[]},Ve={pendiente:"pending",confirmada:"confirmed",realizada:"completed",completada:"completed",cancelada:"canceled"},Ne={pending:"pendiente",confirmed:"confirmada",completed:"realizada",canceled:"cancelada"};function formatValidationError(e){if(e.valid)return"";let t=e.error||"Error de validaciÃ³n desconocido";if(e.details){const a=e.details;if(a.conflictingAppointment){const e=a.conflictingAppointment;t+=`\n\nCita existente:\n- Hora: ${e.hora_inicio} - ${e.hora_fin}`}a.duration&&(t+=`\n\nDuraciÃ³n: ${a.duration} minutos`)}return t}function useAgendaEnhanced(){const a=r();e();const l=t.ref([]),n=t.ref(!1),i=t.ref(null),s=t.ref(null),d=t.ref(new Map);async function validateAppointment(e){try{o.debug("api_error","Validando cita",e);const t=await $fetch("/api/appointments/validate-conflict",{method:"POST",body:e});return t.valid?(o.info("api_error","ValidaciÃ³n exitosa"),{valid:!0}):(o.warn("conflict","ValidaciÃ³n fallida",t),t)}catch(e){return o.error("api_error","Error validando cita",e),{valid:!1,error:e.data?.message||e.message||"Error al validar cita",errorCode:"VALIDATION_ERROR"}}}async function updateAppointment(e){try{n.value=!0,i.value=null;const t=e.id,a=l.value.findIndex(e=>e.id===t);if(-1===a)throw new Error("Cita no encontrada");const r={...l.value[a]};d.value.set(t,r);const u={};e.fecha_cita&&(u.fecha_cita=e.fecha_cita),e.hora_inicio&&(u.hora_inicio=e.hora_inicio),e.hora_fin&&(u.hora_fin=e.hora_fin),e.estado&&(u.estado=e.estado),e.modalidad&&(u.modalidad=e.modalidad),l.value[a]={...l.value[a],...u},o.optimisticUpdate(t,"update");if(e.fecha_cita||e.hora_inicio||e.hora_fin){const n={id:t,fecha_cita:e.fecha_cita||r.fecha_cita,hora_inicio:e.hora_inicio||r.hora_inicio,hora_fin:e.hora_fin||r.hora_fin,terapeuta_id:r.terapeuta_id,estado:e.estado||r.estado,previous_estado:r.estado},s=await validateAppointment(n);if(!s.valid){l.value[a]=r,d.value.delete(t);const e=formatValidationError(s);return i.value=e,o.rollback(t,e),{success:!1,error:e}}}const p=await $fetch(`/api/appointments/${t}/update`,{method:"PATCH",body:e});if(!p.success)throw l.value[a]=r,d.value.delete(t),o.rollback(t,p.message||"Error desconocido"),new Error(p.message||"Error al actualizar cita");const v=p.data;return l.value[a]=v,d.value.delete(t),o.update(t,e),s.value=new Date,{success:!0,data:v}}catch(t){const a=t.data?.message||t.message||"Error al actualizar la cita";i.value=a,o.error("api_error",a,t);const r=e.id,n=d.value.get(r);if(n){const e=l.value.findIndex(e=>e.id===r);-1!==e&&(l.value[e]=n),d.value.delete(r),o.rollback(r,a)}return{success:!1,error:a}}finally{n.value=!1}}async function loadAppointmentsInRange(e,t){try{n.value=!0,i.value=null;const{data:r,error:d}=await a.from("vista_agenda_terapeutas").select("*").gte("fecha_cita",e).lte("fecha_cita",t).order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0});if(d)throw d;l.value=r||[],o.loadRange(e,t,l.value.length),s.value=new Date}catch(e){const t=e.message||"Error al cargar citas";i.value=t,o.error("api_error",t,e)}finally{n.value=!1}}const u=t.computed(()=>null!==i.value),p=t.computed(()=>n.value),v=t.computed(()=>{if(!s.value)return null;const e=(new Date).getTime()-s.value.getTime(),t=Math.floor(e/1e3);if(t<60)return`Actualizado hace ${t}s`;const a=Math.floor(t/60);if(a<60)return`Actualizado hace ${a}m`;return`Actualizado hace ${Math.floor(a/60)}h`}),f=t.computed(()=>{const e=(new Date).toISOString().split("T")[0];return l.value.filter(t=>t.fecha_cita===e)}),h=t.computed(()=>l.value.filter(e=>"pendiente"===e.estado)),x=t.computed(()=>l.value.filter(e=>"completada"===e.estado||"realizada"===e.estado)),y=t.computed(()=>l.value.filter(e=>{if(!e.bono)return!1;const t=e.bono.sesiones_restantes||0;return t>0&&t<=2}));return{citas:l,loading:p,error:u,lastUpdateTime:v,citasDelDia:f,citasPendientes:h,citasCompletadas:x,citasConBonoProximoAgotar:y,validateAppointment:validateAppointment,createAppointment:async function(e){try{n.value=!0,i.value=null,o.clickCreate(e.fecha_cita,e.hora_inicio);const t=await validateAppointment(e);if(!t.valid){const e=formatValidationError(t);return i.value=e,{success:!1,error:e}}const a=await $fetch("/api/appointments/create",{method:"POST",body:e});if(!a.success)throw new Error(a.message||"Error al crear cita");const r=a.data;return l.value.push(r),o.create(r.id,e.fecha_cita,e.hora_inicio),s.value=new Date,{success:!0,data:r}}catch(e){const t=e.data?.message||e.message||"Error al crear la cita";return i.value=t,o.error("api_error",t,e),{success:!1,error:t}}finally{n.value=!1}},updateAppointment:updateAppointment,moveAppointment:async function(e,t,a,r){const n=l.value.find(t=>t.id===e);if(!n)return{success:!1,error:"Cita no encontrada"};let i=r;if(!i){const[e,t]=n.hora_inicio.split(":").map(Number),[o,l]=n.hora_fin.split(":").map(Number),r=60*o+l-(60*e+t),[s,d]=a.split(":").map(Number),u=60*s+d+r,p=Math.floor(u/60),v=u%60;i=`${String(p).padStart(2,"0")}:${String(v).padStart(2,"0")}`}o.dragStart(e,{date:n.fecha_cita,time:n.hora_inicio});const s=await updateAppointment({id:e,fecha_cita:t,hora_inicio:a,hora_fin:i});return o.dragEnd(e,{date:t,time:a},s.success),s.success&&o.move(e,{date:n.fecha_cita,time:n.hora_inicio},{date:t,time:a}),s},changeAppointmentStatus:async function(e,t){const a=l.value.find(t=>t.id===e);if(!a)return{success:!1,error:"Cita no encontrada"};const r=function(e,t){const a=Ve[t]||t,o=ke[Ve[e]||e];if(!o)return{valid:!1,error:`Estado inicial invÃ¡lido: ${e}`,errorCode:"INVALID_INITIAL_STATE"};if(!o.includes(a))return{valid:!1,error:`No se puede cambiar de "${e}" a "${t}". Transiciones permitidas: ${o.map(e=>Ne[e]).join(", ")}`,errorCode:"INVALID_STATE_TRANSITION",details:{from:e,to:t,allowedTransitions:o}};return{valid:!0}}(a.estado,t);if(!r.valid){const e=r.error||"TransiciÃ³n de estado invÃ¡lida";return i.value=e,{success:!1,error:e}}return o.statusChange(e,a.estado,t),await updateAppointment({id:e,estado:t})},loadAppointmentsInRange:loadAppointmentsInRange,loadTerapeutaAppointments:async function(){try{n.value=!0,i.value=null;const{data:e,error:t}=await a.from("vista_agenda_terapeutas").select("*").order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0});if(t)throw t;l.value=e||[],o.info("load_range",`Citas del terapeuta cargadas: ${l.value.length}`),s.value=new Date}catch(e){const t=e.message||"Error al cargar citas";i.value=t,o.error("api_error",t,e)}finally{n.value=!1}},loadAllAppointments:async function(){try{n.value=!0,i.value=null;const{data:e,error:t}=await a.from("vista_agenda_terapeutas").select("*").order("fecha_cita",{ascending:!0}).order("hora_inicio",{ascending:!0});if(t)throw t;l.value=e||[],o.info("load_range",`Todas las citas cargadas (coordinadora): ${l.value.length}`),s.value=new Date}catch(e){const t=e.message||"Error al cargar citas";i.value=t,o.error("api_error",t,e)}finally{n.value=!1}},refreshAppointments:async function(){if(0===l.value.length)return;const e=l.value.map(e=>e.fecha_cita),t=Math.min(...e.map(e=>new Date(e).getTime())),a=Math.max(...e.map(e=>new Date(e).getTime())),o=new Date(t).toISOString().split("T")[0],r=new Date(a).toISOString().split("T")[0];await loadAppointmentsInRange(o,r)},clearError:()=>{i.value=null}}}const Ce=t.defineComponent({__name:"ModalNuevaCitaEnhanced",__ssrInlineRender:!0,props:{isOpen:{type:Boolean},fechaInicial:{},horaInicial:{},horaFinal:{}},emits:["close","created"],setup(e,{emit:r}){const n=e,i=r,{pacientes:s,loading:d,hasPacientes:u,searchQuery:p,createPaciente:v,loadAllPacientes:f,clearSearch:h}=l(),{createAppointment:x,validateAppointment:y}=useAgendaEnhanced(),w=t.ref(!1),k=t.ref(!1),V=t.ref(!1),N=t.ref(!1),C=t.ref(null),$=t.ref(null),_=t.ref(null),S=t.ref({paciente_id:"",fecha_cita:n.fechaInicial||"",hora_inicio:n.horaInicial||"",hora_fin:"",modalidad:"online",estado:"pending"}),D=t.ref({nombre_completo:"",email:"",telefono:"",fecha_nacimiento:""}),A=[{value:"presencial",label:"Presencial",icon:"ðŸ¢"},{value:"online",label:"Online",icon:"ðŸ’»"},{value:"telefonica",label:"TelÃ©fono",icon:"ðŸ“ž"}],z=t.computed(()=>S.value.paciente_id&&S.value.fecha_cita&&S.value.hora_inicio&&S.value.hora_fin&&S.value.modalidad&&!N.value);function handleClose(){S.value={paciente_id:"",fecha_cita:n.fechaInicial||"",hora_inicio:n.horaInicial||"",hora_fin:"",modalidad:"online",estado:"pending"},C.value=null,h(),w.value=!1,k.value=!1,$.value=null,i("close")}function selectPaciente(e){C.value=e,S.value.paciente_id=e.id,p.value=e.nombre_completo,w.value=!1,o.debug("patient_select",`Paciente seleccionado: ${e.nombre_completo}`)}function limpiarSeleccion(){C.value=null,S.value.paciente_id="",p.value=""}function handleBlur(){setTimeout(()=>{w.value=!1},200)}function activarModoCrearPaciente(){k.value=!0,w.value=!1,p.value.trim().length>0&&!p.value.includes("@")&&(D.value.nombre_completo=p.value.trim())}function cancelarCrearPaciente(){k.value=!1,D.value={nombre_completo:"",email:"",telefono:"",fecha_nacimiento:""}}async function crearPacienteYSeleccionar(){V.value=!0;try{const e=await v(D.value);e.success&&e.data?(selectPaciente(e.data),k.value=!1,D.value={nombre_completo:"",email:"",telefono:"",fecha_nacimiento:""},$.value={type:"success",text:`Paciente "${e.data.nombre_completo}" creado exitosamente`},setTimeout(()=>{$.value=null},3e3)):$.value={type:"error",text:e.error||"Error al crear paciente"}}catch(e){$.value={type:"error",text:e.message||"Error inesperado al crear paciente"}}finally{V.value=!1}}async function validateInRealTime(){_.value&&clearTimeout(_.value),S.value.fecha_cita&&S.value.hora_inicio&&S.value.hora_fin?_.value=setTimeout(async()=>{try{const e=await y({paciente_id:S.value.paciente_id||"temp",fecha_cita:S.value.fecha_cita,hora_inicio:S.value.hora_inicio,hora_fin:S.value.hora_fin});e.valid?$.value={type:"success",text:"Horario disponible âœ“"}:$.value={type:"error",text:e.error||"Conflicto detectado"}}catch(e){o.error("validation","Error en validaciÃ³n en tiempo real",e)}},500):$.value=null}async function handleSubmit(){if(z.value){N.value=!0,$.value=null;try{o.clickCreate(S.value.fecha_cita,S.value.hora_inicio);const e=await x(S.value);e.success&&e.data?(o.create(e.data.id,S.value.fecha_cita,S.value.hora_inicio),i("created",e.data),handleClose()):$.value={type:"error",text:e.error||"Error al crear la cita"}}catch(e){$.value={type:"error",text:e.message||"Error inesperado"},o.error("api_error","Error en handleSubmit",e)}finally{N.value=!1}}}return t.watch(()=>S.value.hora_inicio,e=>{if(e){const[t,a]=e.split(":").map(Number),o=60*t+a+60,l=Math.floor(o/60),r=o%60;S.value.hora_fin=`${String(l).padStart(2,"0")}:${String(r).padStart(2,"0")}`}}),t.watch(()=>n.isOpen,e=>{e&&(f(),n.fechaInicial&&(S.value.fecha_cita=n.fechaInicial),n.horaInicial&&(S.value.hora_inicio=n.horaInicial),n.horaFinal&&(S.value.hora_fin=n.horaFinal))}),(o,l,r,n)=>{l(a.ssrRenderComponent(t.unref(we),t.mergeProps({appear:"",show:e.isOpen,as:"template"},n),{default:t.withCtx((e,o,l,r)=>{if(!o)return[t.createVNode(t.unref(ue),{as:"div",class:"relative z-50",onClose:handleClose},{default:t.withCtx(()=>[t.createVNode(t.unref(ge),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:t.withCtx(()=>[t.createVNode("div",{class:"fixed inset-0 bg-black/30 backdrop-blur-sm"})]),_:1}),t.createVNode("div",{class:"fixed inset-0 overflow-y-auto"},[t.createVNode("div",{class:"flex min-h-full items-center justify-center p-4 text-center"},[t.createVNode(t.unref(ge),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:t.withCtx(()=>[t.createVNode(t.unref(pe),{class:"w-full max-w-2xl transform overflow-hidden rounded-3xl bg-white p-8 text-left align-middle shadow-2xl transition-all"},{default:t.withCtx(()=>[t.createVNode(t.unref(ve),{as:"h3",class:"text-2xl font-bold text-neutral-900 mb-6 flex items-center gap-3"},{default:t.withCtx(()=>[t.createVNode("div",{class:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#027368] to-[#025951] flex items-center justify-center text-white"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]))]),t.createTextVNode(" Nueva Cita ")]),_:1}),t.createVNode("form",{onSubmit:t.withModifiers(handleSubmit,["prevent"]),class:"space-y-5"},[t.createVNode("div",{class:"relative"},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Paciente * "),k.value?(t.openBlock(),t.createBlock("div",{key:1,class:"space-y-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl"},[t.createVNode("div",{class:"flex items-center justify-between mb-3"},[t.createVNode("h4",{class:"font-semibold text-neutral-900 flex items-center gap-2"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})])),t.createTextVNode(" Crear Nuevo Paciente ")]),t.createVNode("button",{type:"button",onClick:cancelarCrearPaciente,class:"text-sm text-neutral-600 hover:text-neutral-900"}," Cancelar ")]),t.createVNode("div",{class:"grid grid-cols-2 gap-3"},[t.createVNode("div",{class:"col-span-2"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.nombre_completo=e,type:"text",placeholder:"Nombre completo *",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.nombre_completo]])]),t.createVNode("div",{class:"col-span-2"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.email=e,type:"email",placeholder:"Email *",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.email]])]),t.createVNode("div",null,[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.telefono=e,type:"tel",placeholder:"TelÃ©fono",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.telefono]])]),t.createVNode("div",null,[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.fecha_nacimiento=e,type:"date",placeholder:"Fecha de nacimiento",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.fecha_nacimiento]])])]),t.createVNode("button",{type:"button",onClick:crearPacienteYSeleccionar,disabled:!D.value.nombre_completo||!D.value.email||V.value,class:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center gap-2"},[V.value?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(V.value?"Creando...":"Crear Paciente"),1)],8,["disabled"])])):(t.openBlock(),t.createBlock("div",{key:0,class:"space-y-2"},[t.createVNode("div",{class:"relative"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>t.isRef(p)?p.value=e:null,type:"text",placeholder:"Buscar por nombre, email o telÃ©fono...",class:"w-full px-4 py-3 pr-10 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onFocus:e=>w.value=!0,onBlur:handleBlur},null,40,["onUpdate:modelValue","onFocus"]),[[t.vModelText,t.unref(p)]]),t.createVNode("div",{class:"absolute right-3 top-1/2 -translate-y-1/2"},[t.unref(d)?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5 text-[#027368]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):(t.openBlock(),t.createBlock("svg",{key:1,class:"h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]))])]),w.value&&(t.unref(u)||t.unref(p).trim().length>0)?(t.openBlock(),t.createBlock("div",{key:0,class:"absolute z-10 w-full mt-1 bg-white border-2 border-neutral-200 rounded-xl shadow-xl max-h-64 overflow-y-auto"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(s),e=>(t.openBlock(),t.createBlock("button",{key:e.id,type:"button",class:"w-full px-4 py-3 text-left hover:bg-neutral-50 transition-colors border-b border-neutral-100 last:border-0",onClick:t=>selectPaciente(e)},[t.createVNode("div",{class:"flex items-start justify-between"},[t.createVNode("div",{class:"flex-1"},[t.createVNode("p",{class:"font-semibold text-neutral-900"},t.toDisplayString(e.nombre_completo),1),t.createVNode("p",{class:"text-sm text-neutral-600"},t.toDisplayString(e.email),1),e.telefono?(t.openBlock(),t.createBlock("p",{key:0,class:"text-xs text-neutral-500"},t.toDisplayString(e.telefono),1)):t.createCommentVNode("",!0)]),e.sesiones_restantes_total>0?(t.openBlock(),t.createBlock("div",{key:0,class:"flex items-center gap-1 px-2 py-1 bg-emerald-100 text-emerald-700 rounded-lg text-xs font-medium"},[(t.openBlock(),t.createBlock("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[t.createVNode("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t.createVNode("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})])),t.createTextVNode(" "+t.toDisplayString(e.sesiones_restantes_total)+" sesiones ",1)])):t.createCommentVNode("",!0)])],8,["onClick"]))),128)),t.unref(p).trim().length>0?(t.openBlock(),t.createBlock("button",{key:0,type:"button",class:"w-full px-4 py-3 text-left bg-neutral-50 hover:bg-neutral-100 transition-colors border-t-2 border-neutral-200 font-medium text-[#027368] flex items-center gap-2",onClick:activarModoCrearPaciente},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])),t.createTextVNode(" Crear nuevo paciente ")])):t.createCommentVNode("",!0),t.unref(u)||t.unref(d)?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock("div",{key:1,class:"px-4 py-8 text-center text-neutral-500"},[(t.openBlock(),t.createBlock("svg",{class:"w-12 h-12 mx-auto mb-2 text-neutral-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})])),t.createVNode("p",{class:"font-medium"},"No se encontraron pacientes"),t.createVNode("p",{class:"text-sm"},"Intenta con otro criterio de bÃºsqueda")]))])):t.createCommentVNode("",!0),S.value.paciente_id&&C.value?(t.openBlock(),t.createBlock("div",{key:1,class:"flex items-center justify-between px-4 py-3 bg-emerald-50 border-2 border-emerald-200 rounded-xl"},[t.createVNode("div",{class:"flex items-center gap-3"},[t.createVNode("div",{class:"w-10 h-10 rounded-full bg-emerald-600 text-white flex items-center justify-center font-bold"},t.toDisplayString(C.value.nombre_completo.charAt(0).toUpperCase()),1),t.createVNode("div",null,[t.createVNode("p",{class:"font-semibold text-neutral-900"},t.toDisplayString(C.value.nombre_completo),1),t.createVNode("p",{class:"text-sm text-neutral-600"},t.toDisplayString(C.value.email),1)])]),t.createVNode("button",{type:"button",onClick:limpiarSeleccion,class:"p-2 hover:bg-emerald-100 rounded-lg transition-colors"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5 text-neutral-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})]))])])):t.createCommentVNode("",!0)]))]),t.createVNode("div",{class:"grid grid-cols-3 gap-4"},[t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Fecha * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.fecha_cita=e,type:"date",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.fecha_cita]])]),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Hora inicio * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.hora_inicio=e,type:"time",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.hora_inicio]])]),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Hora fin * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.hora_fin=e,type:"time",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.hora_fin]])])]),$.value?(t.openBlock(),t.createBlock("div",{key:0,class:["px-4 py-3 rounded-xl flex items-start gap-3",{"bg-red-50 border-2 border-red-200":"error"===$.value.type,"bg-yellow-50 border-2 border-yellow-200":"warning"===$.value.type,"bg-emerald-50 border-2 border-emerald-200":"success"===$.value.type}]},[(t.openBlock(),t.createBlock("svg",{class:["w-5 h-5 mt-0.5 flex-shrink-0",{"text-red-600":"error"===$.value.type,"text-yellow-600":"warning"===$.value.type,"text-emerald-600":"success"===$.value.type}],fill:"currentColor",viewBox:"0 0 20 20"},["error"===$.value.type?(t.openBlock(),t.createBlock("path",{key:0,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})):"success"===$.value.type?(t.openBlock(),t.createBlock("path",{key:1,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})):(t.openBlock(),t.createBlock("path",{key:2,"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"}))],2)),t.createVNode("p",{class:["text-sm font-medium flex-1",{"text-red-800":"error"===$.value.type,"text-yellow-800":"warning"===$.value.type,"text-emerald-800":"success"===$.value.type}]},t.toDisplayString($.value.text),3)],2)):t.createCommentVNode("",!0),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Modalidad * "),t.createVNode("div",{class:"grid grid-cols-3 gap-3"},[(t.openBlock(),t.createBlock(t.Fragment,null,t.renderList(A,e=>t.createVNode("button",{key:e.value,type:"button",onClick:t=>S.value.modalidad=e.value,class:["px-4 py-3 rounded-xl border-2 transition-all font-medium flex flex-col items-center gap-2",S.value.modalidad===e.value?"border-[#027368] bg-[#027368]/5 text-[#027368]":"border-neutral-200 text-neutral-600 hover:border-neutral-300"]},[t.createVNode("span",{class:"text-2xl"},t.toDisplayString(e.icon),1),t.createVNode("span",{class:"text-sm"},t.toDisplayString(e.label),1)],10,["onClick"])),64))])]),"presencial"===S.value.modalidad?(t.openBlock(),t.createBlock("div",{key:1},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," UbicaciÃ³n "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.ubicacion=e,type:"text",placeholder:"DirecciÃ³n del consultorio",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.ubicacion]])])):t.createCommentVNode("",!0),"online"===S.value.modalidad?(t.openBlock(),t.createBlock("div",{key:2},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Enlace de videollamada "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.enlace_videollamada=e,type:"url",placeholder:"https://meet.google.com/...",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.enlace_videollamada]])])):t.createCommentVNode("",!0),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Observaciones "),t.withDirectives(t.createVNode("textarea",{"onUpdate:modelValue":e=>S.value.observaciones=e,rows:"3",placeholder:"Notas adicionales sobre esta cita...",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all resize-none"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.observaciones]])]),t.createVNode("div",{class:"flex gap-3 pt-4"},[t.createVNode("button",{type:"button",onClick:handleClose,class:"flex-1 px-6 py-3 bg-neutral-100 text-neutral-700 rounded-xl hover:bg-neutral-200 transition-all font-semibold"}," Cancelar "),t.createVNode("button",{type:"submit",disabled:N.value||!z.value,class:"flex-1 px-6 py-3 bg-gradient-to-r from-[#027368] to-[#025951] text-white rounded-xl hover:shadow-lg transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[N.value?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(N.value?"Creando...":"Crear Cita"),1)],8,["disabled"])])],32)]),_:1})]),_:1})])])]),_:1})];o(a.ssrRenderComponent(t.unref(ue),{as:"div",class:"relative z-50",onClose:handleClose},{default:t.withCtx((e,o,l,r)=>{if(!o)return[t.createVNode(t.unref(ge),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:t.withCtx(()=>[t.createVNode("div",{class:"fixed inset-0 bg-black/30 backdrop-blur-sm"})]),_:1}),t.createVNode("div",{class:"fixed inset-0 overflow-y-auto"},[t.createVNode("div",{class:"flex min-h-full items-center justify-center p-4 text-center"},[t.createVNode(t.unref(ge),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:t.withCtx(()=>[t.createVNode(t.unref(pe),{class:"w-full max-w-2xl transform overflow-hidden rounded-3xl bg-white p-8 text-left align-middle shadow-2xl transition-all"},{default:t.withCtx(()=>[t.createVNode(t.unref(ve),{as:"h3",class:"text-2xl font-bold text-neutral-900 mb-6 flex items-center gap-3"},{default:t.withCtx(()=>[t.createVNode("div",{class:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#027368] to-[#025951] flex items-center justify-center text-white"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]))]),t.createTextVNode(" Nueva Cita ")]),_:1}),t.createVNode("form",{onSubmit:t.withModifiers(handleSubmit,["prevent"]),class:"space-y-5"},[t.createVNode("div",{class:"relative"},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Paciente * "),k.value?(t.openBlock(),t.createBlock("div",{key:1,class:"space-y-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl"},[t.createVNode("div",{class:"flex items-center justify-between mb-3"},[t.createVNode("h4",{class:"font-semibold text-neutral-900 flex items-center gap-2"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})])),t.createTextVNode(" Crear Nuevo Paciente ")]),t.createVNode("button",{type:"button",onClick:cancelarCrearPaciente,class:"text-sm text-neutral-600 hover:text-neutral-900"}," Cancelar ")]),t.createVNode("div",{class:"grid grid-cols-2 gap-3"},[t.createVNode("div",{class:"col-span-2"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.nombre_completo=e,type:"text",placeholder:"Nombre completo *",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.nombre_completo]])]),t.createVNode("div",{class:"col-span-2"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.email=e,type:"email",placeholder:"Email *",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.email]])]),t.createVNode("div",null,[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.telefono=e,type:"tel",placeholder:"TelÃ©fono",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.telefono]])]),t.createVNode("div",null,[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.fecha_nacimiento=e,type:"date",placeholder:"Fecha de nacimiento",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.fecha_nacimiento]])])]),t.createVNode("button",{type:"button",onClick:crearPacienteYSeleccionar,disabled:!D.value.nombre_completo||!D.value.email||V.value,class:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center gap-2"},[V.value?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(V.value?"Creando...":"Crear Paciente"),1)],8,["disabled"])])):(t.openBlock(),t.createBlock("div",{key:0,class:"space-y-2"},[t.createVNode("div",{class:"relative"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>t.isRef(p)?p.value=e:null,type:"text",placeholder:"Buscar por nombre, email o telÃ©fono...",class:"w-full px-4 py-3 pr-10 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onFocus:e=>w.value=!0,onBlur:handleBlur},null,40,["onUpdate:modelValue","onFocus"]),[[t.vModelText,t.unref(p)]]),t.createVNode("div",{class:"absolute right-3 top-1/2 -translate-y-1/2"},[t.unref(d)?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5 text-[#027368]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):(t.openBlock(),t.createBlock("svg",{key:1,class:"h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]))])]),w.value&&(t.unref(u)||t.unref(p).trim().length>0)?(t.openBlock(),t.createBlock("div",{key:0,class:"absolute z-10 w-full mt-1 bg-white border-2 border-neutral-200 rounded-xl shadow-xl max-h-64 overflow-y-auto"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(s),e=>(t.openBlock(),t.createBlock("button",{key:e.id,type:"button",class:"w-full px-4 py-3 text-left hover:bg-neutral-50 transition-colors border-b border-neutral-100 last:border-0",onClick:t=>selectPaciente(e)},[t.createVNode("div",{class:"flex items-start justify-between"},[t.createVNode("div",{class:"flex-1"},[t.createVNode("p",{class:"font-semibold text-neutral-900"},t.toDisplayString(e.nombre_completo),1),t.createVNode("p",{class:"text-sm text-neutral-600"},t.toDisplayString(e.email),1),e.telefono?(t.openBlock(),t.createBlock("p",{key:0,class:"text-xs text-neutral-500"},t.toDisplayString(e.telefono),1)):t.createCommentVNode("",!0)]),e.sesiones_restantes_total>0?(t.openBlock(),t.createBlock("div",{key:0,class:"flex items-center gap-1 px-2 py-1 bg-emerald-100 text-emerald-700 rounded-lg text-xs font-medium"},[(t.openBlock(),t.createBlock("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[t.createVNode("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t.createVNode("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})])),t.createTextVNode(" "+t.toDisplayString(e.sesiones_restantes_total)+" sesiones ",1)])):t.createCommentVNode("",!0)])],8,["onClick"]))),128)),t.unref(p).trim().length>0?(t.openBlock(),t.createBlock("button",{key:0,type:"button",class:"w-full px-4 py-3 text-left bg-neutral-50 hover:bg-neutral-100 transition-colors border-t-2 border-neutral-200 font-medium text-[#027368] flex items-center gap-2",onClick:activarModoCrearPaciente},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])),t.createTextVNode(" Crear nuevo paciente ")])):t.createCommentVNode("",!0),t.unref(u)||t.unref(d)?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock("div",{key:1,class:"px-4 py-8 text-center text-neutral-500"},[(t.openBlock(),t.createBlock("svg",{class:"w-12 h-12 mx-auto mb-2 text-neutral-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})])),t.createVNode("p",{class:"font-medium"},"No se encontraron pacientes"),t.createVNode("p",{class:"text-sm"},"Intenta con otro criterio de bÃºsqueda")]))])):t.createCommentVNode("",!0),S.value.paciente_id&&C.value?(t.openBlock(),t.createBlock("div",{key:1,class:"flex items-center justify-between px-4 py-3 bg-emerald-50 border-2 border-emerald-200 rounded-xl"},[t.createVNode("div",{class:"flex items-center gap-3"},[t.createVNode("div",{class:"w-10 h-10 rounded-full bg-emerald-600 text-white flex items-center justify-center font-bold"},t.toDisplayString(C.value.nombre_completo.charAt(0).toUpperCase()),1),t.createVNode("div",null,[t.createVNode("p",{class:"font-semibold text-neutral-900"},t.toDisplayString(C.value.nombre_completo),1),t.createVNode("p",{class:"text-sm text-neutral-600"},t.toDisplayString(C.value.email),1)])]),t.createVNode("button",{type:"button",onClick:limpiarSeleccion,class:"p-2 hover:bg-emerald-100 rounded-lg transition-colors"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5 text-neutral-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})]))])])):t.createCommentVNode("",!0)]))]),t.createVNode("div",{class:"grid grid-cols-3 gap-4"},[t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Fecha * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.fecha_cita=e,type:"date",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.fecha_cita]])]),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Hora inicio * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.hora_inicio=e,type:"time",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.hora_inicio]])]),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Hora fin * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.hora_fin=e,type:"time",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.hora_fin]])])]),$.value?(t.openBlock(),t.createBlock("div",{key:0,class:["px-4 py-3 rounded-xl flex items-start gap-3",{"bg-red-50 border-2 border-red-200":"error"===$.value.type,"bg-yellow-50 border-2 border-yellow-200":"warning"===$.value.type,"bg-emerald-50 border-2 border-emerald-200":"success"===$.value.type}]},[(t.openBlock(),t.createBlock("svg",{class:["w-5 h-5 mt-0.5 flex-shrink-0",{"text-red-600":"error"===$.value.type,"text-yellow-600":"warning"===$.value.type,"text-emerald-600":"success"===$.value.type}],fill:"currentColor",viewBox:"0 0 20 20"},["error"===$.value.type?(t.openBlock(),t.createBlock("path",{key:0,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})):"success"===$.value.type?(t.openBlock(),t.createBlock("path",{key:1,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})):(t.openBlock(),t.createBlock("path",{key:2,"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"}))],2)),t.createVNode("p",{class:["text-sm font-medium flex-1",{"text-red-800":"error"===$.value.type,"text-yellow-800":"warning"===$.value.type,"text-emerald-800":"success"===$.value.type}]},t.toDisplayString($.value.text),3)],2)):t.createCommentVNode("",!0),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Modalidad * "),t.createVNode("div",{class:"grid grid-cols-3 gap-3"},[(t.openBlock(),t.createBlock(t.Fragment,null,t.renderList(A,e=>t.createVNode("button",{key:e.value,type:"button",onClick:t=>S.value.modalidad=e.value,class:["px-4 py-3 rounded-xl border-2 transition-all font-medium flex flex-col items-center gap-2",S.value.modalidad===e.value?"border-[#027368] bg-[#027368]/5 text-[#027368]":"border-neutral-200 text-neutral-600 hover:border-neutral-300"]},[t.createVNode("span",{class:"text-2xl"},t.toDisplayString(e.icon),1),t.createVNode("span",{class:"text-sm"},t.toDisplayString(e.label),1)],10,["onClick"])),64))])]),"presencial"===S.value.modalidad?(t.openBlock(),t.createBlock("div",{key:1},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," UbicaciÃ³n "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.ubicacion=e,type:"text",placeholder:"DirecciÃ³n del consultorio",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.ubicacion]])])):t.createCommentVNode("",!0),"online"===S.value.modalidad?(t.openBlock(),t.createBlock("div",{key:2},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Enlace de videollamada "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.enlace_videollamada=e,type:"url",placeholder:"https://meet.google.com/...",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.enlace_videollamada]])])):t.createCommentVNode("",!0),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Observaciones "),t.withDirectives(t.createVNode("textarea",{"onUpdate:modelValue":e=>S.value.observaciones=e,rows:"3",placeholder:"Notas adicionales sobre esta cita...",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all resize-none"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.observaciones]])]),t.createVNode("div",{class:"flex gap-3 pt-4"},[t.createVNode("button",{type:"button",onClick:handleClose,class:"flex-1 px-6 py-3 bg-neutral-100 text-neutral-700 rounded-xl hover:bg-neutral-200 transition-all font-semibold"}," Cancelar "),t.createVNode("button",{type:"submit",disabled:N.value||!z.value,class:"flex-1 px-6 py-3 bg-gradient-to-r from-[#027368] to-[#025951] text-white rounded-xl hover:shadow-lg transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[N.value?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(N.value?"Creando...":"Crear Cita"),1)],8,["disabled"])])],32)]),_:1})]),_:1})])])];o(a.ssrRenderComponent(t.unref(ge),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:t.withCtx((e,a,o,l)=>{if(!a)return[t.createVNode("div",{class:"fixed inset-0 bg-black/30 backdrop-blur-sm"})];a(`<div class="fixed inset-0 bg-black/30 backdrop-blur-sm" data-v-72409a57${l}></div>`)}),_:1},l,r)),o(`<div class="fixed inset-0 overflow-y-auto" data-v-72409a57${r}><div class="flex min-h-full items-center justify-center p-4 text-center" data-v-72409a57${r}>`),o(a.ssrRenderComponent(t.unref(ge),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:t.withCtx((e,o,l,r)=>{if(!o)return[t.createVNode(t.unref(pe),{class:"w-full max-w-2xl transform overflow-hidden rounded-3xl bg-white p-8 text-left align-middle shadow-2xl transition-all"},{default:t.withCtx(()=>[t.createVNode(t.unref(ve),{as:"h3",class:"text-2xl font-bold text-neutral-900 mb-6 flex items-center gap-3"},{default:t.withCtx(()=>[t.createVNode("div",{class:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#027368] to-[#025951] flex items-center justify-center text-white"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]))]),t.createTextVNode(" Nueva Cita ")]),_:1}),t.createVNode("form",{onSubmit:t.withModifiers(handleSubmit,["prevent"]),class:"space-y-5"},[t.createVNode("div",{class:"relative"},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Paciente * "),k.value?(t.openBlock(),t.createBlock("div",{key:1,class:"space-y-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl"},[t.createVNode("div",{class:"flex items-center justify-between mb-3"},[t.createVNode("h4",{class:"font-semibold text-neutral-900 flex items-center gap-2"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})])),t.createTextVNode(" Crear Nuevo Paciente ")]),t.createVNode("button",{type:"button",onClick:cancelarCrearPaciente,class:"text-sm text-neutral-600 hover:text-neutral-900"}," Cancelar ")]),t.createVNode("div",{class:"grid grid-cols-2 gap-3"},[t.createVNode("div",{class:"col-span-2"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.nombre_completo=e,type:"text",placeholder:"Nombre completo *",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.nombre_completo]])]),t.createVNode("div",{class:"col-span-2"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.email=e,type:"email",placeholder:"Email *",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.email]])]),t.createVNode("div",null,[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.telefono=e,type:"tel",placeholder:"TelÃ©fono",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.telefono]])]),t.createVNode("div",null,[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.fecha_nacimiento=e,type:"date",placeholder:"Fecha de nacimiento",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.fecha_nacimiento]])])]),t.createVNode("button",{type:"button",onClick:crearPacienteYSeleccionar,disabled:!D.value.nombre_completo||!D.value.email||V.value,class:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center gap-2"},[V.value?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(V.value?"Creando...":"Crear Paciente"),1)],8,["disabled"])])):(t.openBlock(),t.createBlock("div",{key:0,class:"space-y-2"},[t.createVNode("div",{class:"relative"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>t.isRef(p)?p.value=e:null,type:"text",placeholder:"Buscar por nombre, email o telÃ©fono...",class:"w-full px-4 py-3 pr-10 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onFocus:e=>w.value=!0,onBlur:handleBlur},null,40,["onUpdate:modelValue","onFocus"]),[[t.vModelText,t.unref(p)]]),t.createVNode("div",{class:"absolute right-3 top-1/2 -translate-y-1/2"},[t.unref(d)?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5 text-[#027368]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):(t.openBlock(),t.createBlock("svg",{key:1,class:"h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]))])]),w.value&&(t.unref(u)||t.unref(p).trim().length>0)?(t.openBlock(),t.createBlock("div",{key:0,class:"absolute z-10 w-full mt-1 bg-white border-2 border-neutral-200 rounded-xl shadow-xl max-h-64 overflow-y-auto"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(s),e=>(t.openBlock(),t.createBlock("button",{key:e.id,type:"button",class:"w-full px-4 py-3 text-left hover:bg-neutral-50 transition-colors border-b border-neutral-100 last:border-0",onClick:t=>selectPaciente(e)},[t.createVNode("div",{class:"flex items-start justify-between"},[t.createVNode("div",{class:"flex-1"},[t.createVNode("p",{class:"font-semibold text-neutral-900"},t.toDisplayString(e.nombre_completo),1),t.createVNode("p",{class:"text-sm text-neutral-600"},t.toDisplayString(e.email),1),e.telefono?(t.openBlock(),t.createBlock("p",{key:0,class:"text-xs text-neutral-500"},t.toDisplayString(e.telefono),1)):t.createCommentVNode("",!0)]),e.sesiones_restantes_total>0?(t.openBlock(),t.createBlock("div",{key:0,class:"flex items-center gap-1 px-2 py-1 bg-emerald-100 text-emerald-700 rounded-lg text-xs font-medium"},[(t.openBlock(),t.createBlock("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[t.createVNode("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t.createVNode("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})])),t.createTextVNode(" "+t.toDisplayString(e.sesiones_restantes_total)+" sesiones ",1)])):t.createCommentVNode("",!0)])],8,["onClick"]))),128)),t.unref(p).trim().length>0?(t.openBlock(),t.createBlock("button",{key:0,type:"button",class:"w-full px-4 py-3 text-left bg-neutral-50 hover:bg-neutral-100 transition-colors border-t-2 border-neutral-200 font-medium text-[#027368] flex items-center gap-2",onClick:activarModoCrearPaciente},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])),t.createTextVNode(" Crear nuevo paciente ")])):t.createCommentVNode("",!0),t.unref(u)||t.unref(d)?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock("div",{key:1,class:"px-4 py-8 text-center text-neutral-500"},[(t.openBlock(),t.createBlock("svg",{class:"w-12 h-12 mx-auto mb-2 text-neutral-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})])),t.createVNode("p",{class:"font-medium"},"No se encontraron pacientes"),t.createVNode("p",{class:"text-sm"},"Intenta con otro criterio de bÃºsqueda")]))])):t.createCommentVNode("",!0),S.value.paciente_id&&C.value?(t.openBlock(),t.createBlock("div",{key:1,class:"flex items-center justify-between px-4 py-3 bg-emerald-50 border-2 border-emerald-200 rounded-xl"},[t.createVNode("div",{class:"flex items-center gap-3"},[t.createVNode("div",{class:"w-10 h-10 rounded-full bg-emerald-600 text-white flex items-center justify-center font-bold"},t.toDisplayString(C.value.nombre_completo.charAt(0).toUpperCase()),1),t.createVNode("div",null,[t.createVNode("p",{class:"font-semibold text-neutral-900"},t.toDisplayString(C.value.nombre_completo),1),t.createVNode("p",{class:"text-sm text-neutral-600"},t.toDisplayString(C.value.email),1)])]),t.createVNode("button",{type:"button",onClick:limpiarSeleccion,class:"p-2 hover:bg-emerald-100 rounded-lg transition-colors"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5 text-neutral-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})]))])])):t.createCommentVNode("",!0)]))]),t.createVNode("div",{class:"grid grid-cols-3 gap-4"},[t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Fecha * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.fecha_cita=e,type:"date",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.fecha_cita]])]),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Hora inicio * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.hora_inicio=e,type:"time",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.hora_inicio]])]),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Hora fin * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.hora_fin=e,type:"time",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.hora_fin]])])]),$.value?(t.openBlock(),t.createBlock("div",{key:0,class:["px-4 py-3 rounded-xl flex items-start gap-3",{"bg-red-50 border-2 border-red-200":"error"===$.value.type,"bg-yellow-50 border-2 border-yellow-200":"warning"===$.value.type,"bg-emerald-50 border-2 border-emerald-200":"success"===$.value.type}]},[(t.openBlock(),t.createBlock("svg",{class:["w-5 h-5 mt-0.5 flex-shrink-0",{"text-red-600":"error"===$.value.type,"text-yellow-600":"warning"===$.value.type,"text-emerald-600":"success"===$.value.type}],fill:"currentColor",viewBox:"0 0 20 20"},["error"===$.value.type?(t.openBlock(),t.createBlock("path",{key:0,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})):"success"===$.value.type?(t.openBlock(),t.createBlock("path",{key:1,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})):(t.openBlock(),t.createBlock("path",{key:2,"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"}))],2)),t.createVNode("p",{class:["text-sm font-medium flex-1",{"text-red-800":"error"===$.value.type,"text-yellow-800":"warning"===$.value.type,"text-emerald-800":"success"===$.value.type}]},t.toDisplayString($.value.text),3)],2)):t.createCommentVNode("",!0),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Modalidad * "),t.createVNode("div",{class:"grid grid-cols-3 gap-3"},[(t.openBlock(),t.createBlock(t.Fragment,null,t.renderList(A,e=>t.createVNode("button",{key:e.value,type:"button",onClick:t=>S.value.modalidad=e.value,class:["px-4 py-3 rounded-xl border-2 transition-all font-medium flex flex-col items-center gap-2",S.value.modalidad===e.value?"border-[#027368] bg-[#027368]/5 text-[#027368]":"border-neutral-200 text-neutral-600 hover:border-neutral-300"]},[t.createVNode("span",{class:"text-2xl"},t.toDisplayString(e.icon),1),t.createVNode("span",{class:"text-sm"},t.toDisplayString(e.label),1)],10,["onClick"])),64))])]),"presencial"===S.value.modalidad?(t.openBlock(),t.createBlock("div",{key:1},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," UbicaciÃ³n "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.ubicacion=e,type:"text",placeholder:"DirecciÃ³n del consultorio",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.ubicacion]])])):t.createCommentVNode("",!0),"online"===S.value.modalidad?(t.openBlock(),t.createBlock("div",{key:2},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Enlace de videollamada "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.enlace_videollamada=e,type:"url",placeholder:"https://meet.google.com/...",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.enlace_videollamada]])])):t.createCommentVNode("",!0),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Observaciones "),t.withDirectives(t.createVNode("textarea",{"onUpdate:modelValue":e=>S.value.observaciones=e,rows:"3",placeholder:"Notas adicionales sobre esta cita...",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all resize-none"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.observaciones]])]),t.createVNode("div",{class:"flex gap-3 pt-4"},[t.createVNode("button",{type:"button",onClick:handleClose,class:"flex-1 px-6 py-3 bg-neutral-100 text-neutral-700 rounded-xl hover:bg-neutral-200 transition-all font-semibold"}," Cancelar "),t.createVNode("button",{type:"submit",disabled:N.value||!z.value,class:"flex-1 px-6 py-3 bg-gradient-to-r from-[#027368] to-[#025951] text-white rounded-xl hover:shadow-lg transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[N.value?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(N.value?"Creando...":"Crear Cita"),1)],8,["disabled"])])],32)]),_:1})];o(a.ssrRenderComponent(t.unref(pe),{class:"w-full max-w-2xl transform overflow-hidden rounded-3xl bg-white p-8 text-left align-middle shadow-2xl transition-all"},{default:t.withCtx((e,o,l,r)=>{if(!o)return[t.createVNode(t.unref(ve),{as:"h3",class:"text-2xl font-bold text-neutral-900 mb-6 flex items-center gap-3"},{default:t.withCtx(()=>[t.createVNode("div",{class:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#027368] to-[#025951] flex items-center justify-center text-white"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]))]),t.createTextVNode(" Nueva Cita ")]),_:1}),t.createVNode("form",{onSubmit:t.withModifiers(handleSubmit,["prevent"]),class:"space-y-5"},[t.createVNode("div",{class:"relative"},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Paciente * "),k.value?(t.openBlock(),t.createBlock("div",{key:1,class:"space-y-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl"},[t.createVNode("div",{class:"flex items-center justify-between mb-3"},[t.createVNode("h4",{class:"font-semibold text-neutral-900 flex items-center gap-2"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})])),t.createTextVNode(" Crear Nuevo Paciente ")]),t.createVNode("button",{type:"button",onClick:cancelarCrearPaciente,class:"text-sm text-neutral-600 hover:text-neutral-900"}," Cancelar ")]),t.createVNode("div",{class:"grid grid-cols-2 gap-3"},[t.createVNode("div",{class:"col-span-2"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.nombre_completo=e,type:"text",placeholder:"Nombre completo *",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.nombre_completo]])]),t.createVNode("div",{class:"col-span-2"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.email=e,type:"email",placeholder:"Email *",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.email]])]),t.createVNode("div",null,[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.telefono=e,type:"tel",placeholder:"TelÃ©fono",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.telefono]])]),t.createVNode("div",null,[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>D.value.fecha_nacimiento=e,type:"date",placeholder:"Fecha de nacimiento",class:"w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,["onUpdate:modelValue"]),[[t.vModelText,D.value.fecha_nacimiento]])])]),t.createVNode("button",{type:"button",onClick:crearPacienteYSeleccionar,disabled:!D.value.nombre_completo||!D.value.email||V.value,class:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center gap-2"},[V.value?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(V.value?"Creando...":"Crear Paciente"),1)],8,["disabled"])])):(t.openBlock(),t.createBlock("div",{key:0,class:"space-y-2"},[t.createVNode("div",{class:"relative"},[t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>t.isRef(p)?p.value=e:null,type:"text",placeholder:"Buscar por nombre, email o telÃ©fono...",class:"w-full px-4 py-3 pr-10 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onFocus:e=>w.value=!0,onBlur:handleBlur},null,40,["onUpdate:modelValue","onFocus"]),[[t.vModelText,t.unref(p)]]),t.createVNode("div",{class:"absolute right-3 top-1/2 -translate-y-1/2"},[t.unref(d)?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5 text-[#027368]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):(t.openBlock(),t.createBlock("svg",{key:1,class:"h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]))])]),w.value&&(t.unref(u)||t.unref(p).trim().length>0)?(t.openBlock(),t.createBlock("div",{key:0,class:"absolute z-10 w-full mt-1 bg-white border-2 border-neutral-200 rounded-xl shadow-xl max-h-64 overflow-y-auto"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(t.unref(s),e=>(t.openBlock(),t.createBlock("button",{key:e.id,type:"button",class:"w-full px-4 py-3 text-left hover:bg-neutral-50 transition-colors border-b border-neutral-100 last:border-0",onClick:t=>selectPaciente(e)},[t.createVNode("div",{class:"flex items-start justify-between"},[t.createVNode("div",{class:"flex-1"},[t.createVNode("p",{class:"font-semibold text-neutral-900"},t.toDisplayString(e.nombre_completo),1),t.createVNode("p",{class:"text-sm text-neutral-600"},t.toDisplayString(e.email),1),e.telefono?(t.openBlock(),t.createBlock("p",{key:0,class:"text-xs text-neutral-500"},t.toDisplayString(e.telefono),1)):t.createCommentVNode("",!0)]),e.sesiones_restantes_total>0?(t.openBlock(),t.createBlock("div",{key:0,class:"flex items-center gap-1 px-2 py-1 bg-emerald-100 text-emerald-700 rounded-lg text-xs font-medium"},[(t.openBlock(),t.createBlock("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[t.createVNode("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t.createVNode("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})])),t.createTextVNode(" "+t.toDisplayString(e.sesiones_restantes_total)+" sesiones ",1)])):t.createCommentVNode("",!0)])],8,["onClick"]))),128)),t.unref(p).trim().length>0?(t.openBlock(),t.createBlock("button",{key:0,type:"button",class:"w-full px-4 py-3 text-left bg-neutral-50 hover:bg-neutral-100 transition-colors border-t-2 border-neutral-200 font-medium text-[#027368] flex items-center gap-2",onClick:activarModoCrearPaciente},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])),t.createTextVNode(" Crear nuevo paciente ")])):t.createCommentVNode("",!0),t.unref(u)||t.unref(d)?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock("div",{key:1,class:"px-4 py-8 text-center text-neutral-500"},[(t.openBlock(),t.createBlock("svg",{class:"w-12 h-12 mx-auto mb-2 text-neutral-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})])),t.createVNode("p",{class:"font-medium"},"No se encontraron pacientes"),t.createVNode("p",{class:"text-sm"},"Intenta con otro criterio de bÃºsqueda")]))])):t.createCommentVNode("",!0),S.value.paciente_id&&C.value?(t.openBlock(),t.createBlock("div",{key:1,class:"flex items-center justify-between px-4 py-3 bg-emerald-50 border-2 border-emerald-200 rounded-xl"},[t.createVNode("div",{class:"flex items-center gap-3"},[t.createVNode("div",{class:"w-10 h-10 rounded-full bg-emerald-600 text-white flex items-center justify-center font-bold"},t.toDisplayString(C.value.nombre_completo.charAt(0).toUpperCase()),1),t.createVNode("div",null,[t.createVNode("p",{class:"font-semibold text-neutral-900"},t.toDisplayString(C.value.nombre_completo),1),t.createVNode("p",{class:"text-sm text-neutral-600"},t.toDisplayString(C.value.email),1)])]),t.createVNode("button",{type:"button",onClick:limpiarSeleccion,class:"p-2 hover:bg-emerald-100 rounded-lg transition-colors"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5 text-neutral-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})]))])])):t.createCommentVNode("",!0)]))]),t.createVNode("div",{class:"grid grid-cols-3 gap-4"},[t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Fecha * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.fecha_cita=e,type:"date",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.fecha_cita]])]),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Hora inicio * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.hora_inicio=e,type:"time",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.hora_inicio]])]),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Hora fin * "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.hora_fin=e,type:"time",required:"",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all",onChange:validateInRealTime},null,40,["onUpdate:modelValue"]),[[t.vModelText,S.value.hora_fin]])])]),$.value?(t.openBlock(),t.createBlock("div",{key:0,class:["px-4 py-3 rounded-xl flex items-start gap-3",{"bg-red-50 border-2 border-red-200":"error"===$.value.type,"bg-yellow-50 border-2 border-yellow-200":"warning"===$.value.type,"bg-emerald-50 border-2 border-emerald-200":"success"===$.value.type}]},[(t.openBlock(),t.createBlock("svg",{class:["w-5 h-5 mt-0.5 flex-shrink-0",{"text-red-600":"error"===$.value.type,"text-yellow-600":"warning"===$.value.type,"text-emerald-600":"success"===$.value.type}],fill:"currentColor",viewBox:"0 0 20 20"},["error"===$.value.type?(t.openBlock(),t.createBlock("path",{key:0,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})):"success"===$.value.type?(t.openBlock(),t.createBlock("path",{key:1,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})):(t.openBlock(),t.createBlock("path",{key:2,"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"}))],2)),t.createVNode("p",{class:["text-sm font-medium flex-1",{"text-red-800":"error"===$.value.type,"text-yellow-800":"warning"===$.value.type,"text-emerald-800":"success"===$.value.type}]},t.toDisplayString($.value.text),3)],2)):t.createCommentVNode("",!0),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Modalidad * "),t.createVNode("div",{class:"grid grid-cols-3 gap-3"},[(t.openBlock(),t.createBlock(t.Fragment,null,t.renderList(A,e=>t.createVNode("button",{key:e.value,type:"button",onClick:t=>S.value.modalidad=e.value,class:["px-4 py-3 rounded-xl border-2 transition-all font-medium flex flex-col items-center gap-2",S.value.modalidad===e.value?"border-[#027368] bg-[#027368]/5 text-[#027368]":"border-neutral-200 text-neutral-600 hover:border-neutral-300"]},[t.createVNode("span",{class:"text-2xl"},t.toDisplayString(e.icon),1),t.createVNode("span",{class:"text-sm"},t.toDisplayString(e.label),1)],10,["onClick"])),64))])]),"presencial"===S.value.modalidad?(t.openBlock(),t.createBlock("div",{key:1},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," UbicaciÃ³n "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.ubicacion=e,type:"text",placeholder:"DirecciÃ³n del consultorio",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.ubicacion]])])):t.createCommentVNode("",!0),"online"===S.value.modalidad?(t.openBlock(),t.createBlock("div",{key:2},[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Enlace de videollamada "),t.withDirectives(t.createVNode("input",{"onUpdate:modelValue":e=>S.value.enlace_videollamada=e,type:"url",placeholder:"https://meet.google.com/...",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.enlace_videollamada]])])):t.createCommentVNode("",!0),t.createVNode("div",null,[t.createVNode("label",{class:"block text-sm font-semibold text-neutral-700 mb-2"}," Observaciones "),t.withDirectives(t.createVNode("textarea",{"onUpdate:modelValue":e=>S.value.observaciones=e,rows:"3",placeholder:"Notas adicionales sobre esta cita...",class:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all resize-none"},null,8,["onUpdate:modelValue"]),[[t.vModelText,S.value.observaciones]])]),t.createVNode("div",{class:"flex gap-3 pt-4"},[t.createVNode("button",{type:"button",onClick:handleClose,class:"flex-1 px-6 py-3 bg-neutral-100 text-neutral-700 rounded-xl hover:bg-neutral-200 transition-all font-semibold"}," Cancelar "),t.createVNode("button",{type:"submit",disabled:N.value||!z.value,class:"flex-1 px-6 py-3 bg-gradient-to-r from-[#027368] to-[#025951] text-white rounded-xl hover:shadow-lg transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[N.value?(t.openBlock(),t.createBlock("svg",{key:0,class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t.createVNode("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t.createVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(N.value?"Creando...":"Crear Cita"),1)],8,["disabled"])])],32)];o(a.ssrRenderComponent(t.unref(ve),{as:"h3",class:"text-2xl font-bold text-neutral-900 mb-6 flex items-center gap-3"},{default:t.withCtx((e,a,o,l)=>{if(!a)return[t.createVNode("div",{class:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#027368] to-[#025951] flex items-center justify-center text-white"},[(t.openBlock(),t.createBlock("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]))]),t.createTextVNode(" Nueva Cita ")];a(`<div class="w-10 h-10 rounded-xl bg-gradient-to-br from-[#027368] to-[#025951] flex items-center justify-center text-white" data-v-72409a57${l}><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-72409a57${l}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-72409a57${l}></path></svg></div> Nueva Cita `)}),_:1},l,r)),o(`<form class="space-y-5" data-v-72409a57${r}><div class="relative" data-v-72409a57${r}><label class="block text-sm font-semibold text-neutral-700 mb-2" data-v-72409a57${r}> Paciente * </label>`),k.value?(o(`<div class="space-y-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl" data-v-72409a57${r}><div class="flex items-center justify-between mb-3" data-v-72409a57${r}><h4 class="font-semibold text-neutral-900 flex items-center gap-2" data-v-72409a57${r}><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-72409a57${r}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" data-v-72409a57${r}></path></svg> Crear Nuevo Paciente </h4><button type="button" class="text-sm text-neutral-600 hover:text-neutral-900" data-v-72409a57${r}> Cancelar </button></div><div class="grid grid-cols-2 gap-3" data-v-72409a57${r}><div class="col-span-2" data-v-72409a57${r}><input${a.ssrRenderAttr("value",D.value.nombre_completo)} type="text" placeholder="Nombre completo *" class="w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" data-v-72409a57${r}></div><div class="col-span-2" data-v-72409a57${r}><input${a.ssrRenderAttr("value",D.value.email)} type="email" placeholder="Email *" class="w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" data-v-72409a57${r}></div><div data-v-72409a57${r}><input${a.ssrRenderAttr("value",D.value.telefono)} type="tel" placeholder="TelÃ©fono" class="w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" data-v-72409a57${r}></div><div data-v-72409a57${r}><input${a.ssrRenderAttr("value",D.value.fecha_nacimiento)} type="date" placeholder="Fecha de nacimiento" class="w-full px-3 py-2 border-2 border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" data-v-72409a57${r}></div></div><button type="button"${a.ssrIncludeBooleanAttr(!D.value.nombre_completo||!D.value.email||V.value)?" disabled":""} class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center gap-2" data-v-72409a57${r}>`),V.value?o(`<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-72409a57${r}><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-72409a57${r}></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-72409a57${r}></path></svg>`):o("\x3c!----\x3e"),o(` ${a.ssrInterpolate(V.value?"Creando...":"Crear Paciente")}</button></div>`)):(o(`<div class="space-y-2" data-v-72409a57${r}><div class="relative" data-v-72409a57${r}><input${a.ssrRenderAttr("value",t.unref(p))} type="text" placeholder="Buscar por nombre, email o telÃ©fono..." class="w-full px-4 py-3 pr-10 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all" data-v-72409a57${r}><div class="absolute right-3 top-1/2 -translate-y-1/2" data-v-72409a57${r}>`),t.unref(d)?o(`<svg class="animate-spin h-5 w-5 text-[#027368]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-72409a57${r}><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-72409a57${r}></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-72409a57${r}></path></svg>`):o(`<svg class="h-5 w-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-72409a57${r}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-72409a57${r}></path></svg>`),o("</div></div>"),w.value&&(t.unref(u)||t.unref(p).trim().length>0)?(o(`<div class="absolute z-10 w-full mt-1 bg-white border-2 border-neutral-200 rounded-xl shadow-xl max-h-64 overflow-y-auto" data-v-72409a57${r}>\x3c!--[--\x3e`),a.ssrRenderList(t.unref(s),e=>{o(`<button type="button" class="w-full px-4 py-3 text-left hover:bg-neutral-50 transition-colors border-b border-neutral-100 last:border-0" data-v-72409a57${r}><div class="flex items-start justify-between" data-v-72409a57${r}><div class="flex-1" data-v-72409a57${r}><p class="font-semibold text-neutral-900" data-v-72409a57${r}>${a.ssrInterpolate(e.nombre_completo)}</p><p class="text-sm text-neutral-600" data-v-72409a57${r}>${a.ssrInterpolate(e.email)}</p>`),e.telefono?o(`<p class="text-xs text-neutral-500" data-v-72409a57${r}>${a.ssrInterpolate(e.telefono)}</p>`):o("\x3c!----\x3e"),o("</div>"),e.sesiones_restantes_total>0?o(`<div class="flex items-center gap-1 px-2 py-1 bg-emerald-100 text-emerald-700 rounded-lg text-xs font-medium" data-v-72409a57${r}><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20" data-v-72409a57${r}><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" data-v-72409a57${r}></path><path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" data-v-72409a57${r}></path></svg> ${a.ssrInterpolate(e.sesiones_restantes_total)} sesiones </div>`):o("\x3c!----\x3e"),o("</div></button>")}),o("\x3c!--]--\x3e"),t.unref(p).trim().length>0?o(`<button type="button" class="w-full px-4 py-3 text-left bg-neutral-50 hover:bg-neutral-100 transition-colors border-t-2 border-neutral-200 font-medium text-[#027368] flex items-center gap-2" data-v-72409a57${r}><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-72409a57${r}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" data-v-72409a57${r}></path></svg> Crear nuevo paciente </button>`):o("\x3c!----\x3e"),t.unref(u)||t.unref(d)?o("\x3c!----\x3e"):o(`<div class="px-4 py-8 text-center text-neutral-500" data-v-72409a57${r}><svg class="w-12 h-12 mx-auto mb-2 text-neutral-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-72409a57${r}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" data-v-72409a57${r}></path></svg><p class="font-medium" data-v-72409a57${r}>No se encontraron pacientes</p><p class="text-sm" data-v-72409a57${r}>Intenta con otro criterio de bÃºsqueda</p></div>`),o("</div>")):o("\x3c!----\x3e"),S.value.paciente_id&&C.value?o(`<div class="flex items-center justify-between px-4 py-3 bg-emerald-50 border-2 border-emerald-200 rounded-xl" data-v-72409a57${r}><div class="flex items-center gap-3" data-v-72409a57${r}><div class="w-10 h-10 rounded-full bg-emerald-600 text-white flex items-center justify-center font-bold" data-v-72409a57${r}>${a.ssrInterpolate(C.value.nombre_completo.charAt(0).toUpperCase())}</div><div data-v-72409a57${r}><p class="font-semibold text-neutral-900" data-v-72409a57${r}>${a.ssrInterpolate(C.value.nombre_completo)}</p><p class="text-sm text-neutral-600" data-v-72409a57${r}>${a.ssrInterpolate(C.value.email)}</p></div></div><button type="button" class="p-2 hover:bg-emerald-100 rounded-lg transition-colors" data-v-72409a57${r}><svg class="w-5 h-5 text-neutral-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-72409a57${r}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-72409a57${r}></path></svg></button></div>`):o("\x3c!----\x3e"),o("</div>")),o(`</div><div class="grid grid-cols-3 gap-4" data-v-72409a57${r}><div data-v-72409a57${r}><label class="block text-sm font-semibold text-neutral-700 mb-2" data-v-72409a57${r}> Fecha * </label><input${a.ssrRenderAttr("value",S.value.fecha_cita)} type="date" required class="w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all" data-v-72409a57${r}></div><div data-v-72409a57${r}><label class="block text-sm font-semibold text-neutral-700 mb-2" data-v-72409a57${r}> Hora inicio * </label><input${a.ssrRenderAttr("value",S.value.hora_inicio)} type="time" required class="w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all" data-v-72409a57${r}></div><div data-v-72409a57${r}><label class="block text-sm font-semibold text-neutral-700 mb-2" data-v-72409a57${r}> Hora fin * </label><input${a.ssrRenderAttr("value",S.value.hora_fin)} type="time" required class="w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all" data-v-72409a57${r}></div></div>`),$.value?(o(`<div class="${a.ssrRenderClass([{"bg-red-50 border-2 border-red-200":"error"===$.value.type,"bg-yellow-50 border-2 border-yellow-200":"warning"===$.value.type,"bg-emerald-50 border-2 border-emerald-200":"success"===$.value.type},"px-4 py-3 rounded-xl flex items-start gap-3"])}" data-v-72409a57${r}><svg class="${a.ssrRenderClass([{"text-red-600":"error"===$.value.type,"text-yellow-600":"warning"===$.value.type,"text-emerald-600":"success"===$.value.type},"w-5 h-5 mt-0.5 flex-shrink-0"])}" fill="currentColor" viewBox="0 0 20 20" data-v-72409a57${r}>`),"error"===$.value.type?o(`<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" data-v-72409a57${r}></path>`):"success"===$.value.type?o(`<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" data-v-72409a57${r}></path>`):o(`<path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-72409a57${r}></path>`),o(`</svg><p class="${a.ssrRenderClass([{"text-red-800":"error"===$.value.type,"text-yellow-800":"warning"===$.value.type,"text-emerald-800":"success"===$.value.type},"text-sm font-medium flex-1"])}" data-v-72409a57${r}>${a.ssrInterpolate($.value.text)}</p></div>`)):o("\x3c!----\x3e"),o(`<div data-v-72409a57${r}><label class="block text-sm font-semibold text-neutral-700 mb-2" data-v-72409a57${r}> Modalidad * </label><div class="grid grid-cols-3 gap-3" data-v-72409a57${r}>\x3c!--[--\x3e`),a.ssrRenderList(A,e=>{o(`<button type="button" class="${a.ssrRenderClass([S.value.modalidad===e.value?"border-[#027368] bg-[#027368]/5 text-[#027368]":"border-neutral-200 text-neutral-600 hover:border-neutral-300","px-4 py-3 rounded-xl border-2 transition-all font-medium flex flex-col items-center gap-2"])}" data-v-72409a57${r}><span class="text-2xl" data-v-72409a57${r}>${a.ssrInterpolate(e.icon)}</span><span class="text-sm" data-v-72409a57${r}>${a.ssrInterpolate(e.label)}</span></button>`)}),o("\x3c!--]--\x3e</div></div>"),"presencial"===S.value.modalidad?o(`<div data-v-72409a57${r}><label class="block text-sm font-semibold text-neutral-700 mb-2" data-v-72409a57${r}> UbicaciÃ³n </label><input${a.ssrRenderAttr("value",S.value.ubicacion)} type="text" placeholder="DirecciÃ³n del consultorio" class="w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all" data-v-72409a57${r}></div>`):o("\x3c!----\x3e"),"online"===S.value.modalidad?o(`<div data-v-72409a57${r}><label class="block text-sm font-semibold text-neutral-700 mb-2" data-v-72409a57${r}> Enlace de videollamada </label><input${a.ssrRenderAttr("value",S.value.enlace_videollamada)} type="url" placeholder="https://meet.google.com/..." class="w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all" data-v-72409a57${r}></div>`):o("\x3c!----\x3e"),o(`<div data-v-72409a57${r}><label class="block text-sm font-semibold text-neutral-700 mb-2" data-v-72409a57${r}> Observaciones </label><textarea rows="3" placeholder="Notas adicionales sobre esta cita..." class="w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#027368] focus:border-transparent transition-all resize-none" data-v-72409a57${r}>${a.ssrInterpolate(S.value.observaciones)}</textarea></div><div class="flex gap-3 pt-4" data-v-72409a57${r}><button type="button" class="flex-1 px-6 py-3 bg-neutral-100 text-neutral-700 rounded-xl hover:bg-neutral-200 transition-all font-semibold" data-v-72409a57${r}> Cancelar </button><button type="submit"${a.ssrIncludeBooleanAttr(N.value||!z.value)?" disabled":""} class="flex-1 px-6 py-3 bg-gradient-to-r from-[#027368] to-[#025951] text-white rounded-xl hover:shadow-lg transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2" data-v-72409a57${r}>`),N.value?o(`<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-72409a57${r}><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-72409a57${r}></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-72409a57${r}></path></svg>`):o("\x3c!----\x3e"),o(` ${a.ssrInterpolate(N.value?"Creando...":"Crear Cita")}</button></div></form>`)}),_:1},l,r))}),_:1},l,r)),o("</div></div>")}),_:1},l,r))}),_:1},r))}}}),Be=Ce.setup;Ce.setup=(e,a)=>{const o=t.useSSRContext();return(o.modules||(o.modules=new Set)).add("components/ModalNuevaCitaEnhanced.vue"),Be?Be(e,a):void 0};const $e=Object.assign(n(Ce,[["__scopeId","data-v-72409a57"]]),{__name:"ModalNuevaCitaEnhanced"});export{$e as _,useAgendaEnhanced as u};
//# sourceMappingURL=ModalNuevaCitaEnhanced-CK2odB5s.mjs.map
