import{defineComponent as e,ref as t,computed as a,mergeProps as s,unref as o,useSSRContext as n}from"vue";import{ssrRenderAttrs as i,ssrRenderComponent as l,ssrInterpolate as r,ssrRenderClass as d,ssrRenderStyle as c,ssrRenderList as p,ssrRenderAttr as u,ssrIncludeBooleanAttr as m,ssrLooseContain as x,ssrLooseEqual as f}from"vue/server-renderer";import{ClockIcon as v,CheckCircleIcon as b,MagnifyingGlassIcon as g,ExclamationTriangleIcon as h,CalendarDaysIcon as _,EyeIcon as y}from"@heroicons/vue/24/outline";import{M as w}from"./ModalDetallesCita-4YIA-weF.mjs";import{u as $}from"./useSupabaseClient-DykwVqLQ.mjs";import{e as j}from"./server.mjs";import"./_plugin-vue_export-helper-1tPrXgE0.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../routes/renderer.mjs";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"vue-router";import"@supabase/ssr";import"@vercel/analytics/nuxt";const C=e({__name:"index",__ssrInlineRender:!0,setup(e){const n=$(),C=j(),k=t(!0),A=t(null),D=t([]),S=t([]),E=t({busqueda:"",estado:"",periodo:"todos"}),M=t(!1),P=t(null),T=t(!0),z=t(null),N=a(()=>{let e=[...D.value];if(E.value.busqueda){const t=E.value.busqueda.toLowerCase();e=e.filter(e=>{var a,s;return null==(s=null==(a=e.paciente)?void 0:a.nombre_completo)?void 0:s.toLowerCase().includes(t)})}E.value.estado&&(e=e.filter(e=>e.estado===E.value.estado));const t=new Date;if("mes-actual"===E.value.periodo){const a=new Date(t.getFullYear(),t.getMonth(),1),s=new Date(t.getFullYear(),t.getMonth()+1,0);e=e.filter(e=>{const t=new Date(e.fecha_cita);return t>=a&&t<=s})}else if("mes-anterior"===E.value.periodo){const a=new Date(t.getFullYear(),t.getMonth()-1,1),s=new Date(t.getFullYear(),t.getMonth(),0);e=e.filter(e=>{const t=new Date(e.fecha_cita);return t>=a&&t<=s})}else if("trimestre"===E.value.periodo){const a=new Date(t);a.setMonth(t.getMonth()-3),e=e.filter(e=>new Date(e.fecha_cita)>=a)}return e.sort((e,t)=>{const a=new Date(e.fecha_cita+"T"+e.hora_inicio);return new Date(t.fecha_cita+"T"+t.hora_inicio).getTime()-a.getTime()}),e}),q=a(()=>{const e={pendientes:0,confirmadas:0,completadas:0,canceladas:0,montoPendiente:0,montoConfirmado:0,montoCompletado:0,montoCancelado:0};return N.value.forEach(t=>{var a,s,o;const n=t.monto_terapeuta||.7*(t.precio_estimado||50);switch(t.estado){case"pendiente":e.pendientes++,t.esta_pagado||(null==(a=t.bono)?void 0:a.pagado)?e.montoConfirmado+=n:e.montoPendiente+=n;break;case"confirmada":e.confirmadas++,t.esta_pagado||(null==(s=t.bono)?void 0:s.pagado)?e.montoConfirmado+=n:e.montoPendiente+=n;break;case"realizada":case"completada":e.completadas++,t.esta_pagado||(null==(o=t.bono)?void 0:o.pagado)?e.montoConfirmado+=n:e.montoCompletado+=n;break;case"cancelada":e.canceladas++,e.montoCancelado+=n}}),e}),F=a(()=>S.value.map(e=>{const t=(e.sesiones_totales||0)-(e.sesiones_restantes||0),a=e.sesiones_totales>0?e.monto_total/e.sesiones_totales:0,s=.7*e.monto_total;return{bono_id:e.id,paciente_id:e.paciente_id,paciente_nombre:e.paciente_nombre,paciente_email:e.paciente_email,bono_sesiones_totales:e.sesiones_totales,bono_sesiones_restantes:e.sesiones_restantes,bono_monto_total:e.monto_total,bono_fecha_pago:e.fecha_pago,bono_metodo_pago:e.metodo_pago,tipo_bono:e.tipo_bono||"Est√°ndar",sesiones_usadas:t,precio_por_sesion:a,monto_total_terapeuta:s}}).sort((e,t)=>{const a=new Date(e.bono_fecha_pago||0);return new Date(t.bono_fecha_pago||0).getTime()-a.getTime()})),L=a(()=>F.value.reduce((e,t)=>e+(t.monto_total_terapeuta||0),0)),cargarSesiones=async()=>{try{k.value=!0,A.value=null;let e=0;for(;!C.value&&e<50;)await new Promise(e=>setTimeout(e,100)),e++;if(!C.value)throw new Error("Usuario no autenticado");console.log("üë§ Usuario verificado:",C.value.id);const{data:t,error:a}=await n.from("terapeutas").select("id").eq("email",C.value.email).single();if(a)throw console.error("Error al buscar terapeuta:",a),a;if(!t)throw new Error("No se encontr√≥ el terapeuta asociado a este usuario");console.log("Terapeuta encontrado:",t);const{data:s,error:o}=await n.from("vista_sesiones_psicologa").select("*").eq("terapeuta_id",t.id).order("fecha",{ascending:!1});if(o)throw console.error("Error al cargar sesiones:",o),o;console.log("Sesiones cargadas:",(null==s?void 0:s.length)||0,s),D.value=(s||[]).map(e=>(console.log("Sesi√≥n individual:",{id:e.id,bono_id:e.bono_id,bono_pagado:e.bono_pagado,esta_pagado:e.esta_pagado,categoria_financiera:e.categoria_financiera,precio_sesion:e.precio_sesion,monto_terapeuta:e.monto_terapeuta,paciente:e.paciente_nombre}),{...e,precio_estimado:e.precio_sesion||50,paciente:{id:e.paciente_id,nombre_completo:e.paciente_nombre,email:e.paciente_email,telefono:e.paciente_telefono},bono:e.bono_id?{id:e.bono_id,sesiones_totales:e.bono_sesiones_totales,sesiones_restantes:e.bono_sesiones_restantes,monto_total:e.bono_monto_total,pagado:e.bono_pagado,fecha_pago:e.bono_fecha_pago,metodo_pago:e.bono_metodo_pago}:null})),console.log("Sesiones procesadas:",D.value.length)}catch(e){console.error("Error al cargar sesiones:",e),A.value=e.message||"Error desconocido al cargar las sesiones"}finally{k.value=!1}},cerrarModalDetalles=()=>{M.value=!1,P.value=null},formatearPrecio=e=>e.toFixed(2),formatearFecha=e=>{if(!e)return"-";const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})},obtenerIniciales=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2),obtenerColorPuntoEstado=e=>({pendiente:"bg-yellow-500",confirmada:"bg-green-500",realizada:"bg-blue-500",completada:"bg-blue-500",cancelada:"bg-red-500"}[e]||"bg-gray-500");return(e,t,a,n)=>{t(`<div${i(s({class:"min-h-screen bg-base-bg"},n))}><div class="mb-8"><h1 class="text-3xl font-serif font-bold text-cafe mb-2"> Gesti√≥n de Sesiones </h1><p class="text-terracota"> Visualiza y gestiona todas tus sesiones con informaci√≥n financiera </p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"><div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6"><div class="flex items-center justify-between mb-4"><div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">`),t(l(o(v),{class:"w-6 h-6 text-yellow-600"},null,a)),t(`</div><span class="text-sm font-medium text-yellow-600 bg-yellow-50 px-3 py-1 rounded-full"> Pendientes </span></div><p class="text-sm text-cafe/60 mb-1">Sesiones pendientes</p><p class="text-3xl font-bold text-cafe mb-2">${r(q.value.pendientes)}</p><div class="pt-3 border-t border-gray-100"><p class="text-xs text-cafe/50 mb-1">Monto estimado</p><p class="text-xl font-semibold text-yellow-600">${r(formatearPrecio(q.value.montoPendiente))}‚Ç¨ </p></div></div><div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6"><div class="flex items-center justify-between mb-4"><div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">`),t(l(o(b),{class:"w-6 h-6 text-green-600"},null,a)),t(`</div><span class="text-sm font-medium text-green-600 bg-green-50 px-3 py-1 rounded-full"> Confirmadas </span></div><p class="text-sm text-cafe/60 mb-1">Sesiones confirmadas</p><p class="text-3xl font-bold text-cafe mb-2">${r(q.value.confirmadas)}</p><div class="pt-3 border-t border-gray-100"><p class="text-xs text-cafe/50 mb-1">Monto asegurado</p><p class="text-xl font-semibold text-green-600">${r(formatearPrecio(q.value.montoConfirmado))}‚Ç¨ </p></div></div><div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6"><div class="flex items-center justify-between mb-4"><div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">`),t(l(o(b),{class:"w-6 h-6 text-blue-600"},null,a)),t(`</div><span class="text-sm font-medium text-blue-600 bg-blue-50 px-3 py-1 rounded-full"> Completadas </span></div><p class="text-sm text-cafe/60 mb-1">Sesiones realizadas</p><p class="text-3xl font-bold text-cafe mb-2">${r(q.value.completadas)}</p><div class="pt-3 border-t border-gray-100"><p class="text-xs text-cafe/50 mb-1">Monto por cobrar</p><p class="text-xl font-semibold text-blue-600">${r(formatearPrecio(q.value.montoCompletado))}‚Ç¨ </p></div></div><div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6"><div class="flex items-center justify-between mb-4"><div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center"><span class="text-2xl">‚úï</span></div><span class="text-sm font-medium text-red-600 bg-red-50 px-3 py-1 rounded-full"> Canceladas </span></div><p class="text-sm text-cafe/60 mb-1">Sesiones canceladas</p><p class="text-3xl font-bold text-cafe mb-2">${r(q.value.canceladas)}</p><div class="pt-3 border-t border-gray-100"><p class="text-xs text-cafe/50 mb-1">Monto perdido</p><p class="text-xl font-semibold text-red-600">${r(formatearPrecio(q.value.montoCancelado))}‚Ç¨ </p></div></div></div><div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6"><div class="bg-gradient-to-r from-green-50 to-emerald-50 border-b border-green-100 px-6 py-5"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><div class="w-12 h-12 rounded-xl bg-green-600 flex items-center justify-center">`),t(l(o(b),{class:"w-6 h-6 text-white"},null,a)),t(`</div><div><h2 class="text-xl font-bold text-cafe">Pagos Confirmados</h2><p class="text-sm text-cafe/60 mt-0.5">Bonos procesados por coordinaci√≥n</p></div></div><div class="flex items-center gap-6"><div class="text-right"><p class="text-xs text-cafe/50 uppercase font-semibold tracking-wide">Total Confirmado</p><p class="text-3xl font-bold text-green-700">${r(formatearPrecio(L.value))}‚Ç¨</p><p class="text-xs text-cafe/60 mt-0.5">${r(F.value.length)} ${r(1===F.value.length?"bono":"bonos")}</p></div><button class="${d([{"rotate-180":T.value},"w-10 h-10 rounded-lg bg-white/80 hover:bg-white border border-green-200 flex items-center justify-center text-green-700 hover:text-green-800 transition-all duration-200"])}"><span class="text-lg">‚ñº</span></button></div></div></div><div style="${c(T.value?null:{display:"none"})}">`),0===F.value.length?t('<div class="text-center py-12 px-6"><div class="w-20 h-20 mx-auto mb-4 rounded-full bg-cafe/5 flex items-center justify-center"><span class="text-4xl">üì≠</span></div><p class="text-cafe/60 font-medium">No hay pagos confirmados a√∫n</p><p class="text-sm text-cafe/40 mt-1">Los bonos pagados aparecer√°n aqu√≠</p></div>'):(t('<div class="divide-y divide-gray-100">\x3c!--[--\x3e'),p(F.value,(e,a)=>{t(`<div class="group hover:bg-green-50/30 transition-colors duration-150"><div class="px-6 py-4 cursor-pointer flex items-center gap-4"><div class="flex-shrink-0 w-1 h-12 rounded-full bg-green-500"></div><div class="flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-green-600 to-emerald-600 flex items-center justify-center text-white font-bold text-sm shadow-sm">${r(obtenerIniciales(e.paciente_nombre))}</div><div class="flex-1 min-w-0 grid grid-cols-5 gap-4 items-center"><div class="col-span-2"><p class="font-semibold text-cafe truncate">${r(e.paciente_nombre)}</p><p class="text-xs text-cafe/50 truncate">${r(e.tipo_bono||"Bono Est√°ndar")}</p></div><div class="text-center"><p class="text-sm font-semibold text-cafe">${r(e.sesiones_usadas)}/${r(e.bono_sesiones_totales)}</p><p class="text-xs text-cafe/50">sesiones</p></div><div class="text-right"><p class="text-lg font-bold text-green-700">${r(formatearPrecio(e.monto_total_terapeuta))}‚Ç¨</p><p class="text-xs text-cafe/50">tu parte (70%)</p></div><div class="text-right"><p class="text-sm font-medium text-cafe flex items-center justify-end gap-1.5">${r(formatearFecha(e.bono_fecha_pago))}</p><p class="text-xs text-cafe/50 capitalize flex items-center justify-end gap-1.5 mt-0.5">${r(e.bono_metodo_pago||"No especificado")}</p></div></div><div class="flex-shrink-0 ml-2"><span class="${d([{"rotate-180":z.value===e.bono_id},"block w-6 h-6 rounded-full bg-cafe/5 group-hover:bg-cafe/10 flex items-center justify-center text-cafe/40 text-xs transition-all duration-200"])}"> ‚ñº </span></div></div><div class="bg-gradient-to-b from-green-50/50 to-transparent" style="${c(z.value===e.bono_id?null:{display:"none"})}"><div class="px-6 pb-6 pt-2 ml-16"><div class="bg-white rounded-xl border border-green-100 p-5 shadow-sm"><div class="grid grid-cols-3 gap-6"><div class="space-y-3"><p class="text-xs text-cafe/40 uppercase font-bold tracking-wider mb-3">üìã Paciente</p><div class="space-y-2"><div class="flex justify-between text-sm"><span class="text-cafe/60">Nombre:</span><span class="font-medium text-cafe">${r(e.paciente_nombre)}</span></div><div class="flex justify-between text-sm"><span class="text-cafe/60">Email:</span><span class="font-medium text-cafe text-xs truncate max-w-[150px]"${u("title",e.paciente_email)}>${r(e.paciente_email)}</span></div></div></div><div class="space-y-3"><p class="text-xs text-cafe/40 uppercase font-bold tracking-wider mb-3">üßæ Detalles del Bono</p><div class="space-y-2"><div class="flex justify-between text-sm"><span class="text-cafe/60">Tipo:</span><span class="font-medium text-cafe">${r(e.tipo_bono||"Est√°ndar")}</span></div><div class="flex justify-between text-sm"><span class="text-cafe/60">Sesiones totales:</span><span class="font-medium text-cafe">${r(e.bono_sesiones_totales)}</span></div><div class="flex justify-between text-sm"><span class="text-cafe/60">Sesiones usadas:</span><span class="font-medium text-cafe">${r(e.sesiones_usadas)}</span></div><div class="flex justify-between text-sm"><span class="text-cafe/60">Sesiones restantes:</span><span class="font-semibold text-green-700">${r(e.bono_sesiones_restantes)}</span></div></div></div><div class="space-y-3"><p class="text-xs text-cafe/40 uppercase font-bold tracking-wider mb-3">Financiero</p><div class="space-y-2"><div class="flex justify-between text-sm"><span class="text-cafe/60">Monto total:</span><span class="font-bold text-cafe">${r(formatearPrecio(e.bono_monto_total))}‚Ç¨</span></div><div class="flex justify-between text-sm bg-green-50 px-2 py-1.5 rounded-lg"><span class="text-cafe/60 font-medium">Tu parte (70%):</span><span class="font-bold text-green-700">${r(formatearPrecio(e.monto_total_terapeuta))}‚Ç¨</span></div><div class="flex justify-between text-sm"><span class="text-cafe/60">Por sesi√≥n:</span><span class="font-medium text-cafe/80">${r(formatearPrecio(e.precio_por_sesion))}‚Ç¨</span></div><div class="pt-2 border-t border-green-100 mt-3"><div class="flex justify-between text-xs text-cafe/50 mb-1"><span>M√©todo de pago:</span><span class="font-medium capitalize">${r(e.bono_metodo_pago||"No especificado")}</span></div><div class="flex justify-between text-xs text-cafe/50"><span>Fecha de pago:</span><span class="font-medium">${r(formatearFecha(e.bono_fecha_pago))}</span></div></div></div></div></div></div></div></div></div>`)}),t("\x3c!--]--\x3e</div>")),t(`</div></div><div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="md:col-span-2"><label class="block text-sm font-medium text-cafe mb-2"> Buscar paciente </label><div class="relative"><input${u("value",E.value.busqueda)} type="text" placeholder="Nombre del paciente..." class="w-full px-4 py-2 pl-10 bg-base-bg rounded-lg border border-transparent focus:border-terracota focus:outline-none focus:ring-2 focus:ring-terracota/20">`),t(l(o(g),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-cafe/50"},null,a)),t(`</div></div><div><label class="block text-sm font-medium text-cafe mb-2"> Estado </label><select class="w-full px-4 py-2 bg-base-bg rounded-lg border border-transparent focus:border-terracota focus:outline-none focus:ring-2 focus:ring-terracota/20 text-cafe"><option value=""${m(Array.isArray(E.value.estado)?x(E.value.estado,""):f(E.value.estado,""))?" selected":""}>Todos los estados</option><option value="pendiente"${m(Array.isArray(E.value.estado)?x(E.value.estado,"pendiente"):f(E.value.estado,"pendiente"))?" selected":""}>Pendiente</option><option value="confirmada"${m(Array.isArray(E.value.estado)?x(E.value.estado,"confirmada"):f(E.value.estado,"confirmada"))?" selected":""}>Confirmada</option><option value="realizada"${m(Array.isArray(E.value.estado)?x(E.value.estado,"realizada"):f(E.value.estado,"realizada"))?" selected":""}>Completada</option><option value="cancelada"${m(Array.isArray(E.value.estado)?x(E.value.estado,"cancelada"):f(E.value.estado,"cancelada"))?" selected":""}>Cancelada</option></select></div><div><label class="block text-sm font-medium text-cafe mb-2"> Per√≠odo </label><select class="w-full px-4 py-2 bg-base-bg rounded-lg border border-transparent focus:border-terracota focus:outline-none focus:ring-2 focus:ring-terracota/20 text-cafe"><option value="mes-actual"${m(Array.isArray(E.value.periodo)?x(E.value.periodo,"mes-actual"):f(E.value.periodo,"mes-actual"))?" selected":""}>Mes actual</option><option value="mes-anterior"${m(Array.isArray(E.value.periodo)?x(E.value.periodo,"mes-anterior"):f(E.value.periodo,"mes-anterior"))?" selected":""}>Mes anterior</option><option value="trimestre"${m(Array.isArray(E.value.periodo)?x(E.value.periodo,"trimestre"):f(E.value.periodo,"trimestre"))?" selected":""}>√öltimo trimestre</option><option value="todos"${m(Array.isArray(E.value.periodo)?x(E.value.periodo,"todos"):f(E.value.periodo,"todos"))?" selected":""}>Todos</option></select></div></div></div>`),k.value?t('<div class="flex items-center justify-center py-12"><div class="text-center"><div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-terracota mb-4"></div><p class="text-cafe/60">Cargando sesiones...</p></div></div>'):A.value?(t('<div class="bg-red-50 border border-red-200 rounded-xl p-6"><div class="flex items-start gap-3">'),t(l(o(h),{class:"w-6 h-6 text-red-600"},null,a)),t(`<div><h3 class="font-semibold text-red-800 mb-1">Error al cargar sesiones</h3><p class="text-sm text-red-600">${r(A.value)}</p></div></div></div>`)):(t(`<div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"><div class="bg-gray-50 border-b border-gray-100 px-6 py-4"><h3 class="font-semibold text-cafe"> Listado de Sesiones <span class="text-sm font-normal text-cafe/60 ml-2"> (${r(N.value.length)} sesiones) </span></h3></div>`),0===N.value.length?(t('<div class="p-12 text-center"><div class="w-16 h-16 bg-cafe-claro/20 rounded-full flex items-center justify-center mx-auto mb-4">'),t(l(o(_),{class:"w-8 h-8 text-cafe/40"},null,a)),t(`</div><h3 class="text-lg font-semibold text-cafe mb-2"> No hay sesiones para mostrar </h3><p class="text-cafe/60 mb-6">${r(E.value.busqueda||E.value.estado?"Intenta ajustar los filtros de b√∫squeda":"No tienes sesiones programadas a√∫n")}</p></div>`)):(t('<div class="overflow-x-auto"><table class="w-full"><thead class="bg-gray-50 border-b border-gray-200"><tr><th class="px-6 py-3 text-left text-xs font-semibold text-cafe/70 uppercase tracking-wider"> Fecha </th><th class="px-6 py-3 text-left text-xs font-semibold text-cafe/70 uppercase tracking-wider"> Hora </th><th class="px-6 py-3 text-left text-xs font-semibold text-cafe/70 uppercase tracking-wider"> Paciente </th><th class="px-6 py-3 text-left text-xs font-semibold text-cafe/70 uppercase tracking-wider"> Modalidad </th><th class="px-6 py-3 text-left text-xs font-semibold text-cafe/70 uppercase tracking-wider"> Estado </th><th class="px-6 py-3 text-left text-xs font-semibold text-cafe/70 uppercase tracking-wider"> Bono </th><th class="px-6 py-3 text-right text-xs font-semibold text-cafe/70 uppercase tracking-wider"> Monto </th><th class="px-6 py-3 text-center text-xs font-semibold text-cafe/70 uppercase tracking-wider"> Acciones </th></tr></thead><tbody class="bg-white divide-y divide-gray-100">\x3c!--[--\x3e'),p(N.value,e=>{var s,n,i,c,p,u;t(`<tr class="hover:bg-gray-50 transition-colors duration-150"><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-cafe">${r(formatearFecha(e.fecha_cita))}</div><div class="text-xs text-cafe/50">${r((p=e.fecha_cita,new Date(p+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long"})))}</div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-cafe">${r((c=e.hora_inicio,c?c.substring(0,5):"-"))}</div><div class="text-xs text-cafe/50">${r(e.duracion_minutos||50)} min </div></td><td class="px-6 py-4"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-full bg-terracota/20 text-terracota flex items-center justify-center font-semibold text-sm flex-shrink-0">${r(obtenerIniciales((null==(s=e.paciente)?void 0:s.nombre_completo)||"NN"))}</div><div><div class="text-sm font-medium text-cafe">${r((null==(n=e.paciente)?void 0:n.nombre_completo)||"Sin nombre")}</div>`),(null==(i=e.paciente)?void 0:i.email)?t(`<div class="text-xs text-cafe/50">${r(e.paciente.email)}</div>`):t("\x3c!----\x3e"),t(`</div></div></td><td class="px-6 py-4 whitespace-nowrap"><span class="${d(["inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium","online"===e.modalidad?"bg-blue-50 text-blue-700":"bg-purple-50 text-purple-700"])}"><span>${r("online"===e.modalidad?"üíª":"üè¢")}</span> ${r("online"===e.modalidad?"Online":"Presencial")}</span></td><td class="px-6 py-4 whitespace-nowrap"><span class="${d(["inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium",(u=e.estado,{pendiente:"bg-yellow-50 text-yellow-700",confirmada:"bg-green-50 text-green-700",realizada:"bg-blue-50 text-blue-700",completada:"bg-blue-50 text-blue-700",cancelada:"bg-red-50 text-red-700"}[u]||"bg-gray-50 text-gray-700")])}"><span class="${d([obtenerColorPuntoEstado(e.estado),"w-1.5 h-1.5 rounded-full"])}"></span> ${r((e=>({pendiente:"Pendiente",confirmada:"Confirmada",realizada:"Completada",completada:"Completada",cancelada:"Cancelada"}[e]||e))(e.estado))}</span></td><td class="px-6 py-4 whitespace-nowrap">`),e.bono?(t('<div class="text-xs space-y-1"><div class="flex items-center gap-1 text-green-600">'),t(l(o(b),{class:"w-4 h-4"},null,a)),t(`<span>Con bono</span></div><div class="text-cafe/50">${r(e.bono.sesiones_restantes||0)}/${r(e.bono.sesiones_totales||0)} restantes </div>`),e.bono.pagado?(t('<div class="flex items-center gap-1 text-green-700 bg-green-50 px-2 py-0.5 rounded-full">'),t(l(o(b),{class:"w-4 h-4"},null,a)),t('<span class="font-semibold">Pagado</span></div>')):(t('<div class="flex items-center gap-1 text-orange-600 bg-orange-50 px-2 py-0.5 rounded-full animate-pulse">'),t(l(o(v),{class:"w-4 h-4"},null,a)),t('<span class="font-semibold">Pend. pago</span></div>')),t("</div>")):t('<div class="text-xs text-cafe/50"> Sin bono </div>'),t(`</td><td class="px-6 py-4 whitespace-nowrap text-right"><div class="text-sm font-semibold text-cafe">${r(formatearPrecio(e.precio_estimado||50))}‚Ç¨ </div><div class="text-xs text-cafe/50"> Tu parte: ${r(formatearPrecio(.7*(e.precio_estimado||50)))}‚Ç¨ </div></td><td class="px-6 py-4 whitespace-nowrap text-center"><button class="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm text-terracota hover:bg-terracota/10 rounded-lg transition-colors duration-200">`),t(l(o(y),{class:"w-4 h-4"},null,a)),t(" Ver detalles </button></td></tr>")}),t("\x3c!--]--\x3e</tbody></table></div>")),t("</div>")),t(l(w,{"is-open":M.value,"cita-id":P.value,onClose:cerrarModalDetalles,onActualizado:cargarSesiones,onEliminado:cargarSesiones},null,a)),t("</div>")}}}),k=C.setup;C.setup=(e,t)=>{const a=n();return(a.modules||(a.modules=new Set)).add("pages/terapeuta/sesiones/index.vue"),k?k(e,t):void 0};export{C as default};
//# sourceMappingURL=index-BH_It0Fe.mjs.map
