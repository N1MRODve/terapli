import{u as e,_ as a}from"./ModalNuevaCitaEnhanced-aLTjurwp.mjs";import{M as t}from"./ModalDetallesCita-LTSdOklK.mjs";import{v as r,s}from"./server.mjs";import{u as o}from"./useSupabaseClient-DykwVqLQ.mjs";import{_ as l}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";const n=r.defineComponent({__name:"AgendaCalendario",__ssrInlineRender:!0,props:{modoCoordinadora:{type:Boolean,default:!1}},emits:["nueva-cita","ver-cita"],setup(l,{emit:n}){const i=l,{citas:d,loading:c,refreshAppointments:b}=e();o();const v=r.ref("semana"),u=r.ref(new Date),p=r.ref(""),g=r.ref(!1),x=r.ref(["pendiente","confirmada","realizada","cancelada"]);r.ref([]);const m=r.ref(null),h=r.ref(!1),f=r.ref(null),y=r.ref(null),w=r.ref(!1),k=r.ref(null),C=r.ref(null),$=r.ref(null),M=r.ref(null),j=r.ref(!1),S=r.ref(null),_=r.ref(""),z=r.ref(!1),I=r.ref(null),R=r.ref(""),B=r.ref(""),D=r.ref(""),L=r.ref(!1),A=r.ref(null),V=r.ref(null),H=r.ref(!1),E=r.ref(null),T=r.ref(!1),P=r.ref(""),q=r.ref("info"),U=r.ref(!1),F=r.ref("auto");r.watch(F,e=>{localStorage.setItem("agenda-modo-horario",e)});const N=r.computed(()=>{const e=Q.value.map(e=>e.fecha),a=d.value.filter(a=>e.includes(a.fecha_cita));if(0===a.length)return{inicio:10,fin:20};let t=23,r=0;return a.forEach(e=>{if(e.hora_inicio){const a=parseInt(e.hora_inicio.substring(0,2));t=Math.min(t,a),r=Math.max(r,a)}if(e.hora_fin){const a=parseInt(e.hora_fin.substring(0,2));r=Math.max(r,a)}}),{inicio:Math.max(9,t-1),fin:Math.min(21,r+1)}}),Y=r.computed(()=>{if("completo"===F.value)return 9;if("activo"===F.value)return N.value.inicio;const e=N.value;return e.fin-e.inicio<=8?e.inicio:9}),O=r.computed(()=>{if("completo"===F.value)return 21;if("activo"===F.value)return N.value.fin;const e=N.value;return e.fin-e.inicio<=8?e.fin:21}),J=r.computed(()=>{const e=[];for(let a=Y.value;a<=O.value;a++)e.push(`${String(a).padStart(2,"0")}:00`);return e}),K=r.computed(()=>{switch(F.value){case"activo":return`${Y.value}:00 - ${O.value}:00`;case"completo":return"9:00 - 21:00";default:return"Auto"}}),Q=r.computed(()=>{const e=new Date(u.value),a=[],t=new Date,r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;if("dia"===v.value){const t=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;a.push({fecha:t,diaSemana:e.toLocaleDateString("es-ES",{weekday:"long"}).toUpperCase(),numeroDia:e.getDate(),mes:e.toLocaleDateString("es-ES",{month:"short"}),esHoy:t===r})}else if("5dias"===v.value)for(let t=0;t<5;t++){const s=new Date(e);s.setDate(e.getDate()+t);const o=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;a.push({fecha:o,diaSemana:s.toLocaleDateString("es-ES",{weekday:"long"}).toUpperCase(),numeroDia:s.getDate(),mes:s.toLocaleDateString("es-ES",{month:"short"}),esHoy:o===r})}else if("semana"===v.value){const t=e.getDay(),s=new Date(e);s.setDate(e.getDate()-(6===t?0:t+1));for(let e=0;e<7;e++){const t=new Date(s);t.setDate(s.getDate()+e);const o=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;a.push({fecha:o,diaSemana:t.toLocaleDateString("es-ES",{weekday:"long"}).toUpperCase(),numeroDia:t.getDate(),mes:t.toLocaleDateString("es-ES",{month:"short"}),esHoy:o===r})}}else if("mes"===v.value){new Date(e.getFullYear(),e.getMonth(),1);const t=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();for(let s=1;s<=t;s++){const t=new Date(e.getFullYear(),e.getMonth(),s),o=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;a.push({fecha:o,diaSemana:t.toLocaleDateString("es-ES",{weekday:"long"}).toUpperCase(),numeroDia:t.getDate(),mes:t.toLocaleDateString("es-ES",{month:"short"}),esHoy:o===r})}}return a}),X=r.computed(()=>Q.value.some(e=>e.esHoy));r.computed(()=>Q.value.findIndex(e=>e.esHoy));const G=r.computed(()=>{if("dia"===v.value){return u.value.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"}).replace(/^\w/,e=>e.toUpperCase())}if("mes"===v.value){return u.value.toLocaleDateString("es-ES",{month:"long",year:"numeric"}).replace(/^\w/,e=>e.toUpperCase())}const e=Q.value;if(0===e.length)return"";const a=e[0],t=e[e.length-1],r=new Date(a.fecha),s=new Date(t.fecha),o=r.toLocaleDateString("es-ES",{day:"numeric",month:"short"}),l=s.toLocaleDateString("es-ES",{day:"numeric",month:"short"});return"5dias"===v.value?`${o} — ${l}`:`Semana del ${o} — ${l}`}),W=r.computed(()=>(new Date).toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"}).replace(/^\w/,e=>e.toUpperCase()));r.computed(()=>{switch(v.value){case"dia":return"hoy";case"5dias":return"estos 5 días";case"mes":return"este mes";default:return"esta semana"}});const Z=r.computed(()=>{let e=d.value;if(i.modoCoordinadora&&m.value&&(e=e.filter(e=>e.terapeuta_id===m.value)),x.value.length>0&&x.value.length<4&&(e=e.filter(e=>x.value.includes(e.estado))),p.value.trim()){const a=p.value.toLowerCase();e=e.filter(e=>{const t=(e.paciente?.nombre_completo||"").toLowerCase(),r=(e.observaciones||"").toLowerCase();return t.includes(a)||r.includes(a)})}return e}),ee=r.computed(()=>{const e=Q.value.map(e=>e.fecha),a=d.value.filter(a=>e.includes(a.fecha_cita));return{pendiente:a.filter(e=>"pendiente"===e.estado).length,confirmada:a.filter(e=>"confirmada"===e.estado).length,realizada:a.filter(e=>"realizada"===e.estado||"completada"===e.estado).length,cancelada:a.filter(e=>"cancelada"===e.estado).length}}),ae=r.computed(()=>{const e=Q.value.map(e=>e.fecha),a=d.value.filter(a=>e.includes(a.fecha_cita)),t=a.filter(e=>"realizada"===e.estado||"completada"===e.estado),r=t.filter(e=>"pagado"!==e.estado_pago).reduce((e,a)=>e+(a.precio_sesion||a.precio||70),0),s=a.filter(e=>"pendiente"===e.estado||"confirmada"===e.estado),o=s.reduce((e,a)=>e+(a.precio_sesion||a.precio||70),0),l=a.filter(e=>"cancelada"===e.estado),n=l.reduce((e,a)=>e+(a.precio_sesion||a.precio||70),0),i=r+o+n,c=a.length;return{porCobrar:r,previstos:o,perdido:n,totalPotencial:i,tasaCancelacion:c>0?Math.round(l.length/c*100):0,sesionesRealizadas:t.length,sesionesProgramadas:s.length,sesionesCanceladas:l.length}}),formatearMoneda=e=>e.toLocaleString("es-ES",{minimumFractionDigits:0,maximumFractionDigits:0})+"€",te=r.computed(()=>{const e=Q.value.map(e=>e.fecha),a=d.value.filter(a=>e.includes(a.fecha_cita)),t=8*Q.value.filter(e=>{const a=new Date(e.fecha+"T00:00:00").getDay();return 0!==a&&6!==a}).length,r=a.filter(e=>"cancelada"!==e.estado).reduce((e,a)=>{if(a.hora_inicio&&a.hora_fin){const[t,r]=a.hora_inicio.split(":").map(Number),[s,o]=a.hora_fin.split(":").map(Number);return e+(60*s+o-(60*t+r))}return e+60},0)/60,s=t>0?Math.round(r/t*100):0,o=Math.max(0,t-r),l=Math.floor(o),n=ee.value.pendiente,i=ee.value.confirmada,c=n+i,b=c>0?Math.round(i/c*100):100;let u=0,p="neutral";if("semana"===v.value){const e=Q.value[0]?.fecha;if(e){const a=new Date(e+"T00:00:00"),r=new Date(a);r.setDate(r.getDate()-7);const o=new Date(a);o.setDate(o.getDate()-1);const l=d.value.filter(e=>{const a=new Date(e.fecha_cita+"T00:00:00");return a>=r&&a<=o&&"cancelada"!==e.estado}).reduce((e,a)=>{if(a.hora_inicio&&a.hora_fin){const[t,r]=a.hora_inicio.split(":").map(Number),[s,o]=a.hora_fin.split(":").map(Number);return e+(60*s+o-(60*t+r))}return e+60},0);u=s-(t>0?Math.round(l/60/t*100):0),p=u>0?"up":u<0?"down":"neutral"}}return{ocupacion:s,horasLibres:Math.round(10*o)/10,citasAdicionales:l,tasaConfirmacion:b,pendientesRequierenSeguimiento:n,diferenciaSemanaAnterior:u,tendencia:p}}),re=r.computed(()=>{const e=[],a=Q.value.map(e=>e.fecha),t=new Date;t.setHours(0,0,0,0);const r=t.toISOString().split("T")[0];a.forEach(a=>{if(a<r)return;const t=new Date(a+"T00:00:00"),s=t.getDay();if(0===s||6===s)return;const o=d.value.filter(e=>e.fecha_cita===a&&"cancelada"!==e.estado).sort((e,a)=>(e.hora_inicio||"").localeCompare(a.hora_inicio||"")),l=t.toLocaleDateString("es-ES",{weekday:"long"}),n=t.toLocaleDateString("es-ES",{day:"numeric",month:"short"});o.length<3&&o.length>0&&e.push({id:`hueco-${a}`,tipo:"hueco_disponible",mensaje:`${l.charAt(0).toUpperCase()+l.slice(1)} ${n}: ${8-o.length}h disponibles`,accion:"Agendar cita",prioridad:"media",fecha:a}),0===o.length&&e.push({id:`libre-${a}`,tipo:"dia_libre",mensaje:`${l.charAt(0).toUpperCase()+l.slice(1)} ${n}: día sin citas`,accion:"Agendar cita",prioridad:"baja",fecha:a}),o.length>=7&&e.push({id:`ocupado-${a}`,tipo:"alta_ocupacion",mensaje:`${l.charAt(0).toUpperCase()+l.slice(1)} ${n}: ${o.length} citas programadas`,prioridad:"alta",fecha:a})});const s={alta:0,media:1,baja:2};return e.sort((e,a)=>s[e.prioridad]-s[a.prioridad]).slice(0,3)}),se=r.ref(!0),oe=r.ref([]);r.watch(oe,e=>{localStorage.setItem("agenda-bloques-no-disponible",JSON.stringify(e))},{deep:!0});const getBloqueEnSlot=(e,a)=>{const t=parseInt(a.substring(0,2));return oe.value.find(a=>{if(a.fecha!==e)return!1;const r=parseInt(a.hora_inicio.substring(0,2)),s=parseInt(a.hora_fin.substring(0,2));return t>=r&&t<s})},le=r.ref(!1),ne=r.computed(()=>{const e=u.value,a=new Date(e.getFullYear(),e.getMonth(),1).getDay();return 0===a?6:a-1}),getCitasDelDia=e=>Z.value.filter(a=>a.fecha_cita===e),getColorEstadoCitaMes=e=>{switch(e){case"pendiente":return"bg-amber-100 text-amber-700";case"confirmada":return"bg-emerald-100 text-emerald-700";case"realizada":case"completada":return"bg-blue-100 text-blue-700";case"cancelada":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-600"}},citasPorDiaHora=(e,a)=>{const t=parseInt(a.substring(0,2));return Z.value.filter(a=>{if(a.fecha_cita!==e)return!1;const r=a.hora_inicio?.substring(0,5);if(!r)return!1;return parseInt(r.substring(0,2))===t})},calcularOffsetCita=e=>{const a=e.hora_inicio?.substring(0,5);if(!a)return 0;return parseInt(a.substring(3,5))/60*88},calcularAlturaCita=e=>{const a=(e.duracion_minutos||60)/60*88;return Math.max(a-4,40)},ie=r.ref(new Date);r.ref(null);const de=r.ref(null);r.ref(null);const ce=r.computed(()=>{const e=ie.value,a=e.getHours(),t=e.getMinutes();if(a<Y.value||a>=O.value)return null;return(60*(a-Y.value)+t)/60*88}),be=r.computed(()=>ie.value.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!1})),esHoraPasada=(e,a)=>{const t=new Date;if(a!==`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`)return!1;const[r,s]=e.split(":").map(Number),o=ie.value;return 60*r+s+60<=60*o.getHours()+o.getMinutes()},esSlotActual=(e,a)=>{const t=new Date;if(a!==`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`)return!1;const[r,s]=e.split(":").map(Number),o=ie.value,l=60*o.getHours()+o.getMinutes(),n=60*r+s;return l>=n&&l<n+60},ve=r.computed(()=>{const e=ie.value,a=e.getHours(),t=e.getMinutes();if(a<Y.value)return 0;if(a>=O.value)return 100;const r=60*(a-Y.value)+t,s=60*(O.value-Y.value);return Math.round(r/s*100)}),getEstiloCompletoCita=e=>{const{estado:a,esUrgente:t,esInminente:r}=(e=>{const a=new Date,t=(new Date(`${e.fecha_cita}T${e.hora_inicio||"00:00"}`).getTime()-a.getTime())/36e5;let r=e.estado||"pendiente",s=!1,o=!1;return"pendiente"===r&&t>0&&t<=48&&(r="requiere_confirmacion",s=!0),"confirmada"===r&&t>0&&t<=24&&(r="proxima",o=!0),"confirmada"===r&&t>0&&t<=2&&(r="inminente",o=!0),{estado:r,esUrgente:s,esInminente:o}})(e),s=(e=>{const a={pendiente:{bg:"bg-amber-50",border:"border-l-amber-400",text:"text-amber-700",dot:"bg-amber-400",icon:"clock",label:"Pendiente",badge:"bg-amber-100 text-amber-700 border-amber-200"},requiere_confirmacion:{bg:"bg-orange-50",border:"border-l-orange-500",text:"text-orange-700",dot:"bg-orange-500",icon:"exclamation",label:"Confirmar",badge:"bg-orange-100 text-orange-700 border-orange-300 animate-pulse"},confirmada:{bg:"bg-emerald-50",border:"border-l-emerald-400",text:"text-emerald-700",dot:"bg-emerald-400",icon:"check",label:"Confirmada",badge:"bg-emerald-100 text-emerald-700 border-emerald-200"},proxima:{bg:"bg-green-50",border:"border-l-green-500",text:"text-green-700",dot:"bg-green-500",icon:"arrow-right",label:"Próxima",badge:"bg-green-100 text-green-700 border-green-300"},inminente:{bg:"bg-teal-50",border:"border-l-teal-500",text:"text-teal-700",dot:"bg-teal-500",icon:"bolt",label:"Ahora",badge:"bg-teal-100 text-teal-700 border-teal-300 ring-2 ring-teal-300 ring-opacity-50"},realizada:{bg:"bg-blue-50",border:"border-l-blue-400",text:"text-blue-700",dot:"bg-blue-400",icon:"check-circle",label:"Realizada",badge:"bg-blue-100 text-blue-700 border-blue-200"},completada:{bg:"bg-blue-50",border:"border-l-blue-400",text:"text-blue-700",dot:"bg-blue-400",icon:"check-circle",label:"Completada",badge:"bg-blue-100 text-blue-700 border-blue-200"},cancelada:{bg:"bg-gray-50",border:"border-l-gray-400",text:"text-gray-500",dot:"bg-gray-400",icon:"x-circle",label:"Cancelada",badge:"bg-gray-100 text-gray-500 border-gray-200"}};return a[e]||a.pendiente})(a);return{...s,estadoReal:a,esUrgente:t,esInminente:r}},formatearHora=e=>e?.substring(0,5)||"",formatearFecha=e=>{if(!e)return"";return new Date(e+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"})},ue=r.computed(()=>{const e=[];for(let a=9;a<=21;a++)e.push(`${String(a).padStart(2,"0")}:00`),a<21&&e.push(`${String(a).padStart(2,"0")}:30`);return e}),pe=r.computed(()=>{if(!B.value)return ue.value;const e=ue.value.indexOf(B.value);return-1===e?ue.value:[...ue.value.slice(e+1),"22:00"]});return r.watch([v,u],async()=>{await r.nextTick(),X.value&&null!==ce.value&&setTimeout(()=>{(()=>{if(!de.value||null===ce.value)return;const e=de.value,a=e.clientHeight,t=ce.value-a/2+88;e.scrollTo({top:Math.max(0,t),behavior:"smooth"})})()},100)}),(e,o,l,n)=>{const i=a,d=t;o(`<div${s.ssrRenderAttrs(r.mergeProps({class:"agenda-calendario min-h-screen bg-gray-50/50"},n))} data-v-6c821b5b><div class="bg-white border-b border-gray-100 px-4 py-2" data-v-6c821b5b><div class="flex items-center justify-between gap-3" data-v-6c821b5b><div class="flex items-center gap-2" data-v-6c821b5b><button class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 hover:border-gray-300 transition-all" aria-label="Semana anterior" data-v-6c821b5b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" data-v-6c821b5b></path></svg></button><button class="px-3 py-1 rounded-full border border-violet-500 text-violet-600 font-medium text-sm hover:bg-violet-50 transition-all" data-v-6c821b5b> Hoy </button>`),X.value&&null!==ce.value?o('<button class="px-2 py-1 rounded-full bg-red-500 text-white font-medium text-xs hover:bg-red-600 transition-all flex items-center gap-1" title="Ir a la hora actual" data-v-6c821b5b><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg> Ahora </button>'):o("\x3c!----\x3e"),o(`<button class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 hover:border-gray-300 transition-all" aria-label="Semana siguiente" data-v-6c821b5b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-6c821b5b></path></svg></button><div class="flex items-center gap-3 ml-2" data-v-6c821b5b><h1 class="text-base font-semibold text-gray-800" data-v-6c821b5b>${s.ssrInterpolate(G.value)}</h1>`),X.value?o(`<div class="flex items-center gap-2 px-2.5 py-1 bg-violet-50 border border-violet-200 rounded-full" data-v-6c821b5b><div class="w-2 h-2 bg-violet-500 rounded-full animate-pulse" data-v-6c821b5b></div><span class="text-xs font-medium text-violet-700" data-v-6c821b5b>Hoy, ${s.ssrInterpolate(W.value)}</span></div>`):o("\x3c!----\x3e"),o("</div>"),X.value?o(`<div class="flex items-center gap-1.5 ml-2" data-v-6c821b5b><div class="w-20 h-1 bg-gray-200 rounded-full overflow-hidden" data-v-6c821b5b><div class="h-full bg-gradient-to-r from-violet-500 to-violet-400 rounded-full transition-all duration-1000" style="${s.ssrRenderStyle({width:`${ve.value}%`})}" data-v-6c821b5b></div></div><span class="text-xs text-gray-400" data-v-6c821b5b>${s.ssrInterpolate(ve.value)}%</span></div>`):o("\x3c!----\x3e"),o(`</div><div class="flex-1 max-w-md mx-4" data-v-6c821b5b><div class="relative" data-v-6c821b5b><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none" data-v-6c821b5b><svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-6c821b5b></path></svg></div><input${s.ssrRenderAttr("value",p.value)} type="text" placeholder="Buscar paciente..." class="w-full pl-9 pr-3 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-violet-500/30 focus:border-violet-400 transition-all" data-v-6c821b5b></div></div><div class="flex items-center gap-2" data-v-6c821b5b><div class="flex items-center bg-gray-100 rounded-lg p-0.5" data-v-6c821b5b>\x3c!--[--\x3e`),s.ssrRenderList([{key:"dia",label:"D"},{key:"5dias",label:"5D"},{key:"semana",label:"S"},{key:"mes",label:"M"}],e=>{o(`<button class="${s.ssrRenderClass([v.value===e.key?"bg-violet-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900","px-2.5 py-1 rounded-md text-xs font-medium transition-all"])}"${s.ssrRenderAttr("title","dia"===e.key?"Día":"5dias"===e.key?"5 Días":"semana"===e.key?"Semana":"Mes")} data-v-6c821b5b>${s.ssrInterpolate(e.label)}</button>`)}),o("\x3c!--]--\x3e</div>"),"mes"!==v.value?o(`<button class="${s.ssrRenderClass([{"bg-violet-50 border-violet-300 text-violet-700":"activo"===F.value,"bg-amber-50 border-amber-300 text-amber-700":"auto"===F.value,"bg-gray-100 border-gray-200 text-gray-600":"completo"===F.value},"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border text-xs font-medium transition-all"])}"${s.ssrRenderAttr("title","Modo horario: "+("auto"===F.value?"Automático":"activo"===F.value?"Solo horas activas":"Día completo"))} data-v-6c821b5b><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7" data-v-6c821b5b></path></svg><span class="hidden sm:inline" data-v-6c821b5b>${s.ssrInterpolate(K.value)}</span></button>`):o("\x3c!----\x3e"),o(`<button class="${s.ssrRenderClass([{"bg-violet-50 border-violet-300 text-violet-600":g.value},"p-1.5 rounded-lg border border-gray-200 text-gray-500 hover:bg-gray-50 transition-all"])}" title="Filtros" data-v-6c821b5b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" data-v-6c821b5b></path></svg></button><button class="flex items-center gap-1.5 px-3 py-1.5 bg-violet-500 text-white font-medium text-sm rounded-lg hover:bg-violet-600 shadow-sm transition-all" title="Agendar nueva cita (doble clic en hora vacía para crear rápido)" data-v-6c821b5b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-6c821b5b></path></svg><span class="hidden sm:inline" data-v-6c821b5b>+ Cita</span><span class="sm:hidden" data-v-6c821b5b>+</span></button></div></div></div><div class="bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 px-4 py-2.5" data-v-6c821b5b><div class="flex items-center justify-between" data-v-6c821b5b><div class="flex items-center gap-3" data-v-6c821b5b><button class="${s.ssrRenderClass([x.value.includes("pendiente")?"bg-amber-50 border-amber-200":"bg-white border-gray-200 opacity-60 hover:opacity-100","flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all"])}" data-v-6c821b5b><div class="w-6 h-6 rounded-md bg-amber-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-3.5 h-3.5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg></div><div class="text-left" data-v-6c821b5b><p class="text-base font-bold text-amber-700 leading-none" data-v-6c821b5b>${s.ssrInterpolate(ee.value.pendiente)}</p><p class="text-[9px] text-amber-600/70 font-medium" data-v-6c821b5b>Pendientes</p></div></button><button class="${s.ssrRenderClass([x.value.includes("confirmada")?"bg-emerald-50 border-emerald-200":"bg-white border-gray-200 opacity-60 hover:opacity-100","flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all"])}" data-v-6c821b5b><div class="w-6 h-6 rounded-md bg-emerald-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-3.5 h-3.5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" data-v-6c821b5b></path></svg></div><div class="text-left" data-v-6c821b5b><p class="text-base font-bold text-emerald-700 leading-none" data-v-6c821b5b>${s.ssrInterpolate(ee.value.confirmada)}</p><p class="text-[9px] text-emerald-600/70 font-medium" data-v-6c821b5b>Confirmadas</p></div></button><div class="w-px h-8 bg-gray-200" data-v-6c821b5b></div><div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-violet-50 border border-violet-200" data-v-6c821b5b><div class="w-8 h-8 rounded-full bg-violet-100 flex items-center justify-center" data-v-6c821b5b><span class="text-xs font-bold text-violet-700" data-v-6c821b5b>${s.ssrInterpolate(te.value.ocupacion)}%</span></div><div class="text-left" data-v-6c821b5b><p class="text-xs font-medium text-violet-700" data-v-6c821b5b>Ocupación</p><p class="text-[10px] text-violet-500" data-v-6c821b5b>${s.ssrInterpolate(te.value.citasAdicionales>0?`Puedes agendar ${te.value.citasAdicionales} más`:"Agenda completa")}</p></div>`),"semana"===v.value&&0!==te.value.diferenciaSemanaAnterior?(o(`<div class="${s.ssrRenderClass(["up"===te.value.tendencia?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700","flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] font-medium"])}" data-v-6c821b5b>`),"up"===te.value.tendencia?o('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" data-v-6c821b5b></path></svg>'):o('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" data-v-6c821b5b></path></svg>'),o(` ${s.ssrInterpolate(Math.abs(te.value.diferenciaSemanaAnterior))}% </div>`)):o("\x3c!----\x3e"),o(`</div><div class="${s.ssrRenderClass([te.value.tasaConfirmacion>=80?"bg-emerald-50 border-emerald-200":"bg-amber-50 border-amber-200","flex items-center gap-2 px-3 py-1.5 rounded-lg border"])}" data-v-6c821b5b><span class="${s.ssrRenderClass([te.value.tasaConfirmacion>=80?"text-emerald-700":"text-amber-700","text-sm font-bold"])}" data-v-6c821b5b>${s.ssrInterpolate(te.value.tasaConfirmacion)}% </span><div class="text-left" data-v-6c821b5b><p class="${s.ssrRenderClass([te.value.tasaConfirmacion>=80?"text-emerald-700":"text-amber-700","text-xs font-medium"])}" data-v-6c821b5b> Confirmación </p>`),te.value.pendientesRequierenSeguimiento>0?o(`<p class="text-[10px] text-amber-600" data-v-6c821b5b>${s.ssrInterpolate(te.value.pendientesRequierenSeguimiento)} requieren seguimiento </p>`):o("\x3c!----\x3e"),o(`</div></div><div class="w-px h-8 bg-gray-200 hidden lg:block" data-v-6c821b5b></div><div class="hidden lg:flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gray-50 border border-gray-200" data-v-6c821b5b><div class="w-6 h-6 rounded-md bg-gray-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-3.5 h-3.5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg></div><div class="text-left" data-v-6c821b5b><p class="text-base font-bold text-gray-700 leading-none" data-v-6c821b5b>${s.ssrInterpolate(formatearMoneda(ae.value.previstos))}</p><p class="text-[9px] text-gray-500 font-medium" data-v-6c821b5b>Previstos</p></div></div>`),ae.value.porCobrar>0?o(`<div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-sm" data-v-6c821b5b><div class="w-6 h-6 rounded-md bg-white/20 flex items-center justify-center" data-v-6c821b5b><svg class="w-3.5 h-3.5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg></div><div class="text-left" data-v-6c821b5b><p class="text-base font-bold leading-none" data-v-6c821b5b>${s.ssrInterpolate(formatearMoneda(ae.value.porCobrar))}</p><p class="text-[9px] text-white/80 font-medium" data-v-6c821b5b>Por cobrar</p></div></div>`):o("\x3c!----\x3e"),o(`</div><div class="flex items-center gap-2" data-v-6c821b5b><div class="relative group/bloques" data-v-6c821b5b><button class="${s.ssrRenderClass([le.value?"bg-gray-700 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-150","flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all"])}" title="Ctrl+Clic en un slot para marcar/desmarcar como no disponible" data-v-6c821b5b><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" data-v-6c821b5b></path></svg><span class="hidden sm:inline" data-v-6c821b5b>${s.ssrInterpolate(le.value?"Editando bloques":"Bloquear")}</span></button><div class="absolute right-0 top-full mt-1 w-48 p-2 bg-gray-900 text-white text-[10px] rounded-lg shadow-lg opacity-0 group-hover/bloques:opacity-100 pointer-events-none transition-opacity z-50" data-v-6c821b5b><p class="font-medium mb-1" data-v-6c821b5b>Marcar horas no disponibles</p><p class="text-gray-300" data-v-6c821b5b>Usa <kbd class="px-1 py-0.5 bg-gray-700 rounded" data-v-6c821b5b>Ctrl</kbd>+Clic en cualquier slot para bloquear/desbloquear.</p></div></div><button class="${s.ssrRenderClass([g.value?"bg-gray-200 text-gray-700":"bg-gray-100 text-gray-500 hover:bg-gray-150","flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all"])}" data-v-6c821b5b><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" data-v-6c821b5b></path></svg> Más filtros <svg class="${s.ssrRenderClass([{"rotate-180":g.value},"w-3 h-3 transition-transform"])}" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-6c821b5b></path></svg></button></div></div>`),g.value?(o(`<div class="flex items-center gap-3 mt-2.5 pt-2.5 border-t border-gray-100 overflow-hidden" data-v-6c821b5b><span class="text-[10px] text-gray-400 uppercase tracking-wider" data-v-6c821b5b>Histórico:</span><button class="${s.ssrRenderClass([x.value.includes("realizada")?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-200 text-gray-500 opacity-60 hover:opacity-100","flex items-center gap-1.5 px-2.5 py-1 rounded-md border text-xs transition-all"])}" data-v-6c821b5b><div class="w-4 h-4 rounded bg-blue-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-2.5 h-2.5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg></div> ${s.ssrInterpolate(ee.value.realizada)} Realizadas </button><button class="${s.ssrRenderClass([x.value.includes("cancelada")?"bg-red-50 border-red-200 text-red-700":"bg-white border-gray-200 text-gray-500 opacity-60 hover:opacity-100","flex items-center gap-1.5 px-2.5 py-1 rounded-md border text-xs transition-all"])}" data-v-6c821b5b><div class="w-4 h-4 rounded bg-red-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-2.5 h-2.5 text-red-600" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" data-v-6c821b5b></path></svg></div> ${s.ssrInterpolate(ee.value.cancelada)} Canceladas </button>`),ae.value.sesionesCanceladas>0?o(`<div class="flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-red-50 border border-red-100 text-xs text-red-600" data-v-6c821b5b><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6" data-v-6c821b5b></path></svg> -${s.ssrInterpolate(formatearMoneda(ae.value.perdido))} perdido </div>`):o("\x3c!----\x3e"),o("</div>")):o("\x3c!----\x3e"),o("</div>"),se.value&&re.value.length>0?(o('<div class="mx-4 mb-3 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl px-4 py-3" data-v-6c821b5b><div class="flex items-center justify-between mb-2" data-v-6c821b5b><div class="flex items-center gap-2" data-v-6c821b5b><div class="w-6 h-6 rounded-lg bg-blue-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-3.5 h-3.5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" data-v-6c821b5b></path></svg></div><span class="text-xs font-semibold text-blue-700" data-v-6c821b5b>Sugerencias para tu agenda</span></div><button class="w-6 h-6 rounded-full flex items-center justify-center hover:bg-blue-100 transition-colors" data-v-6c821b5b><svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-6c821b5b></path></svg></button></div><div class="flex flex-wrap gap-2" data-v-6c821b5b>\x3c!--[--\x3e'),s.ssrRenderList(re.value,e=>{o(`<div class="${s.ssrRenderClass([{"bg-white/80 border border-amber-200 text-amber-700 hover:bg-amber-50":"hueco_disponible"===e.tipo,"bg-white/80 border border-gray-200 text-gray-600 hover:bg-gray-50":"dia_libre"===e.tipo,"bg-white/80 border border-red-200 text-red-700 hover:bg-red-50":"alta_ocupacion"===e.tipo},"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs transition-all cursor-pointer"])}" data-v-6c821b5b>`),"hueco_disponible"===e.tipo?o('<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg>'):"dia_libre"===e.tipo?o('<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-6c821b5b></path></svg>'):o('<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-6c821b5b></path></svg>'),o(`<span class="font-medium" data-v-6c821b5b>${s.ssrInterpolate(e.mensaje)}</span>`),e.accion?o(`<button class="ml-1 px-2 py-0.5 rounded text-[10px] font-semibold bg-current/10 hover:bg-current/20 transition-colors" data-v-6c821b5b>${s.ssrInterpolate(e.accion)}</button>`):o("\x3c!----\x3e"),o("</div>")}),o("\x3c!--]--\x3e</div></div>")):o("\x3c!----\x3e"),o(`<div class="flex-1 overflow-auto scroll-smooth" style="${s.ssrRenderStyle({height:"calc(100vh - 100px)"})}" data-v-6c821b5b>`),r.unref(c)?o('<div class="flex items-center justify-center h-full" data-v-6c821b5b><div class="flex items-center gap-3 text-gray-500" data-v-6c821b5b><svg class="w-6 h-6 animate-spin" fill="none" viewBox="0 0 24 24" data-v-6c821b5b><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-6c821b5b></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-6c821b5b></path></svg> Cargando agenda... </div></div>'):"mes"===v.value?(o('<div class="p-4" data-v-6c821b5b><div class="grid grid-cols-7 gap-1 mb-2" data-v-6c821b5b>\x3c!--[--\x3e'),s.ssrRenderList(["Lun","Mar","Mié","Jue","Vie","Sáb","Dom"],e=>{o(`<div class="text-center text-xs font-medium text-gray-500 uppercase py-2" data-v-6c821b5b>${s.ssrInterpolate(e)}</div>`)}),o('\x3c!--]--\x3e</div><div class="grid grid-cols-7 gap-1" data-v-6c821b5b>\x3c!--[--\x3e'),s.ssrRenderList(ne.value,e=>{o('<div class="aspect-square" data-v-6c821b5b></div>')}),o("\x3c!--]--\x3e\x3c!--[--\x3e"),s.ssrRenderList(Q.value,e=>{o(`<div class="${s.ssrRenderClass([{"bg-violet-50 border-violet-300":e.esHoy,"border-gray-200":!e.esHoy},"min-h-[80px] border rounded-lg p-1.5 cursor-pointer transition-all hover:border-violet-300 hover:shadow-sm"])}" data-v-6c821b5b><div class="flex items-center justify-between mb-1" data-v-6c821b5b><span class="${s.ssrRenderClass([e.esHoy?"text-violet-600":"text-gray-700","text-sm font-medium"])}" data-v-6c821b5b>${s.ssrInterpolate(e.numeroDia)}</span>`),getCitasDelDia(e.fecha).length>0?o(`<span class="${s.ssrRenderClass([e.esHoy?"bg-violet-200 text-violet-700":"bg-gray-100 text-gray-600","text-[10px] font-medium px-1.5 py-0.5 rounded-full"])}" data-v-6c821b5b>${s.ssrInterpolate(getCitasDelDia(e.fecha).length)}</span>`):o("\x3c!----\x3e"),o('</div><div class="space-y-0.5 overflow-hidden" data-v-6c821b5b>\x3c!--[--\x3e'),s.ssrRenderList(getCitasDelDia(e.fecha).slice(0,3),e=>{o(`<div class="${s.ssrRenderClass([getColorEstadoCitaMes(e.estado),"text-[9px] px-1 py-0.5 rounded truncate"])}"${s.ssrRenderAttr("title",e.paciente?.nombre_completo||"Paciente")} data-v-6c821b5b>${s.ssrInterpolate(e.hora_inicio?.substring(0,5))} ${s.ssrInterpolate(e.paciente?.nombre_completo?.split(" ")[0]||"")}</div>`)}),o("\x3c!--]--\x3e"),getCitasDelDia(e.fecha).length>3?o(`<div class="text-[9px] text-gray-400 text-center" data-v-6c821b5b> +${s.ssrInterpolate(getCitasDelDia(e.fecha).length-3)} más </div>`):o("\x3c!----\x3e"),o("</div></div>")}),o("\x3c!--]--\x3e</div></div>")):(o(`<div class="min-w-max" data-v-6c821b5b><div class="sticky top-0 z-20 bg-white border-b border-gray-200 grid" style="${s.ssrRenderStyle({gridTemplateColumns:`70px repeat(${Q.value.length}, 1fr)`})}" data-v-6c821b5b><div class="border-r border-gray-100" data-v-6c821b5b></div>\x3c!--[--\x3e`),s.ssrRenderList(Q.value,e=>{o(`<div class="${s.ssrRenderClass([{"bg-violet-50/50":e.esHoy},"px-4 py-3 text-center border-r border-gray-100 last:border-r-0"])}" data-v-6c821b5b><p class="text-xs font-medium text-gray-400 uppercase tracking-wider" data-v-6c821b5b>${s.ssrInterpolate(e.diaSemana)}</p><p class="${s.ssrRenderClass([e.esHoy?"text-violet-600":"text-gray-800","text-2xl font-bold mt-1"])}" data-v-6c821b5b>${s.ssrInterpolate(e.numeroDia)}</p>`),e.esHoy?o('<div class="w-6 h-0.5 bg-violet-500 mx-auto mt-1 rounded-full" data-v-6c821b5b></div>'):o("\x3c!----\x3e"),o("</div>")}),o('\x3c!--]--\x3e</div><div class="relative" data-v-6c821b5b>'),null!==ce.value&&X.value?o(`<div class="absolute z-30 flex items-center pointer-events-none" style="${s.ssrRenderStyle({top:`${ce.value}px`,left:"70px",right:"0"})}" data-v-6c821b5b><div class="absolute -left-1.5 w-3 h-3 bg-red-500 rounded-full shadow-sm ring-2 ring-red-200" data-v-6c821b5b></div><div class="absolute -left-16 -top-2.5 flex items-center" data-v-6c821b5b><span class="px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-md shadow-sm whitespace-nowrap" data-v-6c821b5b>${s.ssrInterpolate(be.value)}</span></div><div class="flex-1 h-0.5 bg-red-500 shadow-sm" data-v-6c821b5b></div></div>`):o("\x3c!----\x3e"),o("\x3c!--[--\x3e"),s.ssrRenderList(J.value,(e,a)=>{o(`<div class="grid border-b border-gray-100" style="${s.ssrRenderStyle({gridTemplateColumns:`70px repeat(${Q.value.length}, 1fr)`})}" data-v-6c821b5b><div class="${s.ssrRenderClass([[esSlotActual(e,Q.value.find(e=>e.esHoy)?.fecha||"")?"text-red-500 font-semibold":"text-gray-400"],"px-3 py-2 text-xs font-medium text-right border-r border-gray-100 flex items-start justify-end"])}" style="${s.ssrRenderStyle({height:"88px"})}" data-v-6c821b5b>${s.ssrInterpolate(e)}</div>\x3c!--[--\x3e`),s.ssrRenderList(Q.value,a=>{o(`<div class="${s.ssrRenderClass([[a.esHoy?"bg-violet-50/20":"",esHoraPasada(e,a.fecha)?"bg-gray-100/60":"",esSlotActual(e,a.fecha)?"bg-red-50/30 ring-1 ring-inset ring-red-100":"",esHoraPasada(e,a.fecha)||esSlotActual(e,a.fecha)||getBloqueEnSlot(a.fecha,e)?"":"hover:bg-violet-50/30",esHoraPasada(e,a.fecha)||esSlotActual(e,a.fecha)||!getBloqueEnSlot(a.fecha,e)?"":"hover:bg-gray-200/40",le.value?"cursor-crosshair":""],"relative border-r border-gray-100 last:border-r-0 transition-colors cursor-pointer group"])}" style="${s.ssrRenderStyle({height:"88px"})}" data-v-6c821b5b>`),getBloqueEnSlot(a.fecha,e)?o(`<div class="absolute inset-0 flex items-center justify-center z-20" style="${s.ssrRenderStyle({background:"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(156, 163, 175, 0.15) 4px, rgba(156, 163, 175, 0.15) 8px)"})}" data-v-6c821b5b><div class="flex items-center gap-1.5 px-2 py-1 bg-gray-200/90 rounded-lg border border-gray-300/50" data-v-6c821b5b><svg class="w-3.5 h-3.5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" data-v-6c821b5b></path></svg><span class="text-xs font-medium text-gray-500" data-v-6c821b5b>No disponible</span></div></div>`):o("\x3c!----\x3e"),0!==citasPorDiaHora(a.fecha,e).length||esHoraPasada(e,a.fecha)||getBloqueEnSlot(a.fecha,e)?o("\x3c!----\x3e"):o('<div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity" data-v-6c821b5b><div class="w-6 h-6 rounded-full bg-violet-500/80 text-white flex items-center justify-center" data-v-6c821b5b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" data-v-6c821b5b></path></svg></div></div>'),o("\x3c!--[--\x3e"),s.ssrRenderList(citasPorDiaHora(a.fecha,e),e=>{o(`<div role="button" tabindex="0"${s.ssrRenderAttr("aria-label",`Cita ${getEstiloCompletoCita(e).label} de ${e.paciente?.nombre_completo||"paciente"}, ${formatearHora(e.hora_inicio)} a ${formatearHora(e.hora_fin)}`)} class="${s.ssrRenderClass([[getEstiloCompletoCita(e).bg,getEstiloCompletoCita(e).border,{"ring-2 ring-orange-300 ring-opacity-60":getEstiloCompletoCita(e).esUrgente},{"ring-2 ring-teal-300 ring-opacity-60":getEstiloCompletoCita(e).esInminente},{"ring-2 ring-orange-400 ring-offset-1":e.bono_id&&e.bono&&!e.bono.pagado}],"absolute inset-x-0.5 p-2 rounded-lg border-l-4 cursor-pointer hover:shadow-lg hover:z-30 transition-all z-10 group/card overflow-hidden"])}" style="${s.ssrRenderStyle({height:`${calcularAlturaCita(e)}px`,top:`${calcularOffsetCita(e)+2}px`})}" data-v-6c821b5b>`),"pendiente"===e.estado?(o(`<button class="${s.ssrRenderClass([[C.value===e.id?"bg-emerald-100 border-emerald-300 text-emerald-700 animate-pulse":getEstiloCompletoCita(e).badge],"absolute top-1 right-1 flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold border transition-all cursor-pointer hover:bg-emerald-100 hover:border-emerald-300 hover:text-emerald-700 active:scale-95 group/badge"])}"${s.ssrIncludeBooleanAttr(C.value===e.id)?" disabled":""}${s.ssrRenderAttr("title",C.value===e.id?"Confirmando...":"Clic para confirmar")} type="button" data-v-6c821b5b>`),C.value===e.id?o('<svg class="w-2.5 h-2.5 animate-spin" fill="none" viewBox="0 0 24 24" data-v-6c821b5b><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-6c821b5b></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-6c821b5b></path></svg>'):o('\x3c!--[--\x3e<svg class="w-2.5 h-2.5 group-hover/badge:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg><svg class="w-2.5 h-2.5 hidden group-hover/badge:block" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" data-v-6c821b5b></path></svg>\x3c!--]--\x3e'),o(`<span class="hidden sm:inline" data-v-6c821b5b>${s.ssrInterpolate(C.value===e.id?"...":"Pendiente")}</span>`),C.value!==e.id?o('<span class="hidden sm:group-hover/badge:inline group-hover/badge:text-emerald-600" data-v-6c821b5b>Confirmar</span>'):o("\x3c!----\x3e"),o("</button>")):(o(`<div class="${s.ssrRenderClass([getEstiloCompletoCita(e).badge,"absolute top-1 right-1 flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-bold border transition-all"])}" data-v-6c821b5b>`),"check"===getEstiloCompletoCita(e).icon?o('<svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" data-v-6c821b5b></path></svg>'):"arrow-right"===getEstiloCompletoCita(e).icon?o('<svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" data-v-6c821b5b></path></svg>'):"bolt"===getEstiloCompletoCita(e).icon?o('<svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" data-v-6c821b5b></path></svg>'):"check-circle"===getEstiloCompletoCita(e).icon?o('<svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg>'):"x-circle"===getEstiloCompletoCita(e).icon?o('<svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg>'):"exclamation"===getEstiloCompletoCita(e).icon?o('<svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-6c821b5b></path></svg>'):o("\x3c!----\x3e"),o(`<span class="hidden sm:inline" data-v-6c821b5b>${s.ssrInterpolate(getEstiloCompletoCita(e).label)}</span></div>`)),o('<div class="absolute -bottom-1 right-0 flex items-center gap-1 opacity-0 group-hover/card:opacity-100 focus-within:opacity-100 transition-opacity z-40" data-v-6c821b5b><div class="flex items-center gap-0.5 bg-white/95 backdrop-blur-sm rounded-full px-1 py-0.5 shadow-lg border border-gray-200" data-v-6c821b5b>'),"cancelada"!==e.estado&&"realizada"!==e.estado&&"completada"!==e.estado?o(`<button class="w-5 h-5 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center hover:bg-blue-500 hover:text-white hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-blue-400" title="Reprogramar cita"${s.ssrRenderAttr("aria-label",`Reprogramar cita de ${e.paciente?.nombre_completo||"paciente"}`)} type="button" data-v-6c821b5b><svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-6c821b5b></path></svg></button>`):o("\x3c!----\x3e"),o(`<button class="w-5 h-5 rounded-full bg-violet-100 text-violet-600 flex items-center justify-center hover:bg-violet-500 hover:text-white hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-violet-400" title="Ver detalles"${s.ssrRenderAttr("aria-label",`Ver detalles de cita de ${e.paciente?.nombre_completo||"paciente"}`)} type="button" data-v-6c821b5b><svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" data-v-6c821b5b></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" data-v-6c821b5b></path></svg></button></div>`),"cancelada"!==e.estado&&"realizada"!==e.estado&&"completada"!==e.estado?o(`<div class="flex items-center gap-0.5 bg-red-50/95 backdrop-blur-sm rounded-full px-1 py-0.5 shadow-lg border border-red-200" data-v-6c821b5b><button class="w-5 h-5 rounded-full bg-red-100 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-red-400" title="Cancelar cita"${s.ssrRenderAttr("aria-label",`Cancelar cita de ${e.paciente?.nombre_completo||"paciente"}`)} type="button" data-v-6c821b5b><svg class="w-2.5 h-2.5" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" data-v-6c821b5b></path></svg></button><button class="w-5 h-5 rounded-full bg-red-100 text-red-600 flex items-center justify-center hover:bg-red-600 hover:text-white hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-red-400" title="Eliminar cita"${s.ssrRenderAttr("aria-label",`Eliminar cita de ${e.paciente?.nombre_completo||"paciente"}`)} type="button" data-v-6c821b5b><svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" data-v-6c821b5b></path></svg></button></div>`):o("\x3c!----\x3e"),o('</div><div class="flex flex-col h-full min-h-[34px] pr-14" data-v-6c821b5b><div class="flex items-start gap-1" data-v-6c821b5b>'),e.modalidad?(o(`<span class="${s.ssrRenderClass(["online"===e.modalidad?"bg-teal-100 text-teal-600":"bg-blue-100 text-blue-600","flex-shrink-0 w-4 h-4 rounded flex items-center justify-center"])}"${s.ssrRenderAttr("title","online"===e.modalidad?"Sesión Online":"Sesión Presencial")} data-v-6c821b5b>`),"online"===e.modalidad?o('<svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" data-v-6c821b5b></path></svg>'):o('<svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" data-v-6c821b5b></path></svg>'),o("</span>")):o("\x3c!----\x3e"),o(`<p class="${s.ssrRenderClass([[getEstiloCompletoCita(e).text,{"line-clamp-2":"semana"===v.value,"line-clamp-1":"5dias"===v.value}],"text-sm font-bold leading-tight flex-1"])}"${s.ssrRenderAttr("title",e.paciente?.nombre_completo||"Sin paciente")} data-v-6c821b5b>${s.ssrInterpolate(e.paciente?.nombre_completo||"Sin paciente")}</p></div><p class="text-[10px] text-gray-500 font-medium mt-auto flex items-center gap-1" data-v-6c821b5b><span data-v-6c821b5b>${s.ssrInterpolate(formatearHora(e.hora_inicio))}–${s.ssrInterpolate(formatearHora(e.hora_fin))}</span>`),e.bono_id&&e.bono&&!e.bono.pagado?o('<span class="text-orange-500" title="Bono pendiente de pago" data-v-6c821b5b><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" data-v-6c821b5b></path></svg></span>'):o("\x3c!----\x3e"),o(`</p></div><div class="absolute left-full ml-2 top-0 hidden group-hover/card:block z-50 pointer-events-none" data-v-6c821b5b><div class="bg-gray-900 text-white text-xs rounded-lg py-3 px-4 shadow-xl max-w-sm min-w-[220px]" data-v-6c821b5b><div class="flex items-start justify-between gap-2 mb-2" data-v-6c821b5b><p class="font-bold text-sm leading-tight" data-v-6c821b5b>${s.ssrInterpolate(e.paciente?.nombre_completo||"Sin paciente")}</p><span class="${s.ssrRenderClass([getEstiloCompletoCita(e).badge,"flex-shrink-0 inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-medium"])}" data-v-6c821b5b>${s.ssrInterpolate(getEstiloCompletoCita(e).label)}</span></div><div class="flex items-center gap-2 text-gray-300 mb-2" data-v-6c821b5b><svg class="w-3.5 h-3.5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg><span data-v-6c821b5b>${s.ssrInterpolate(formatearHora(e.hora_inicio))} - ${s.ssrInterpolate(formatearHora(e.hora_fin))}</span><span class="text-gray-500" data-v-6c821b5b>|</span><span class="${s.ssrRenderClass("online"===e.modalidad?"text-teal-400":"text-blue-400")}" data-v-6c821b5b>${s.ssrInterpolate("online"===e.modalidad?"Online":"Presencial")}</span></div>`),e.paciente?.telefono?o(`<div class="flex items-center gap-2 text-gray-300 mb-2" data-v-6c821b5b><svg class="w-3.5 h-3.5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" data-v-6c821b5b></path></svg><span class="font-mono" data-v-6c821b5b>${s.ssrInterpolate(e.paciente.telefono)}</span></div>`):o("\x3c!----\x3e"),o('<div class="border-t border-gray-700 my-2" data-v-6c821b5b></div>'),e.bono_id&&e.bono?(o(`<div class="mb-2" data-v-6c821b5b><div class="flex items-center gap-2" data-v-6c821b5b><svg class="w-3.5 h-3.5 text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z" data-v-6c821b5b></path></svg><span class="text-violet-300 font-medium" data-v-6c821b5b>Bono ${s.ssrInterpolate(e.bono.tipo||"activo")}</span></div><div class="ml-5 mt-1 flex items-center gap-3" data-v-6c821b5b><span class="text-gray-400" data-v-6c821b5b> Sesiones: <span class="text-white font-medium" data-v-6c821b5b>${s.ssrInterpolate(e.bono.sesiones_restantes||0)}/${s.ssrInterpolate(e.bono.sesiones_totales||0)}</span></span>`),e.bono.pagado?o('<span class="text-emerald-400 text-[10px] font-medium" data-v-6c821b5b> Pagado </span>'):o('<span class="text-orange-400 text-[10px] font-medium px-1.5 py-0.5 bg-orange-900/50 rounded" data-v-6c821b5b> Pendiente pago </span>'),o("</div></div>")):o('<div class="text-gray-500 text-[11px] mb-2" data-v-6c821b5b> Sin bono asociado </div>'),e.precio_sesion?o(`<div class="flex items-center gap-2 text-gray-300 mb-2" data-v-6c821b5b><svg class="w-3.5 h-3.5 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg><span data-v-6c821b5b>${s.ssrInterpolate(formatearMoneda(e.precio_sesion))} / sesión</span></div>`):o("\x3c!----\x3e"),e.observaciones?o(`<div class="mt-2 pt-2 border-t border-gray-700" data-v-6c821b5b><p class="text-gray-400 text-[10px] uppercase tracking-wider mb-1" data-v-6c821b5b>Notas</p><p class="text-gray-200 text-[11px] leading-relaxed line-clamp-3" data-v-6c821b5b>${s.ssrInterpolate(e.observaciones)}</p></div>`):o("\x3c!----\x3e"),e.paciente_id?o('<button class="mt-3 w-full flex items-center justify-center gap-1.5 px-3 py-2 bg-violet-600 hover:bg-violet-700 text-white text-xs font-medium rounded-lg transition-colors pointer-events-auto" data-v-6c821b5b><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-6c821b5b></path></svg> Revisar notas última sesión </button>'):o("\x3c!----\x3e"),o('<div class="mt-3 pt-2 border-t border-gray-700 flex items-center gap-1 text-gray-500 text-[10px]" data-v-6c821b5b><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg><span data-v-6c821b5b>Clic para ver detalles completos</span></div></div></div></div>')}),o("\x3c!--]--\x3e</div>")}),o("\x3c!--]--\x3e</div>")}),o("\x3c!--]--\x3e</div></div>")),o("</div>"),o(s.ssrRenderComponent(i,{"is-open":h.value,"fecha-inicial":f.value||void 0,"hora-inicial":y.value||void 0,onCreated:e=>{h.value=!1,r.unref(b)()},onClose:e=>{h.value=!1,f.value=null,y.value=null}},null,l)),s.ssrRenderTeleport(o,e=>{w.value&&k.value?e(s.ssrRenderComponent(d,{"cita-id":k.value,onClose:e=>{w.value=!1,k.value=null},onCitaActualizada:e=>r.unref(b)(),onActualizado:e=>r.unref(b)()},null,l)):e("\x3c!----\x3e")},"body",!1,l),s.ssrRenderTeleport(o,e=>{j.value&&S.value?(e(`<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-cancelar-titulo" data-v-6c821b5b><div class="bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-modal-enter" data-v-6c821b5b><div class="px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-red-50 to-rose-50" data-v-6c821b5b><div class="flex items-center justify-between" data-v-6c821b5b><div data-v-6c821b5b><h2 id="modal-cancelar-titulo" class="text-lg font-semibold text-gray-900" data-v-6c821b5b>Cancelar Cita</h2><p class="text-sm text-gray-500 mt-0.5" data-v-6c821b5b>Esta acción no se puede deshacer</p></div><button class="w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-white transition-all focus:outline-none focus:ring-2 focus:ring-red-400" aria-label="Cerrar modal" data-v-6c821b5b><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-6c821b5b></path></svg></button></div></div><div class="p-6 space-y-5" data-v-6c821b5b><div class="bg-gray-50 rounded-xl p-4" data-v-6c821b5b><p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-3" data-v-6c821b5b>Resumen de la cita</p><div class="space-y-3" data-v-6c821b5b><div class="flex items-center gap-3" data-v-6c821b5b><div class="w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" data-v-6c821b5b></path></svg></div><div data-v-6c821b5b><p class="font-medium text-gray-900" data-v-6c821b5b>${s.ssrInterpolate(S.value.paciente?.nombre_completo||"Paciente")}</p><p class="text-sm text-gray-500" data-v-6c821b5b>Paciente</p></div></div><div class="flex items-center gap-3" data-v-6c821b5b><div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-6c821b5b></path></svg></div><div data-v-6c821b5b><p class="font-medium text-gray-900" data-v-6c821b5b>${s.ssrInterpolate(formatearFecha(S.value.fecha_cita))}</p><p class="text-sm text-gray-500" data-v-6c821b5b>${s.ssrInterpolate(formatearHora(S.value.hora_inicio))} - ${s.ssrInterpolate(formatearHora(S.value.hora_fin))}</p></div></div></div></div><div data-v-6c821b5b><label for="motivo-cancelacion" class="block text-sm font-medium text-gray-700 mb-2" data-v-6c821b5b> Motivo de cancelación <span class="text-gray-400" data-v-6c821b5b>(opcional)</span></label><textarea id="motivo-cancelacion" rows="3" placeholder="Ej: Solicitud del paciente, reagendamiento..." class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500/30 focus:border-red-400 transition-all resize-none" data-v-6c821b5b>${s.ssrInterpolate(_.value)}</textarea></div><div class="flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-200" data-v-6c821b5b><svg class="w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-6c821b5b></path></svg><p class="text-sm text-amber-800" data-v-6c821b5b> Al cancelar esta cita, el paciente podría recibir una notificación. </p></div></div><div class="px-6 py-4 border-t border-gray-100 bg-gray-50 flex items-center justify-end gap-3" data-v-6c821b5b><button class="px-5 py-2.5 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300" data-v-6c821b5b> Volver </button><button${s.ssrIncludeBooleanAttr(null!==$.value)?" disabled":""} class="px-5 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-red-400" data-v-6c821b5b>`),$.value?e('<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24" data-v-6c821b5b><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-6c821b5b></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-6c821b5b></path></svg>'):e("\x3c!----\x3e"),e(` ${s.ssrInterpolate($.value?"Cancelando...":"Cancelar cita")}</button></div></div></div>`)):e("\x3c!----\x3e")},"body",!1,l),s.ssrRenderTeleport(o,e=>{z.value&&I.value?(e(`<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-reprogramar-titulo" data-v-6c821b5b><div class="bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-modal-enter" data-v-6c821b5b><div class="px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50" data-v-6c821b5b><div class="flex items-center justify-between" data-v-6c821b5b><div data-v-6c821b5b><h2 id="modal-reprogramar-titulo" class="text-lg font-semibold text-gray-900" data-v-6c821b5b>Reprogramar Cita</h2><p class="text-sm text-gray-500 mt-0.5" data-v-6c821b5b>${s.ssrInterpolate(I.value.paciente?.nombre_completo||"Paciente")}</p></div><button class="w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-white transition-all focus:outline-none focus:ring-2 focus:ring-blue-400" aria-label="Cerrar modal" data-v-6c821b5b><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-6c821b5b></path></svg></button></div></div><div class="p-6 space-y-5" data-v-6c821b5b><div class="bg-gray-50 rounded-xl p-4" data-v-6c821b5b><p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-2" data-v-6c821b5b>Cita actual</p><div class="flex items-center gap-3" data-v-6c821b5b><div class="w-10 h-10 rounded-lg bg-gray-200 flex items-center justify-center" data-v-6c821b5b><svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-6c821b5b></path></svg></div><div data-v-6c821b5b><p class="font-medium text-gray-900" data-v-6c821b5b>${s.ssrInterpolate(formatearFecha(I.value.fecha_cita))}</p><p class="text-sm text-gray-500" data-v-6c821b5b>${s.ssrInterpolate(formatearHora(I.value.hora_inicio))} - ${s.ssrInterpolate(formatearHora(I.value.hora_fin))}</p></div></div></div><div class="flex justify-center" data-v-6c821b5b><div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" data-v-6c821b5b></path></svg></div></div><div data-v-6c821b5b><label for="nueva-fecha" class="block text-sm font-medium text-gray-700 mb-2" data-v-6c821b5b>Nueva fecha</label><input id="nueva-fecha" type="date"${s.ssrRenderAttr("value",R.value)}${s.ssrRenderAttr("min",(new Date).toISOString().split("T")[0])} class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all" data-v-6c821b5b></div><div class="grid grid-cols-2 gap-4" data-v-6c821b5b><div data-v-6c821b5b><label for="nueva-hora-inicio" class="block text-sm font-medium text-gray-700 mb-2" data-v-6c821b5b>Hora inicio</label><select id="nueva-hora-inicio" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all" data-v-6c821b5b>\x3c!--[--\x3e`),s.ssrRenderList(ue.value,a=>{e(`<option${s.ssrRenderAttr("value",a)} data-v-6c821b5b${s.ssrIncludeBooleanAttr(Array.isArray(B.value)?s.ssrLooseContain(B.value,a):s.ssrLooseEqual(B.value,a))?" selected":""}>${s.ssrInterpolate(a)}</option>`)}),e('\x3c!--]--\x3e</select></div><div data-v-6c821b5b><label for="nueva-hora-fin" class="block text-sm font-medium text-gray-700 mb-2" data-v-6c821b5b>Hora fin</label><select id="nueva-hora-fin" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all" data-v-6c821b5b>\x3c!--[--\x3e'),s.ssrRenderList(pe.value,a=>{e(`<option${s.ssrRenderAttr("value",a)} data-v-6c821b5b${s.ssrIncludeBooleanAttr(Array.isArray(D.value)?s.ssrLooseContain(D.value,a):s.ssrLooseEqual(D.value,a))?" selected":""}>${s.ssrInterpolate(a)}</option>`)}),e(`\x3c!--]--\x3e</select></div></div></div><div class="px-6 py-4 border-t border-gray-100 bg-gray-50 flex items-center justify-end gap-3" data-v-6c821b5b><button class="px-5 py-2.5 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300" data-v-6c821b5b> Cancelar </button><button${s.ssrIncludeBooleanAttr(!R.value||!B.value||!D.value||null!==M.value)?" disabled":""} class="px-5 py-2.5 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-blue-400" data-v-6c821b5b>`),M.value?e('<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24" data-v-6c821b5b><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-6c821b5b></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-6c821b5b></path></svg>'):e("\x3c!----\x3e"),e(` ${s.ssrInterpolate(M.value?"Reprogramando...":"Confirmar")}</button></div></div></div>`)):e("\x3c!----\x3e")},"body",!1,l),s.ssrRenderTeleport(o,e=>{L.value&&A.value?(e(`<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-eliminar-titulo" data-v-6c821b5b><div class="bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-modal-enter" data-v-6c821b5b><div class="px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-slate-50" data-v-6c821b5b><div class="flex items-center justify-between" data-v-6c821b5b><div data-v-6c821b5b><h2 id="modal-eliminar-titulo" class="text-lg font-semibold text-gray-900" data-v-6c821b5b>Eliminar Cita</h2><p class="text-sm text-gray-500 mt-0.5" data-v-6c821b5b>Esta acción eliminará la cita permanentemente</p></div><button class="w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-white transition-all focus:outline-none focus:ring-2 focus:ring-gray-400" aria-label="Cerrar modal" data-v-6c821b5b><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-6c821b5b></path></svg></button></div></div><div class="p-6 space-y-5" data-v-6c821b5b><div class="bg-gray-50 rounded-xl p-4" data-v-6c821b5b><p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-3" data-v-6c821b5b>Cita a eliminar</p><div class="space-y-3" data-v-6c821b5b><div class="flex items-center gap-3" data-v-6c821b5b><div class="w-10 h-10 rounded-lg bg-violet-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" data-v-6c821b5b></path></svg></div><div data-v-6c821b5b><p class="font-medium text-gray-900" data-v-6c821b5b>${s.ssrInterpolate(A.value.paciente?.nombre_completo||"Paciente")}</p><p class="text-sm text-gray-500" data-v-6c821b5b>Paciente</p></div></div><div class="flex items-center gap-3" data-v-6c821b5b><div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-6c821b5b></path></svg></div><div data-v-6c821b5b><p class="font-medium text-gray-900" data-v-6c821b5b>${s.ssrInterpolate(formatearFecha(A.value.fecha_cita))}</p><p class="text-sm text-gray-500" data-v-6c821b5b>${s.ssrInterpolate(formatearHora(A.value.hora_inicio))} - ${s.ssrInterpolate(formatearHora(A.value.hora_fin))}</p></div></div><div class="flex items-center gap-3" data-v-6c821b5b><div class="w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-6c821b5b></path></svg></div><div data-v-6c821b5b><p class="font-medium text-gray-900 capitalize" data-v-6c821b5b>${s.ssrInterpolate(A.value.estado)}</p><p class="text-sm text-gray-500" data-v-6c821b5b>Estado actual</p></div></div></div></div><div class="flex items-start gap-3 p-4 bg-red-50 rounded-xl border border-red-200" data-v-6c821b5b><svg class="w-5 h-5 text-red-500 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-6c821b5b></path></svg><div class="text-sm text-red-800" data-v-6c821b5b><p class="font-semibold" data-v-6c821b5b>Esta acción no se puede deshacer</p><p class="mt-1" data-v-6c821b5b>La cita se eliminará permanentemente del sistema. Si la cita tiene un bono asociado, la sesión se reintegrará automáticamente.</p></div></div></div><div class="px-6 py-4 border-t border-gray-100 bg-gray-50 flex items-center justify-end gap-3" data-v-6c821b5b><button class="px-5 py-2.5 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300" data-v-6c821b5b> Cancelar </button><button${s.ssrIncludeBooleanAttr(null!==V.value)?" disabled":""} class="px-5 py-2.5 bg-gray-700 text-white font-medium rounded-xl hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-gray-500" data-v-6c821b5b>`),V.value?e('<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24" data-v-6c821b5b><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-6c821b5b></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-6c821b5b></path></svg>'):e('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" data-v-6c821b5b></path></svg>'),e(` ${s.ssrInterpolate(V.value?"Eliminando...":"Eliminar cita")}</button></div></div></div>`)):e("\x3c!----\x3e")},"body",!1,l),s.ssrRenderTeleport(o,e=>{H.value?(e('<div class="fixed inset-0 z-[60] flex items-center justify-center p-4" data-v-6c821b5b><div class="absolute inset-0 bg-black/50" data-v-6c821b5b></div><div class="relative bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[80vh] overflow-hidden" data-v-6c821b5b><div class="px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-violet-50 to-white" data-v-6c821b5b><div class="flex items-center gap-3" data-v-6c821b5b><div class="w-10 h-10 rounded-xl bg-violet-100 flex items-center justify-center" data-v-6c821b5b><svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-6c821b5b></path></svg></div><div data-v-6c821b5b><h3 class="font-semibold text-gray-900" data-v-6c821b5b>Notas última sesión</h3>'),E.value?.paciente?.nombre_completo?e(`<p class="text-sm text-gray-500" data-v-6c821b5b>${s.ssrInterpolate(E.value.paciente.nombre_completo)}</p>`):e("\x3c!----\x3e"),e('</div></div><button class="w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-100 transition-colors" data-v-6c821b5b><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-6c821b5b></path></svg></button></div><div class="p-6 overflow-y-auto max-h-[60vh]" data-v-6c821b5b>'),T.value?e('<div class="flex items-center justify-center py-8" data-v-6c821b5b><svg class="w-8 h-8 text-violet-500 animate-spin" fill="none" viewBox="0 0 24 24" data-v-6c821b5b><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-6c821b5b></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" data-v-6c821b5b></path></svg></div>'):E.value?(e(`<div class="space-y-4" data-v-6c821b5b><div class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl" data-v-6c821b5b><div class="w-10 h-10 rounded-lg bg-white border border-gray-200 flex items-center justify-center" data-v-6c821b5b><svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-6c821b5b></path></svg></div><div data-v-6c821b5b><p class="text-sm font-medium text-gray-900" data-v-6c821b5b>${s.ssrInterpolate(new Date(E.value.fecha_cita+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}</p><p class="text-xs text-gray-500" data-v-6c821b5b>${s.ssrInterpolate(E.value.hora_inicio?.substring(0,5))} - ${s.ssrInterpolate(E.value.hora_fin?.substring(0,5))}</p></div></div>`),E.value.notas_terapeuta?e(`<div class="space-y-2" data-v-6c821b5b><h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider flex items-center gap-2" data-v-6c821b5b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" data-v-6c821b5b></path></svg> Notas del terapeuta </h4><div class="bg-violet-50 border border-violet-100 rounded-xl p-4" data-v-6c821b5b><p class="text-sm text-gray-700 whitespace-pre-wrap leading-relaxed" data-v-6c821b5b>${s.ssrInterpolate(E.value.notas_terapeuta)}</p></div></div>`):e("\x3c!----\x3e"),E.value.observaciones?e(`<div class="space-y-2" data-v-6c821b5b><h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider flex items-center gap-2" data-v-6c821b5b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" data-v-6c821b5b></path></svg> Observaciones </h4><div class="bg-gray-50 border border-gray-100 rounded-xl p-4" data-v-6c821b5b><p class="text-sm text-gray-700 whitespace-pre-wrap leading-relaxed" data-v-6c821b5b>${s.ssrInterpolate(E.value.observaciones)}</p></div></div>`):e("\x3c!----\x3e"),E.value.notas_terapeuta||E.value.observaciones?e("\x3c!----\x3e"):e('<div class="text-center py-4" data-v-6c821b5b><p class="text-gray-400 italic" data-v-6c821b5b>Esta sesión no tiene notas registradas.</p></div>'),e("</div>")):e('<div class="text-center py-8" data-v-6c821b5b><div class="w-16 h-16 mx-auto rounded-full bg-gray-100 flex items-center justify-center mb-4" data-v-6c821b5b><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-6c821b5b></path></svg></div><p class="text-gray-500 font-medium" data-v-6c821b5b>Sin sesiones previas</p><p class="text-gray-400 text-sm mt-1" data-v-6c821b5b>Este paciente no tiene sesiones completadas registradas.</p></div>'),e('</div><div class="px-6 py-4 border-t border-gray-100 bg-gray-50 flex justify-end" data-v-6c821b5b><button class="px-4 py-2 text-gray-700 font-medium rounded-xl hover:bg-gray-100 transition-colors" data-v-6c821b5b> Cerrar </button></div></div></div>')):e("\x3c!----\x3e")},"body",!1,l),s.ssrRenderTeleport(o,e=>{U.value?(e(`<div class="fixed bottom-6 right-6 z-[100] max-w-sm" role="alert" aria-live="polite" data-v-6c821b5b><div class="${s.ssrRenderClass([{"bg-emerald-50 border-emerald-200 text-emerald-800":"success"===q.value,"bg-red-50 border-red-200 text-red-800":"error"===q.value,"bg-blue-50 border-blue-200 text-blue-800":"info"===q.value},"flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg border"])}" data-v-6c821b5b><div class="${s.ssrRenderClass([{"bg-emerald-100":"success"===q.value,"bg-red-100":"error"===q.value,"bg-blue-100":"info"===q.value},"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"])}" data-v-6c821b5b>`),"success"===q.value?e('<svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" data-v-6c821b5b></path></svg>'):"error"===q.value?e('<svg class="w-5 h-5 text-red-600" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" data-v-6c821b5b></path></svg>'):e('<svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20" data-v-6c821b5b><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" data-v-6c821b5b></path></svg>'),e(`</div><p class="text-sm font-medium flex-1" data-v-6c821b5b>${s.ssrInterpolate(P.value)}</p><button class="w-6 h-6 rounded-full flex items-center justify-center hover:bg-black/5 transition-colors" aria-label="Cerrar notificación" data-v-6c821b5b><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6c821b5b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-6c821b5b></path></svg></button></div></div>`)):e("\x3c!----\x3e")},"body",!1,l),o("</div>")}}}),i=n.setup;n.setup=(e,a)=>{const t=r.useSSRContext();return(t.modules||(t.modules=new Set)).add("components/AgendaCalendario.vue"),i?i(e,a):void 0};const d=Object.assign(l(n,[["__scopeId","data-v-6c821b5b"]]),{__name:"AgendaCalendario"});export{d as _};
//# sourceMappingURL=AgendaCalendario-BZjYr8os.mjs.map
