{"version":3,"file":"pacientes-B87gpmK2.mjs","sources":["../../../../../../node_modules/.cache/nuxt/.nuxt/dist/server/_nuxt/pacientes-B87gpmK2.js"],"sourcesContent":null,"names":["render$6","_ctx","_cache","vueExports","openBlock","createElementBlock","xmlns","fill","viewBox","stroke","createElementVNode","d","render$5","render$4","render$3","render$2","render$1","render","_sfc_main$c","__name","__ssrInlineRender","props","paciente","type","Object","required","emits","setup","__props","emit","__emit","mostrarConfirmarEliminar","ref","nombreMostrar","computed","nombreCompleto","nombre","partes","trim","split","length","charAt","iniciales","toUpperCase","avatarColor","activo","en_pausa","colors","id","charCodeAt","avatarRingClass","estadoIndicadorClass","estadoVinculoTexto","estadoVinculoClasses","ultimaSesionTexto","ultima_sesion","fecha","Date","ahora","diffDias","Math","floor","toLocaleDateString","day","month","ultimaSesionIndicadorClass","diasInactividad","value","ultimaSesionTextClass","proximaSesion","proxima_sesion","fechaStr","includes","isNaN","getTime","weekday","hour","minute","totalSesiones","total_sesiones","tieneAlertaInactividad","bonoActivo","bono_activo","tipoBonoTexto","tipo","otro","quincenal","semanal","mensual","sesionesTotales","sesiones_totales","sesionesUsadas","sesiones_restantes","bonoProgressPercent","round","bonoProgressBarClass","restantes","bonoBackgroundClass","sesionesColorClass","bonoIconColor","fechaFinCorta","fecha_fin","fechaFinTextoMejorado","diasRestantes","fechaFinClases","tieneAlertaBonoCritica","tieneAlertaBonoAdvertencia","tieneAlertaCritica","_push","_parent","_attrs","serverRenderer_cjs_prodExports","ssrRenderAttrs","mergeProps","class","role","unref","tabindex","ssrRenderComponent","render$7","render$8","render$9","render$a","ssrInterpolate","ssrRenderClass","ssrRenderStyle","backgroundColor","area_de_acompanamiento","render$b","render$c","width","render$d","render$e","_sfc_setup$c","ctx","ssrContext","useSSRContext","modules","Set","add","_sfc_main$b","pacientes","Array","getAvatarColor","getEstadoClasses","getDiasInactividad","getUltimaSesionIndicador","getUltimaSesionTextClass","getBonoPercent","bono","usadas","getBonoTextClass","ssrRenderList","getIniciales","getEstadoTexto","formatProximaCita","formatUltimaSesion","render$f","_sfc_setup$b","_sfc_main$a","mostrar","Boolean","default","useSupabase","useBonos","useCitas","useSupabaseUser","formulario","apellido","email","telefono","fecha_nacimiento","tipo_bono","primera_sesion","notas_iniciales","crear_bono","bono_monto","bono_renovacion_automatica","guardando","error","PRECIOS_BASE","sesionesSegunTipo","nombreTipoBono","precioPorSesionBono","sesiones","monto","toFixed","precioSugeridoBono","esADemanda","opcionesHorarioRapido","hoy","opciones","formatearDateTime","hora","getFullYear","String","getMonth","padStart","getDate","manana","setDate","push","label","datetime","proximoLunes","diasHastaLunes","getDay","unaSemana","formularioValido","base","watch","nuevoTipo","crear","nuevo","resetearFormulario","ssrRenderAttr","ssrIncludeBooleanAttr","isArray","ssrLooseContain","ssrLooseEqual","opcion","index","_sfc_setup$a","__nuxt_component_3","assign","_sfc_main$9","supabase","precio_sesion","bono_sesiones_usadas","cargandoBono","enviandoRecordatorio","diasRestantesPausa","fechaPausa","metadata","fecha_pausa","inicioPausa","diasPasados","max","sesionesRestantesBono","sesionesAutomaticas","a_demanda","precioPorSesion","cargarDatosPaciente","async","p","nombre_completo","slice","join","apellido_paterno","cargarBonoActivo","data","bonoError","from","select","eq","in","order","ascending","limit","single","sesiones_usadas","err","console","log","estado","_sfc_setup$9","__nuxt_component_4","_export_sfc","_sfc_main$8","procesando","pacienteNombre","_sfc_setup$8","__nuxt_component_5","_sfc_main$7","defineComponent","isOpen","citaId","useSupabaseClient","getCitasPorDia","cita","cargando","conflictoHorario","fecha_cita","hora_inicio","hora_fin","duracion","modalidad","observaciones","fechaFormateada","year","opcionesFechaRapida","formatearFecha","fecha2","toISOString","diasLaborables","contadorDias","diaSemana","horasDisponibles","cargarCita","substring","warn","horaAMinutos","horas","minutos","map","Number","nuevaHora","totalMinutos","horaFin","minutosFin","nuevaDuracion","citasActivas","filter","c","inicioNueva","finNueva","some","inicioExistente","finExistente","minNuevaInicio","minNuevaFin","minExistenteInicio","minExistenteFin","verificarConflicto","nuevoCitaId","ssrRenderTeleport","_push2","paciente_nombre","valor","icono","_sfc_setup$7","__nuxt_component_6","_sfc_main$6","toasts","useToast","toastClasses","classes","success","warning","info","toast","render$g","render$h","message","render$i","_sfc_setup$6","__nuxt_component_7","_sfc_main$5","accept","maxSize","supportedFormats","ariaLabel","expose","__expose","file","isDragging","errorMessage","hasError","maxSizeMB","removeFile","render$k","render$j","name","bytes","i","pow","formatFileSize","size","_sfc_setup$5","__nuxt_component_0","_sfc_main$4","detectedColumns","mappings","validation","requiredFields","field","contactFields","treatmentFields","otherFields","allFields","getMappedField","sourceColumn","mapping","find","m","targetField","isFieldUsed","currentColumn","isRequiredField","f","mappedFields","previewData","sampleCount","min","sampleValues","preview","row","column","keys","idx","errors","warnings","getFieldLabel","_sfc_setup$4","__nuxt_component_1","_sfc_main$3","modelValue","existingPatients","importMapping","config","importResult","detecting","validating","importing","validateMapping","response","fetch","method","headers","body","JSON","stringify","configId","ok","errorData","json","Error","statusMessage","isValid","hasRequiredFields","hasNombre","has","hasContacto","detectColumns","formData","FormData","append","updateMapping","findIndex","executeImport","action","results","reset","getPreviewData","useImportMapping","currentStep","selectedFile","downloadingTemplate","updateDuplicates","importSuccess","fieldLabels","documento_identidad","direccion","contacto_emergencia","frecuencia","derivacion","medicacion","orientacion_diagnostica","inicio_tratamiento","comision","notas","handleFileSelected","handleFileRemoved","handleDropzoneError","handleMappingUpdate","_component_SharedFileDropzone","_component_PatientsColumnMappingTable","step","onFileSelected","onFileRemoved","onError","total","created","updated","skipped","incompleteProfiles","profile","missingFields","_sfc_setup$3","__nuxt_component_8","_sfc_main$2","totalPatients","filteredCount","selectedCount","hasFilters","currentFilters","selectedIds","format","scope","selectedFields","exporting","availableFields","watchEffect","render$l","_sfc_setup$2","__nuxt_component_9","_sfc_main$1","estadoTexto","estadoBadgeClasses","ultimaSesionIndicador","bonoTextColor","fechaFinTexto","fechaFinClasses","render$m","formatFechaCompleta","render$n","render$o","_sfc_setup$1","_sfc_main","Chart","register","CategoryScale","LinearScale","PointElement","LineElement","ArcElement","Title","Tooltip","Legend","Filler","router","useRouter","getUserId","mostrarModalNuevo","mostrarModalEditar","mostrarModalEliminar","mostrarModalAsignarCita","mostrarModalEditarCita","mostrarModalImportar","mostrarModalExportar","citaIdSeleccionada","pacienteSeleccionado","pacienteSeleccionadoCita","loading","busqueda","busquedaDebounced","estadoSeleccionado","areaSeleccionada","mostrarFiltrosAvanzados","filtrosActivos","sinProximaCita","sinSesionRegistrada","requiereAtencion","citasEstaSemana","bonosPorVencer","pagoPendiente","vistaActual","mostrarResumen","periodoResumen","periodosResumen","paginaActual","elementosPorPagina","mostrarPreview","pacientePreview","filtrosEstado","contadores","activos","enPausa","finalizados","filtrosEstadoConContadores","filtro","count","contadorFiltroActivo","areasDisponibles","areas","sort","hayFiltrosActivos","contadorFiltrosActivos","tieneAlgunFiltro","cargarPacientes","userId","pacientesData","pacientesError","pacientesEnriquecidos","Promise","all","ultimaCita","maybeSingle","proximaCita","gte","head","bonoData","sesionesCompletadasBono","totalSesionesBono","hace7Dias","emocionesRecientes","estadoEmocionalPromedio","evolucionPorcentaje","promedioAnimo","reduce","sum","e","estado_animo","ultimosTres","every","proxima_cita_id","estado_emocional_promedio","evolucion_porcentaje","requiere_atencion","created_at","sesiones_completadas","bonoPorVencer","fechaFin","pacientesFiltradosSinPaginar","resultado","busquedaLower","toLowerCase","inicioSemana","setHours","finSemana","estaEnEstaSemana","totalPaginas","ceil","pacientesFiltrados","inicio","fin","deep","totalPacientes","totalFiltrados","paginasVisibles","paginas","irAFichaPaciente","pacienteOrId","cerrarModalNuevo","abrirModalEditar","cerrarModalEditar","abrirModalEliminar","cerrarModalEliminar","manejarPacienteCreado","manejarPacienteActualizado","manejarPacienteEliminado","pacienteId","manejarPacienteDesactivado","cerrarModalAsignarCita","manejarCitaCreada","verCitasPaciente","gestionarBonosPaciente","abrirPreview","cerrarPreview","handleImportComplete","filtrosActualesParaExport","filters","area","abrirModalEditarCita","cerrarModalEditarCita","handleCitaActualizada","getFechasPeriodo","periodo","setMonth","metricasPacientes","inicioAnterior","todos","nuevos","createdAt","nuevosAnterior","tendenciaNuevos","hace30Dias","pacientesChurn","ultimaSesion","activosInicioPeriodo","churn","retencion","promedioSesiones","pacientesEnRiesgo","sinCitaProxima2","ultimaSesionVieja","sinCitaProxima","chartDataEvolucion","labels","dataNuevos","dataActivos","numPuntos","intervalo","fechaPunto","nuevosHastaFecha","activosAcum","datasets","borderColor","tension","chartOptionsEvolucion","responsive","maintainAspectRatio","plugins","legend","position","boxWidth","padding","scales","y","beginAtZero","ticks","stepSize","chartDataDistribucion","borderWidth","chartOptionsDistribucion","cutout","newUserId","_component_PacienteCard","_component_PacienteTabla","_component_ModalNuevaCita","__nuxt_component_2","_component_ModalNuevoPaciente","_component_ModalEditarPaciente","_component_ModalEliminarPaciente","_component_ModalEditarCita","_component_ToastContainer","_component_PatientsImportModal","_component_PatientsExportModal","_component_ModalPreviewPaciente","render$p","render$q","render$r","render$s","Line","options","Doughnut","render$t","render$u","render$v","render$w","onVerFicha","onEditar","onEliminar","onVerCitas","onGestionarBonos","onEditarCita","onVerPreview","pagina","render$x","onCerrar","onCitaCreada","onPacienteCreado","onPacienteActualizado","onPacienteEliminado","onPacienteDesactivado","onClose","onActualizado","$event","isRef","onImportComplete","_sfc_setup"],"mappings":"","x_google_ignoreList":[0]}