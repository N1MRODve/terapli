import{_ as a}from"./nuxt-link-C_f1d2Rj.mjs";import{v as e,j as t,s}from"./server.mjs";import{u as r}from"./useSupabaseClient-DykwVqLQ.mjs";import{_ as d}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../routes/renderer.mjs";import"../_/shared.cjs.prod.mjs";import"../virtual/_commonjsHelpers.mjs";import"node:stream";import"cookie";import"@supabase/supabase-js";import"@vercel/analytics/nuxt";const n=e.defineComponent({__name:"[id]",__ssrInlineRender:!0,setup(d){t(),r();const n=e.ref(null),o=e.ref(!0),l=e.ref(null),c=e.ref(""),i=e.ref(!1),formatearFecha=a=>a?new Date(a).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Fecha no disponible",formatearHora=a=>a?new Date(a).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):"--:--",formatearPrecio=a=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(a);return(t,r,d,v)=>{const p=a;var f;r(`<div${s.ssrRenderAttrs(v)} data-v-f7095ca9><nav class="mb-6 flex items-center gap-2 text-sm text-[#5D4A44]/60" data-v-f7095ca9>`),r(s.ssrRenderComponent(p,{to:"/terapeuta/dashboard",class:"hover:text-[#D8AFA0] transition-colors"},{default:e.withCtx((a,t,s,r)=>{if(!t)return[e.createTextVNode(" Dashboard ")];t(" Dashboard ")}),_:1},d)),r("<span data-v-f7095ca9>/</span>"),r(s.ssrRenderComponent(p,{to:"/terapeuta/sesiones",class:"hover:text-[#D8AFA0] transition-colors"},{default:e.withCtx((a,t,s,r)=>{if(!t)return[e.createTextVNode(" Sesiones ")];t(" Sesiones ")}),_:1},d)),r('<span data-v-f7095ca9>/</span><span class="text-[#5D4A44]" data-v-f7095ca9>Detalle</span></nav>'),o.value?r('<div class="flex items-center justify-center py-20" data-v-f7095ca9><div class="text-center" data-v-f7095ca9><div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#D8AFA0]" data-v-f7095ca9></div><p class="mt-4 text-[#5D4A44]/60" data-v-f7095ca9>Cargando sesiÃ³n...</p></div></div>'):l.value?(r(`<div class="bg-red-50 border border-red-200 rounded-xl p-6" data-v-f7095ca9><h3 class="text-red-800 font-[&#39;Lora&#39;] text-lg mb-2" data-v-f7095ca9>Error al cargar la sesiÃ³n</h3><p class="text-red-600 text-sm" data-v-f7095ca9>${s.ssrInterpolate(l.value)}</p>`),r(s.ssrRenderComponent(p,{to:"/terapeuta/sesiones",class:"mt-4 inline-block text-red-700 hover:text-red-900 text-sm font-medium"},{default:e.withCtx((a,t,s,r)=>{if(!t)return[e.createTextVNode(" â† Volver a sesiones ")];t(" â† Volver a sesiones ")}),_:1},d)),r("</div>")):n.value?(r(`<div class="space-y-6" data-v-f7095ca9><div class="bg-white rounded-xl shadow-sm p-6 border border-[#EAD5D3]/40" data-v-f7095ca9><div class="flex items-start justify-between mb-4" data-v-f7095ca9><div data-v-f7095ca9><h1 class="text-3xl font-[&#39;Lora&#39;] text-[#5D4A44] mb-2" data-v-f7095ca9> SesiÃ³n #${s.ssrInterpolate(n.value.id.slice(0,8))}</h1><p class="text-[#5D4A44]/70" data-v-f7095ca9>${s.ssrInterpolate(formatearFecha(n.value.fecha))} a las ${s.ssrInterpolate(formatearHora(n.value.fecha))}</p></div><span class="${s.ssrRenderClass([(f=n.value.estado,{pendiente:"bg-yellow-100 text-yellow-700",confirmada:"bg-blue-100 text-blue-700",realizada:"bg-green-100 text-green-700",cancelada:"bg-red-100 text-red-700"}[f]||"bg-gray-100 text-gray-700"),"px-4 py-2 rounded-full text-sm font-medium"])}" data-v-f7095ca9>${s.ssrInterpolate((a=>({pendiente:"â³ Pendiente",confirmada:"âœ“ Confirmada",realizada:"âœ“ Realizada",cancelada:"âœ• Cancelada"}[a]||a))(n.value.estado))}</span></div></div><div class="grid grid-cols-1 lg:grid-cols-3 gap-6" data-v-f7095ca9><div class="lg:col-span-2 space-y-6" data-v-f7095ca9><div class="bg-white rounded-xl shadow-sm p-6 border border-[#EAD5D3]/40" data-v-f7095ca9><h2 class="font-[&#39;Lora&#39;] text-xl text-[#5D4A44] mb-4 flex items-center gap-2" data-v-f7095ca9><span class="text-2xl" data-v-f7095ca9>ğŸ“‹</span> Detalles de la SesiÃ³n </h2><div class="grid grid-cols-2 gap-4 text-[#5D4A44]" data-v-f7095ca9><div data-v-f7095ca9><p class="text-sm text-[#5D4A44]/60 mb-1" data-v-f7095ca9>Paciente</p>`),r(s.ssrRenderComponent(p,{to:`/terapeuta/pacientes/${n.value.paciente_id}`,class:"font-medium hover:text-[#D8AFA0] transition-colors flex items-center gap-1"},{default:e.withCtx((a,t,r,d)=>{if(!t)return[e.createTextVNode(e.toDisplayString(n.value.pacientes?.nombre||"Sin nombre")+" ",1),e.createVNode("span",{class:"text-xs"},"â†’")];t(`${s.ssrInterpolate(n.value.pacientes?.nombre||"Sin nombre")} <span class="text-xs" data-v-f7095ca9${d}>â†’</span>`)}),_:1},d)),r(`</div><div data-v-f7095ca9><p class="text-sm text-[#5D4A44]/60 mb-1" data-v-f7095ca9>Fecha</p><p class="font-medium" data-v-f7095ca9>${s.ssrInterpolate(formatearFecha(n.value.fecha))}</p></div><div data-v-f7095ca9><p class="text-sm text-[#5D4A44]/60 mb-1" data-v-f7095ca9>Hora</p><p class="font-medium" data-v-f7095ca9>${s.ssrInterpolate(formatearHora(n.value.fecha))}</p></div><div data-v-f7095ca9><p class="text-sm text-[#5D4A44]/60 mb-1" data-v-f7095ca9>Modalidad</p><span class="inline-flex items-center gap-1 px-3 py-1 bg-[#F9F7F3] rounded-full text-sm" data-v-f7095ca9><span data-v-f7095ca9>${s.ssrInterpolate("online"===n.value.modalidad?"ğŸ’»":"ğŸ¥")}</span><span data-v-f7095ca9>${s.ssrInterpolate("online"===n.value.modalidad?"Online":"Presencial")}</span></span></div><div data-v-f7095ca9><p class="text-sm text-[#5D4A44]/60 mb-1" data-v-f7095ca9>DuraciÃ³n</p><p class="font-medium" data-v-f7095ca9>${s.ssrInterpolate(n.value.duracion||50)} minutos</p></div><div data-v-f7095ca9><p class="text-sm text-[#5D4A44]/60 mb-1" data-v-f7095ca9>Bono vinculado</p><p class="font-medium" data-v-f7095ca9>${s.ssrInterpolate(n.value.bono_id?"SÃ­":"SesiÃ³n individual")}</p></div></div></div><div class="bg-gradient-to-br from-[#D8AFA0]/10 to-[#EAD5D3]/20 rounded-xl shadow-sm p-6 border border-[#EAD5D3]/40" data-v-f7095ca9><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] mb-4 flex items-center gap-2" data-v-f7095ca9><span class="text-2xl" data-v-f7095ca9>ğŸ’°</span> Resumen Financiero </h3><div class="space-y-3" data-v-f7095ca9><div class="flex justify-between items-center" data-v-f7095ca9><span class="text-[#5D4A44]/70" data-v-f7095ca9>Precio total de la sesiÃ³n</span><span class="text-xl font-bold text-[#5D4A44]" data-v-f7095ca9>${s.ssrInterpolate(formatearPrecio(n.value.precio_total||50))}</span></div><div class="border-t border-[#EAD5D3]/40 pt-3 space-y-2" data-v-f7095ca9><div class="flex justify-between items-center" data-v-f7095ca9><span class="text-[#5D4A44]/70" data-v-f7095ca9>Terapeuta (70%)</span><span class="text-lg font-semibold text-green-700" data-v-f7095ca9>${s.ssrInterpolate(formatearPrecio(.7*(n.value.precio_total||50)))}</span></div><div class="flex justify-between items-center" data-v-f7095ca9><span class="text-[#5D4A44]/70" data-v-f7095ca9>Consulta (30%)</span><span class="text-lg font-medium text-[#5D4A44]/80" data-v-f7095ca9>${s.ssrInterpolate(formatearPrecio(.3*(n.value.precio_total||50)))}</span></div></div><div class="border-t border-[#EAD5D3]/40 pt-3" data-v-f7095ca9><div class="flex justify-between items-center" data-v-f7095ca9><span class="text-[#5D4A44]/70" data-v-f7095ca9>Estado del pago</span><span class="${s.ssrRenderClass([n.value.pagado?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700","px-3 py-1 rounded-full text-sm font-medium"])}" data-v-f7095ca9>${s.ssrInterpolate(n.value.pagado?"âœ“ Pagado":"â³ Pendiente")}</span></div></div></div></div><div class="bg-white rounded-xl shadow-sm p-6 border border-[#EAD5D3]/40" data-v-f7095ca9><div class="flex items-center justify-between mb-4" data-v-f7095ca9><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] flex items-center gap-2" data-v-f7095ca9><span class="text-2xl" data-v-f7095ca9>ğŸ“</span> Notas Privadas del Terapeuta </h3>`),i.value?r('<span class="text-sm text-green-600 flex items-center gap-1" data-v-f7095ca9><svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-f7095ca9><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-f7095ca9></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-f7095ca9></path></svg> Guardando... </span>'):r("\x3c!----\x3e"),r(`</div><textarea class="w-full h-48 border border-[#EAD5D3] rounded-lg p-4 bg-[#F9F7F3] font-[&#39;Lato&#39;] text-[#5D4A44] focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent outline-none resize-none" placeholder="Anota observaciones, temas tratados, tareas asignadas, aspectos a trabajar en prÃ³ximas sesiones..." data-v-f7095ca9>${s.ssrInterpolate(c.value)}</textarea><div class="mt-3 flex items-center justify-between" data-v-f7095ca9><p class="text-xs text-[#5D4A44]/50" data-v-f7095ca9> Las notas se guardan automÃ¡ticamente. Solo tÃº puedes verlas. </p><button class="px-4 py-2 bg-[#D8AFA0] hover:bg-[#C89B8A] text-white rounded-lg transition-colors text-sm font-medium" data-v-f7095ca9> Guardar ahora </button></div></div></div><div class="space-y-6" data-v-f7095ca9><div class="bg-white rounded-xl shadow-sm p-6 border border-[#EAD5D3]/40" data-v-f7095ca9><h3 class="font-[&#39;Lora&#39;] text-lg text-[#5D4A44] mb-4" data-v-f7095ca9>Acciones</h3><div class="space-y-3" data-v-f7095ca9>`),"pendiente"===n.value.estado?r('<button class="w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium" data-v-f7095ca9> âœ“ Confirmar SesiÃ³n </button>'):r("\x3c!----\x3e"),"confirmada"===n.value.estado?r('<button class="w-full px-4 py-2 bg-[#D8AFA0] hover:bg-[#C89B8A] text-white rounded-lg transition-colors text-sm font-medium" data-v-f7095ca9> âœ“ Marcar como Realizada </button>'):r("\x3c!----\x3e"),["pendiente","confirmada"].includes(n.value.estado)?r('<button class="w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm font-medium" data-v-f7095ca9> âœ• Cancelar SesiÃ³n </button>'):r("\x3c!----\x3e"),r(s.ssrRenderComponent(p,{to:`/terapeuta/pacientes/${n.value.paciente_id}`,class:"w-full block px-4 py-2 bg-white border border-[#EAD5D3] text-[#5D4A44] hover:bg-[#F9F7F3] rounded-lg transition-colors text-sm font-medium text-center"},{default:e.withCtx((a,t,s,r)=>{if(!t)return[e.createTextVNode(" Ver Perfil del Paciente ")];t(" Ver Perfil del Paciente ")}),_:1},d)),r(`<button class="w-full px-4 py-2 bg-white border border-[#EAD5D3] text-[#5D4A44] hover:bg-[#F9F7F3] rounded-lg transition-colors text-sm font-medium" data-v-f7095ca9> ğŸ“„ Generar Recibo </button></div></div><div class="bg-[#F9F7F3] rounded-xl p-6 border border-[#EAD5D3]/40" data-v-f7095ca9><h4 class="font-[&#39;Lora&#39;] text-sm text-[#5D4A44] mb-3" data-v-f7095ca9>InformaciÃ³n</h4><div class="space-y-2 text-xs text-[#5D4A44]/70" data-v-f7095ca9><p data-v-f7095ca9>â€¢ Creada: ${s.ssrInterpolate(formatearFecha(n.value.created_at))}</p><p data-v-f7095ca9>â€¢ ID: ${s.ssrInterpolate(n.value.id)}</p>`),n.value.bono_id?r(`<p data-v-f7095ca9>â€¢ Bono: ${s.ssrInterpolate(n.value.bono_id.slice(0,8))}</p>`):r("\x3c!----\x3e"),r("</div></div></div></div></div>")):r("\x3c!----\x3e"),r("</div>")}}}),o=n.setup;n.setup=(a,t)=>{const s=e.useSSRContext();return(s.modules||(s.modules=new Set)).add("pages/terapeuta/sesiones/[id].vue"),o?o(a,t):void 0};const l=d(n,[["__scopeId","data-v-f7095ca9"]]);export{l as default};
//# sourceMappingURL=_id_-qnsy_eQd.mjs.map
