import{v as e,a,s as t}from"./server.mjs";import{u as r}from"./useCitas-DyEZH6RI.mjs";import{u as s}from"./useSupabaseClient-DykwVqLQ.mjs";import{u as o}from"./useSupabase-C_1MgUEB.mjs";import{r as n}from"./CheckCircleIcon-CT9fzVFs.mjs";import{r as d}from"./CalendarIcon-BrsGHJBC.mjs";import{r as l}from"./TicketIcon-zZdrc71S.mjs";import{r as i}from"./MagnifyingGlassIcon-GsbNDyPZ.mjs";import{r as c}from"./UserIcon-CrHYaeI9.mjs";import{r as u}from"./ExclamationTriangleIcon-DQdM2y0F.mjs";import{r as v}from"./UserGroupIcon-BhthmHUw.mjs";import{r as p}from"./ClockIcon-BxdFtPqx.mjs";import{r as m,a as f}from"./XCircleIcon-BCxujS_I.mjs";import{_ as x}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";function render$4(a,t){return e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})])}function render$3(a,t){return e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function render$2(a,t){return e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"})])}function render$1(a,t){return e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function render(a,t){return e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}const b=e.defineComponent({__name:"ModalNuevaCita",__ssrInlineRender:!0,props:{modelValue:{type:Boolean,default:!1},mostrar:{type:Boolean,default:!1},fechaPreseleccionada:{type:String,default:""},horaPreseleccionada:{type:String,default:""},titulo:{type:String,default:""},pacientePreseleccionado:{type:Object,default:null},citaId:{type:String,default:null}},emits:["cerrar","citaCreada","actualizado","update:modelValue"],setup(x,{emit:b}){const g=x,{getCitasPorDia:h,verificarBonoActivo:w,sugerirProximoHorario:y}=r(),A=s();a(),e.computed(()=>!!g.citaId),e.ref(!1);const _=e.ref(""),C=e.ref(!1),$=e.ref(null),D=e.ref(!1),k=e.ref(!1),I=e.ref(!1),F=e.ref([]),R=e.ref(null),j=e.ref(!1),B=e.ref(!1),P=e.ref([]),S=e.ref(!1),M=e.ref(null),E=e.ref(!1),L=e.ref(""),V=e.ref(""),H=e.ref("exito"),N=e.ref([]),z=e.ref({tiene_bono:!1,sesiones_restantes:0,sesiones_totales:0,tipo_bono:"",bono_id:void 0}),T=e.ref({paciente_id:"",paciente_nombre:"",terapeuta_id:"",terapeuta_nombre:"",fecha:g.fechaPreseleccionada||formatearFecha(new Date),fecha_manual:"",hora_inicio:g.horaPreseleccionada||"",hora_fin:"",duracion:"60",tipo:"presencial",estado:"pendiente",notas:"",descontar_de_bono:!1,bono_id:void 0}),q=e.ref(null);e.ref(!1);const U=e.ref([]),O=["11:00","11:30","12:00","12:30","13:00","13:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00"],G=[{valor:"presencial",nombre:"Presencial",componente:render$4,descripcion:"Sesi√≥n presencial en consultorio"},{valor:"online",nombre:"Online",componente:render$2,descripcion:"Videollamada por plataforma digital"},{valor:"telefonica",nombre:"Telef√≥nica",componente:render,descripcion:"Llamada telef√≥nica"}],Z=[{valor:"confirmada",nombre:"Confirmada",componente:render$3,claseActivo:"border-emerald-500 bg-emerald-50 text-emerald-700",claseInactivo:"border-gray-300 hover:border-emerald-400 bg-white"},{valor:"pendiente",nombre:"Pendiente",componente:p,claseActivo:"border-amber-500 bg-amber-50 text-amber-700",claseInactivo:"border-gray-300 hover:border-amber-400 bg-white"},{valor:"cancelada",nombre:"Cancelada",componente:f,claseActivo:"border-red-500 bg-red-50 text-red-700",claseInactivo:"border-gray-300 hover:border-red-400 bg-white"},{valor:"completada",nombre:"Completada",componente:n,claseActivo:"border-blue-500 bg-blue-50 text-blue-700",claseInactivo:"border-gray-300 hover:border-blue-400 bg-white"}],Q=e.computed(()=>formatearFecha(new Date)),X=e.computed(()=>{const e=new Date,a=[];a.push({label:"Hoy",fecha:formatearFecha(e)});const t=new Date(e);t.setDate(t.getDate()+1),a.push({label:"Ma√±ana",fecha:formatearFecha(t)});const r=["Lun","Mar","Mi√©","Jue","Vie"];let s=new Date(e),o=0;for(;o<5;){s.setDate(s.getDate()+1);const e=s.getDay();e>=1&&e<=5&&(a.push({label:`${r[e-1]} ${s.getDate()}`,fecha:formatearFecha(s)}),o++)}return a}),J=e.computed(()=>{if(!_.value)return[];const e=_.value.toLowerCase().trim();return e.length<2?[]:F.value.filter(a=>a.nombre.toLowerCase().includes(e)||a.email.toLowerCase().includes(e))}),Y=e.computed(()=>{const e=T.value.paciente_id,a=!B.value||T.value.terapeuta_id;return e&&a&&T.value.fecha&&T.value.hora_inicio&&T.value.hora_fin&&T.value.tipo&&T.value.estado});function calcularHoraFin(){if(!T.value.hora_inicio||!T.value.duracion)return;const e=T.value.hora_inicio.split(":").map(Number),a=e[0]||0,t=e[1]||0,r=parseInt(T.value.duracion),s=new Date;s.setHours(a,t,0,0);const o=new Date(s.getTime()+6e4*r),n=String(o.getHours()).padStart(2,"0"),d=String(o.getMinutes()).padStart(2,"0");T.value.hora_fin=`${n}:${d}`}function horaAMinutos(e){if(!e||!e.includes(":"))return 0;const[a,t]=e.split(":").map(Number);return 60*(a||0)+(t||0)}function formatearFecha(e){return e.toISOString().split("T")[0]||""}function formatearFechaLegible(e){return new Date(e+"T00:00:00").toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}async function verificarRolUsuario(){try{console.log("üîç Verificando rol de usuario...");const{userProfile:e}=o();if(!e.value)return console.warn("‚ö†Ô∏è No hay perfil cargado"),void(B.value=!1);console.log("üë§ Usuario:",e.value.email),console.log("üé≠ Rol del perfil:",e.value.rol),B.value="coordinadora"===e.value.rol,console.log(`‚úÖ ¬øEs coordinadora? ${B.value}`),B.value&&(console.log("üåü Usuario es coordinadora - cargando terapeutas"),await async function(){S.value=!0;try{const{data:e,error:a}=await A.from("terapeutas").select("id, nombre_completo, email, especialidad").eq("activo",!0).order("nombre_completo",{ascending:!0});if(a)return void console.error("Error al cargar terapeutas:",a);P.value=e||[],console.log(`‚úÖ ${P.value.length} terapeutas cargados`)}catch(e){console.error("Error al cargar terapeutas:",e)}finally{S.value=!1}}())}catch(e){console.error("‚ùå Error al verificar rol:",e),B.value=!1}}return e.watch([()=>T.value.fecha,()=>T.value.hora_inicio,()=>T.value.hora_fin],()=>{T.value.fecha&&T.value.hora_inicio&&T.value.hora_fin&&async function(){if(T.value.fecha&&T.value.hora_inicio&&T.value.hora_fin)try{const e=(await h(T.value.fecha)).filter(e=>"cancelada"!==e.estado&&"borrador"!==e.estado&&null!==e.estado&&e.id!==g.citaId),a=T.value.hora_inicio,t=T.value.hora_fin;k.value=e.some(e=>{const r=e.hora_inicio,s=e.hora_fin,o=horaAMinutos(a),n=horaAMinutos(t),d=horaAMinutos(r),l=horaAMinutos(s),i=o>=d&&o<l||n>d&&n<=l||o<=d&&n>=l||o===d&&n===l;return i&&console.log("‚ö†Ô∏è Conflicto detectado:",{nueva:`${a} - ${t}`,existente:`${r} - ${s}`,estado:e.estado,paciente:e.paciente_nombre||"Desconocido"}),i}),k.value&&console.warn("‚ö†Ô∏è Hay conflicto de horario")}catch(e){console.error("‚ùå Error al verificar conflicto:",e),k.value=!1}else k.value=!1}()}),e.watch(()=>g.fechaPreseleccionada,e=>{e&&(T.value.fecha=e)}),e.watch(()=>g.horaPreseleccionada,e=>{e&&(T.value.hora_inicio=e,calcularHoraFin())}),e.watch(()=>g.mostrar,a=>{a&&(console.log("üéØ Modal abierto - verificando rol y cargando datos"),verificarRolUsuario(),async function(){console.log("üìã Cargando pacientes..."),I.value=!0;try{const{data:{user:e}}=await A.auth.getUser();if(!e)return void console.error("‚ùå No hay usuario autenticado");console.log("üë§ Usuario ID:",e.id);const{userProfile:a}=o();console.log("üé≠ Rol de usuario:",a.value?.rol||"desconocido");let t=A.from("pacientes").select("\n        id,\n        nombre_completo,\n        email,\n        metadata\n      ").eq("activo",!0).order("created_at",{ascending:!1});"coordinadora"!==a.value?.rol?(console.log("üë®‚Äç‚öïÔ∏è Filtrando por terapeuta_id:",e.id),t=t.eq("terapeuta_id",e.id)):console.log("üåü Coordinadora - cargando TODOS los pacientes");const{data:r,error:s}=await t;if(s)return void console.error("‚ùå Error al cargar pacientes:",s);F.value=(r||[]).map(e=>({id:e.id,nombre:e.nombre_completo||"Sin nombre",email:e.email||"",frecuencia:e.metadata?.frecuencia||"No definida",area_acompanamiento:e.metadata?.area_de_acompanamiento||""})),console.log(`‚úÖ ${F.value.length} pacientes cargados (rol: ${a.value?.rol||"desconocido"})`),console.log("üìù Pacientes:",F.value)}catch(e){console.error("‚ùå Error al cargar pacientes:",e)}finally{I.value=!1}}(),g.pacientePreseleccionado&&e.nextTick(()=>{!async function(e){$.value=e,T.value.paciente_id=e.id,T.value.paciente_nombre=e.nombre,_.value=e.nombre,C.value=!1;const a=await w(e.id);if(z.value=a,a.tiene_bono&&a.sesiones_restantes>0&&(T.value.descontar_de_bono=!0,T.value.bono_id=a.bono_id),e.frecuencia&&!g.fechaPreseleccionada){j.value=!0;try{const a=await y(e.id,e.frecuencia);a&&(q.value=a.fecha,R.value=a.hora,T.value.fecha=a.fecha,T.value.hora_inicio=a.hora,calcularHoraFin(),console.log("üí° Horario sugerido:",a))}catch(e){console.error("Error al sugerir horario:",e)}finally{j.value=!1}}console.log("‚úÖ Paciente seleccionado:",e.nombre)}({id:g.pacientePreseleccionado.id,nombre:g.pacientePreseleccionado.nombre,email:g.pacientePreseleccionado.email,frecuencia:g.pacientePreseleccionado.frecuencia||"No definida",area_acompanamiento:g.pacientePreseleccionado.area_acompanamiento||""})}))}),(a,r,s,o)=>{x.modelValue||x.mostrar?(r(`<div${t.ssrRenderAttrs(e.mergeProps({class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},o))} data-v-75e79c96><div class="bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-white/30" data-v-75e79c96><div class="sticky top-0 bg-gradient-to-r from-[#5550F2]/5 via-[#027368]/5 to-[#04BF9D]/5 backdrop-blur-md border-b border-neutral-200 px-6 py-4 flex justify-between items-center shadow-sm" data-v-75e79c96><div data-v-75e79c96><h2 class="text-2xl font-[&#39;Elms_Sans&#39;] text-neutral-800 font-semibold" data-v-75e79c96>${t.ssrInterpolate(x.titulo||"Nueva Cita")}</h2>`),x.fechaPreseleccionada?r(`<p class="text-sm text-neutral-600 mt-1" data-v-75e79c96>${t.ssrInterpolate(formatearFechaLegible(x.fechaPreseleccionada))} a las ${t.ssrInterpolate(x.horaPreseleccionada)}</p>`):r("\x3c!----\x3e"),r('</div><button class="text-neutral-600 hover:text-[#027368] transition-colors p-2 hover:bg-white/50 rounded-lg" aria-label="Cerrar modal" data-v-75e79c96><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-75e79c96><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-75e79c96></path></svg></button></div><form class="px-6 py-6 space-y-6 bg-gradient-to-b from-white/50 to-transparent" data-v-75e79c96>'),g.pacientePreseleccionado&&e.unref($)?(r('<div class="p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl shadow-sm" data-v-75e79c96><div class="flex items-center justify-between" data-v-75e79c96><div class="flex items-center gap-3" data-v-75e79c96><div class="w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(n),{class:"w-7 h-7 text-white"},null,s)),r(`</div><div data-v-75e79c96><div class="text-xs font-semibold text-emerald-700 uppercase tracking-wide mb-1" data-v-75e79c96>Paciente Seleccionado</div><div class="font-bold text-emerald-900 text-lg" data-v-75e79c96>${t.ssrInterpolate(e.unref($).nombre)}</div><div class="text-sm text-emerald-700 flex items-center gap-1 mt-0.5" data-v-75e79c96><span data-v-75e79c96>${t.ssrInterpolate(e.unref($).email)}</span></div>`),e.unref($).frecuencia?(r('<div class="mt-2 flex items-center gap-2 text-xs" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(d),{class:"w-4 h-4 text-emerald-600"},null,s)),r(`<span class="text-emerald-700" data-v-75e79c96>Frecuencia: <strong class="capitalize" data-v-75e79c96>${t.ssrInterpolate(e.unref($).frecuencia)}</strong></span></div>`)):r("\x3c!----\x3e"),r('</div></div><div class="text-right" data-v-75e79c96>'),e.unref(z).tiene_bono?(r('<div class="flex items-center gap-1 text-xs text-emerald-700 font-semibold mb-1" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(l),{class:"w-4 h-4"},null,s)),r("<span data-v-75e79c96>BONO ACTIVO</span></div>")):r("\x3c!----\x3e"),e.unref(z).tiene_bono?r(`<div class="text-2xl font-bold text-emerald-900" data-v-75e79c96>${t.ssrInterpolate(e.unref(z).sesiones_restantes)}/${t.ssrInterpolate(e.unref(z).sesiones_totales)}</div>`):r("\x3c!----\x3e"),e.unref(z).tiene_bono?r('<div class="text-xs text-emerald-600" data-v-75e79c96>sesiones</div>'):r("\x3c!----\x3e"),r("</div></div></div>")):r("\x3c!----\x3e"),g.pacientePreseleccionado?r("\x3c!----\x3e"):(r('<div class="space-y-4" data-v-75e79c96><div class="flex items-center justify-between" data-v-75e79c96><h3 class="text-lg font-[&#39;Elms_Sans&#39;] text-neutral-800 font-semibold flex items-center gap-2" data-v-75e79c96>'),e.unref($)?(r('<span class="w-7 h-7 rounded-full bg-gradient-to-r from-[#04BF9D] to-[#027368] text-white flex items-center justify-center shadow-sm" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(n),{class:"w-5 h-5"},null,s)),r("</span>")):r('<span class="w-7 h-7 rounded-full bg-gradient-to-r from-[#5550F2] to-[#027368] text-white flex items-center justify-center text-sm font-bold shadow-sm" data-v-75e79c96> 1 </span>'),r(" Seleccionar Paciente </h3></div>"),e.unref($)?r("\x3c!----\x3e"):(r('<div class="p-3 bg-blue-50 border-l-4 border-blue-400 rounded" data-v-75e79c96><p class="flex items-center gap-2 text-sm text-blue-800" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(i),{class:"w-5 h-5 flex-shrink-0"},null,s)),r('<span data-v-75e79c96>Busca y selecciona un paciente ya registrado en el sistema</span></p><p class="text-xs text-blue-700 mt-1.5 ml-7" data-v-75e79c96> Para crear un paciente nuevo, ve a la secci√≥n <strong data-v-75e79c96>Pacientes</strong> en el men√∫ principal </p></div>')),e.unref($)?r("\x3c!----\x3e"):(r(`<div class="space-y-3" data-v-75e79c96><div class="relative" data-v-75e79c96><input${t.ssrRenderAttr("value",e.unref(_))} type="text" placeholder="Buscar paciente por nombre o email..." class="w-full px-4 py-2.5 pl-10 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-[#027368]/20 focus:border-[#027368] bg-white/90 backdrop-blur-sm transition-all shadow-sm" autocomplete="off" data-v-75e79c96><span class="absolute left-3 top-1/2 -translate-y-1/2" data-v-75e79c96>`),r(t.ssrRenderComponent(e.unref(i),{class:"w-5 h-5 text-neutral-400"},null,s)),r("</span>"),e.unref(I)?r('<span class="absolute right-3 top-1/2 -translate-y-1/2" data-v-75e79c96><svg class="animate-spin h-5 w-5 text-[#027368]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-75e79c96><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-75e79c96></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-75e79c96></path></svg></span>'):r("\x3c!----\x3e"),e.unref(_)||e.unref(I)?r("\x3c!----\x3e"):(r('<div class="mt-1 flex items-center gap-2 text-xs text-neutral-500" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(render$1),{class:"w-4 h-4 flex-shrink-0"},null,s)),r("<span data-v-75e79c96>Escribe al menos 2 caracteres para buscar</span></div>")),r("</div>"),e.unref(C)&&e.unref(_)&&e.unref(J).length>0?(r('<div class="grid grid-cols-1 md:grid-cols-2 gap-3" data-v-75e79c96>\x3c!--[--\x3e'),t.ssrRenderList(e.unref(J),a=>{r('<button type="button" class="p-4 text-left hover:bg-[#027368]/5 transition-all border-2 border-neutral-200 hover:border-[#027368] rounded-xl cursor-pointer group bg-white/90 backdrop-blur-sm shadow-sm hover:shadow-md" data-v-75e79c96><div class="flex items-center gap-3" data-v-75e79c96><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-[#027368]/20 to-[#04BF9D]/20 group-hover:from-[#027368] group-hover:to-[#04BF9D] flex items-center justify-center transition-all" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(c),{class:"w-6 h-6 text-[#027368] group-hover:text-white transition-colors"},null,s)),r(`</div><div class="flex-1" data-v-75e79c96><div class="font-medium text-neutral-800 group-hover:text-[#027368] transition-colors" data-v-75e79c96>${t.ssrInterpolate(a.nombre)}</div><div class="text-sm text-neutral-600" data-v-75e79c96>${t.ssrInterpolate(a.email)}</div>`),a.frecuencia?(r('<div class="text-xs text-neutral-500 mt-1 flex items-center gap-1" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(d),{class:"w-3 h-3"},null,s)),r(`<span class="font-medium capitalize" data-v-75e79c96>${t.ssrInterpolate(a.frecuencia)}</span></div>`)):r("\x3c!----\x3e"),r('</div><div class="opacity-0 group-hover:opacity-100 transition-opacity" data-v-75e79c96><svg class="w-5 h-5 text-[#027368]" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-75e79c96><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-75e79c96></path></svg></div></div></button>')}),r("\x3c!--]--\x3e</div>")):r("\x3c!----\x3e"),e.unref(C)&&e.unref(_)&&0===e.unref(J).length&&!e.unref(I)?(r('<div class="border border-neutral-200 rounded-xl bg-white/90 backdrop-blur-sm p-6 text-center text-sm text-neutral-600 shadow-sm" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(i),{class:"w-12 h-12 mx-auto mb-2 text-neutral-400"},null,s)),r(`<p data-v-75e79c96>No se encontraron pacientes con &quot;<strong data-v-75e79c96>${t.ssrInterpolate(e.unref(_))}</strong>&quot;</p></div>`)):r("\x3c!----\x3e"),r("</div>")),e.unref(T).paciente_id&&e.unref($)&&!g.pacientePreseleccionado?(r('<div class="space-y-3" data-v-75e79c96><div class="p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl shadow-sm" data-v-75e79c96><div class="flex items-start justify-between gap-3" data-v-75e79c96><div class="flex items-center gap-3 flex-1" data-v-75e79c96><div class="w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(n),{class:"w-7 h-7 text-white"},null,s)),r(`</div><div class="flex-1" data-v-75e79c96><div class="text-xs font-semibold text-emerald-700 uppercase tracking-wide mb-1" data-v-75e79c96>Paciente Seleccionado</div><div class="font-bold text-emerald-900 text-lg" data-v-75e79c96>${t.ssrInterpolate(e.unref($).nombre)}</div><div class="text-sm text-emerald-700 flex items-center gap-1 mt-0.5" data-v-75e79c96><span data-v-75e79c96>${t.ssrInterpolate(e.unref($).email)}</span></div>`),e.unref($).frecuencia?(r('<div class="mt-2 flex items-center gap-2 text-sm" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(d),{class:"w-4 h-4 text-emerald-600"},null,s)),r(`<span class="font-medium text-emerald-800" data-v-75e79c96>Frecuencia:</span><span class="px-2 py-0.5 bg-emerald-100 text-emerald-800 rounded-lg font-medium capitalize" data-v-75e79c96>${t.ssrInterpolate(e.unref($).frecuencia)}</span></div>`)):r("\x3c!----\x3e"),r('</div></div><button type="button" class="px-4 py-2 bg-white border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 hover:border-emerald-400 rounded-lg text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow flex-shrink-0" data-v-75e79c96><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-75e79c96><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" data-v-75e79c96></path></svg><span data-v-75e79c96>Cambiar</span></button></div></div>'),e.unref(z).tiene_bono?(r('<div class="p-5 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 border-2 border-blue-300 rounded-xl shadow-md" data-v-75e79c96><div class="flex items-center justify-between mb-4" data-v-75e79c96><div class="flex items-center gap-3" data-v-75e79c96><div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(l),{class:"w-6 h-6 text-white"},null,s)),r(`</div><div data-v-75e79c96><div class="text-sm font-bold text-blue-900 uppercase tracking-wide" data-v-75e79c96>Bono Activo</div><div class="text-xs text-blue-600" data-v-75e79c96>El paciente tiene sesiones disponibles</div></div></div><div class="text-right" data-v-75e79c96><div class="text-xs text-blue-600 mb-1" data-v-75e79c96>Sesiones Disponibles</div><div class="${t.ssrRenderClass(["text-3xl font-bold",e.unref(z).sesiones_restantes<=1?"text-red-600":e.unref(z).sesiones_restantes<=2?"text-amber-600":"text-blue-700"])}" data-v-75e79c96>${t.ssrInterpolate(e.unref(z).sesiones_restantes)}</div></div></div><div class="grid grid-cols-3 gap-3 mb-4" data-v-75e79c96><div class="bg-white p-3 rounded-lg border border-blue-200" data-v-75e79c96><div class="text-xs text-blue-600 mb-1 font-medium" data-v-75e79c96>Tipo de Bono</div><div class="font-bold text-blue-900 capitalize text-sm" data-v-75e79c96>${t.ssrInterpolate(e.unref(z).tipo_bono||"N/A")}</div></div><div class="bg-white p-3 rounded-lg border border-blue-200" data-v-75e79c96><div class="text-xs text-blue-600 mb-1 font-medium" data-v-75e79c96>Total Sesiones</div><div class="font-bold text-blue-900 text-sm" data-v-75e79c96>${t.ssrInterpolate(e.unref(z).sesiones_totales||"?")}</div></div><div class="bg-white p-3 rounded-lg border border-blue-200" data-v-75e79c96><div class="text-xs text-blue-600 mb-1 font-medium" data-v-75e79c96>Utilizadas</div><div class="font-bold text-blue-900 text-sm" data-v-75e79c96>${t.ssrInterpolate((e.unref(z).sesiones_totales||0)-(e.unref(z).sesiones_restantes||0))}</div></div></div><div class="mb-4" data-v-75e79c96><div class="flex justify-between text-xs text-blue-700 mb-1" data-v-75e79c96><span data-v-75e79c96>Progreso del bono</span><span class="font-semibold" data-v-75e79c96>${t.ssrInterpolate(Math.round((e.unref(z).sesiones_totales-e.unref(z).sesiones_restantes)/e.unref(z).sesiones_totales*100))}%</span></div><div class="w-full bg-blue-200 rounded-full h-3 overflow-hidden" data-v-75e79c96><div class="${t.ssrRenderClass([[e.unref(z).sesiones_restantes<=1?"bg-red-500":e.unref(z).sesiones_restantes<=2?"bg-amber-500":"bg-blue-500"],"h-full rounded-full transition-all duration-500"])}" style="${t.ssrRenderStyle({width:(e.unref(z).sesiones_totales-e.unref(z).sesiones_restantes)/e.unref(z).sesiones_totales*100+"%"})}" data-v-75e79c96></div></div></div>`),e.unref(z).sesiones_restantes<=2?(r('<div class="mb-4 flex items-start gap-3 p-3 bg-amber-50 border-l-4 border-amber-500 rounded-lg" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(u),{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"},null,s)),r(`<div class="text-sm" data-v-75e79c96><div class="font-semibold text-amber-900 mb-1" data-v-75e79c96>${t.ssrInterpolate(1===e.unref(z).sesiones_restantes?"¬°√öltima sesi√≥n del bono!":"¬°Pocas sesiones restantes!")}</div><div class="text-amber-800" data-v-75e79c96>${t.ssrInterpolate(1===e.unref(z).sesiones_restantes?"Esta es la √∫ltima sesi√≥n disponible. Considere informar al paciente para renovar su bono.":`Solo quedan ${e.unref(z).sesiones_restantes} sesiones. Considere informar al paciente para renovar su bono pronto.`)}</div></div></div>`)):r("\x3c!----\x3e"),r(`<div class="flex items-start gap-3 p-3 bg-white border-2 border-blue-300 rounded-lg" data-v-75e79c96><input id="descontar-bono"${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(T).descontar_de_bono)?t.ssrLooseContain(e.unref(T).descontar_de_bono,null):e.unref(T).descontar_de_bono)?" checked":""} type="checkbox" class="mt-1 w-5 h-5 text-blue-600 border-blue-300 rounded focus:ring-blue-500 focus:ring-2" data-v-75e79c96><label for="descontar-bono" class="flex-1 cursor-pointer" data-v-75e79c96><div class="text-sm text-blue-900 font-semibold mb-1" data-v-75e79c96> Descontar sesi√≥n de este bono </div><div class="text-xs text-blue-700" data-v-75e79c96> Al completar esta cita, se descontar√° autom√°ticamente 1 sesi√≥n del bono activo. Quedar√°n <strong data-v-75e79c96>${t.ssrInterpolate(e.unref(z).sesiones_restantes-1)}</strong> sesiones disponibles. </div></label></div></div>`)):(r('<div class="p-4 bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-400 rounded-lg shadow-sm" data-v-75e79c96><div class="flex items-start gap-3" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(render$1),{class:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"},null,s)),r('<div data-v-75e79c96><div class="font-semibold text-amber-900 mb-1" data-v-75e79c96>Sin bono activo</div><div class="text-sm text-amber-800" data-v-75e79c96> Este paciente no tiene bonos activos actualmente. Esta sesi√≥n se cobrar√° de forma individual. </div></div></div></div>')),r("</div>")):r("\x3c!----\x3e"),r("</div>")),e.unref(B)?(r('<div class="space-y-4 pt-4 border-t-2 border-[#D8AFA0]/30" data-v-75e79c96><div class="flex items-center justify-between" data-v-75e79c96><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold flex items-center gap-2" data-v-75e79c96>'),e.unref(M)?(r('<span class="w-7 h-7 rounded-full bg-emerald-500 text-white flex items-center justify-center" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(n),{class:"w-5 h-5"},null,s)),r("</span>")):r(`<span class="w-7 h-7 rounded-full bg-[#D8AFA0] text-white flex items-center justify-center text-sm font-bold" data-v-75e79c96>${t.ssrInterpolate((g.pacientePreseleccionado,"2"))}</span>`),r(" Asignar Terapeuta </h3></div>"),e.unref(M)?r("\x3c!----\x3e"):(r('<div class="p-3 bg-purple-50 border-l-4 border-purple-400 rounded" data-v-75e79c96><p class="flex items-center gap-2 text-sm text-purple-800" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(v),{class:"w-5 h-5 flex-shrink-0"},null,s)),r("<span data-v-75e79c96>Selecciona el terapeuta que atender√° esta cita</span></p></div>")),e.unref(M)?r("\x3c!----\x3e"):(r('<div class="grid grid-cols-1 md:grid-cols-2 gap-3" data-v-75e79c96>\x3c!--[--\x3e'),t.ssrRenderList(e.unref(P),a=>{r('<button type="button" class="p-4 text-left hover:bg-[#D8AFA0]/10 transition-all border-2 border-[#D8AFA0]/30 hover:border-[#D8AFA0] rounded-lg cursor-pointer group bg-white" data-v-75e79c96><div class="flex items-center gap-3" data-v-75e79c96><div class="w-12 h-12 rounded-full bg-[#D8AFA0]/20 group-hover:bg-[#D8AFA0] flex items-center justify-center transition-colors" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(c),{class:"w-6 h-6 text-[#5D4A44] group-hover:text-white transition-colors"},null,s)),r(`</div><div class="flex-1" data-v-75e79c96><div class="font-medium text-[#5D4A44] group-hover:text-[#D8AFA0] transition-colors" data-v-75e79c96>${t.ssrInterpolate(a.nombre_completo)}</div>`),a.especialidad?r(`<div class="text-sm text-[#5D4A44]/60" data-v-75e79c96>${t.ssrInterpolate(a.especialidad)}</div>`):r("\x3c!----\x3e"),r(`<div class="text-xs text-[#5D4A44]/50" data-v-75e79c96>${t.ssrInterpolate(a.email)}</div></div><div class="opacity-0 group-hover:opacity-100 transition-opacity" data-v-75e79c96><svg class="w-5 h-5 text-[#D8AFA0]" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-75e79c96><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-75e79c96></path></svg></div></div></button>`)}),r("\x3c!--]--\x3e</div>")),e.unref(M)?(r('<div class="p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl shadow-sm" data-v-75e79c96><div class="flex items-start justify-between gap-3" data-v-75e79c96><div class="flex items-center gap-3 flex-1" data-v-75e79c96><div class="w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(n),{class:"w-7 h-7 text-white"},null,s)),r(`</div><div class="flex-1" data-v-75e79c96><div class="text-xs font-semibold text-emerald-700 uppercase tracking-wide mb-1" data-v-75e79c96>Terapeuta Asignado</div><div class="font-bold text-emerald-900 text-lg" data-v-75e79c96>${t.ssrInterpolate(e.unref(M).nombre_completo)}</div>`),e.unref(M).especialidad?r(`<div class="text-sm text-emerald-700 mt-0.5" data-v-75e79c96>${t.ssrInterpolate(e.unref(M).especialidad)}</div>`):r("\x3c!----\x3e"),r('</div></div><button type="button" class="px-4 py-2 bg-white border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 hover:border-emerald-400 rounded-lg text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow flex-shrink-0" data-v-75e79c96><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-75e79c96><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" data-v-75e79c96></path></svg><span data-v-75e79c96>Cambiar</span></button></div></div>')):r("\x3c!----\x3e"),r("</div>")):r("\x3c!----\x3e"),r('<div class="space-y-6 pt-4 border-t-2 border-[#D8AFA0]/30" data-v-75e79c96><h3 class="text-lg font-[&#39;Lora&#39;] text-[#5D4A44] font-semibold flex items-center gap-2" data-v-75e79c96>'),e.unref(Y)?r('<span class="w-7 h-7 rounded-full bg-green-500 text-white flex items-center justify-center" data-v-75e79c96> ‚úì </span>'):r(`<span class="w-7 h-7 rounded-full bg-[#D8AFA0] text-white flex items-center justify-center text-sm font-bold" data-v-75e79c96>${t.ssrInterpolate(e.unref(B)?"3":g.pacientePreseleccionado?"1":"2")}</span>`),r(' Detalles de la Cita </h3><div class="p-5 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl shadow-sm space-y-4" data-v-75e79c96><h4 class="text-sm font-bold text-blue-900 flex items-center gap-2" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(d),{class:"w-5 h-5 text-blue-600"},null,s)),r('<span data-v-75e79c96>Detalles de Programaci√≥n</span></h4><div class="grid grid-cols-1 md:grid-cols-2 gap-4" data-v-75e79c96><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-2 flex items-center gap-2" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(d),{class:"w-4 h-4"},null,s)),r(`<span data-v-75e79c96>Fecha</span><span class="text-red-500" data-v-75e79c96>*</span></label><div class="space-y-2" data-v-75e79c96><input${t.ssrRenderAttr("value",e.unref(T).fecha)} type="date" required${t.ssrRenderAttr("min",e.unref(Q))} class="${t.ssrRenderClass(["w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white text-base cursor-pointer",e.unref(U).includes("fecha")?"border-red-500 border-2":"border-[#D8AFA0]/30"])}" style="${t.ssrRenderStyle({"min-height":"44px"})}" placeholder="dd/mm/aaaa" data-v-75e79c96><div class="flex gap-2 flex-wrap" data-v-75e79c96>\x3c!--[--\x3e`),t.ssrRenderList(e.unref(X),(a,s)=>{r(`<button type="button" class="${t.ssrRenderClass(["text-xs px-3 py-1.5 rounded-lg border transition-all",e.unref(T).fecha===a.fecha?"bg-[#D8AFA0] text-white border-[#D8AFA0] font-semibold":"bg-white text-[#5D4A44] border-[#D8AFA0]/30 hover:border-[#D8AFA0] hover:bg-[#D8AFA0]/10"])}" data-v-75e79c96>${t.ssrInterpolate(a.label)}</button>`)}),r("\x3c!--]--\x3e</div>"),e.unref(q)&&e.unref(q)!==e.unref(T).fecha?r(`<div class="flex items-center gap-2" data-v-75e79c96><button type="button" class="text-xs px-2 py-1 bg-green-50 text-green-700 border border-green-200 rounded hover:bg-green-100 transition-colors" data-v-75e79c96> üí° Usar fecha sugerida: ${t.ssrInterpolate(formatearFechaLegible(e.unref(q)))}</button></div>`):r("\x3c!----\x3e"),r('</div></div><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-2 flex items-center gap-2" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(p),{class:"w-4 h-4"},null,s)),r('<span data-v-75e79c96>Hora de Inicio</span><span class="text-red-500" data-v-75e79c96>*</span></label><div class="space-y-3" data-v-75e79c96><div class="grid grid-cols-4 gap-3 max-h-72 overflow-y-auto p-4 bg-white rounded-lg border border-[#D8AFA0]/20 shadow-inner" data-v-75e79c96>\x3c!--[--\x3e'),t.ssrRenderList(O,a=>{r(`<button type="button" class="${t.ssrRenderClass(["px-4 py-3 text-sm font-semibold rounded-lg transition-all border-2 flex items-center justify-center min-w-[70px]",e.unref(T).hora_inicio===a?"bg-[#D8AFA0] text-white border-[#D8AFA0] shadow-lg transform scale-105 ring-2 ring-[#D8AFA0]/30":"bg-white text-[#5D4A44] border-gray-300 hover:border-[#D8AFA0] hover:bg-[#D8AFA0]/10 hover:shadow-md hover:scale-102"])}" data-v-75e79c96>${t.ssrInterpolate(a)}</button>`)}),r('\x3c!--]--\x3e</div><details class="text-xs" data-v-75e79c96><summary class="cursor-pointer text-[#5D4A44]/60 hover:text-[#5D4A44] select-none flex items-center gap-2" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(m),{class:"w-4 h-4"},null,s)),r(`<span data-v-75e79c96>Ingresar hora manualmente</span></summary><div class="mt-2" data-v-75e79c96><input${t.ssrRenderAttr("value",e.unref(T).hora_inicio)} type="time" step="1800" class="${t.ssrRenderClass(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white",e.unref(U).includes("hora_inicio")?"border-red-500 border-2":"border-[#D8AFA0]/30"])}" data-v-75e79c96></div></details><datalist id="horas-sugeridas" data-v-75e79c96>\x3c!--[--\x3e`),t.ssrRenderList(O,e=>{r(`<option${t.ssrRenderAttr("value",e)} data-v-75e79c96>${t.ssrInterpolate(e)}</option>`)}),r("\x3c!--]--\x3e</datalist>"),e.unref(R)&&e.unref(R)!==e.unref(T).hora_inicio&&!1===e.unref(j)?(r('<div class="flex items-center gap-2" data-v-75e79c96><button type="button" class="flex items-center gap-1.5 text-xs px-3 py-1.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg hover:bg-emerald-100 transition-colors font-medium" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(render$1),{class:"w-4 h-4"},null,s)),r(`<span data-v-75e79c96>Usar hora sugerida: ${t.ssrInterpolate(e.unref(R))}</span></button></div>`)):r("\x3c!----\x3e"),e.unref(j)?r('<div class="text-xs text-[#5D4A44]/50 flex items-center gap-2" data-v-75e79c96><svg class="animate-spin h-3 w-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-75e79c96><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-75e79c96></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-75e79c96></path></svg> Buscando horario disponible... </div>'):r("\x3c!----\x3e"),r(`</div></div><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-75e79c96> Duraci√≥n <span class="text-red-500" data-v-75e79c96>*</span></label><select required class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white" data-v-75e79c96><option value="30" data-v-75e79c96${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(T).duracion)?t.ssrLooseContain(e.unref(T).duracion,"30"):t.ssrLooseEqual(e.unref(T).duracion,"30"))?" selected":""}>30 minutos</option><option value="60" selected data-v-75e79c96>60 minutos (1 hora)</option><option value="90" data-v-75e79c96${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(T).duracion)?t.ssrLooseContain(e.unref(T).duracion,"90"):t.ssrLooseEqual(e.unref(T).duracion,"90"))?" selected":""}>90 minutos (1.5 horas)</option><option value="120" data-v-75e79c96${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(T).duracion)?t.ssrLooseContain(e.unref(T).duracion,"120"):t.ssrLooseEqual(e.unref(T).duracion,"120"))?" selected":""}>120 minutos (2 horas)</option></select></div><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-1" data-v-75e79c96> Hora de Fin </label><input${t.ssrRenderAttr("value",e.unref(T).hora_fin)} type="text" readonly class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg bg-gray-100 text-[#5D4A44]/60" placeholder="Se calcular√° autom√°ticamente" data-v-75e79c96></div></div></div><div class="p-5 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl shadow-sm space-y-4" data-v-75e79c96><h4 class="text-sm font-bold text-purple-900 flex items-center gap-2" data-v-75e79c96>`),r(t.ssrRenderComponent(e.unref(render$2),{class:"w-5 h-5 text-purple-600"},null,s)),r('<span data-v-75e79c96>Tipo de Sesi√≥n y Estado</span></h4><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-2 flex items-center gap-2" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(render$2),{class:"w-5 h-5"},null,s)),r(`<span data-v-75e79c96>Tipo de Sesi√≥n</span><span class="text-red-500" data-v-75e79c96>*</span></label><div class="${t.ssrRenderClass(["grid grid-cols-3 gap-3",e.unref(U).includes("tipo")?"p-3 border-2 border-red-500 bg-red-50 rounded-lg":""])}" data-v-75e79c96>\x3c!--[--\x3e`),t.ssrRenderList(G,a=>{r(`<button type="button" class="${t.ssrRenderClass(["p-4 border-2 rounded-lg transition-all flex flex-col items-center gap-2 group",e.unref(T).tipo===a.valor?"border-[#D8AFA0] bg-[#D8AFA0]/20 shadow-md":"border-[#D8AFA0]/30 hover:border-[#D8AFA0] hover:bg-[#D8AFA0]/5 bg-white"])}" data-v-75e79c96>`),t.ssrRenderVNode(r,e.createVNode(e.resolveDynamicComponent(a.componente),{class:["w-8 h-8 transition-colors",e.unref(T).tipo===a.valor?"text-[#D8AFA0]":"text-[#5D4A44]/60 group-hover:text-[#D8AFA0]"]},null),s),r(`<div class="font-medium text-[#5D4A44] text-sm" data-v-75e79c96>${t.ssrInterpolate(a.nombre)}</div><div class="text-xs text-[#5D4A44]/50" data-v-75e79c96>${t.ssrInterpolate(a.descripcion)}</div></button>`)}),r('\x3c!--]--\x3e</div></div><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-2 flex items-center gap-2" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(n),{class:"w-5 h-5"},null,s)),r('<span data-v-75e79c96>Estado</span><span class="text-red-500" data-v-75e79c96>*</span></label><div class="grid grid-cols-2 md:grid-cols-4 gap-3" data-v-75e79c96>\x3c!--[--\x3e'),t.ssrRenderList(Z,a=>{r(`<button type="button" class="${t.ssrRenderClass(["p-3 border-2 rounded-lg transition-all flex flex-col items-center gap-2",e.unref(T).estado===a.valor?a.claseActivo+" shadow-md":a.claseInactivo])}" data-v-75e79c96>`),t.ssrRenderVNode(r,e.createVNode(e.resolveDynamicComponent(a.componente),{class:"w-7 h-7"},null),s),r(`<div class="font-medium text-sm" data-v-75e79c96>${t.ssrInterpolate(a.nombre)}</div></button>`)}),r('\x3c!--]--\x3e</div></div></div><div class="p-5 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl shadow-sm" data-v-75e79c96><h4 class="text-sm font-bold text-amber-900 flex items-center gap-2 mb-3" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(m),{class:"w-5 h-5 text-amber-600"},null,s)),r('<span data-v-75e79c96>Notas Adicionales</span></h4><div data-v-75e79c96><label class="block text-sm font-medium text-[#5D4A44] mb-2 flex items-center gap-2" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(m),{class:"w-4 h-4"},null,s)),r(`<span data-v-75e79c96>Notas (opcional)</span></label><textarea rows="3" class="w-full px-4 py-2 border border-[#D8AFA0]/30 rounded-lg focus:ring-2 focus:ring-[#D8AFA0] focus:border-transparent bg-white resize-none" placeholder="Notas sobre la cita, recordatorios, etc." data-v-75e79c96>${t.ssrInterpolate(e.unref(T).notas)}</textarea></div></div></div>`),e.unref(k)?(r('<div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg shadow-sm" data-v-75e79c96><div class="flex items-start gap-3" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(u),{class:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5"},null,s)),r('<div data-v-75e79c96><div class="font-semibold text-yellow-900 mb-1 flex items-center gap-2" data-v-75e79c96><span data-v-75e79c96>Conflicto de Horario</span></div><div class="text-sm text-yellow-800" data-v-75e79c96> Ya existe una cita en este horario. Verifica la disponibilidad. </div></div></div></div>')):r("\x3c!----\x3e"),e.unref(U).length>0&&!e.unref(Y)?(r('<div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-lg shadow-sm" data-v-75e79c96><div class="flex items-start gap-3" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(f),{class:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"},null,s)),r('<div data-v-75e79c96><div class="font-semibold text-red-900 mb-2" data-v-75e79c96> Completa los campos obligatorios </div><ul class="text-sm text-red-800 space-y-1.5" data-v-75e79c96>'),e.unref(T).paciente_id?r("\x3c!----\x3e"):r('<li class="flex items-center gap-2" data-v-75e79c96><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-75e79c96></span><span data-v-75e79c96>Selecciona un paciente</span></li>'),e.unref(T).fecha?r("\x3c!----\x3e"):r('<li class="flex items-center gap-2" data-v-75e79c96><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-75e79c96></span><span data-v-75e79c96>Selecciona una fecha</span></li>'),e.unref(T).hora_inicio?r("\x3c!----\x3e"):r('<li class="flex items-center gap-2" data-v-75e79c96><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-75e79c96></span><span data-v-75e79c96>Selecciona la hora de inicio</span></li>'),e.unref(T).tipo?r("\x3c!----\x3e"):r('<li class="flex items-center gap-2" data-v-75e79c96><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-75e79c96></span><span data-v-75e79c96>Selecciona el tipo de sesi√≥n</span></li>'),e.unref(T).estado?r("\x3c!----\x3e"):r('<li class="flex items-center gap-2" data-v-75e79c96><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-75e79c96></span><span data-v-75e79c96>Selecciona el estado de la cita</span></li>'),r("</ul></div></div></div>")):r("\x3c!----\x3e"),e.unref(Y)&&!e.unref(k)?(r('<div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg shadow-sm" data-v-75e79c96><div class="flex items-start gap-3" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(render$1),{class:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5"},null,s)),r(`<div class="flex-1" data-v-75e79c96><div class="font-semibold text-blue-900 mb-3" data-v-75e79c96> Resumen de la Cita </div><div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm" data-v-75e79c96><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Paciente:</span><div class="text-blue-900 font-semibold" data-v-75e79c96>${t.ssrInterpolate(e.unref(T).paciente_nombre)}</div></div><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Fecha:</span><div class="text-blue-900" data-v-75e79c96>${t.ssrInterpolate(formatearFechaLegible(e.unref(T).fecha))}</div></div><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Horario:</span><div class="text-blue-900 font-semibold" data-v-75e79c96>${t.ssrInterpolate(e.unref(T).hora_inicio)} - ${t.ssrInterpolate(e.unref(T).hora_fin)}</div></div><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Duraci√≥n:</span><div class="text-blue-900" data-v-75e79c96>${t.ssrInterpolate(e.unref(T).duracion)} minutos</div></div><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Tipo:</span><div class="text-blue-900 capitalize" data-v-75e79c96>${t.ssrInterpolate(e.unref(T).tipo)}</div></div><div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Estado:</span><div class="text-blue-900 capitalize" data-v-75e79c96>${t.ssrInterpolate(e.unref(T).estado)}</div></div>`),e.unref(T).descontar_de_bono?(r('<div class="md:col-span-2 flex items-center gap-2" data-v-75e79c96>'),r(t.ssrRenderComponent(e.unref(l),{class:"w-5 h-5 text-blue-600"},null,s)),r('<div data-v-75e79c96><span class="text-blue-600 font-medium" data-v-75e79c96>Bono:</span><span class="text-blue-900 ml-2" data-v-75e79c96>Se descontar√° 1 sesi√≥n del bono activo</span></div></div>')):r("\x3c!----\x3e"),r("</div></div></div></div>")):r("\x3c!----\x3e"),r(`<div class="sticky bottom-0 bg-[#F9F7F3] pt-4 border-t border-[#D8AFA0]/30 flex gap-3 mt-6" data-v-75e79c96><button type="button" class="flex-1 px-6 py-3 border-2 border-[#D8AFA0] text-[#5D4A44] rounded-lg hover:bg-[#D8AFA0]/10 transition-colors font-medium" aria-label="Cancelar creaci√≥n de cita" data-v-75e79c96> Cancelar </button><div class="relative flex-1" data-v-75e79c96><button type="submit"${t.ssrIncludeBooleanAttr(!e.unref(Y)||e.unref(D)||e.unref(k))?" disabled":""} class="${t.ssrRenderClass(["w-full px-6 py-3 rounded-lg transition-all font-medium text-white",!e.unref(Y)||e.unref(D)||e.unref(k)?"bg-gray-400 cursor-not-allowed opacity-60":"bg-[#D8AFA0] hover:bg-[#D8AFA0]/90 hover:shadow-lg cursor-pointer"])}"${t.ssrRenderAttr("aria-label",e.unref(Y)?"Guardar cita":"Completa todos los campos requeridos para guardar")} data-v-75e79c96>${t.ssrInterpolate(e.unref(D)?"Guardando...":"‚úì Guardar Cita")}</button>`),e.unref(Y)||e.unref(D)?r("\x3c!----\x3e"):r('<div class="absolute -top-12 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs px-3 py-2 rounded shadow-lg whitespace-nowrap opacity-0 hover:opacity-100 transition-opacity pointer-events-none" data-v-75e79c96> Completa todos los campos obligatorios (*) </div>'),r("</div></div></form></div>"),e.unref(E)?(r(`<div class="${t.ssrRenderClass(["fixed bottom-6 right-6 max-w-md rounded-lg shadow-2xl p-4 z-[60]","exito"===e.unref(H)?"bg-gradient-to-r from-green-500 to-emerald-500":"error"===e.unref(H)?"bg-gradient-to-r from-red-500 to-rose-500":"bg-gradient-to-r from-blue-500 to-indigo-500"])}" data-v-75e79c96><div class="flex items-start gap-3 text-white" data-v-75e79c96><div class="text-3xl" data-v-75e79c96>${t.ssrInterpolate("exito"===e.unref(H)?"‚úÖ":"error"===e.unref(H)?"‚ùå":"‚ÑπÔ∏è")}</div><div class="flex-1" data-v-75e79c96><div class="font-bold text-lg mb-1" data-v-75e79c96>${t.ssrInterpolate(e.unref(L))}</div><div class="text-sm opacity-90 mb-3" data-v-75e79c96>${t.ssrInterpolate(e.unref(V))}</div>`),e.unref(N).length>0?(r('<div class="flex gap-2" data-v-75e79c96>\x3c!--[--\x3e'),t.ssrRenderList(e.unref(N),(e,a)=>{r(`<button class="px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-all" data-v-75e79c96>${t.ssrInterpolate(e.texto)}</button>`)}),r("\x3c!--]--\x3e</div>")):r("\x3c!----\x3e"),r('</div><button class="text-white/80 hover:text-white transition-colors" data-v-75e79c96> ‚úï </button></div></div>')):r("\x3c!----\x3e"),r("</div>")):r("\x3c!----\x3e")}}}),g=b.setup;b.setup=(a,t)=>{const r=e.useSSRContext();return(r.modules||(r.modules=new Set)).add("components/ModalNuevaCita.vue"),g?g(a,t):void 0};const h=Object.assign(x(b,[["__scopeId","data-v-75e79c96"]]),{__name:"ModalNuevaCita"});export{h as _};
//# sourceMappingURL=ModalNuevaCita-DkPaEUd7.mjs.map
