import{defineComponent as e,mergeProps as a,unref as s,computed as t,useSSRContext as o}from"vue";import{ssrRenderAttrs as n,ssrRenderComponent as d,ssrInterpolate as l,ssrRenderList as r,ssrRenderClass as i,ssrRenderStyle as c}from"vue/server-renderer";import{_ as v}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{u,a as p,_ as m}from"./AgendaTerapeuta-DO67d38s.mjs";import"./useSupabaseClient-DykwVqLQ.mjs";import"./server.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../routes/renderer.mjs";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";import"vue-router";import"@supabase/ssr";import"@vercel/analytics/nuxt";import"@heroicons/vue/24/outline";const g=e({__name:"EstadisticasBonos",__ssrInlineRender:!0,props:{citas:{}},setup(e){const a=e,s=t(()=>{const e=a.citas.filter(e=>e.bono),s=new Map;e.forEach(e=>{e.bono&&s.set(e.bono.id,e.bono)});const t=Array.from(s.values()),o=t.length,n=t.filter(e=>"activo"===e.estado).length,d=t.filter(e=>e.sesiones_restantes<=2&&e.sesiones_restantes>0).length,l=t.filter(e=>0===e.sesiones_restantes||"completado"===e.estado).length,r=t.reduce((e,a)=>e+a.sesiones_restantes,0),i=t.reduce((e,a)=>e+a.sesiones_totales,0);return{totalBonos:o,bonosActivos:n,bonosConPocasSesiones:d,bonosAgotados:l,totalSesionesDisponibles:r,totalSesionesProgramadas:i,porcentajeUsado:i>0?Math.round((i-r)/i*100):0}}),o=t(()=>s.value.bonosConPocasSesiones>0||s.value.bonosAgotados>0);return(e,a,t,n)=>{a(`\x3c!--[--\x3e<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4" data-v-44ce82a9><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5" data-v-44ce82a9><div class="flex items-center justify-between" data-v-44ce82a9><div data-v-44ce82a9><p class="text-sm font-medium text-gray-600" data-v-44ce82a9>Bonos Activos</p><p class="text-3xl font-bold text-blue-600 mt-1" data-v-44ce82a9>${l(s.value.bonosActivos)}</p><p class="text-xs text-gray-500 mt-1" data-v-44ce82a9>de ${l(s.value.totalBonos)} totales</p></div><div class="h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center" data-v-44ce82a9><svg class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-44ce82a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" data-v-44ce82a9></path></svg></div></div></div><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5" data-v-44ce82a9><div class="flex items-center justify-between" data-v-44ce82a9><div data-v-44ce82a9><p class="text-sm font-medium text-gray-600" data-v-44ce82a9>Sesiones Disponibles</p><p class="text-3xl font-bold text-green-600 mt-1" data-v-44ce82a9>${l(s.value.totalSesionesDisponibles)}</p><p class="text-xs text-gray-500 mt-1" data-v-44ce82a9> de ${l(s.value.totalSesionesProgramadas)} programadas </p></div><div class="h-12 w-12 bg-green-100 rounded-full flex items-center justify-center" data-v-44ce82a9><svg class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-44ce82a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" data-v-44ce82a9></path></svg></div></div></div><div class="${i(["rounded-lg shadow-sm border p-5",s.value.bonosConPocasSesiones>0?"bg-yellow-50 border-yellow-300":"bg-white border-gray-200"])}" data-v-44ce82a9><div class="flex items-center justify-between" data-v-44ce82a9><div data-v-44ce82a9><p class="text-sm font-medium text-gray-600" data-v-44ce82a9>Bonos por Renovar</p><p class="${i(["text-3xl font-bold mt-1",s.value.bonosConPocasSesiones>0?"text-yellow-600":"text-gray-400"])}" data-v-44ce82a9>${l(s.value.bonosConPocasSesiones)}</p><p class="text-xs text-gray-500 mt-1" data-v-44ce82a9>‚â§2 sesiones restantes</p></div><div class="${i(["h-12 w-12 rounded-full flex items-center justify-center",s.value.bonosConPocasSesiones>0?"bg-yellow-200":"bg-gray-100"])}" data-v-44ce82a9><svg class="${i(["h-6 w-6",s.value.bonosConPocasSesiones>0?"text-yellow-600":"text-gray-400"])}" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-44ce82a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-44ce82a9></path></svg></div></div></div><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5" data-v-44ce82a9><div class="flex items-center justify-between" data-v-44ce82a9><div data-v-44ce82a9><p class="text-sm font-medium text-gray-600" data-v-44ce82a9>Bonos Completados</p><p class="text-3xl font-bold text-gray-600 mt-1" data-v-44ce82a9>${l(s.value.bonosAgotados)}</p><p class="text-xs text-gray-500 mt-1" data-v-44ce82a9>0 sesiones restantes</p></div><div class="h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center" data-v-44ce82a9><svg class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-44ce82a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-44ce82a9></path></svg></div></div></div>`),s.value.totalSesionesProgramadas>0?a(`<div class="col-span-full bg-white rounded-lg shadow-sm border border-gray-200 p-5" data-v-44ce82a9><div class="flex items-center justify-between mb-2" data-v-44ce82a9><p class="text-sm font-medium text-gray-700" data-v-44ce82a9>Uso General de Bonos</p><p class="text-sm font-bold text-gray-900" data-v-44ce82a9>${l(s.value.porcentajeUsado)}% usado</p></div><div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden" data-v-44ce82a9><div class="${i(["h-full rounded-full transition-all duration-500",s.value.porcentajeUsado>=80?"bg-red-500":s.value.porcentajeUsado>=60?"bg-yellow-500":"bg-green-500"])}" style="${c({width:`${s.value.porcentajeUsado}%`})}" data-v-44ce82a9></div></div><div class="flex justify-between text-xs text-gray-500 mt-1" data-v-44ce82a9><span data-v-44ce82a9>${l(s.value.totalSesionesProgramadas-s.value.totalSesionesDisponibles)} usadas</span><span data-v-44ce82a9>${l(s.value.totalSesionesDisponibles)} disponibles</span></div></div>`):a("\x3c!----\x3e"),a("</div>"),o.value?(a('<div class="mt-4 bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-400 p-4 rounded-r-lg" data-v-44ce82a9><div class="flex items-start" data-v-44ce82a9><div class="flex-shrink-0" data-v-44ce82a9><svg class="h-5 w-5 text-yellow-400 mt-0.5" fill="currentColor" viewBox="0 0 20 20" data-v-44ce82a9><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-44ce82a9></path></svg></div><div class="ml-3 flex-1" data-v-44ce82a9><h3 class="text-sm font-medium text-yellow-800" data-v-44ce82a9> Acci√≥n Requerida </h3><div class="mt-2 text-sm text-yellow-700" data-v-44ce82a9><p data-v-44ce82a9>'),s.value.bonosConPocasSesiones>0?a(`<strong data-v-44ce82a9>${l(s.value.bonosConPocasSesiones)} bono${l(s.value.bonosConPocasSesiones>1?"s":"")}</strong>`):a("\x3c!----\x3e"),s.value.bonosConPocasSesiones>0?a(`<span data-v-44ce82a9>${l(s.value.bonosConPocasSesiones>1?" necesitan":" necesita")} renovaci√≥n pronto. </span>`):a("\x3c!----\x3e"),s.value.bonosAgotados>0?a(`<strong class="ml-2" data-v-44ce82a9>${l(s.value.bonosAgotados)} bono${l(s.value.bonosAgotados>1?"s":"")} completado${l(s.value.bonosAgotados>1?"s":"")}. </strong>`):a("\x3c!----\x3e"),a('</p><p class="mt-1 text-xs" data-v-44ce82a9> üí° Contacta a los pacientes para ofrecer renovaci√≥n de bonos </p></div></div></div></div>')):a("\x3c!----\x3e"),a("\x3c!--]--\x3e")}}}),x=g.setup;g.setup=(e,a)=>{const s=o();return(s.modules||(s.modules=new Set)).add("components/EstadisticasBonos.vue"),x?x(e,a):void 0};const b=Object.assign(v(g,[["__scopeId","data-v-44ce82a9"]]),{__name:"EstadisticasBonos"}),f=e({__name:"ejemplo-agenda",__ssrInlineRender:!0,setup(e){const{citas:t,citasDelDia:o}=u();return(e,i,c,v)=>{const u=b,g=p,x=m;i(`<div${n(a({class:"p-6 max-w-7xl mx-auto"},v))}><h1 class="text-3xl font-bold mb-6">Dashboard - Ejemplo</h1>`),i(d(u,{citas:s(t),class:"mb-8"},null,c)),i(`<section class="mb-8"><h2 class="text-xl font-bold mb-4">Citas de Hoy (${l(s(o).length)})</h2><div class="space-y-4">\x3c!--[--\x3e`),r(s(o),e=>{i(d(g,{key:e.id,cita:e,onCompletar:e=>console.log("Completar:",e),onVerHistorial:e=>console.log("Historial:",e)},null,c))}),i("\x3c!--]--\x3e</div></section>"),i(d(x,null,null,c)),i("</div>")}}}),h=f.setup;f.setup=(e,a)=>{const s=o();return(s.modules||(s.modules=new Set)).add("pages/ejemplo-agenda.vue"),h?h(e,a):void 0};export{f as default};
//# sourceMappingURL=ejemplo-agenda-lg0ptvuU.mjs.map
