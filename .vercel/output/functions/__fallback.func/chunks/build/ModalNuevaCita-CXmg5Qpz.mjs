import{v as a,a as e,s as t}from"./server.mjs";import{u as r}from"./useCitas-DyEZH6RI.mjs";import{u as s}from"./useSupabaseClient-DykwVqLQ.mjs";import{u as d}from"./useSupabase-DfFg84CY.mjs";import{r as o}from"./CheckCircleIcon-CT9fzVFs.mjs";import{r as n}from"./CalendarIcon-BrsGHJBC.mjs";import{r as l}from"./TicketIcon-zZdrc71S.mjs";import{r as i}from"./MagnifyingGlassIcon-GsbNDyPZ.mjs";import{r as c,a as f}from"./PhoneIcon-DdGFuEYy.mjs";import{r as u}from"./UserIcon-CrHYaeI9.mjs";import{r as v}from"./ExclamationTriangleIcon-DQdM2y0F.mjs";import{r as p}from"./UserGroupIcon-BhthmHUw.mjs";import{r as m}from"./ClockIcon-BxdFtPqx.mjs";import{r as b,a as x}from"./XCircleIcon-BCxujS_I.mjs";import{r as g}from"./CheckBadgeIcon-DjhxLc-3.mjs";import{_ as h}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";function render$1(e,t){return a.openBlock(),a.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})])}function render(e,t){return a.openBlock(),a.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"})])}const w=a.defineComponent({__name:"ModalNuevaCita",__ssrInlineRender:!0,props:{modelValue:{type:Boolean,default:!1},mostrar:{type:Boolean,default:!1},fechaPreseleccionada:{type:String,default:""},horaPreseleccionada:{type:String,default:""},titulo:{type:String,default:""},pacientePreseleccionado:{type:Object,default:null},citaId:{type:String,default:null}},emits:["cerrar","citaCreada","actualizado","update:modelValue"],setup(h,{emit:w}){const y=h,{getCitasPorDia:_,verificarBonoActivo:C,sugerirProximoHorario:$}=r(),I=s();e(),a.computed(()=>!!y.citaId),a.ref(!1);const F=a.ref(""),k=a.ref(!1),R=a.ref(null),D=a.ref(!1),P=a.ref(!1),j=a.ref(!1),A=a.ref([]),S=a.ref(null),B=a.ref(!1),M=a.ref(!1),E=a.ref([]),H=a.ref(!1),L=a.ref(null),V=a.ref(!1),N=a.ref(""),z=a.ref(""),T=a.ref("exito"),q=a.ref([]),U=a.ref({tiene_bono:!1,sesiones_restantes:0,sesiones_totales:0,tipo_bono:"",bono_id:void 0}),O=a.ref({paciente_id:"",paciente_nombre:"",terapeuta_id:"",terapeuta_nombre:"",fecha:y.fechaPreseleccionada||formatearFecha(new Date),fecha_manual:"",hora_inicio:y.horaPreseleccionada||"",hora_fin:"",duracion:"60",tipo:"presencial",estado:"pendiente",notas:"",descontar_de_bono:!1,bono_id:void 0}),G=a.ref(null);a.ref(!1);const Y=a.ref([]),Q=["11:00","11:30","12:00","12:30","13:00","13:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00"],X=[{valor:"presencial",nombre:"Presencial",componente:render$1,descripcion:"Sesi√≥n presencial en consultorio"},{valor:"online",nombre:"Online",componente:render,descripcion:"Videollamada por plataforma digital"},{valor:"telefonica",nombre:"Telef√≥nica",componente:f,descripcion:"Llamada telef√≥nica"}],Z=[{valor:"confirmada",nombre:"Confirmada",componente:g,claseActivo:"border-emerald-500 bg-emerald-50 text-emerald-700",claseInactivo:"border-gray-300 hover:border-emerald-400 bg-white"},{valor:"pendiente",nombre:"Pendiente",componente:m,claseActivo:"border-amber-500 bg-amber-50 text-amber-700",claseInactivo:"border-gray-300 hover:border-amber-400 bg-white"},{valor:"cancelada",nombre:"Cancelada",componente:x,claseActivo:"border-red-500 bg-red-50 text-red-700",claseInactivo:"border-gray-300 hover:border-red-400 bg-white"},{valor:"completada",nombre:"Completada",componente:o,claseActivo:"border-blue-500 bg-blue-50 text-blue-700",claseInactivo:"border-gray-300 hover:border-blue-400 bg-white"}],J=a.computed(()=>formatearFecha(new Date)),K=a.computed(()=>{const a=new Date,e=[];e.push({label:"Hoy",fecha:formatearFecha(a)});const t=new Date(a);t.setDate(t.getDate()+1),e.push({label:"Ma√±ana",fecha:formatearFecha(t)});const r=["Lun","Mar","Mi√©","Jue","Vie"];let s=new Date(a),d=0;for(;d<5;){s.setDate(s.getDate()+1);const a=s.getDay();a>=1&&a<=5&&(e.push({label:`${r[a-1]} ${s.getDate()}`,fecha:formatearFecha(s)}),d++)}return e}),W=a.computed(()=>{if(!F.value)return[];const a=F.value.toLowerCase().trim();return a.length<2?[]:A.value.filter(e=>e.nombre.toLowerCase().includes(a)||e.email.toLowerCase().includes(a))}),aa=a.computed(()=>{const a=O.value.paciente_id,e=!M.value||O.value.terapeuta_id;return a&&e&&O.value.fecha&&O.value.hora_inicio&&O.value.hora_fin&&O.value.tipo&&O.value.estado});function calcularHoraFin(){if(!O.value.hora_inicio||!O.value.duracion)return;const a=O.value.hora_inicio.split(":").map(Number),e=a[0]||0,t=a[1]||0,r=parseInt(O.value.duracion),s=new Date;s.setHours(e,t,0,0);const d=new Date(s.getTime()+6e4*r),o=String(d.getHours()).padStart(2,"0"),n=String(d.getMinutes()).padStart(2,"0");O.value.hora_fin=`${o}:${n}`}function horaAMinutos(a){if(!a||!a.includes(":"))return 0;const[e,t]=a.split(":").map(Number);return 60*(e||0)+(t||0)}function formatearFecha(a){return a.toISOString().split("T")[0]||""}function formatearFechaLegible(a){return new Date(a+"T00:00:00").toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}async function verificarRolUsuario(){try{console.log("üîç Verificando rol de usuario...");const{userProfile:a}=d();if(!a.value)return console.warn("‚ö†Ô∏è No hay perfil cargado"),void(M.value=!1);console.log("üë§ Usuario:",a.value.email),console.log("üé≠ Rol del perfil:",a.value.rol),M.value="coordinadora"===a.value.rol,console.log(`‚úÖ ¬øEs coordinadora? ${M.value}`),M.value&&(console.log("üåü Usuario es coordinadora - cargando terapeutas"),await async function(){H.value=!0;try{const{data:a,error:e}=await I.from("terapeutas").select("id, nombre_completo, email, especialidad").eq("activo",!0).order("nombre_completo",{ascending:!0});if(e)return void console.error("Error al cargar terapeutas:",e);E.value=a||[],console.log(`‚úÖ ${E.value.length} terapeutas cargados`)}catch(a){console.error("Error al cargar terapeutas:",a)}finally{H.value=!1}}())}catch(a){console.error("‚ùå Error al verificar rol:",a),M.value=!1}}a.watch([()=>O.value.fecha,()=>O.value.hora_inicio,()=>O.value.hora_fin],()=>{O.value.fecha&&O.value.hora_inicio&&O.value.hora_fin&&async function(){if(O.value.fecha&&O.value.hora_inicio&&O.value.hora_fin)try{const a=(await _(O.value.fecha)).filter(a=>"cancelada"!==a.estado&&"borrador"!==a.estado&&null!==a.estado&&a.id!==y.citaId),e=O.value.hora_inicio,t=O.value.hora_fin;P.value=a.some(a=>{const r=a.hora_inicio,s=a.hora_fin,d=horaAMinutos(e),o=horaAMinutos(t),n=horaAMinutos(r),l=horaAMinutos(s),i=d>=n&&d<l||o>n&&o<=l||d<=n&&o>=l||d===n&&o===l;return i&&console.log("‚ö†Ô∏è Conflicto detectado:",{nueva:`${e} - ${t}`,existente:`${r} - ${s}`,estado:a.estado,paciente:a.paciente_nombre||"Desconocido"}),i}),P.value&&console.warn("‚ö†Ô∏è Hay conflicto de horario")}catch(a){console.error("‚ùå Error al verificar conflicto:",a),P.value=!1}else P.value=!1}()}),a.watch(()=>y.fechaPreseleccionada,a=>{a&&(O.value.fecha=a)}),a.watch(()=>y.horaPreseleccionada,a=>{a&&(O.value.hora_inicio=a,calcularHoraFin())});const inicializarModal=()=>{console.log("üéØ Modal abierto - verificando rol y cargando datos"),console.log("üìÖ Fecha preseleccionada:",y.fechaPreseleccionada),console.log("‚è∞ Hora preseleccionada:",y.horaPreseleccionada),verificarRolUsuario(),async function(){console.log("üìã Cargando pacientes..."),j.value=!0;try{const{data:{user:a}}=await I.auth.getUser();if(!a)return void console.error("‚ùå No hay usuario autenticado");console.log("üë§ Usuario ID:",a.id);const{userProfile:e}=d();console.log("üé≠ Rol de usuario:",e.value?.rol||"desconocido");let t=I.from("pacientes").select("\n        id,\n        nombre_completo,\n        email,\n        metadata\n      ").eq("activo",!0).order("created_at",{ascending:!1});"coordinadora"!==e.value?.rol?(console.log("üë®‚Äç‚öïÔ∏è Filtrando por terapeuta_id:",a.id),t=t.eq("terapeuta_id",a.id)):console.log("üåü Coordinadora - cargando TODOS los pacientes");const{data:r,error:s}=await t;if(s)return void console.error("‚ùå Error al cargar pacientes:",s);A.value=(r||[]).map(a=>({id:a.id,nombre:a.nombre_completo||"Sin nombre",email:a.email||"",frecuencia:a.metadata?.frecuencia||"No definida",area_acompanamiento:a.metadata?.area_de_acompanamiento||""})),console.log(`‚úÖ ${A.value.length} pacientes cargados (rol: ${e.value?.rol||"desconocido"})`),console.log("üìù Pacientes:",A.value)}catch(a){console.error("‚ùå Error al cargar pacientes:",a)}finally{j.value=!1}}(),y.fechaPreseleccionada&&(O.value.fecha=y.fechaPreseleccionada,console.log("‚úÖ Fecha aplicada:",O.value.fecha)),y.horaPreseleccionada&&(O.value.hora_inicio=y.horaPreseleccionada,calcularHoraFin(),console.log("‚úÖ Hora aplicada:",O.value.hora_inicio,"- Hora fin:",O.value.hora_fin)),y.pacientePreseleccionado&&a.nextTick(()=>{!async function(a){R.value=a,O.value.paciente_id=a.id,O.value.paciente_nombre=a.nombre,F.value=a.nombre,k.value=!1;const e=await C(a.id);if(U.value=e,e.tiene_bono&&e.sesiones_restantes>0&&(O.value.descontar_de_bono=!0,O.value.bono_id=e.bono_id),a.frecuencia&&!y.fechaPreseleccionada){B.value=!0;try{const e=await $(a.id,a.frecuencia);e&&(G.value=e.fecha,S.value=e.hora,O.value.fecha=e.fecha,O.value.hora_inicio=e.hora,calcularHoraFin(),console.log("üí° Horario sugerido:",e))}catch(a){console.error("Error al sugerir horario:",a)}finally{B.value=!1}}console.log("‚úÖ Paciente seleccionado:",a.nombre)}({id:y.pacientePreseleccionado.id,nombre:y.pacientePreseleccionado.nombre,email:y.pacientePreseleccionado.email,frecuencia:y.pacientePreseleccionado.frecuencia||"No definida",area_acompanamiento:y.pacientePreseleccionado.area_acompanamiento||""})})};return a.watch(()=>y.mostrar,a=>{a&&inicializarModal()}),a.watch(()=>y.modelValue,a=>{a&&inicializarModal()}),(e,r,s,d)=>{h.modelValue||h.mostrar?(r(`<div${t.ssrRenderAttrs(a.mergeProps({class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},d))} data-v-adfaa88c><div class="bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-white/30" data-v-adfaa88c><div class="sticky top-0 bg-gradient-to-r from-[#5550F2]/5 via-[#027368]/5 to-[#04BF9D]/5 backdrop-blur-md border-b border-neutral-200 px-6 py-4 flex justify-between items-center shadow-sm" data-v-adfaa88c><div data-v-adfaa88c><h2 class="text-2xl font-[&#39;Elms_Sans&#39;] text-neutral-800 font-semibold" data-v-adfaa88c>${t.ssrInterpolate(h.titulo||"Nueva Cita")}</h2>`),h.fechaPreseleccionada?r(`<p class="text-sm text-neutral-600 mt-1" data-v-adfaa88c>${t.ssrInterpolate(formatearFechaLegible(h.fechaPreseleccionada))} a las ${t.ssrInterpolate(h.horaPreseleccionada)}</p>`):r("\x3c!----\x3e"),r('</div><button class="text-neutral-600 hover:text-[#027368] transition-colors p-2 hover:bg-white/50 rounded-lg" aria-label="Cerrar modal" data-v-adfaa88c><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-adfaa88c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-adfaa88c></path></svg></button></div><form class="px-6 py-6 space-y-6 bg-gradient-to-b from-white/50 to-transparent" data-v-adfaa88c>'),y.pacientePreseleccionado&&a.unref(R)?(r('<div class="p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl shadow-sm" data-v-adfaa88c><div class="flex items-center justify-between" data-v-adfaa88c><div class="flex items-center gap-3" data-v-adfaa88c><div class="w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(o),{class:"w-7 h-7 text-white"},null,s)),r(`</div><div data-v-adfaa88c><div class="text-xs font-semibold text-emerald-700 uppercase tracking-wide mb-1" data-v-adfaa88c>Paciente Seleccionado</div><div class="font-bold text-emerald-900 text-lg" data-v-adfaa88c>${t.ssrInterpolate(a.unref(R).nombre)}</div><div class="text-sm text-emerald-700 flex items-center gap-1 mt-0.5" data-v-adfaa88c><span data-v-adfaa88c>${t.ssrInterpolate(a.unref(R).email)}</span></div>`),a.unref(R).frecuencia?(r('<div class="mt-2 flex items-center gap-2 text-xs" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(n),{class:"w-4 h-4 text-emerald-600"},null,s)),r(`<span class="text-emerald-700" data-v-adfaa88c>Frecuencia: <strong class="capitalize" data-v-adfaa88c>${t.ssrInterpolate(a.unref(R).frecuencia)}</strong></span></div>`)):r("\x3c!----\x3e"),r('</div></div><div class="text-right" data-v-adfaa88c>'),a.unref(U).tiene_bono?(r('<div class="flex items-center gap-1 text-xs text-emerald-700 font-semibold mb-1" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(l),{class:"w-4 h-4"},null,s)),r("<span data-v-adfaa88c>BONO ACTIVO</span></div>")):r("\x3c!----\x3e"),a.unref(U).tiene_bono?r(`<div class="text-2xl font-bold text-emerald-900" data-v-adfaa88c>${t.ssrInterpolate(a.unref(U).sesiones_restantes)}/${t.ssrInterpolate(a.unref(U).sesiones_totales)}</div>`):r("\x3c!----\x3e"),a.unref(U).tiene_bono?r('<div class="text-xs text-emerald-600" data-v-adfaa88c>sesiones</div>'):r("\x3c!----\x3e"),r("</div></div></div>")):r("\x3c!----\x3e"),y.pacientePreseleccionado?r("\x3c!----\x3e"):(r('<div class="space-y-4" data-v-adfaa88c><div class="flex items-center justify-between" data-v-adfaa88c><h3 class="text-lg font-[&#39;Elms_Sans&#39;] text-neutral-800 font-semibold flex items-center gap-2" data-v-adfaa88c>'),a.unref(R)?(r('<span class="w-7 h-7 rounded-full bg-gradient-to-r from-[#04BF9D] to-[#027368] text-white flex items-center justify-center shadow-sm" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(o),{class:"w-5 h-5"},null,s)),r("</span>")):r('<span class="w-7 h-7 rounded-full bg-gradient-to-r from-[#5550F2] to-[#027368] text-white flex items-center justify-center text-sm font-bold shadow-sm" data-v-adfaa88c> 1 </span>'),r(" Seleccionar Paciente </h3></div>"),a.unref(R)?r("\x3c!----\x3e"):(r('<div class="p-3 bg-blue-50 border-l-4 border-blue-400 rounded" data-v-adfaa88c><p class="flex items-center gap-2 text-sm text-blue-800" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(i),{class:"w-5 h-5 flex-shrink-0"},null,s)),r('<span data-v-adfaa88c>Busca y selecciona un paciente ya registrado en el sistema</span></p><p class="text-xs text-blue-700 mt-1.5 ml-7" data-v-adfaa88c> Para crear un paciente nuevo, ve a la secci√≥n <strong data-v-adfaa88c>Pacientes</strong> en el men√∫ principal </p></div>')),a.unref(R)?r("\x3c!----\x3e"):(r(`<div class="space-y-3" data-v-adfaa88c><div class="relative" data-v-adfaa88c><input${t.ssrRenderAttr("value",a.unref(F))} type="text" placeholder="Buscar paciente por nombre o email..." class="w-full px-4 py-2.5 pl-10 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-[#027368]/20 focus:border-[#027368] bg-white/90 backdrop-blur-sm transition-all shadow-sm" autocomplete="off" data-v-adfaa88c><span class="absolute left-3 top-1/2 -translate-y-1/2" data-v-adfaa88c>`),r(t.ssrRenderComponent(a.unref(i),{class:"w-5 h-5 text-neutral-400"},null,s)),r("</span>"),a.unref(j)?r('<span class="absolute right-3 top-1/2 -translate-y-1/2" data-v-adfaa88c><svg class="animate-spin h-5 w-5 text-[#027368]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-adfaa88c><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-adfaa88c></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-adfaa88c></path></svg></span>'):r("\x3c!----\x3e"),a.unref(F)||a.unref(j)?r("\x3c!----\x3e"):(r('<div class="mt-1 flex items-center gap-2 text-xs text-neutral-500" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(c),{class:"w-4 h-4 flex-shrink-0"},null,s)),r("<span data-v-adfaa88c>Escribe al menos 2 caracteres para buscar</span></div>")),r("</div>"),a.unref(k)&&a.unref(F)&&a.unref(W).length>0?(r('<div class="grid grid-cols-1 md:grid-cols-2 gap-3" data-v-adfaa88c>\x3c!--[--\x3e'),t.ssrRenderList(a.unref(W),e=>{r('<button type="button" class="p-4 text-left hover:bg-[#027368]/5 transition-all border-2 border-neutral-200 hover:border-[#027368] rounded-xl cursor-pointer group bg-white/90 backdrop-blur-sm shadow-sm hover:shadow-md" data-v-adfaa88c><div class="flex items-center gap-3" data-v-adfaa88c><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-[#027368]/20 to-[#04BF9D]/20 group-hover:from-[#027368] group-hover:to-[#04BF9D] flex items-center justify-center transition-all" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(u),{class:"w-6 h-6 text-[#027368] group-hover:text-white transition-colors"},null,s)),r(`</div><div class="flex-1" data-v-adfaa88c><div class="font-medium text-neutral-800 group-hover:text-[#027368] transition-colors" data-v-adfaa88c>${t.ssrInterpolate(e.nombre)}</div><div class="text-sm text-neutral-600" data-v-adfaa88c>${t.ssrInterpolate(e.email)}</div>`),e.frecuencia?(r('<div class="text-xs text-neutral-500 mt-1 flex items-center gap-1" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(n),{class:"w-3 h-3"},null,s)),r(`<span class="font-medium capitalize" data-v-adfaa88c>${t.ssrInterpolate(e.frecuencia)}</span></div>`)):r("\x3c!----\x3e"),r('</div><div class="opacity-0 group-hover:opacity-100 transition-opacity" data-v-adfaa88c><svg class="w-5 h-5 text-[#027368]" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-adfaa88c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-adfaa88c></path></svg></div></div></button>')}),r("\x3c!--]--\x3e</div>")):r("\x3c!----\x3e"),a.unref(k)&&a.unref(F)&&0===a.unref(W).length&&!a.unref(j)?(r('<div class="border border-neutral-200 rounded-xl bg-white/90 backdrop-blur-sm p-6 text-center text-sm text-neutral-600 shadow-sm" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(i),{class:"w-12 h-12 mx-auto mb-2 text-neutral-400"},null,s)),r(`<p data-v-adfaa88c>No se encontraron pacientes con &quot;<strong data-v-adfaa88c>${t.ssrInterpolate(a.unref(F))}</strong>&quot;</p></div>`)):r("\x3c!----\x3e"),r("</div>")),a.unref(O).paciente_id&&a.unref(R)&&!y.pacientePreseleccionado?(r('<div class="space-y-3" data-v-adfaa88c><div class="p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl shadow-sm" data-v-adfaa88c><div class="flex items-start justify-between gap-3" data-v-adfaa88c><div class="flex items-center gap-3 flex-1" data-v-adfaa88c><div class="w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(o),{class:"w-7 h-7 text-white"},null,s)),r(`</div><div class="flex-1" data-v-adfaa88c><div class="text-xs font-semibold text-emerald-700 uppercase tracking-wide mb-1" data-v-adfaa88c>Paciente Seleccionado</div><div class="font-bold text-emerald-900 text-lg" data-v-adfaa88c>${t.ssrInterpolate(a.unref(R).nombre)}</div><div class="text-sm text-emerald-700 flex items-center gap-1 mt-0.5" data-v-adfaa88c><span data-v-adfaa88c>${t.ssrInterpolate(a.unref(R).email)}</span></div>`),a.unref(R).frecuencia?(r('<div class="mt-2 flex items-center gap-2 text-sm" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(n),{class:"w-4 h-4 text-emerald-600"},null,s)),r(`<span class="font-medium text-emerald-800" data-v-adfaa88c>Frecuencia:</span><span class="px-2 py-0.5 bg-emerald-100 text-emerald-800 rounded-lg font-medium capitalize" data-v-adfaa88c>${t.ssrInterpolate(a.unref(R).frecuencia)}</span></div>`)):r("\x3c!----\x3e"),r('</div></div><button type="button" class="px-4 py-2 bg-white border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 hover:border-emerald-400 rounded-lg text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow flex-shrink-0" data-v-adfaa88c><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-adfaa88c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" data-v-adfaa88c></path></svg><span data-v-adfaa88c>Cambiar</span></button></div></div>'),a.unref(U).tiene_bono?(r('<div class="p-5 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 border-2 border-blue-300 rounded-xl shadow-md" data-v-adfaa88c><div class="flex items-center justify-between mb-4" data-v-adfaa88c><div class="flex items-center gap-3" data-v-adfaa88c><div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(l),{class:"w-6 h-6 text-white"},null,s)),r(`</div><div data-v-adfaa88c><div class="text-sm font-bold text-blue-900 uppercase tracking-wide" data-v-adfaa88c>Bono Activo</div><div class="text-xs text-blue-600" data-v-adfaa88c>El paciente tiene sesiones disponibles</div></div></div><div class="text-right" data-v-adfaa88c><div class="text-xs text-blue-600 mb-1" data-v-adfaa88c>Sesiones Disponibles</div><div class="${t.ssrRenderClass(["text-3xl font-bold",a.unref(U).sesiones_restantes<=1?"text-red-600":a.unref(U).sesiones_restantes<=2?"text-amber-600":"text-blue-700"])}" data-v-adfaa88c>${t.ssrInterpolate(a.unref(U).sesiones_restantes)}</div></div></div><div class="grid grid-cols-3 gap-3 mb-4" data-v-adfaa88c><div class="bg-white p-3 rounded-lg border border-blue-200" data-v-adfaa88c><div class="text-xs text-blue-600 mb-1 font-medium" data-v-adfaa88c>Tipo de Bono</div><div class="font-bold text-blue-900 capitalize text-sm" data-v-adfaa88c>${t.ssrInterpolate(a.unref(U).tipo_bono||"N/A")}</div></div><div class="bg-white p-3 rounded-lg border border-blue-200" data-v-adfaa88c><div class="text-xs text-blue-600 mb-1 font-medium" data-v-adfaa88c>Total Sesiones</div><div class="font-bold text-blue-900 text-sm" data-v-adfaa88c>${t.ssrInterpolate(a.unref(U).sesiones_totales||"?")}</div></div><div class="bg-white p-3 rounded-lg border border-blue-200" data-v-adfaa88c><div class="text-xs text-blue-600 mb-1 font-medium" data-v-adfaa88c>Utilizadas</div><div class="font-bold text-blue-900 text-sm" data-v-adfaa88c>${t.ssrInterpolate((a.unref(U).sesiones_totales||0)-(a.unref(U).sesiones_restantes||0))}</div></div></div><div class="mb-4" data-v-adfaa88c><div class="flex justify-between text-xs text-blue-700 mb-1" data-v-adfaa88c><span data-v-adfaa88c>Progreso del bono</span><span class="font-semibold" data-v-adfaa88c>${t.ssrInterpolate(Math.round((a.unref(U).sesiones_totales-a.unref(U).sesiones_restantes)/a.unref(U).sesiones_totales*100))}%</span></div><div class="w-full bg-blue-200 rounded-full h-3 overflow-hidden" data-v-adfaa88c><div class="${t.ssrRenderClass([[a.unref(U).sesiones_restantes<=1?"bg-red-500":a.unref(U).sesiones_restantes<=2?"bg-amber-500":"bg-blue-500"],"h-full rounded-full transition-all duration-500"])}" style="${t.ssrRenderStyle({width:(a.unref(U).sesiones_totales-a.unref(U).sesiones_restantes)/a.unref(U).sesiones_totales*100+"%"})}" data-v-adfaa88c></div></div></div>`),a.unref(U).sesiones_restantes<=2?(r('<div class="mb-4 flex items-start gap-3 p-3 bg-amber-50 border-l-4 border-amber-500 rounded-lg" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(v),{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"},null,s)),r(`<div class="text-sm" data-v-adfaa88c><div class="font-semibold text-amber-900 mb-1" data-v-adfaa88c>${t.ssrInterpolate(1===a.unref(U).sesiones_restantes?"¬°√öltima sesi√≥n del bono!":"¬°Pocas sesiones restantes!")}</div><div class="text-amber-800" data-v-adfaa88c>${t.ssrInterpolate(1===a.unref(U).sesiones_restantes?"Esta es la √∫ltima sesi√≥n disponible. Considere informar al paciente para renovar su bono.":`Solo quedan ${a.unref(U).sesiones_restantes} sesiones. Considere informar al paciente para renovar su bono pronto.`)}</div></div></div>`)):r("\x3c!----\x3e"),r(`<div class="flex items-start gap-3 p-3 bg-white border-2 border-blue-300 rounded-lg" data-v-adfaa88c><input id="descontar-bono"${t.ssrIncludeBooleanAttr(Array.isArray(a.unref(O).descontar_de_bono)?t.ssrLooseContain(a.unref(O).descontar_de_bono,null):a.unref(O).descontar_de_bono)?" checked":""} type="checkbox" class="mt-1 w-5 h-5 text-blue-600 border-blue-300 rounded focus:ring-blue-500 focus:ring-2" data-v-adfaa88c><label for="descontar-bono" class="flex-1 cursor-pointer" data-v-adfaa88c><div class="text-sm text-blue-900 font-semibold mb-1" data-v-adfaa88c> Descontar sesi√≥n de este bono </div><div class="text-xs text-blue-700" data-v-adfaa88c> Al completar esta cita, se descontar√° autom√°ticamente 1 sesi√≥n del bono activo. Quedar√°n <strong data-v-adfaa88c>${t.ssrInterpolate(a.unref(U).sesiones_restantes-1)}</strong> sesiones disponibles. </div></label></div></div>`)):(r('<div class="p-4 bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-400 rounded-lg shadow-sm" data-v-adfaa88c><div class="flex items-start gap-3" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(c),{class:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"},null,s)),r('<div data-v-adfaa88c><div class="font-semibold text-amber-900 mb-1" data-v-adfaa88c>Sin bono activo</div><div class="text-sm text-amber-800" data-v-adfaa88c> Este paciente no tiene bonos activos actualmente. Esta sesi√≥n se cobrar√° de forma individual. </div></div></div></div>')),r("</div>")):r("\x3c!----\x3e"),r("</div>")),a.unref(M)?(r('<div class="space-y-4 pt-4 border-t-2 border-[#5550F2]/30" data-v-adfaa88c><div class="flex items-center justify-between" data-v-adfaa88c><h3 class="text-lg font-serif text-[#2D3748] font-semibold flex items-center gap-2" data-v-adfaa88c>'),a.unref(L)?(r('<span class="w-7 h-7 rounded-full bg-emerald-500 text-white flex items-center justify-center" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(o),{class:"w-5 h-5"},null,s)),r("</span>")):r(`<span class="w-7 h-7 rounded-full bg-[#5550F2] text-white flex items-center justify-center text-sm font-bold" data-v-adfaa88c>${t.ssrInterpolate((y.pacientePreseleccionado,"2"))}</span>`),r(" Asignar Terapeuta </h3></div>"),a.unref(L)?r("\x3c!----\x3e"):(r('<div class="p-3 bg-purple-50 border-l-4 border-purple-400 rounded" data-v-adfaa88c><p class="flex items-center gap-2 text-sm text-purple-800" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(p),{class:"w-5 h-5 flex-shrink-0"},null,s)),r("<span data-v-adfaa88c>Selecciona el terapeuta que atender√° esta cita</span></p></div>")),a.unref(L)?r("\x3c!----\x3e"):(r('<div class="grid grid-cols-1 md:grid-cols-2 gap-3" data-v-adfaa88c>\x3c!--[--\x3e'),t.ssrRenderList(a.unref(E),e=>{r('<button type="button" class="p-4 text-left hover:bg-[#5550F2]/10 transition-all border-2 border-[#5550F2]/30 hover:border-[#5550F2] rounded-lg cursor-pointer group bg-white" data-v-adfaa88c><div class="flex items-center gap-3" data-v-adfaa88c><div class="w-12 h-12 rounded-full bg-[#5550F2]/20 group-hover:bg-[#5550F2] flex items-center justify-center transition-colors" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(u),{class:"w-6 h-6 text-[#2D3748] group-hover:text-white transition-colors"},null,s)),r(`</div><div class="flex-1" data-v-adfaa88c><div class="font-medium text-[#2D3748] group-hover:text-[#5550F2] transition-colors" data-v-adfaa88c>${t.ssrInterpolate(e.nombre_completo)}</div>`),e.especialidad?r(`<div class="text-sm text-[#2D3748]/60" data-v-adfaa88c>${t.ssrInterpolate(e.especialidad)}</div>`):r("\x3c!----\x3e"),r(`<div class="text-xs text-[#2D3748]/50" data-v-adfaa88c>${t.ssrInterpolate(e.email)}</div></div><div class="opacity-0 group-hover:opacity-100 transition-opacity" data-v-adfaa88c><svg class="w-5 h-5 text-[#5550F2]" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-adfaa88c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-adfaa88c></path></svg></div></div></button>`)}),r("\x3c!--]--\x3e</div>")),a.unref(L)?(r('<div class="p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl shadow-sm" data-v-adfaa88c><div class="flex items-start justify-between gap-3" data-v-adfaa88c><div class="flex items-center gap-3 flex-1" data-v-adfaa88c><div class="w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(o),{class:"w-7 h-7 text-white"},null,s)),r(`</div><div class="flex-1" data-v-adfaa88c><div class="text-xs font-semibold text-emerald-700 uppercase tracking-wide mb-1" data-v-adfaa88c>Terapeuta Asignado</div><div class="font-bold text-emerald-900 text-lg" data-v-adfaa88c>${t.ssrInterpolate(a.unref(L).nombre_completo)}</div>`),a.unref(L).especialidad?r(`<div class="text-sm text-emerald-700 mt-0.5" data-v-adfaa88c>${t.ssrInterpolate(a.unref(L).especialidad)}</div>`):r("\x3c!----\x3e"),r('</div></div><button type="button" class="px-4 py-2 bg-white border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 hover:border-emerald-400 rounded-lg text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow flex-shrink-0" data-v-adfaa88c><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-adfaa88c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" data-v-adfaa88c></path></svg><span data-v-adfaa88c>Cambiar</span></button></div></div>')):r("\x3c!----\x3e"),r("</div>")):r("\x3c!----\x3e"),r('<div class="space-y-6 pt-4 border-t-2 border-[#5550F2]/30" data-v-adfaa88c><h3 class="text-lg font-serif text-[#2D3748] font-semibold flex items-center gap-2" data-v-adfaa88c>'),a.unref(aa)?r('<span class="w-7 h-7 rounded-full bg-green-500 text-white flex items-center justify-center" data-v-adfaa88c> ‚úì </span>'):r(`<span class="w-7 h-7 rounded-full bg-[#5550F2] text-white flex items-center justify-center text-sm font-bold" data-v-adfaa88c>${t.ssrInterpolate(a.unref(M)?"3":y.pacientePreseleccionado?"1":"2")}</span>`),r(' Detalles de la Cita </h3><div class="p-5 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl shadow-sm space-y-4" data-v-adfaa88c><h4 class="text-sm font-bold text-blue-900 flex items-center gap-2" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(n),{class:"w-5 h-5 text-blue-600"},null,s)),r('<span data-v-adfaa88c>Detalles de Programaci√≥n</span></h4><div class="grid grid-cols-1 md:grid-cols-2 gap-4" data-v-adfaa88c><div data-v-adfaa88c><label class="block text-sm font-medium text-[#2D3748] mb-2 flex items-center gap-2" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(n),{class:"w-4 h-4"},null,s)),r(`<span data-v-adfaa88c>Fecha</span><span class="text-red-500" data-v-adfaa88c>*</span></label><div class="space-y-2" data-v-adfaa88c><input${t.ssrRenderAttr("value",a.unref(O).fecha)} type="date" required${t.ssrRenderAttr("min",a.unref(J))} class="${t.ssrRenderClass(["w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#5550F2] focus:border-transparent bg-white text-base cursor-pointer",a.unref(Y).includes("fecha")?"border-red-500 border-2":"border-[#5550F2]/30"])}" style="${t.ssrRenderStyle({"min-height":"44px"})}" placeholder="dd/mm/aaaa" data-v-adfaa88c><div class="flex gap-2 flex-wrap" data-v-adfaa88c>\x3c!--[--\x3e`),t.ssrRenderList(a.unref(K),(e,s)=>{r(`<button type="button" class="${t.ssrRenderClass(["text-xs px-3 py-1.5 rounded-lg border transition-all",a.unref(O).fecha===e.fecha?"bg-[#5550F2] text-white border-[#5550F2] font-semibold":"bg-white text-[#2D3748] border-[#5550F2]/30 hover:border-[#5550F2] hover:bg-[#5550F2]/10"])}" data-v-adfaa88c>${t.ssrInterpolate(e.label)}</button>`)}),r("\x3c!--]--\x3e</div>"),a.unref(G)&&a.unref(G)!==a.unref(O).fecha?r(`<div class="flex items-center gap-2" data-v-adfaa88c><button type="button" class="text-xs px-2 py-1 bg-green-50 text-green-700 border border-green-200 rounded hover:bg-green-100 transition-colors" data-v-adfaa88c> üí° Usar fecha sugerida: ${t.ssrInterpolate(formatearFechaLegible(a.unref(G)))}</button></div>`):r("\x3c!----\x3e"),r('</div></div><div data-v-adfaa88c><label class="block text-sm font-medium text-[#2D3748] mb-2 flex items-center gap-2" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(m),{class:"w-4 h-4"},null,s)),r('<span data-v-adfaa88c>Hora de Inicio</span><span class="text-red-500" data-v-adfaa88c>*</span></label><div class="space-y-3" data-v-adfaa88c><div class="grid grid-cols-4 gap-3 max-h-72 overflow-y-auto p-4 bg-white rounded-lg border border-[#5550F2]/20 shadow-inner" data-v-adfaa88c>\x3c!--[--\x3e'),t.ssrRenderList(Q,e=>{r(`<button type="button" class="${t.ssrRenderClass(["px-4 py-3 text-sm font-semibold rounded-lg transition-all border-2 flex items-center justify-center min-w-[70px]",a.unref(O).hora_inicio===e?"bg-[#5550F2] text-white border-[#5550F2] shadow-lg transform scale-105 ring-2 ring-[#5550F2]/30":"bg-white text-[#2D3748] border-gray-300 hover:border-[#5550F2] hover:bg-[#5550F2]/10 hover:shadow-md hover:scale-102"])}" data-v-adfaa88c>${t.ssrInterpolate(e)}</button>`)}),r('\x3c!--]--\x3e</div><details class="text-xs" data-v-adfaa88c><summary class="cursor-pointer text-[#2D3748]/60 hover:text-[#2D3748] select-none flex items-center gap-2" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(b),{class:"w-4 h-4"},null,s)),r(`<span data-v-adfaa88c>Ingresar hora manualmente</span></summary><div class="mt-2" data-v-adfaa88c><input${t.ssrRenderAttr("value",a.unref(O).hora_inicio)} type="time" step="1800" class="${t.ssrRenderClass(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#5550F2] focus:border-transparent bg-white",a.unref(Y).includes("hora_inicio")?"border-red-500 border-2":"border-[#5550F2]/30"])}" data-v-adfaa88c></div></details><datalist id="horas-sugeridas" data-v-adfaa88c>\x3c!--[--\x3e`),t.ssrRenderList(Q,a=>{r(`<option${t.ssrRenderAttr("value",a)} data-v-adfaa88c>${t.ssrInterpolate(a)}</option>`)}),r("\x3c!--]--\x3e</datalist>"),a.unref(S)&&a.unref(S)!==a.unref(O).hora_inicio&&!1===a.unref(B)?(r('<div class="flex items-center gap-2" data-v-adfaa88c><button type="button" class="flex items-center gap-1.5 text-xs px-3 py-1.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg hover:bg-emerald-100 transition-colors font-medium" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(c),{class:"w-4 h-4"},null,s)),r(`<span data-v-adfaa88c>Usar hora sugerida: ${t.ssrInterpolate(a.unref(S))}</span></button></div>`)):r("\x3c!----\x3e"),a.unref(B)?r('<div class="text-xs text-[#2D3748]/50 flex items-center gap-2" data-v-adfaa88c><svg class="animate-spin h-3 w-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-adfaa88c><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-adfaa88c></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-adfaa88c></path></svg> Buscando horario disponible... </div>'):r("\x3c!----\x3e"),r(`</div></div><div data-v-adfaa88c><label class="block text-sm font-medium text-[#2D3748] mb-1" data-v-adfaa88c> Duraci√≥n <span class="text-red-500" data-v-adfaa88c>*</span></label><select required class="w-full px-4 py-2 border border-[#5550F2]/30 rounded-lg focus:ring-2 focus:ring-[#5550F2] focus:border-transparent bg-white" data-v-adfaa88c><option value="30" data-v-adfaa88c${t.ssrIncludeBooleanAttr(Array.isArray(a.unref(O).duracion)?t.ssrLooseContain(a.unref(O).duracion,"30"):t.ssrLooseEqual(a.unref(O).duracion,"30"))?" selected":""}>30 minutos</option><option value="60" selected data-v-adfaa88c>60 minutos (1 hora)</option><option value="90" data-v-adfaa88c${t.ssrIncludeBooleanAttr(Array.isArray(a.unref(O).duracion)?t.ssrLooseContain(a.unref(O).duracion,"90"):t.ssrLooseEqual(a.unref(O).duracion,"90"))?" selected":""}>90 minutos (1.5 horas)</option><option value="120" data-v-adfaa88c${t.ssrIncludeBooleanAttr(Array.isArray(a.unref(O).duracion)?t.ssrLooseContain(a.unref(O).duracion,"120"):t.ssrLooseEqual(a.unref(O).duracion,"120"))?" selected":""}>120 minutos (2 horas)</option></select></div><div data-v-adfaa88c><label class="block text-sm font-medium text-[#2D3748] mb-1" data-v-adfaa88c> Hora de Fin </label><input${t.ssrRenderAttr("value",a.unref(O).hora_fin)} type="text" readonly class="w-full px-4 py-2 border border-[#5550F2]/30 rounded-lg bg-gray-100 text-[#2D3748]/60" placeholder="Se calcular√° autom√°ticamente" data-v-adfaa88c></div></div></div><div class="p-5 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl shadow-sm space-y-4" data-v-adfaa88c><h4 class="text-sm font-bold text-purple-900 flex items-center gap-2" data-v-adfaa88c>`),r(t.ssrRenderComponent(a.unref(render),{class:"w-5 h-5 text-purple-600"},null,s)),r('<span data-v-adfaa88c>Tipo de Sesi√≥n y Estado</span></h4><div data-v-adfaa88c><label class="block text-sm font-medium text-[#2D3748] mb-2 flex items-center gap-2" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(render),{class:"w-5 h-5"},null,s)),r(`<span data-v-adfaa88c>Tipo de Sesi√≥n</span><span class="text-red-500" data-v-adfaa88c>*</span></label><div class="${t.ssrRenderClass(["grid grid-cols-3 gap-3",a.unref(Y).includes("tipo")?"p-3 border-2 border-red-500 bg-red-50 rounded-lg":""])}" data-v-adfaa88c>\x3c!--[--\x3e`),t.ssrRenderList(X,e=>{r(`<button type="button" class="${t.ssrRenderClass(["p-4 border-2 rounded-lg transition-all flex flex-col items-center gap-2 group",a.unref(O).tipo===e.valor?"border-[#5550F2] bg-[#5550F2]/20 shadow-md":"border-[#5550F2]/30 hover:border-[#5550F2] hover:bg-[#5550F2]/5 bg-white"])}" data-v-adfaa88c>`),t.ssrRenderVNode(r,a.createVNode(a.resolveDynamicComponent(e.componente),{class:["w-8 h-8 transition-colors",a.unref(O).tipo===e.valor?"text-[#5550F2]":"text-[#2D3748]/60 group-hover:text-[#5550F2]"]},null),s),r(`<div class="font-medium text-[#2D3748] text-sm" data-v-adfaa88c>${t.ssrInterpolate(e.nombre)}</div><div class="text-xs text-[#2D3748]/50" data-v-adfaa88c>${t.ssrInterpolate(e.descripcion)}</div></button>`)}),r('\x3c!--]--\x3e</div></div><div data-v-adfaa88c><label class="block text-sm font-medium text-[#2D3748] mb-2 flex items-center gap-2" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(o),{class:"w-5 h-5"},null,s)),r('<span data-v-adfaa88c>Estado</span><span class="text-red-500" data-v-adfaa88c>*</span></label><div class="grid grid-cols-2 md:grid-cols-4 gap-3" data-v-adfaa88c>\x3c!--[--\x3e'),t.ssrRenderList(Z,e=>{r(`<button type="button" class="${t.ssrRenderClass(["p-3 border-2 rounded-lg transition-all flex flex-col items-center gap-2",a.unref(O).estado===e.valor?e.claseActivo+" shadow-md":e.claseInactivo])}" data-v-adfaa88c>`),t.ssrRenderVNode(r,a.createVNode(a.resolveDynamicComponent(e.componente),{class:"w-7 h-7"},null),s),r(`<div class="font-medium text-sm" data-v-adfaa88c>${t.ssrInterpolate(e.nombre)}</div></button>`)}),r('\x3c!--]--\x3e</div></div></div><div class="p-5 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl shadow-sm" data-v-adfaa88c><h4 class="text-sm font-bold text-amber-900 flex items-center gap-2 mb-3" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(b),{class:"w-5 h-5 text-amber-600"},null,s)),r('<span data-v-adfaa88c>Notas Adicionales</span></h4><div data-v-adfaa88c><label class="block text-sm font-medium text-[#2D3748] mb-2 flex items-center gap-2" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(b),{class:"w-4 h-4"},null,s)),r(`<span data-v-adfaa88c>Notas (opcional)</span></label><textarea rows="3" class="w-full px-4 py-2 border border-[#5550F2]/30 rounded-lg focus:ring-2 focus:ring-[#5550F2] focus:border-transparent bg-white resize-none" placeholder="Notas sobre la cita, recordatorios, etc." data-v-adfaa88c>${t.ssrInterpolate(a.unref(O).notas)}</textarea></div></div></div>`),a.unref(P)?(r('<div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg shadow-sm" data-v-adfaa88c><div class="flex items-start gap-3" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(v),{class:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5"},null,s)),r('<div data-v-adfaa88c><div class="font-semibold text-yellow-900 mb-1 flex items-center gap-2" data-v-adfaa88c><span data-v-adfaa88c>Conflicto de Horario</span></div><div class="text-sm text-yellow-800" data-v-adfaa88c> Ya existe una cita en este horario. Verifica la disponibilidad. </div></div></div></div>')):r("\x3c!----\x3e"),a.unref(Y).length>0&&!a.unref(aa)?(r('<div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-lg shadow-sm" data-v-adfaa88c><div class="flex items-start gap-3" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(x),{class:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"},null,s)),r('<div data-v-adfaa88c><div class="font-semibold text-red-900 mb-2" data-v-adfaa88c> Completa los campos obligatorios </div><ul class="text-sm text-red-800 space-y-1.5" data-v-adfaa88c>'),a.unref(O).paciente_id?r("\x3c!----\x3e"):r('<li class="flex items-center gap-2" data-v-adfaa88c><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-adfaa88c></span><span data-v-adfaa88c>Selecciona un paciente</span></li>'),a.unref(O).fecha?r("\x3c!----\x3e"):r('<li class="flex items-center gap-2" data-v-adfaa88c><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-adfaa88c></span><span data-v-adfaa88c>Selecciona una fecha</span></li>'),a.unref(O).hora_inicio?r("\x3c!----\x3e"):r('<li class="flex items-center gap-2" data-v-adfaa88c><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-adfaa88c></span><span data-v-adfaa88c>Selecciona la hora de inicio</span></li>'),a.unref(O).tipo?r("\x3c!----\x3e"):r('<li class="flex items-center gap-2" data-v-adfaa88c><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-adfaa88c></span><span data-v-adfaa88c>Selecciona el tipo de sesi√≥n</span></li>'),a.unref(O).estado?r("\x3c!----\x3e"):r('<li class="flex items-center gap-2" data-v-adfaa88c><span class="w-1.5 h-1.5 rounded-full bg-red-500" data-v-adfaa88c></span><span data-v-adfaa88c>Selecciona el estado de la cita</span></li>'),r("</ul></div></div></div>")):r("\x3c!----\x3e"),a.unref(aa)&&!a.unref(P)?(r('<div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg shadow-sm" data-v-adfaa88c><div class="flex items-start gap-3" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(c),{class:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5"},null,s)),r(`<div class="flex-1" data-v-adfaa88c><div class="font-semibold text-blue-900 mb-3" data-v-adfaa88c> Resumen de la Cita </div><div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm" data-v-adfaa88c><div data-v-adfaa88c><span class="text-blue-600 font-medium" data-v-adfaa88c>Paciente:</span><div class="text-blue-900 font-semibold" data-v-adfaa88c>${t.ssrInterpolate(a.unref(O).paciente_nombre)}</div></div><div data-v-adfaa88c><span class="text-blue-600 font-medium" data-v-adfaa88c>Fecha:</span><div class="text-blue-900" data-v-adfaa88c>${t.ssrInterpolate(formatearFechaLegible(a.unref(O).fecha))}</div></div><div data-v-adfaa88c><span class="text-blue-600 font-medium" data-v-adfaa88c>Horario:</span><div class="text-blue-900 font-semibold" data-v-adfaa88c>${t.ssrInterpolate(a.unref(O).hora_inicio)} - ${t.ssrInterpolate(a.unref(O).hora_fin)}</div></div><div data-v-adfaa88c><span class="text-blue-600 font-medium" data-v-adfaa88c>Duraci√≥n:</span><div class="text-blue-900" data-v-adfaa88c>${t.ssrInterpolate(a.unref(O).duracion)} minutos</div></div><div data-v-adfaa88c><span class="text-blue-600 font-medium" data-v-adfaa88c>Tipo:</span><div class="text-blue-900 capitalize" data-v-adfaa88c>${t.ssrInterpolate(a.unref(O).tipo)}</div></div><div data-v-adfaa88c><span class="text-blue-600 font-medium" data-v-adfaa88c>Estado:</span><div class="text-blue-900 capitalize" data-v-adfaa88c>${t.ssrInterpolate(a.unref(O).estado)}</div></div>`),a.unref(O).descontar_de_bono?(r('<div class="md:col-span-2 flex items-center gap-2" data-v-adfaa88c>'),r(t.ssrRenderComponent(a.unref(l),{class:"w-5 h-5 text-blue-600"},null,s)),r('<div data-v-adfaa88c><span class="text-blue-600 font-medium" data-v-adfaa88c>Bono:</span><span class="text-blue-900 ml-2" data-v-adfaa88c>Se descontar√° 1 sesi√≥n del bono activo</span></div></div>')):r("\x3c!----\x3e"),r("</div></div></div></div>")):r("\x3c!----\x3e"),r(`<div class="sticky bottom-0 bg-[#F2F2F2] pt-4 border-t border-[#5550F2]/30 flex gap-3 mt-6" data-v-adfaa88c><button type="button" class="flex-1 px-6 py-3 border-2 border-[#5550F2] text-[#2D3748] rounded-lg hover:bg-[#5550F2]/10 transition-colors font-medium" aria-label="Cancelar creaci√≥n de cita" data-v-adfaa88c> Cancelar </button><div class="relative flex-1" data-v-adfaa88c><button type="submit"${t.ssrIncludeBooleanAttr(!a.unref(aa)||a.unref(D)||a.unref(P))?" disabled":""} class="${t.ssrRenderClass(["w-full px-6 py-3 rounded-lg transition-all font-medium text-white",!a.unref(aa)||a.unref(D)||a.unref(P)?"bg-gray-400 cursor-not-allowed opacity-60":"bg-[#5550F2] hover:bg-[#5550F2]/90 hover:shadow-lg cursor-pointer"])}"${t.ssrRenderAttr("aria-label",a.unref(aa)?"Guardar cita":"Completa todos los campos requeridos para guardar")} data-v-adfaa88c>${t.ssrInterpolate(a.unref(D)?"Guardando...":"‚úì Guardar Cita")}</button>`),a.unref(aa)||a.unref(D)?r("\x3c!----\x3e"):r('<div class="absolute -top-12 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs px-3 py-2 rounded shadow-lg whitespace-nowrap opacity-0 hover:opacity-100 transition-opacity pointer-events-none" data-v-adfaa88c> Completa todos los campos obligatorios (*) </div>'),r("</div></div></form></div>"),a.unref(V)?(r(`<div class="${t.ssrRenderClass(["fixed bottom-6 right-6 max-w-md rounded-lg shadow-2xl p-4 z-[60]","exito"===a.unref(T)?"bg-gradient-to-r from-green-500 to-emerald-500":"error"===a.unref(T)?"bg-gradient-to-r from-red-500 to-rose-500":"bg-gradient-to-r from-blue-500 to-indigo-500"])}" data-v-adfaa88c><div class="flex items-start gap-3 text-white" data-v-adfaa88c><div class="text-3xl" data-v-adfaa88c>${t.ssrInterpolate("exito"===a.unref(T)?"‚úÖ":"error"===a.unref(T)?"‚ùå":"‚ÑπÔ∏è")}</div><div class="flex-1" data-v-adfaa88c><div class="font-bold text-lg mb-1" data-v-adfaa88c>${t.ssrInterpolate(a.unref(N))}</div><div class="text-sm opacity-90 mb-3" data-v-adfaa88c>${t.ssrInterpolate(a.unref(z))}</div>`),a.unref(q).length>0?(r('<div class="flex gap-2" data-v-adfaa88c>\x3c!--[--\x3e'),t.ssrRenderList(a.unref(q),(a,e)=>{r(`<button class="px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-all" data-v-adfaa88c>${t.ssrInterpolate(a.texto)}</button>`)}),r("\x3c!--]--\x3e</div>")):r("\x3c!----\x3e"),r('</div><button class="text-white/80 hover:text-white transition-colors" data-v-adfaa88c> ‚úï </button></div></div>')):r("\x3c!----\x3e"),r("</div>")):r("\x3c!----\x3e")}}}),y=w.setup;w.setup=(e,t)=>{const r=a.useSSRContext();return(r.modules||(r.modules=new Set)).add("components/ModalNuevaCita.vue"),y?y(e,t):void 0};const _=Object.assign(h(w,[["__scopeId","data-v-adfaa88c"]]),{__name:"ModalNuevaCita"});export{_};
//# sourceMappingURL=ModalNuevaCita-CXmg5Qpz.mjs.map
