import{_ as e}from"./LoadingSpinner-BoPU2_S2.mjs";import{v as s,s as t}from"./server.mjs";import{u as a}from"./usePacientes-BPAABr51.mjs";import"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../_/shared.cjs.prod.mjs";import"../virtual/_commonjsHelpers.mjs";import"node:stream";import"../_/index2.mjs";import"@supabase/supabase-js";import"@vercel/analytics/nuxt";import"./useSupabaseClient-DykwVqLQ.mjs";const n=s.defineComponent({__name:"SesionCard",__ssrInlineRender:!0,props:{sesion:{},pasada:{type:Boolean}},emits:["abrir"],setup(e){const a=s.ref(!1),estadoClassExtendido=e=>{const s={pendiente:"bg-yellow-100 text-yellow-800",confirmada:"bg-blue-100 text-blue-800",realizada:"bg-green-100 text-green-800",cancelada:"bg-red-100 text-red-800"};return s[e]||s.pendiente};return(n,o,r,i)=>{var l,d;o(`<div${t.ssrRenderAttrs(s.mergeProps({class:["bg-white rounded-xl p-5 border transition-all duration-200",e.pasada?"border-[#E2E8F0]/50 opacity-90":"border-[#E2E8F0] hover:border-[#5550F2]/50 hover:shadow-md"]},i))}><div class="space-y-4"><div class="flex items-start justify-between gap-4"><div class="flex-1"><h4 class="text-base font-serif font-medium text-[#2D3748] mb-1">${t.ssrInterpolate((d=e.sesion.fecha,new Date(d).toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"})))}</h4><div class="flex items-center space-x-3 text-sm text-[#2D3748]/70 font-sans"><div class="flex items-center space-x-1.5"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>${t.ssrInterpolate((e=>new Date(e).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}))(e.sesion.fecha))}</span></div><span class="text-[#2D3748]/30">‚Ä¢</span><span>${t.ssrInterpolate(e.sesion.duracion_min)} min</span></div></div><span class="${t.ssrRenderClass(["inline-flex items-center px-3 py-1 rounded-lg text-xs font-medium whitespace-nowrap","font-['Lato']",estadoClassExtendido(e.sesion.estado)])}">${t.ssrInterpolate((l=e.sesion.estado,{pendiente:"Programada",confirmada:"Lista para ti ‚ú®",realizada:"Completada üí™",cancelada:"No se realiz√≥"}[l]||"Programada"))}</span></div><div class="flex items-center space-x-2"><span class="inline-flex items-center space-x-1.5 px-2.5 py-1 rounded-md text-xs font-sans bg-[#F2F2F2] text-[#2D3748]"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">`),"online"===e.sesion.modalidad?o('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>'):o('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>'),o(`</svg><span class="capitalize">${t.ssrInterpolate(e.sesion.modalidad)}</span></span></div>`),e.sesion.nota_terapeuta&&"realizada"===e.sesion.estado?(o(`<div class="bg-[#F2F2F2] rounded-lg p-4 space-y-2 border border-[#E2E8F0]/50"><p class="text-xs font-sans font-semibold text-[#5550F2] flex items-center space-x-1.5"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><span>Notas de la sesi√≥n</span></p><p class="${t.ssrRenderClass(["text-sm font-['Lato'] text-[#2D3748]/80 leading-relaxed",!s.unref(a)&&"line-clamp-2"])}">${t.ssrInterpolate(e.sesion.nota_terapeuta)}</p>`),e.sesion.nota_terapeuta.length>120?o(`<button class="text-xs font-sans font-medium text-[#5550F2] hover:text-[#c99d8d] transition-colors">${t.ssrInterpolate(s.unref(a)?"Ver menos":"Ver m√°s")}</button>`):o("\x3c!----\x3e"),o("</div>")):o("\x3c!----\x3e"),o("<div>"),e.sesion.ubicacion&&"online"===e.sesion.modalidad&&["pendiente","confirmada"].includes(e.sesion.estado)?o('<button class="w-full inline-flex items-center justify-center space-x-2 px-4 py-2.5 bg-[#5550F2] text-white rounded-lg hover:bg-[#c99d8d] transition-all duration-200 font-sans font-medium text-sm"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg><span>Unirme</span></button>'):e.sesion.ubicacion&&"presencial"===e.sesion.modalidad?o(`<div class="flex items-start space-x-2 text-xs font-sans text-[#2D3748]/60 bg-[#F2F2F2] px-3 py-2 rounded-lg"><svg class="w-4 h-4 text-[#5550F2] flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><span>${t.ssrInterpolate(e.sesion.ubicacion)}</span></div>`):o("\x3c!----\x3e"),o("</div></div></div>")}}}),o=n.setup;n.setup=(e,t)=>{const a=s.useSSRContext();return(a.modules||(a.modules=new Set)).add("components/SesionCard.vue"),o?o(e,t):void 0};const r=Object.assign(n,{__name:"SesionCard"}),i={__name:"EmptyState",__ssrInlineRender:!0,props:{title:{type:String,default:"No hay datos disponibles"},description:{type:String,default:"Parece que a√∫n no hay informaci√≥n para mostrar aqu√≠."}},setup:e=>(a,n,o,r)=>{n(`<div${t.ssrRenderAttrs(s.mergeProps({class:"flex flex-col items-center justify-center py-12 px-4 text-center"},r))}><div class="mb-4">`),t.ssrRenderSlot(a.$slots,"icon",{},()=>{n('<svg class="w-16 h-16 text-[#5550F2] opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg>')},n,o),n(`</div><h3 class="text-lg font-medium text-[#2D3748] font-serif mb-2">${t.ssrInterpolate(e.title)}</h3><p class="text-sm text-[#2D3748] opacity-70 font-sans max-w-md mb-4">${t.ssrInterpolate(e.description)}</p>`),t.ssrRenderSlot(a.$slots,"action",{},null,n,o),n("</div>")}},l=i.setup;i.setup=(e,t)=>{const a=s.useSSRContext();return(a.modules||(a.modules=new Set)).add("components/EmptyState.vue"),l?l(e,t):void 0};const d=s.defineComponent({__name:"sesiones",__ssrInlineRender:!0,setup(n){a();const o=s.ref(!0),l=s.ref([]),d=s.ref("todas"),p=[{value:"todas",label:"Todas"},{value:"proximas",label:"Pr√≥ximas"},{value:"pasadas",label:"Pasadas"}],c=s.computed(()=>{const e=new Date;return l.value.filter(s=>new Date(s.fecha)>=e).sort((e,s)=>new Date(e.fecha).getTime()-new Date(s.fecha).getTime())[0]||null}),u=s.computed(()=>{const e=new Date;return l.value.filter(s=>new Date(s.fecha)>=e).sort((e,s)=>new Date(e.fecha).getTime()-new Date(s.fecha).getTime()).slice(1)}),m=s.computed(()=>{const e=new Date;return l.value.filter(s=>new Date(s.fecha)<e).sort((e,s)=>new Date(s.fecha).getTime()-new Date(e.fecha).getTime())}),x=s.computed(()=>{const e=new Date;switch(d.value){case"proximas":return l.value.filter(s=>new Date(s.fecha)>=e);case"pasadas":return l.value.filter(s=>new Date(s.fecha)<e);default:return l.value}}),f=s.computed(()=>{switch(d.value){case"proximas":return"No tienes sesiones programadas todav√≠a üí¨";case"pasadas":return"A√∫n no has completado ninguna sesi√≥n";default:return"No tienes sesiones registradas"}}),v=s.computed(()=>{switch(d.value){case"proximas":return"Contacta con tu psic√≥loga para agendar tu primera sesi√≥n. Estamos aqu√≠ para acompa√±arte.";case"pasadas":return"Una vez que completes tus sesiones, podr√°s revisar las notas y el progreso aqu√≠.";default:return"Cuando tengas sesiones programadas, aparecer√°n en este espacio."}}),estaProxima=e=>{const s=new Date,t=(new Date(e).getTime()-s.getTime())/36e5;return t>0&&t<24},estadoClassExtendido=e=>{const s={pendiente:"bg-yellow-100 text-yellow-800",confirmada:"bg-blue-100 text-blue-800",realizada:"bg-green-100 text-green-800",cancelada:"bg-red-100 text-red-800"};return s[e]||s.pendiente},abrirSesion=e=>{(void 0).open(e,"_blank")};return(a,n,l,h)=>{const g=e,w=r,b=i;var k,y;n(`<div${t.ssrRenderAttrs(h)}>`),s.unref(o)?n(t.ssrRenderComponent(g,{text:"Cargando tus sesiones...","full-height":""},null,l)):(n('<div class="max-w-4xl mx-auto px-4 py-8 space-y-8"><div class="space-y-4"><div><h1 class="text-3xl font-serif font-medium text-[#2D3748]"> Mis Sesiones </h1><p class="text-sm text-[#2D3748]/70 font-sans mt-2"> Tu espacio de acompa√±amiento terap√©utico </p></div><div class="flex items-center space-x-1 bg-[#F2F2F2] p-1 rounded-xl w-fit">\x3c!--[--\x3e'),t.ssrRenderList(p,e=>{n(`<button class="${t.ssrRenderClass([s.unref(d)===e.value?"bg-white text-[#2D3748] shadow-sm":"text-[#2D3748]/60 hover:text-[#2D3748]","px-5 py-2.5 rounded-lg text-sm font-sans font-medium transition-all duration-200"])}">${t.ssrInterpolate(e.label)}</button>`)}),n("\x3c!--]--\x3e</div></div>"),!s.unref(c)||"todas"!==s.unref(d)&&"proximas"!==s.unref(d)?n("\x3c!----\x3e"):(n(`<div class="${t.ssrRenderClass([estaProxima(s.unref(c).fecha)?"border-[#5550F2]":"border-[#E2E8F0]","relative bg-gradient-to-br from-[#F2F2F2] to-white rounded-2xl p-6 border-l-4"])}"><div class="absolute top-4 right-4"><span class="inline-flex items-center space-x-1.5 px-3 py-1.5 bg-[#5550F2]/10 text-[#5550F2] rounded-full text-xs font-sans font-semibold"><svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg><span>Pr√≥xima sesi√≥n</span></span></div><div class="space-y-4"><div><h2 class="text-2xl font-serif font-medium text-[#2D3748] mb-1">${t.ssrInterpolate((y=s.unref(c).fecha,new Date(y).toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"})))}</h2><div class="flex items-center space-x-4 text-[#2D3748]/70 font-sans"><div class="flex items-center space-x-1.5"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="font-medium">${t.ssrInterpolate((e=>new Date(e).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}))(s.unref(c).fecha))}</span></div><span class="text-[#2D3748]/40">‚Ä¢</span><span>${t.ssrInterpolate(s.unref(c).duracion_min)} minutos</span></div></div><div class="flex items-center flex-wrap gap-2"><span class="inline-flex items-center space-x-2 px-3 py-1.5 rounded-lg text-sm font-sans font-medium bg-white border border-[#E2E8F0] text-[#2D3748]"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">`),"online"===s.unref(c).modalidad?n('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>'):n('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>'),n(`</svg><span class="capitalize">${t.ssrInterpolate(s.unref(c).modalidad)}</span></span><span class="${t.ssrRenderClass([estadoClassExtendido(s.unref(c).estado),"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-sans font-medium"])}"><span>${t.ssrInterpolate((k=s.unref(c).estado,{pendiente:"Programada",confirmada:"Lista para ti ‚ú®",realizada:"Completada üí™",cancelada:"No se realiz√≥"}[k]||"Programada"))}</span></span></div>`),s.unref(c).ubicacion&&"online"===s.unref(c).modalidad&&["pendiente","confirmada"].includes(s.unref(c).estado)?n('<div><button class="inline-flex items-center justify-center space-x-2 px-6 py-3 bg-[#5550F2] text-white rounded-xl hover:bg-[#c99d8d] transition-all duration-200 font-sans font-medium shadow-sm hover:shadow-md"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg><span>Unirme a la sesi√≥n</span></button></div>'):s.unref(c).ubicacion&&"presencial"===s.unref(c).modalidad?n(`<div class="flex items-start space-x-2 text-sm font-sans text-[#2D3748]/70 bg-white px-4 py-3 rounded-lg border border-[#E2E8F0]"><svg class="w-5 h-5 text-[#5550F2] flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><span>${t.ssrInterpolate(s.unref(c).ubicacion)}</span></div>`):n("\x3c!----\x3e"),n("</div></div>")),s.unref(u).length>0&&("todas"===s.unref(d)||"proximas"===s.unref(d))?(n('<div class="space-y-3"><h3 class="text-lg font-serif font-medium text-[#2D3748] flex items-center space-x-2"><svg class="w-5 h-5 text-[#5550F2]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><span>Pr√≥ximas sesiones</span></h3><div class="space-y-3">\x3c!--[--\x3e'),t.ssrRenderList(s.unref(u),e=>{n(t.ssrRenderComponent(w,{key:e.id,sesion:e,onAbrir:abrirSesion},null,l))}),n("\x3c!--]--\x3e</div></div>")):n("\x3c!----\x3e"),s.unref(m).length>0&&("todas"===s.unref(d)||"pasadas"===s.unref(d))?(n('<div class="space-y-3"><h3 class="text-lg font-serif font-medium text-[#2D3748] flex items-center space-x-2"><svg class="w-5 h-5 text-[#2D3748]/50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Sesiones pasadas</span></h3><div class="space-y-3">\x3c!--[--\x3e'),t.ssrRenderList(s.unref(m),e=>{n(t.ssrRenderComponent(w,{key:e.id,sesion:e,pasada:!0,onAbrir:abrirSesion},null,l))}),n("\x3c!--]--\x3e</div></div>")):n("\x3c!----\x3e"),0===s.unref(x).length?n(t.ssrRenderComponent(b,{title:s.unref(f),description:s.unref(v)},{icon:s.withCtx((e,t,a,n)=>{if(!t)return[(s.openBlock(),s.createBlock("svg",{class:"w-16 h-16 text-[#5550F2] opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]))];t(`<svg class="w-16 h-16 text-[#5550F2] opacity-40" fill="none" stroke="currentColor" viewBox="0 0 24 24"${n}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"${n}></path></svg>`)}),_:1},l)):n("\x3c!----\x3e"),n("</div>")),n("</div>")}}}),p=d.setup;d.setup=(e,t)=>{const a=s.useSSRContext();return(a.modules||(a.modules=new Set)).add("pages/paciente/sesiones.vue"),p?p(e,t):void 0};export{d as default};
//# sourceMappingURL=sesiones-DiCB0V2V.mjs.map
