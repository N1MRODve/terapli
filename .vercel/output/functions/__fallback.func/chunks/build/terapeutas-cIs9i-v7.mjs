import{v as e,s as t}from"./server.mjs";import{u as s}from"./useSupabaseClient-DykwVqLQ.mjs";import{r}from"./CheckCircleIcon-CT9fzVFs.mjs";import{r as a}from"./UsersIcon-KidTHjLq.mjs";import{r as o}from"./XMarkIcon-DCLwyE-W.mjs";import"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../_/shared.cjs.prod.mjs";import"node:stream";import"devalue";import"@supabase/ssr";import"@vercel/analytics/nuxt";function render(t,s){return e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}const l=e.defineComponent({__name:"terapeutas",__ssrInlineRender:!0,setup(l){s();const i=e.ref(!0),n=e.ref(!1),d=e.ref(!1),p=e.ref(""),c=e.ref(""),u=e.ref([]),m=e.ref({nombreCompleto:"",email:"",password:"",telefono:""}),formatNumber=e=>null==e||isNaN(e)?"€0,00":e.toLocaleString("es-ES",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2});return(s,l,v,b)=>{l(`<div${t.ssrRenderAttrs(b)}><div class="mb-8 flex items-center justify-between"><div><h2 class="text-3xl font-bold text-gray-900 mb-2">Gestión de Terapeutas</h2><p class="text-gray-600">Administrar terapeutas y crear nuevos usuarios</p></div><button class="inline-flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-md transition-colors">`),l(t.ssrRenderComponent(e.unref(render),{class:"w-5 h-5"},null,v)),l("<span>Nueva Terapeuta</span></button></div>"),i.value?l('<div class="flex items-center justify-center py-24"><div class="text-center"><div class="w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"></div><p class="text-gray-600 font-medium">Cargando terapeutas...</p></div></div>'):(l('<div class="space-y-6">\x3c!--[--\x3e'),t.ssrRenderList(u.value,s=>{var a;l(`<div class="bg-white rounded-xl shadow-md border border-gray-200 p-6 hover:shadow-lg transition-shadow"><div class="flex items-start justify-between"><div class="flex items-center gap-4"><div class="w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg">${t.ssrInterpolate(s.iniciales)}</div><div><h3 class="text-xl font-bold text-gray-900">${t.ssrInterpolate(s.nombre)}</h3><p class="text-gray-600">${t.ssrInterpolate(s.email)}</p><div class="flex items-center gap-2 mt-2"><span class="inline-flex items-center gap-1 px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-semibold rounded-full">`),l(t.ssrRenderComponent(e.unref(r),{class:"w-3 h-3"},null,v)),l(` Activa </span></div></div></div><div class="grid grid-cols-4 gap-4"><div class="text-center"><div class="text-2xl font-bold text-gray-900">${t.ssrInterpolate(s.totalPacientes)}</div><div class="text-sm text-gray-600">Pacientes</div></div><div class="text-center"><div class="text-2xl font-bold text-emerald-600">${t.ssrInterpolate(s.citasRealizadas)}</div><div class="text-sm text-gray-600">Citas realizadas</div></div><div class="text-center bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-3 border border-blue-200"><div class="text-lg font-bold text-blue-900">${t.ssrInterpolate(formatNumber(s.revenueTerapeuta))}</div><div class="text-xs text-blue-700 font-medium">Terapeuta (70%)</div></div><div class="text-center bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-3 border border-purple-200"><div class="text-lg font-bold text-purple-900">${t.ssrInterpolate(formatNumber(s.revenueAdmin))}</div><div class="text-xs text-purple-700 font-medium">Comisión (30%)</div></div></div></div><div class="mt-4 pt-4 border-t border-gray-200"><div class="grid grid-cols-5 gap-4 text-sm"><div><span class="text-gray-600">Revenue total:</span><span class="ml-2 font-semibold text-indigo-600">${t.ssrInterpolate(formatNumber(s.revenue))}</span></div><div><span class="text-gray-600">Pacientes activos:</span><span class="ml-2 font-semibold text-gray-900">${t.ssrInterpolate(s.pacientesActivos)}</span></div><div><span class="text-gray-600">Ocupación:</span><span class="ml-2 font-semibold text-gray-900">${t.ssrInterpolate(s.ocupacion)}%</span></div><div><span class="text-gray-600">CLTV promedio:</span><span class="ml-2 font-semibold text-indigo-600">${t.ssrInterpolate(formatNumber(s.cltvPromedio))}</span></div><div><span class="text-gray-600">Miembro desde:</span><span class="ml-2 font-semibold text-gray-900">${t.ssrInterpolate((a=s.createdAt,new Date(a).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})))}</span></div></div></div></div>`)}),l("\x3c!--]--\x3e"),0===u.value.length?(l('<div class="text-center py-12"><div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">'),l(t.ssrRenderComponent(e.unref(a),{class:"w-8 h-8 text-gray-400"},null,v)),l('</div><p class="text-gray-600 mb-4">No hay terapeutas registradas</p><button class="inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg transition-colors">'),l(t.ssrRenderComponent(e.unref(render),{class:"w-5 h-5"},null,v)),l("<span>Crear primera terapeuta</span></button></div>")):l("\x3c!----\x3e"),l("</div>")),t.ssrRenderTeleport(l,s=>{n.value?(s('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6"><div class="flex items-center justify-between mb-6"><h3 class="text-2xl font-bold text-gray-900">Nueva Terapeuta</h3><button class="text-gray-400 hover:text-gray-600 transition-colors">'),s(t.ssrRenderComponent(e.unref(o),{class:"w-6 h-6"},null,v)),s(`</button></div><form class="space-y-4"><div><label class="block text-sm font-semibold text-gray-700 mb-2"> Nombre completo </label><input${t.ssrRenderAttr("value",m.value.nombreCompleto)} type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Ej: María García López"></div><div><label class="block text-sm font-semibold text-gray-700 mb-2"> Email </label><input${t.ssrRenderAttr("value",m.value.email)} type="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="maria@example.com"></div><div><label class="block text-sm font-semibold text-gray-700 mb-2"> Contraseña temporal </label><input${t.ssrRenderAttr("value",m.value.password)} type="password" required minlength="8" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Mínimo 8 caracteres"><p class="text-xs text-gray-500 mt-1"> La terapeuta deberá cambiar esta contraseña en su primer acceso </p></div><div><label class="block text-sm font-semibold text-gray-700 mb-2"> Teléfono </label><input${t.ssrRenderAttr("value",m.value.telefono)} type="tel" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="+52 123 456 7890"></div>`),p.value?s(`<div class="p-4 bg-red-50 border border-red-200 rounded-lg"><p class="text-sm text-red-700">${t.ssrInterpolate(p.value)}</p></div>`):s("\x3c!----\x3e"),c.value?s(`<div class="p-4 bg-emerald-50 border border-emerald-200 rounded-lg"><p class="text-sm text-emerald-700">${t.ssrInterpolate(c.value)}</p></div>`):s("\x3c!----\x3e"),s(`<div class="flex gap-3 pt-4"><button type="button" class="flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-lg transition-colors"${t.ssrIncludeBooleanAttr(d.value)?" disabled":""}> Cancelar </button><button type="submit" class="flex-1 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"${t.ssrIncludeBooleanAttr(d.value)?" disabled":""}>`),d.value?s('<span class="flex items-center justify-center gap-2"><div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div> Creando... </span>'):s("<span>Crear Terapeuta</span>"),s("</button></div></form></div></div>")):s("\x3c!----\x3e")},"body",!1,v),l("</div>")}}}),i=l.setup;l.setup=(t,s)=>{const r=e.useSSRContext();return(r.modules||(r.modules=new Set)).add("pages/admin/terapeutas.vue"),i?i(t,s):void 0};export{l as default};
//# sourceMappingURL=terapeutas-cIs9i-v7.mjs.map
