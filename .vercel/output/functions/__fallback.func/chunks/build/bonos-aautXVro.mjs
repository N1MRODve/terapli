import{v as e,a as s,s as t}from"./server.mjs";import{u as r}from"./useSupabaseClient-DykwVqLQ.mjs";import{u as a}from"./useSupabase-DfFg84CY.mjs";import{u as n}from"./useBonos-B2-LOzOF.mjs";import{r as o}from"./PlusIcon-CHLzv-V9.mjs";import{r as l}from"./TicketIcon-zZdrc71S.mjs";import{r as i}from"./ChevronRightIcon-4xxNHuWW.mjs";import{r as d}from"./CheckIcon-DNZT_3mm.mjs";import{r as p}from"./CheckCircleIcon-CT9fzVFs.mjs";import{r as c}from"./PencilIcon-BKWXEWgS.mjs";import{r as u}from"./TrashIcon-3HGFGGDp.mjs";import{r as m}from"./MagnifyingGlassIcon-GsbNDyPZ.mjs";import{r as x}from"./XMarkIcon-DCLwyE-W.mjs";import"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../_/shared.cjs.prod.mjs";import"../virtual/_commonjsHelpers.mjs";import"node:stream";import"../_/index2.mjs";import"@supabase/supabase-js";import"@vercel/analytics/nuxt";const g=e.defineComponent({__name:"bonos",__ssrInlineRender:!0,setup(g){s(),r(),a();const{calcularPorcentajeUso:f}=n(),b=e.ref("resumen"),y=e.ref([]),v=e.ref(!1),h=e.ref(null),w=e.ref({nombre:"",descripcion:"",sesiones:4,precio:160,frecuencia:"mensual"}),$=e.ref({semanal:40,quincenal:50,unica:60}),C=e.ref({semanal:40,quincenal:50,unica:60}),I=e.ref(!1),R=e.ref(!1),A=e.computed(()=>JSON.stringify($.value)!==JSON.stringify(C.value)),j=e.ref([]),P=e.ref(!1),_=e.ref(""),L=e.ref(""),q=e.computed(()=>{const e=new Map;for(const s of j.value){const t=s.tipo||"otro";e.has(t)||e.set(t,{tipo:t,pacientes:[],activos:0,completados:0,montoTotal:0,montoPendiente:0,precioPromedio:0,sesionesPromedio:0});const r=e.get(t);r.pacientes.push({bono_id:s.id,paciente_id:s.paciente_id,nombre:s.paciente_nombre||"Desconocido",sesiones_usadas:s.sesiones_totales-s.sesiones_restantes,sesiones_totales:s.sesiones_totales,estado:s.estado,monto:s.monto_total||0,pagado:s.pagado}),r.montoTotal+=s.monto_total||0,s.pagado||(r.montoPendiente+=s.monto_total||0),"activo"===s.estado&&r.activos++,"completado"===s.estado&&r.completados++}for(const s of e.values())if(s.pacientes.length>0){s.precioPromedio=s.montoTotal/s.pacientes.length;const e=s.pacientes.reduce((e,s)=>e+s.sesiones_totales,0);s.sesionesPromedio=Math.round(e/s.pacientes.length)}return Array.from(e.values()).sort((e,s)=>s.pacientes.length-e.pacientes.length)});e.computed(()=>j.value.filter(e=>"activo"===e.estado).length);const B=e.computed(()=>({activos:j.value.filter(e=>"activo"===e.estado).length,pendientes:j.value.filter(e=>"pendiente"===e.estado).length,completados:j.value.filter(e=>"completado"===e.estado).length,montoPendiente:j.value.filter(e=>!e.pagado).reduce((e,s)=>e+(s.monto_total||0),0)})),S=e.computed(()=>{let e=j.value;if(_.value){const s=_.value.toLowerCase();e=e.filter(e=>e.paciente_nombre?.toLowerCase().includes(s))}return L.value&&(e=e.filter(e=>e.estado===L.value)),e}),formatearPrecio=e=>e?.toFixed(2)||"0.00",frecuenciaLabel=e=>({semanal:"Semanal",quincenal:"Quincenal",mensual:"Mensual",cualquiera:"Cualquiera",otro:"Otro"}[e]||e||"Otro"),getIniciales=e=>e?e.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase():"?",getEstadoTexto=e=>({activo:"Activo",pendiente:"Pendiente",completado:"Completado",vencido:"Vencido",agotado:"Agotado"}[e]||e),getEstadoColorPunto=e=>({activo:"bg-green-500",pendiente:"bg-amber-500",completado:"bg-gray-400",vencido:"bg-red-500",agotado:"bg-gray-400"}[e]||"bg-gray-400"),getProgresoColor=e=>"activo"===e.estado?"bg-purple-500":"completado"===e.estado||"agotado"===e.estado?"bg-green-500":"bg-gray-400";return(s,r,a,n)=>{r(`<div${t.ssrRenderAttrs(n)}><header class="mb-6"><div class="flex items-center justify-between mb-4"><div class="flex items-center gap-6"><h1 class="text-2xl font-semibold text-gray-900">Bonos</h1><nav class="flex items-center gap-1 bg-gray-100 rounded-lg p-1"><button class="${t.ssrRenderClass(["resumen"===e.unref(b)?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900","px-3 py-1.5 text-sm font-medium rounded-md transition-all"])}"> Por Tipo <span class="${t.ssrRenderClass(["resumen"===e.unref(b)?"text-gray-500":"text-gray-400","ml-1 text-xs"])}">${t.ssrInterpolate(e.unref(q).length)}</span></button><button class="${t.ssrRenderClass(["bonos"===e.unref(b)?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900","px-3 py-1.5 text-sm font-medium rounded-md transition-all"])}"> Todos <span class="${t.ssrRenderClass(["bonos"===e.unref(b)?"text-gray-500":"text-gray-400","ml-1 text-xs"])}">${t.ssrInterpolate(e.unref(j).length)}</span></button><button class="${t.ssrRenderClass(["plantillas"===e.unref(b)?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900","px-3 py-1.5 text-sm font-medium rounded-md transition-all"])}"> Plantillas <span class="${t.ssrRenderClass(["plantillas"===e.unref(b)?"text-gray-500":"text-gray-400","ml-1 text-xs"])}">${t.ssrInterpolate(e.unref(y).length)}</span></button></nav></div>`),"plantillas"===e.unref(b)?(r('<button class="h-10 px-4 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2 shadow-sm">'),r(t.ssrRenderComponent(e.unref(o),{class:"w-4 h-4"},null,a)),r(" Nueva Plantilla </button>")):r("\x3c!----\x3e"),r("</div>"),"bonos"===e.unref(b)||"resumen"===e.unref(b)?r(`<div class="bg-white border border-gray-100 rounded-lg p-3 mb-4"><div class="flex flex-wrap items-center gap-x-6 gap-y-2 text-sm"><div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-green-500"></span><span class="text-gray-600">Activos:</span><span class="font-semibold text-gray-900">${t.ssrInterpolate(e.unref(B).activos)}</span></div><span class="text-gray-200">|</span><div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-amber-500"></span><span class="text-gray-600">Pendientes:</span><span class="font-semibold text-gray-900">${t.ssrInterpolate(e.unref(B).pendientes)}</span></div><span class="text-gray-200">|</span><div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-gray-400"></span><span class="text-gray-600">Completados:</span><span class="font-semibold text-gray-900">${t.ssrInterpolate(e.unref(B).completados)}</span></div><div class="ml-auto flex items-center gap-2 pl-4 border-l border-gray-200"><span class="text-gray-600">Por cobrar:</span><span class="font-bold text-green-600">${t.ssrInterpolate(formatearPrecio(e.unref(B).montoPendiente))}€</span></div></div></div>`):r("\x3c!----\x3e"),r("</header>"),"resumen"===e.unref(b)?(r('<div class="space-y-6">'),e.unref(P)?r('<div class="flex items-center justify-center py-20"><div class="w-8 h-8 border-2 border-purple-600 border-t-transparent rounded-full animate-spin"></div></div>'):0===e.unref(q).length?(r('<div class="bg-white border border-gray-100 rounded-lg py-12 text-center">'),r(t.ssrRenderComponent(e.unref(l),{class:"w-12 h-12 text-gray-300 mx-auto mb-3"},null,a)),r('<p class="text-gray-600 font-medium mb-1">Sin bonos asignados</p><p class="text-sm text-gray-400">Los bonos de tus pacientes apareceran aqui agrupados por tipo</p></div>')):(r('<div class="grid gap-4">\x3c!--[--\x3e'),t.ssrRenderList(e.unref(q),s=>{var n;r(`<div class="bg-white border border-gray-100 rounded-lg overflow-hidden"><div class="px-5 py-4 border-b border-gray-100 bg-gray-50/50"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="${t.ssrRenderClass([(n=s.tipo,{semanal:"bg-blue-100 text-blue-600",quincenal:"bg-purple-100 text-purple-600",mensual:"bg-amber-100 text-amber-600","5_sesiones":"bg-emerald-100 text-emerald-600","10_sesiones":"bg-teal-100 text-teal-600",personalizado:"bg-pink-100 text-pink-600",otro:"bg-gray-100 text-gray-600"}[n]||"bg-gray-100 text-gray-600"),"w-10 h-10 rounded-lg flex items-center justify-center"])}">`),r(t.ssrRenderComponent(e.unref(l),{class:"w-5 h-5"},null,a)),r(`</div><div><h3 class="font-semibold text-gray-900">${t.ssrInterpolate((e=>({semanal:"Bono Semanal",quincenal:"Bono Quincenal",mensual:"Bono Mensual","5_sesiones":"Bono 5 Sesiones","10_sesiones":"Bono 10 Sesiones",personalizado:"Bono Personalizado",otro:"Otros Bonos"}[e]||`Bono ${e.charAt(0).toUpperCase()+e.slice(1)}`))(s.tipo))}</h3><p class="text-sm text-gray-500">${t.ssrInterpolate(s.pacientes.length)} ${t.ssrInterpolate(1===s.pacientes.length?"paciente":"pacientes")}</p></div></div><div class="flex items-center gap-4 text-sm"><div class="text-right"><p class="text-gray-500">Activos</p><p class="font-semibold text-green-600">${t.ssrInterpolate(s.activos)}</p></div><div class="text-right"><p class="text-gray-500">Completados</p><p class="font-semibold text-gray-600">${t.ssrInterpolate(s.completados)}</p></div><div class="text-right"><p class="text-gray-500">Total facturado</p><p class="font-semibold text-gray-900">${t.ssrInterpolate(formatearPrecio(s.montoTotal))}€</p></div></div></div></div><div class="divide-y divide-gray-50">\x3c!--[--\x3e`),t.ssrRenderList(s.pacientes,s=>{r(`<div class="px-5 py-3 hover:bg-gray-50/50 transition-colors cursor-pointer flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-xs font-semibold">${t.ssrInterpolate(getIniciales(s.nombre))}</div><div><p class="text-sm font-medium text-gray-900">${t.ssrInterpolate(s.nombre)}</p><div class="flex items-center gap-2 text-xs text-gray-500"><span>${t.ssrInterpolate(s.sesiones_usadas)}/${t.ssrInterpolate(s.sesiones_totales)} sesiones</span><span class="text-gray-300">|</span><span class="${t.ssrRenderClass("activo"===s.estado?"text-green-600":"text-gray-500")}">${t.ssrInterpolate(getEstadoTexto(s.estado))}</span></div></div></div><div class="flex items-center gap-4"><div class="w-24 h-1.5 bg-gray-200 rounded-full overflow-hidden"><div class="${t.ssrRenderClass(["activo"===s.estado?"bg-purple-500":"bg-gray-400","h-full rounded-full transition-all"])}" style="${t.ssrRenderStyle({width:s.sesiones_usadas/s.sesiones_totales*100+"%"})}"></div></div><div class="text-right min-w-[80px]"><p class="text-sm font-medium text-gray-900">${t.ssrInterpolate(s.monto)}€</p><p class="${t.ssrRenderClass([s.pagado?"text-green-600":"text-amber-600","text-xs"])}">${t.ssrInterpolate(s.pagado?"Pagado":"Pendiente")}</p></div>`),r(t.ssrRenderComponent(e.unref(i),{class:"w-4 h-4 text-gray-400"},null,a)),r("</div></div>")}),r(`\x3c!--]--\x3e</div><div class="px-5 py-3 bg-gray-50/50 border-t border-gray-100 flex items-center justify-between text-sm"><div class="flex items-center gap-4"><span class="text-gray-500"> Precio promedio: <span class="font-medium text-gray-700">${t.ssrInterpolate(formatearPrecio(s.precioPromedio))}€</span></span><span class="text-gray-300">|</span><span class="text-gray-500"> Sesiones promedio: <span class="font-medium text-gray-700">${t.ssrInterpolate(s.sesionesPromedio)}</span></span></div><div class="flex items-center gap-2"><span class="text-gray-500">Por cobrar:</span><span class="font-semibold text-amber-600">${t.ssrInterpolate(formatearPrecio(s.montoPendiente))}€</span></div></div></div>`)}),r("\x3c!--]--\x3e</div>")),r("</div>")):r("\x3c!----\x3e"),"plantillas"===e.unref(b)?(r(`<div class="space-y-4"><div class="bg-white border border-gray-100 rounded-lg p-4"><div class="flex flex-wrap items-center gap-4"><span class="text-sm font-medium text-gray-700">Precios base:</span><div class="flex items-center gap-2"><label class="text-sm text-gray-500">Semanal</label><div class="relative"><input${t.ssrRenderAttr("value",e.unref($).semanal)} type="number" step="0.01" min="0" class="w-20 h-9 px-2 pr-6 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:ring-1 focus:ring-purple-500 focus:border-purple-500"><span class="absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400">€</span></div></div><span class="text-gray-300">|</span><div class="flex items-center gap-2"><label class="text-sm text-gray-500">Quincenal</label><div class="relative"><input${t.ssrRenderAttr("value",e.unref($).quincenal)} type="number" step="0.01" min="0" class="w-20 h-9 px-2 pr-6 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:ring-1 focus:ring-purple-500 focus:border-purple-500"><span class="absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400">€</span></div></div><span class="text-gray-300">|</span><div class="flex items-center gap-2"><label class="text-sm text-gray-500">Única</label><div class="relative"><input${t.ssrRenderAttr("value",e.unref($).unica)} type="number" step="0.01" min="0" class="w-20 h-9 px-2 pr-6 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:ring-1 focus:ring-purple-500 focus:border-purple-500"><span class="absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400">€</span></div></div><button${t.ssrIncludeBooleanAttr(e.unref(I))?" disabled":""} class="${t.ssrRenderClass([e.unref(A)?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-100 text-gray-500","ml-auto h-9 px-4 text-sm font-medium rounded-lg transition-colors flex items-center gap-2"])}">`),e.unref(I)||e.unref(R)?r("\x3c!----\x3e"):r(t.ssrRenderComponent(e.unref(d),{class:"w-4 h-4"},null,a)),e.unref(I)?r('<span class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></span>'):r("\x3c!----\x3e"),e.unref(R)?r(t.ssrRenderComponent(e.unref(p),{class:"w-4 h-4 text-green-500"},null,a)):r("\x3c!----\x3e"),r(` ${t.ssrInterpolate(e.unref(R)?"Guardado":e.unref(I)?"Guardando...":"Guardar")}</button></div></div><div class="bg-white border border-gray-100 rounded-lg overflow-hidden">`),0===e.unref(y).length?(r('<div class="py-12 text-center">'),r(t.ssrRenderComponent(e.unref(l),{class:"w-12 h-12 text-gray-300 mx-auto mb-3"},null,a)),r('<p class="text-gray-600 font-medium mb-1">Sin plantillas</p><p class="text-sm text-gray-400 mb-4">Crea plantillas para asignar bonos rápidamente</p><button class="text-sm text-purple-600 font-medium hover:text-purple-700"> + Crear primera plantilla </button></div>')):(r('<table class="w-full"><thead><tr class="border-b border-gray-100 bg-gray-50/50"><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Frecuencia</th><th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Sesiones</th><th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Precio</th><th class="px-4 py-3 w-20"></th></tr></thead><tbody class="divide-y divide-gray-50">\x3c!--[--\x3e'),t.ssrRenderList(e.unref(y),(s,n)=>{var o;r(`<tr class="hover:bg-gray-50/50 transition-colors"><td class="px-4 py-3"><div class="text-sm font-medium text-gray-900">${t.ssrInterpolate(s.nombre)}</div>`),s.descripcion?r(`<div class="text-xs text-gray-500">${t.ssrInterpolate(s.descripcion)}</div>`):r("\x3c!----\x3e"),r(`</td><td class="px-4 py-3"><span class="${t.ssrRenderClass([(o=s.frecuencia,{semanal:"bg-blue-100 text-blue-700",quincenal:"bg-purple-100 text-purple-700",mensual:"bg-amber-100 text-amber-700",cualquiera:"bg-gray-100 text-gray-700"}[o]||"bg-gray-100 text-gray-700"),"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium"])}">${t.ssrInterpolate(frecuenciaLabel(s.frecuencia))}</span></td><td class="px-4 py-3 text-center text-sm text-gray-600">${t.ssrInterpolate(s.sesiones)}</td><td class="px-4 py-3 text-right text-sm font-medium text-gray-900">${t.ssrInterpolate(s.precio)}€</td><td class="px-4 py-3"><div class="flex items-center justify-end gap-1"><button class="p-1.5 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded transition-colors">`),r(t.ssrRenderComponent(e.unref(c),{class:"w-4 h-4"},null,a)),r('</button><button class="p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors">'),r(t.ssrRenderComponent(e.unref(u),{class:"w-4 h-4"},null,a)),r("</button></div></td></tr>")}),r("\x3c!--]--\x3e</tbody></table>")),r("</div></div>")):r("\x3c!----\x3e"),"bonos"===e.unref(b)?(r(`<div class="space-y-4"><div class="flex flex-wrap items-center gap-3"><div class="relative flex-1 min-w-[200px] max-w-md"><input${t.ssrRenderAttr("value",e.unref(_))} type="text" placeholder="Buscar por paciente..." class="w-full h-10 px-4 pl-9 bg-white border border-gray-200 rounded-lg text-sm focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20">`),r(t.ssrRenderComponent(e.unref(m),{class:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,a)),r(`</div><select class="h-10 px-3 bg-white border border-gray-200 rounded-lg text-sm text-gray-700 focus:border-purple-500 focus:ring-1 focus:ring-purple-500/20"><option value=""${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(L))?t.ssrLooseContain(e.unref(L),""):t.ssrLooseEqual(e.unref(L),""))?" selected":""}>Todos</option><option value="activo"${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(L))?t.ssrLooseContain(e.unref(L),"activo"):t.ssrLooseEqual(e.unref(L),"activo"))?" selected":""}>Activos</option><option value="pendiente"${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(L))?t.ssrLooseContain(e.unref(L),"pendiente"):t.ssrLooseEqual(e.unref(L),"pendiente"))?" selected":""}>Pendientes</option><option value="completado"${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(L))?t.ssrLooseContain(e.unref(L),"completado"):t.ssrLooseEqual(e.unref(L),"completado"))?" selected":""}>Completados</option><option value="vencido"${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(L))?t.ssrLooseContain(e.unref(L),"vencido"):t.ssrLooseEqual(e.unref(L),"vencido"))?" selected":""}>Vencidos</option></select>`),e.unref(_)||e.unref(L)?r('<button class="h-10 px-3 text-sm text-gray-500 hover:text-gray-700"> Limpiar </button>'):r("\x3c!----\x3e"),r("</div>"),e.unref(P)?r('<div class="flex items-center justify-center py-20"><div class="w-8 h-8 border-2 border-purple-600 border-t-transparent rounded-full animate-spin"></div></div>'):(r('<div class="bg-white border border-gray-100 rounded-lg overflow-hidden">'),0===e.unref(S).length?(r('<div class="py-12 text-center">'),r(t.ssrRenderComponent(e.unref(l),{class:"w-12 h-12 text-gray-300 mx-auto mb-3"},null,a)),r(`<p class="text-gray-600 font-medium mb-1">${t.ssrInterpolate(e.unref(_)||e.unref(L)?"Sin resultados":"Sin bonos")}</p><p class="text-sm text-gray-400">${t.ssrInterpolate(e.unref(_)||e.unref(L)?"Prueba ajustando los filtros":"Los bonos de tus pacientes aparecerán aquí")}</p></div>`)):(r('<table class="w-full"><thead><tr class="border-b border-gray-100 bg-gray-50/50"><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Paciente</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo</th><th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Progreso</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estado</th><th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Monto</th><th class="px-4 py-3 w-10"></th></tr></thead><tbody class="divide-y divide-gray-50">\x3c!--[--\x3e'),t.ssrRenderList(e.unref(S),s=>{var n;r(`<tr class="hover:bg-gray-50/50 transition-colors cursor-pointer"><td class="px-4 py-3"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-xs font-semibold flex-shrink-0">${t.ssrInterpolate(getIniciales(s.paciente_nombre))}</div><span class="text-sm font-medium text-gray-900 truncate">${t.ssrInterpolate(s.paciente_nombre)}</span></div></td><td class="px-4 py-3"><span class="text-sm text-gray-600">${t.ssrInterpolate(frecuenciaLabel(s.tipo))}</span></td><td class="px-4 py-3"><div class="flex items-center gap-2 justify-center"><div class="w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden"><div class="${t.ssrRenderClass([getProgresoColor(s),"h-full rounded-full transition-all"])}" style="${t.ssrRenderStyle({width:`${e.unref(f)(s)}%`})}"></div></div><span class="text-xs text-gray-500">${t.ssrInterpolate(s.sesiones_totales-s.sesiones_restantes)}/${t.ssrInterpolate(s.sesiones_totales)}</span></div></td><td class="px-4 py-3"><span class="${t.ssrRenderClass([(n=s.estado,{activo:"text-green-600",pendiente:"text-amber-600",completado:"text-gray-600",vencido:"text-red-600",agotado:"text-gray-500"}[n]||"text-gray-600"),"inline-flex items-center gap-1.5 text-sm"])}"><span class="${t.ssrRenderClass([getEstadoColorPunto(s.estado),"w-1.5 h-1.5 rounded-full"])}"></span> ${t.ssrInterpolate(getEstadoTexto(s.estado))}</span></td><td class="px-4 py-3 text-right"><div class="text-sm font-medium text-gray-900">${t.ssrInterpolate(s.monto_total)}€</div><div class="${t.ssrRenderClass([s.pagado?"text-green-600":"text-amber-600","text-xs"])}">${t.ssrInterpolate(s.pagado?"Pagado":"Pendiente")}</div></td><td class="px-4 py-3 text-right">`),r(t.ssrRenderComponent(e.unref(i),{class:"w-4 h-4 text-gray-400"},null,a)),r("</td></tr>")}),r("\x3c!--]--\x3e</tbody></table>")),r("</div>")),r("</div>")):r("\x3c!----\x3e"),t.ssrRenderTeleport(r,s=>{e.unref(v)?(s(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"><div class="bg-white rounded-xl shadow-2xl w-full max-w-md"><div class="px-5 py-4 border-b border-gray-100 flex items-center justify-between"><h3 class="font-semibold text-gray-900">${t.ssrInterpolate(null!==e.unref(h)?"Editar Plantilla":"Nueva Plantilla")}</h3><button class="p-1 text-gray-400 hover:text-gray-600 rounded">`),s(t.ssrRenderComponent(e.unref(x),{class:"w-5 h-5"},null,a)),s(`</button></div><div class="p-5 space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">Nombre</label><input${t.ssrRenderAttr("value",e.unref(w).nombre)} type="text" placeholder="Ej: Bono Mensual" class="w-full h-10 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-1 focus:ring-purple-500 focus:border-purple-500"></div><div><label class="block text-sm font-medium text-gray-700 mb-1">Descripción (opcional)</label><input${t.ssrRenderAttr("value",e.unref(w).descripcion)} type="text" placeholder="Descripción breve..." class="w-full h-10 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-1 focus:ring-purple-500 focus:border-purple-500"></div><div class="grid grid-cols-2 gap-3"><div><label class="block text-sm font-medium text-gray-700 mb-1">Sesiones</label><input${t.ssrRenderAttr("value",e.unref(w).sesiones)} type="number" min="1" class="w-full h-10 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-1 focus:ring-purple-500 focus:border-purple-500"></div><div><label class="block text-sm font-medium text-gray-700 mb-1">Precio (€)</label><input${t.ssrRenderAttr("value",e.unref(w).precio)} type="number" step="0.01" min="0" class="w-full h-10 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-1 focus:ring-purple-500 focus:border-purple-500"></div></div><div><label class="block text-sm font-medium text-gray-700 mb-1">Frecuencia</label><select class="w-full h-10 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-1 focus:ring-purple-500 focus:border-purple-500"><option value="semanal"${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(w).frecuencia)?t.ssrLooseContain(e.unref(w).frecuencia,"semanal"):t.ssrLooseEqual(e.unref(w).frecuencia,"semanal"))?" selected":""}>Semanal</option><option value="quincenal"${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(w).frecuencia)?t.ssrLooseContain(e.unref(w).frecuencia,"quincenal"):t.ssrLooseEqual(e.unref(w).frecuencia,"quincenal"))?" selected":""}>Quincenal</option><option value="mensual"${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(w).frecuencia)?t.ssrLooseContain(e.unref(w).frecuencia,"mensual"):t.ssrLooseEqual(e.unref(w).frecuencia,"mensual"))?" selected":""}>Mensual</option><option value="cualquiera"${t.ssrIncludeBooleanAttr(Array.isArray(e.unref(w).frecuencia)?t.ssrLooseContain(e.unref(w).frecuencia,"cualquiera"):t.ssrLooseEqual(e.unref(w).frecuencia,"cualquiera"))?" selected":""}>Cualquiera</option></select></div></div><div class="px-5 py-4 border-t border-gray-100 flex items-center justify-end gap-3"><button class="h-10 px-4 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"> Cancelar </button><button${t.ssrIncludeBooleanAttr(!e.unref(w).nombre||!e.unref(w).sesiones||!e.unref(w).precio)?" disabled":""} class="h-10 px-4 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50">${t.ssrInterpolate(null!==e.unref(h)?"Guardar":"Crear")}</button></div></div></div>`)):s("\x3c!----\x3e")},"body",!1,a),r("</div>")}}}),f=g.setup;g.setup=(s,t)=>{const r=e.useSSRContext();return(r.modules||(r.modules=new Set)).add("pages/terapeuta/bonos.vue"),f?f(s,t):void 0};export{g as default};
//# sourceMappingURL=bonos-aautXVro.mjs.map
