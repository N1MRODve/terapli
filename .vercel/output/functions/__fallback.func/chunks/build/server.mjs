import e from"node:process";globalThis._importMeta_=globalThis._importMeta_||{url:"file:///_entry.js",env:e.env};import{defineComponent as t,inject as o,computed as a,unref as n,defineAsyncComponent as r,shallowRef as s,toRef as i,isRef as u,hasInjectionContext as l,getCurrentInstance as c,useSSRContext as p,h as d,Suspense as m,nextTick as h,mergeProps as f,provide as g,shallowReactive as y,ref as v,Fragment as x,createApp as b,onErrorCaptured as w,onServerPrefetch as j,createVNode as C,resolveDynamicComponent as _,reactive as k,effectScope as P,isReadonly as R,isShallow as N,isReactive as A,toRaw as S,withCtx as B,toDisplayString as H,getCurrentScope as O}from"vue";import{n as E,o as $,i as M,p as T,q as W,t as D,$ as U,v as F,x as I,a as L,c as z,s as K}from"../nitro/nitro.mjs";import{u as G,a as q,h as Y,b as Z}from"../routes/renderer.mjs";import{useRoute as V,RouterView as X,createMemoryHistory as J,createRouter as Q,START_LOCATION as ee}from"vue-router";import{createServerClient as te,parseCookieHeader as oe}from"@supabase/ssr";import{ssrRenderSlot as ae,ssrRenderSuspense as ne,ssrRenderComponent as re,ssrRenderVNode as se,ssrRenderAttrs as ie,ssrInterpolate as ue}from"vue/server-renderer";import{Analytics as le}from"@vercel/analytics/nuxt";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";globalThis.$fetch||(globalThis.$fetch=U.create({baseURL:Z()})),"global"in globalThis||(globalThis.global=globalThis);const ce={componentName:"NuxtLink"},pe="nuxt-app";function getNuxtAppCtx(e=pe){return D(e,{asyncContext:!1})}const de="__nuxt_plugin";function registerPluginHooks(e,t){t.hooks&&e.hooks.addHooks(t.hooks)}function defineNuxtPlugin(e){if("function"==typeof e)return e;const t=e._name||e.name;return delete e.name,Object.assign(e.setup||(()=>{}),e,{[de]:!0,_name:t})}function callWithNuxt(e,t,o){const fn=()=>t(),a=getNuxtAppCtx(e._id);return e.vueApp.runWithContext(()=>a.callAsync(e,fn))}function useNuxtApp(e){const t=function(e){let t;return l()&&(t=c()?.appContext.app.$nuxt),t||=getNuxtAppCtx(e).tryUse(),t||null}(e);if(!t)throw new Error("[nuxt] instance unavailable");return t}function useRuntimeConfig(e){return useNuxtApp().$config}function defineGetter(e,t,o){Object.defineProperty(e,t,{get:()=>o})}const me=Symbol("layout-meta"),he=Symbol("route");globalThis._importMeta_.url.replace(/\/app\/.*$/,"/");const useRouter=()=>useNuxtApp()?.$router,useRoute=()=>l()?o(he,useNuxtApp()._route):useNuxtApp()._route;function defineNuxtRouteMiddleware(e){return e}const fe=/"/g,navigateTo=(e,t)=>{e||="/";const o="string"==typeof e?e:"path"in e?resolveRouteObject(e):useRouter().resolve(e).href,a=E(o,{acceptRelative:!0}),n=t?.external||a;if(n){if(!t?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:e}=new URL(o,"http://localhost");if(e&&$(e))throw new Error(`Cannot navigate to a URL with '${e}' protocol.`)}const r=(()=>{try{if(useNuxtApp()._processingMiddleware)return!0}catch{return!1}return!1})(),s=useRouter(),i=useNuxtApp();if(i.ssrContext){const u="string"==typeof e||n?o:s.resolve(e).fullPath||"/",l=n?o:M(useRuntimeConfig().app.baseURL,u),redirect=async function(e){await i.callHook("app:redirected");const o=l.replace(fe,"%22"),n=function(e,t=!1){const o=new URL(e,"http://localhost");if(!t)return o.pathname+o.search+o.hash;if(e.startsWith("//"))return o.toString().replace(o.protocol,"");return o.toString()}(l,a);return i.ssrContext._renderResponse={statusCode:W(t?.redirectCode||302,302),body:`<!DOCTYPE html><html><head><meta http-equiv="refresh" content="0; url=${o}"></head></html>`,headers:{location:n}},e};return!n&&r?(s.afterEach(e=>e.fullPath===u?redirect(!1):void 0),e):redirect(!r&&void 0)}return n?(i._scope.stop(),t?.replace?(void 0).replace(o):(void 0).href=o,r?!!i.isHydrating&&new Promise(()=>{}):Promise.resolve()):t?.replace?s.replace(e):s.push(e)};function resolveRouteObject(e){return T(e.path||"",e.query||{})+(e.hash||"")}const ge="__nuxt_error",useError=()=>i(useNuxtApp().payload,"error"),showError=e=>{const t=createError(e);try{const e=useError();0,e.value||=t}catch{throw t}return t},isNuxtError=e=>!!e&&"object"==typeof e&&ge in e,createError=e=>{const t=z(e);return Object.defineProperty(t,ge,{value:!0,configurable:!1,writable:!1}),t},ye=defineNuxtPlugin({name:"nuxt:head",enforce:"pre",setup(e){const t=e.ssrContext.head;e.vueApp.use(t)}});function toArray(e){return Array.isArray(e)?e:[e]}const ve=[{name:"index",path:"/",meta:{middleware:async()=>navigateTo("/login")}||{},component:()=>import("./index-uYJ1BWrV.mjs")},{name:"login",path:"/login",meta:{layout:!1}||{},component:()=>import("./login-xDhl9wn0.mjs")},{name:"contacto",path:"/contacto",meta:{layout:"default"}||{},component:()=>import("./contacto-CBH1ldJV.mjs")},{name:"dashboard",path:"/dashboard",meta:{middleware:["auth","auth-role"]},component:()=>import("./dashboard-Ds6YnnqB.mjs")},{name:"admin",path:"/admin",meta:{...{layout:"admin"}||{},middleware:["admin-auth"]},component:()=>import("./index-Bfovy6GI.mjs")},{name:"agenda",path:"/agenda",meta:{...{layout:"terapeuta"}||{},middleware:"auth"},component:()=>import("./index-DitcmX_u.mjs")},{name:"legal-cookies",path:"/legal/cookies",component:()=>import("./cookies-U22c74Z-.mjs")},{name:"paciente-bono",path:"/paciente/bono",meta:{...{layout:"paciente"}||{},middleware:"auth"},component:()=>import("./bono-DyhzyBNH.mjs")},{name:"admin-finanzas",path:"/admin/finanzas",meta:{...{layout:"admin"}||{},middleware:["admin-auth"]},component:()=>import("./finanzas-DACMPLO4.mjs")},{name:"ejemplo-agenda",path:"/ejemplo-agenda",meta:{middleware:"auth"},component:()=>import("./ejemplo-agenda-lg0ptvuU.mjs")},{name:"paciente",path:"/paciente",meta:{middleware:"auth"},component:()=>import("./index-D9MZQO-X.mjs")},{name:"admin-pacientes",path:"/admin/pacientes",meta:{...{layout:"admin"}||{},middleware:["admin-auth"]},component:()=>import("./pacientes-B5-hIXsz.mjs")},{name:"terapeuta-login",path:"/terapeuta/login",meta:{...{layout:!1}||{},middleware:[]},component:()=>import("./login-DTRO0pf4.mjs")},{name:"admin-terapeutas",path:"/admin/terapeutas",meta:{...{layout:"admin"}||{},middleware:["admin-auth"]},component:()=>import("./terapeutas-FTBnv2XW.mjs")},{name:"legal-privacidad",path:"/legal/privacidad",component:()=>import("./privacidad-BFJ4RlYb.mjs")},{name:"terapeuta-agenda",path:"/terapeuta/agenda",meta:{...{layout:"terapeuta"}||{},middleware:"auth"},component:()=>import("./agenda-Bt7tcMI4.mjs")},{name:"legal-aviso-legal",path:"/legal/aviso-legal",component:()=>import("./aviso-legal-C1xpsvGU.mjs")},{name:"paciente-mensajes",path:"/paciente/mensajes",meta:{...{layout:"paciente"}||{},middleware:"auth"},component:()=>import("./mensajes-I9VgYl8k.mjs")},{name:"paciente-recursos",path:"/paciente/recursos",meta:{...{layout:"paciente"}||{},middleware:"auth"},component:()=>import("./recursos-yNY2-4tu.mjs")},{name:"paciente-sesiones",path:"/paciente/sesiones",meta:{...{layout:"paciente"}||{},middleware:"auth"},component:()=>import("./sesiones-BXjtKdni.mjs")},{name:"coordinacion-login",path:"/coordinacion/login",meta:{layout:!1}||{},component:()=>import("./login-fb5OVH1u.mjs")},{name:"coordinacion-pagos",path:"/coordinacion/pagos",component:()=>import("./pagos-CaKINd8Y.mjs")},{name:"coordinadora-pagos",path:"/coordinadora/pagos",meta:{...{layout:"coordinadora"}||{},middleware:["auth","role-coordinadora"]},component:()=>import("./pagos-BAbrN8sF.mjs")},{name:"paciente-dashboard",path:"/paciente/dashboard",meta:{...{layout:"paciente"}||{},middleware:"auth"},component:()=>import("./dashboard-BblVlZyU.mjs")},{name:"terapeuta-mensajes",path:"/terapeuta/mensajes",meta:{...{layout:"terapeuta"}||{},middleware:"auth"},component:()=>import("./mensajes-D4Gefxrh.mjs")},{name:"terapeuta-recursos",path:"/terapeuta/recursos",meta:{...{layout:"terapeuta"}||{},middleware:"auth"},component:()=>import("./recursos-DBFdoN0-.mjs")},{name:"coordinacion-agenda",path:"/coordinacion/agenda",meta:{layout:"coordinacion"}||{},component:()=>import("./agenda-DDKzFh-k.mjs")},{name:"coordinadora-agenda",path:"/coordinadora/agenda",meta:{...{layout:"coordinadora"}||{},middleware:["auth","role-coordinadora"]},component:()=>import("./agenda-CsZrMeQX.mjs")},{name:"terapeuta-dashboard",path:"/terapeuta/dashboard",meta:{...{layout:"terapeuta"}||{},middleware:["auth-terapeuta"]},component:()=>import("./dashboard-BIPAW-7u.mjs")},{name:"terapeuta-pacientes",path:"/terapeuta/pacientes",meta:{layout:"terapeuta"}||{},component:()=>import("./pacientes-DXHzeU7x.mjs"),children:[{name:"terapeuta-pacientes-id",path:":id()",meta:{layout:"terapeuta"}||{},component:()=>import("./_id_-BJ7z77Gn.mjs"),children:[{name:"terapeuta-pacientes-id-bonos",path:"bonos",meta:{layout:"terapeuta"}||{},component:()=>import("./bonos-BtuNpMz0.mjs")}]}]},{name:"coordinacion-mensajes",path:"/coordinacion/mensajes",component:()=>import("./mensajes-CZHh3GHH.mjs")},{name:"coordinadora-mensajes",path:"/coordinadora/mensajes",meta:{...{layout:"coordinadora"}||{},middleware:["auth","role-coordinadora"]},component:()=>import("./mensajes-KCUB3WM6.mjs")},{name:"coordinacion-dashboard",path:"/coordinacion/dashboard",component:()=>import("./dashboard-Dmo1jWes.mjs")},{name:"coordinadora-dashboard",path:"/coordinadora/dashboard",meta:{...{layout:"coordinadora"}||{},middleware:["auth","role-coordinadora"]},component:()=>import("./dashboard-B4pkmoPy.mjs")},{name:"coordinadora-pacientes",path:"/coordinadora/pacientes",meta:{...{layout:"coordinadora"}||{},middleware:["auth","role-coordinadora"]},component:()=>import("./pacientes-3A9OFe6Y.mjs"),children:[{name:"coordinadora-pacientes-id",path:":id()",meta:{...{layout:"coordinadora"}||{},middleware:["auth","role-coordinadora"]},component:()=>import("./_id_-BnwHIUye.mjs")},{name:"coordinadora-pacientes-nuevo",path:"nuevo",meta:{...{layout:"coordinadora"}||{},middleware:["auth","role-coordinadora"]},component:()=>import("./nuevo-CIOgFNyo.mjs")}]},{name:"ejemplo-sistema-diseno",path:"/ejemplo-sistema-diseno",component:()=>import("./ejemplo-sistema-diseno-DvvUhV3B.mjs")},{name:"terapeuta-configuracion",path:"/terapeuta/configuracion",meta:{layout:"terapeuta"}||{},component:()=>import("./configuracion-D2kZ1yKy.mjs")},{name:"terapeuta-sesiones-id",path:"/terapeuta/sesiones/:id()",meta:{...{layout:"terapeuta"}||{},middleware:["auth-terapeuta"]},component:()=>import("./_id_-Dvo9NGu_.mjs")},{name:"terapeuta-sesiones",path:"/terapeuta/sesiones",meta:{...{layout:"terapeuta"}||{},middleware:"auth"},component:()=>import("./index-BH_It0Fe.mjs")},{name:"coordinadora-pacientes-old",path:"/coordinadora/pacientes-old",meta:{...{layout:"coordinadora"}||{},middleware:["auth","role-coordinadora"]},component:()=>import("./pacientes-old-C9Bhntj-.mjs")},{name:"coordinadora-recordatorios",path:"/coordinadora/recordatorios",meta:{...{layout:"coordinadora"}||{},middleware:["auth","role-coordinadora"]},component:()=>import("./recordatorios-DSvEb2sg.mjs")},{name:"coordinadora-confirmaciones",path:"/coordinadora/confirmaciones",meta:{...{layout:"coordinadora"}||{},middleware:["auth","role-coordinadora"]},component:()=>import("./confirmaciones-vC-6ztDD.mjs")},{name:"coordinadora-notificaciones",path:"/coordinadora/notificaciones",meta:{...{layout:"dashboard"}||{},middleware:"auth"},component:()=>import("./notificaciones-BlpKFYhv.mjs")}],xe=/(:\w+)\([^)]+\)/g,be=/(:\w+)[?+*]/g,we=/:\w+/g;function generateRouteKey(e){const t=e?.meta.key??e.path.replace(xe,"$1").replace(be,"$1").replace(we,t=>e.params[t.slice(1)]?.toString()||"");return"function"==typeof t?t(e):t}function _getHashElementScrollMarginTop(e){try{const t=(void 0).querySelector(e);if(t)return(Number.parseFloat(getComputedStyle(t).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle((void 0).documentElement).scrollPaddingTop)||0)}catch{}return 0}function _calculatePosition(e,t,o,a){if(o)return o;const n=function(e,t){return e!==t&&t!==ee&&(generateRouteKey(e)!==generateRouteKey(t)||!e.matched.every((e,o)=>e.components&&e.components.default===t.matched[o]?.components?.default))}(e,t);return e.hash?{el:e.hash,top:_getHashElementScrollMarginTop(e.hash),behavior:n?a:"instant"}:{left:0,top:0}}const je={scrollBehaviorType:"smooth",hashMode:!1,...{scrollBehavior(e,t,o){const a=useNuxtApp(),n=useRouter().options?.scrollBehaviorType??"auto";if(e.path.replace(/\/$/,"")===t.path.replace(/\/$/,""))return t.hash&&!e.hash?{left:0,top:0}:!!e.hash&&{el:e.hash,top:_getHashElementScrollMarginTop(e.hash),behavior:n};if(!1===("function"==typeof e.meta.scrollToTop?e.meta.scrollToTop(e,t):e.meta.scrollToTop))return!1;const r=a._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(s=>{t!==ee?a.hooks.hookOnce(r,()=>{requestAnimationFrame(()=>s(_calculatePosition(e,t,o,n)))}):s(_calculatePosition(e,t,o,n))})}}};function useState(...e){const t="string"==typeof e[e.length-1]?e.pop():void 0;"string"!=typeof e[0]&&e.unshift(t);const[o,a]=e;if(!o||"string"!=typeof o)throw new TypeError("[nuxt] [useState] key must be a string: "+o);if(void 0!==a&&"function"!=typeof a)throw new Error("[nuxt] [useState] init must be a function: "+a);const n="$s"+o,r=useNuxtApp(),s=i(r.payload.state,n);if(void 0===s.value&&a){const e=a();if(u(e))return r.payload.state[n]=e,e;s.value=e}return s}const useSupabaseUser=()=>useState("supabase_user",()=>null),Ce=[defineNuxtRouteMiddleware(async(e,t)=>{let o,a;if(!e.meta?.validate)return;const n=([o,a]=I(()=>Promise.resolve(e.meta.validate(e))),o=await o,a(),o);if(!0===n)return;return createError({fatal:!1,statusCode:n&&n.statusCode||404,statusMessage:n&&n.statusMessage||`Page Not Found: ${e.fullPath}`,data:{path:e.fullPath}})}),defineNuxtRouteMiddleware(async e=>{if(!e.path.startsWith("/coordinacion"))return;if("/coordinacion/login"===e.path)return;const t=useSupabaseUser();if(!t.value)return navigateTo("/coordinacion/login");try{const e=t.value.user_metadata||{},o=t.value.app_metadata||{};return"coordinacion"!==(e.rol||o.rol)?(console.warn("Usuario intentó acceder a coordinación sin permisos"),navigateTo("/")):void 0}catch(e){return console.error("Error en middleware de coordinación:",e),navigateTo("/coordinacion/login")}})],_e={"admin-auth":()=>import("./admin-auth-DeyQ5VoZ.mjs"),"auth-role":()=>import("./auth-role-Nh6pnQfp.mjs"),"auth-terapeuta":()=>import("./auth-terapeuta-Uctz27u8.mjs"),auth:()=>import("./auth-QZGIClgX.mjs"),"role-coordinadora":()=>import("./role-coordinadora-Bb33_I3j.mjs")};async function fetchWithRetry(e,t){for(let o=1;o<=3;o++)try{return await fetch(e,t)}catch(a){if(t?.signal?.aborted)throw a;if(3===o)throw console.error(`Error fetching request ${e}`,a,t),a;console.warn(`Retrying fetch attempt ${o+1} for request: ${e}`),await new Promise(e=>setTimeout(e,100*o))}throw new Error("Unreachable code")}function setCookies(e,t){const o=e.node.res,headersWritable=()=>!o.headersSent&&!o.writableEnded;if(headersWritable())for(const{name:o,value:a,options:n}of t){if(!headersWritable())break;K(e,o,a,n)}}const serverSupabaseClient=async e=>{if(!e.context._supabaseClient){const{url:t,key:o,cookiePrefix:a,cookieOptions:n,clientOptions:{auth:r={},global:s={}}}=useRuntimeConfig().public.supabase;e.context._supabaseClient=te(t,o,{auth:r,cookies:{getAll:()=>oe(L(e,"Cookie")??""),setAll:t=>setCookies(e,t)},cookieOptions:{...n,name:a},global:{fetch:fetchWithRetry,...s}})}return e.context._supabaseClient},serverSupabaseUser=async e=>{const t=await serverSupabaseClient(e),{data:o,error:a}=await t.auth.getClaims();if(a)throw z({statusMessage:a?.message});return o?.claims??null},serverSupabaseSession=async e=>{const t=await serverSupabaseClient(e),{data:{session:o},error:a}=await t.auth.getSession();if(a)throw z({statusMessage:a?.message});return delete o?.user,o};function injectHead(e){const t=e||useNuxtApp();return t.ssrContext?.head||t.runWithContext(()=>{if(l()){const e=o(Y);if(!e)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return e}})}function useHead(e,t={}){const o=t.head||injectHead(t.nuxt);return q(e,{head:o,...t})}function useSeoMeta(e,t={}){const o=t.head||injectHead(t.nuxt);return G(e,{head:o,...t})}function definePayloadReducer(e,t){useNuxtApp().ssrContext._payloadReducers[e]=t}const ke=[["NuxtError",e=>isNuxtError(e)&&e.toJSON()],["EmptyShallowRef",e=>u(e)&&N(e)&&!e.value&&("bigint"==typeof e.value?"0n":JSON.stringify(e.value)||"_")],["EmptyRef",e=>u(e)&&!e.value&&("bigint"==typeof e.value?"0n":JSON.stringify(e.value)||"_")],["ShallowRef",e=>u(e)&&N(e)&&e.value],["ShallowReactive",e=>A(e)&&N(e)&&S(e)],["Ref",e=>u(e)&&e.value],["Reactive",e=>A(e)&&S(e)]],Pe=[ye,defineNuxtPlugin({name:"nuxt:router",enforce:"pre",async setup(e){let t,o,a=useRuntimeConfig().app.baseURL;const n=je.history?.(a)??J(a),r=je.routes?([t,o]=I(()=>je.routes(ve)),t=await t,o(),t??ve):ve;let i;const u=Q({...je,scrollBehavior:(e,t,o)=>{if(t!==ee){if(je.scrollBehavior){if(u.options.scrollBehavior=je.scrollBehavior,"scrollRestoration"in(void 0).history){const e=u.beforeEach(()=>{e(),(void 0).history.scrollRestoration="manual"})}return je.scrollBehavior(e,ee,i||o)}}else i=o},history:n,routes:r});e.vueApp.use(u);const l=s(u.currentRoute.value);u.afterEach((e,t)=>{l.value=t}),Object.defineProperty(e.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const c=e.ssrContext.url,p=s(u.currentRoute.value),syncCurrentRoute=()=>{p.value=u.currentRoute.value};e.hook("page:finish",syncCurrentRoute),u.afterEach((e,t)=>{e.matched[e.matched.length-1]?.components?.default===t.matched[t.matched.length-1]?.components?.default&&syncCurrentRoute()});const d={};for(const e in p.value)Object.defineProperty(d,e,{get:()=>p.value[e],enumerable:!0});e._route=y(d),e._middleware||={global:[],named:{}},e.ssrContext?.islandContext||u.afterEach(async(t,o,a)=>{delete e._processingMiddleware,a&&await e.callHook("page:loading:end"),4!==a?.type&&t.redirectedFrom&&t.fullPath!==c&&await e.runWithContext(()=>navigateTo(t.fullPath||"/"))});try{[t,o]=I(()=>u.push(c)),await t,o(),[t,o]=I(()=>u.isReady()),await t,o()}catch(a){[t,o]=I(()=>e.runWithContext(()=>showError(a))),await t,o()}const m=u.currentRoute.value;if(syncCurrentRoute(),e.ssrContext?.islandContext)return{provide:{router:u}};const h=e.payload.state._layout;return u.beforeEach(async(t,o)=>{if(await e.callHook("page:loading:start"),t.meta=k(t.meta),e.isHydrating&&h&&!R(t.meta.layout)&&(t.meta.layout=h),e._processingMiddleware=!0,!e.ssrContext?.islandContext){const a=new Set([...Ce,...e._middleware.global]);for(const e of t.matched){const t=e.meta.middleware;if(t)for(const e of toArray(t))a.add(e)}for(const n of a){const a="string"==typeof n?e._middleware.named[n]||await(_e[n]?.().then(e=>e.default||e)):n;if(!a)throw new Error(`Unknown route middleware: '${n}'.`);try{0;const n=await e.runWithContext(()=>a(t,o));if(!1===n||n instanceof Error){const t=n||createError({statusCode:404,statusMessage:`Page Not Found: ${c}`});return await e.runWithContext(()=>showError(t)),!1}if(!0===n)continue;if(!1===n)return n;if(n)return isNuxtError(n)&&n.fatal&&await e.runWithContext(()=>showError(n)),n}catch(t){const o=createError(t);return o.fatal&&await e.runWithContext(()=>showError(o)),o}}}}),u.onError(async()=>{delete e._processingMiddleware,await e.callHook("page:loading:end")}),u.afterEach(t=>{if(0===t.matched.length)return e.runWithContext(()=>showError(createError({statusCode:404,fatal:!1,statusMessage:`Page not found: ${t.fullPath}`,data:{path:t.fullPath}})))}),e.hooks.hookOnce("app:created",async()=>{try{"name"in m&&(m.name=void 0),await u.replace({...m,force:!0}),u.options.scrollBehavior=je.scrollBehavior}catch(t){await e.runWithContext(()=>showError(t))}}),{provide:{router:u}}}}),defineNuxtPlugin({name:"supabase",enforce:"pre",async setup({provide:e}){let t,o;const{url:a,key:n,cookiePrefix:r,useSsrCookies:s,cookieOptions:i,clientOptions:u}=useRuntimeConfig().public.supabase,l=(c||=useNuxtApp(),c.ssrContext?.event);var c;if(e("supabase",{client:te(a,n,{...u,cookies:{getAll:()=>oe(L(l,"Cookie")??""),setAll:e=>setCookies(l,e)},cookieOptions:{...i,name:r},global:{fetch:fetchWithRetry,...u.global}})}),s){const[e,a]=([t,o]=I(()=>Promise.all([serverSupabaseSession(l).catch(()=>null),serverSupabaseUser(l).catch(()=>null)])),t=await t,o(),t);useState("supabase_session",()=>null).value=e,useSupabaseUser().value=a}}}),defineNuxtPlugin({name:"nuxt:revive-payload:server",setup(){for(const[e,t]of ke)definePayloadReducer(e,t)}}),defineNuxtPlugin({name:"nuxt:global-components"}),defineNuxtPlugin(()=>({provide:{pwaIcons:{transparent:{},maskable:{},favicon:{},apple:{},appleSplashScreen:{}}}}))],Re=Object.assign({name:"NuxtErrorBoundary",inheritAttrs:!1},{__name:"NuxtErrorBoundary",__ssrInlineRender:!0,emits:["error"],setup(e,{expose:t,emit:o}){const a=s(null);function clearError(){a.value=null}return t({error:a,clearError:clearError}),(e,t,o,n)=>{a.value?ae(e.$slots,"error",{error:a.value,clearError:clearError},null,t,o):ae(e.$slots,"default",{},null,t,o)}}}),Ne=Re.setup;Re.setup=(e,t)=>{const o=p();return(o.modules||(o.modules=new Set)).add("node_modules/nuxt/dist/app/components/nuxt-error-boundary.vue"),Ne?Ne(e,t):void 0};const Ae={admin:r(()=>import("./admin-D2Y-ikPK.mjs").then(e=>e.default||e)),coordinacion:r(()=>import("./coordinacion-BXrZ0kId.mjs").then(e=>e.default||e)),coordinadora:r(()=>import("./coordinadora-BCniHieJ.mjs").then(e=>e.default||e)),default:r(()=>import("./default-Br7QrZoL.mjs").then(e=>e.default||e)),paciente:r(()=>import("./paciente-Cx4BO2uM.mjs").then(e=>e.default||e)),terapeuta:r(()=>import("./terapeuta-NMDrUiMM.mjs").then(e=>e.default||e))},Se=t({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup:(e,t)=>()=>d(Ae[e.name],e.layoutProps,t.slots)}),Be={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},He=t({name:"NuxtLayout",inheritAttrs:!1,props:Be,setup(e,t){const r=useNuxtApp(),i=o(he),u=!i||i===useRoute()?V():i,l=a(()=>{let t=n(e.name)??u?.meta.layout??"default";return t&&!(t in Ae)&&e.fallback&&(t=n(e.fallback)),t}),c=s();t.expose({layoutRef:c});const p=r.deferHydration();let g;return()=>{l.value&&l.value;const o=u?.meta.layoutTransition??false,a=g;return g=l.value,(n={default:()=>d(m,{suspensible:!0,onResolve:()=>{h(p)}},{default:()=>d(Oe,{layoutProps:f(t.attrs,{ref:c}),key:l.value||void 0,name:l.value,shouldProvide:!e.name,isRenderingNewLayout:e=>e!==a&&e===l.value,hasTransition:!!o},t.slots)})},{default:()=>n.default?.()}).default();var n}}}),Oe=t({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(e,t){const a=e.name;e.shouldProvide&&g(me,{isCurrent:e=>a===(e.meta.layout??"default")});const n=o(he);if(n&&n===useRoute()){const t=V(),o={};for(const a in t){const r=a;Object.defineProperty(o,r,{enumerable:!0,get:()=>e.isRenderingNewLayout(e.name)?t[r]:n[r]})}g(he,y(o))}return()=>!a||"string"==typeof a&&!(a in Ae)?t.slots.default?.():d(Se,{key:a,layoutProps:e.layoutProps,name:a},t.slots)}}),Ee=((e="RouteProvider")=>t({name:e,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const t=e.renderKey,o=e.route,a={};for(const n in e.route)Object.defineProperty(a,n,{get:()=>t===e.renderKey?e.route[n]:o[n],enumerable:!0});return g(he,y(a)),()=>e.vnode?d(e.vnode,{ref:e.vnodeRef}):e.vnode}}))(),$e=t({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:t,slots:a,expose:n}){const r=useNuxtApp(),s=v();return o(he,null),n({pageRef:s}),o(me,null),r.deferHydration(),()=>d(X,{name:e.name,route:e.route,...t},{default:e=>d(m,{suspensible:!0},{default:()=>d(Ee,{vnode:a.default?normalizeSlot(a.default,e):e.Component,route:e.route,vnodeRef:s})})})}});function normalizeSlot(e,t){const o=e(t);return 1===o.length?d(o[0]):d(x,void 0,o)}const Me={__name:"app",__ssrInlineRender:!0,setup:e=>(v(!1),w((e,t,o)=>(console.error("Error capturado en app:",e,o),!1)),useHead({meta:[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"default"},{name:"apple-mobile-web-app-title",content:"Teraplí"},{name:"mobile-web-app-capable",content:"yes"},{name:"theme-color",content:"#D8AFA0"}],link:[{rel:"apple-touch-icon",href:"/icons/icon-512x512.png"},{rel:"apple-touch-icon",sizes:"192x192",href:"/icons/icon-192x192.png"},{rel:"apple-touch-icon",sizes:"512x512",href:"/icons/icon-512x512.png"}]}),v(!1),(e,t,o,a)=>{const r=Re,s=He,i=$e;t(`<div${ie(f({class:"bg-fondo min-h-screen"},a))}>`),t(re(r,null,{error:B(({error:t},o,a,n)=>{if(!o)return[C("div",{class:"min-h-screen flex items-center justify-center bg-fondo"},[C("div",{class:"text-center p-8"},[C("h1",{class:"text-2xl font-semibold text-cafe mb-4"},"Oops! Algo salió mal"),C("p",{class:"text-cafe/70 mb-6"},"Ha ocurrido un error inesperado. Por favor, recarga la página."),C("button",{onClick:t=>e.$router.go(0),class:"btn btn-primary"}," Recargar página ",8,["onClick"]),C("details",{class:"mt-4 text-xs text-cafe/50 cursor-pointer"},[C("summary",null,"Detalles del error"),C("pre",{class:"mt-2 text-left bg-cafe/5 p-3 rounded"},H(t),1)])])])];o(`<div class="min-h-screen flex items-center justify-center bg-fondo"${n}><div class="text-center p-8"${n}><h1 class="text-2xl font-semibold text-cafe mb-4"${n}>Oops! Algo salió mal</h1><p class="text-cafe/70 mb-6"${n}>Ha ocurrido un error inesperado. Por favor, recarga la página.</p><button class="btn btn-primary"${n}> Recargar página </button><details class="mt-4 text-xs text-cafe/50 cursor-pointer"${n}><summary${n}>Detalles del error</summary><pre class="mt-2 text-left bg-cafe/5 p-3 rounded"${n}>${ue(t)}</pre></details></div></div>`)}),default:B((e,t,o,a)=>{if(!t)return[C(s,null,{default:B(()=>[C(i,{transition:{name:"fade-route",mode:"out-in"}})]),_:1})];t(re(s,null,{default:B((e,t,o,a)=>{if(!t)return[C(i,{transition:{name:"fade-route",mode:"out-in"}})];t(re(i,{transition:{name:"fade-route",mode:"out-in"}},null,o,a))}),_:1},o,a))}),_:1},o)),t(re(n(le),null,null,o)),t("</div>")})},Te=Me.setup;Me.setup=(e,t)=>{const o=p();return(o.modules||(o.modules=new Set)).add("app.vue"),Te?Te(e,t):void 0};const We={__name:"nuxt-error-page",__ssrInlineRender:!0,props:{error:Object},setup(e){const t=e.error;t.stack&&t.stack.split("\n").splice(1).map(e=>({text:e.replace("webpack:/","").replace(".vue",".js").trim(),internal:e.includes("node_modules")&&!e.includes(".cache")||e.includes("internal")||e.includes("new Promise")})).map(e=>`<span class="stack${e.internal?" internal":""}">${e.text}</span>`).join("\n");const o=Number(t.statusCode||500),a=404===o,s=t.statusMessage??(a?"Page Not Found":"Internal Server Error"),i=t.message||t.toString(),u=r(()=>import("./error-404-LyW3TFWd.mjs")),l=r(()=>import("./error-500-DtdVIhVk.mjs")),c=a?u:l;return(e,t,a,r)=>{t(re(n(c),f({statusCode:n(o),statusMessage:n(s),description:n(i),stack:n(undefined)},r),null,a))}}},De=We.setup;We.setup=(e,t)=>{const o=p();return(o.modules||(o.modules=new Set)).add("node_modules/nuxt/dist/app/components/nuxt-error-page.vue"),De?De(e,t):void 0};const Ue={__name:"nuxt-root",__ssrInlineRender:!0,setup(e){const IslandRenderer=()=>null,t=useNuxtApp();t.deferHydration(),t.ssrContext.url;const o=!1;g(he,useRoute()),t.hooks.callHookWith(e=>e.map(e=>e()),"vue:setup");const a=useError(),r=a.value&&!t.ssrContext.error;w((e,o,a)=>{t.hooks.callHook("vue:error",e,o,a).catch(e=>console.error("[nuxt] Error in `vue:error` hook",e));{const o=t.runWithContext(()=>showError(e));return j(()=>o),!1}});const s=t.ssrContext.islandContext;return(e,t,i,u)=>{ne(t,{default:()=>{n(r)?t("<div></div>"):n(a)?t(re(n(We),{error:n(a)},null,i)):n(s)?t(re(n(IslandRenderer),{context:n(s)},null,i)):n(o)?se(t,C(_(n(o)),null,null),i):t(re(n(Me),null,null,i))},_:1})}}},Fe=Ue.setup;let Ie;Ue.setup=(e,t)=>{const o=p();return(o.modules||(o.modules=new Set)).add("node_modules/nuxt/dist/app/components/nuxt-root.vue"),Fe?Fe(e,t):void 0},Ie=async function(e){const t=b(Ue),o=function(e){let t=0;const o={_id:e.id||pe||"nuxt-app",_scope:P(),provide:void 0,versions:{get nuxt(){return"4.1.3"},get vue(){return o.vueApp.version}},payload:y({...e.ssrContext?.payload||{},data:y({}),state:k({}),once:new Set,_errors:y({})}),static:{data:{}},runWithContext:e=>o._scope.active&&!O()?o._scope.run(()=>callWithNuxt(o,e)):callWithNuxt(o,e),isHydrating:!1,deferHydration(){if(!o.isHydrating)return()=>{};t++;let e=!1;return()=>{if(!e)return e=!0,t--,0===t?(o.isHydrating=!1,o.callHook("app:suspense:resolve")):void 0}},_asyncDataPromises:{},_asyncData:y({}),_payloadRevivers:{},...e};o.payload.serverRendered=!0,o.ssrContext&&(o.payload.path=o.ssrContext.url,o.ssrContext.nuxt=o,o.ssrContext.payload=o.payload,o.ssrContext.config={public:o.ssrContext.runtimeConfig.public,app:o.ssrContext.runtimeConfig.app}),o.hooks=F(),o.hook=o.hooks.hook;{const contextCaller=async function(e,t){for(const a of e)await o.runWithContext(()=>a(...t))};o.hooks.callHook=(e,...t)=>o.hooks.callHookWith(contextCaller,e,...t)}o.callHook=o.hooks.callHook,o.provide=(e,t)=>{const a="$"+e;defineGetter(o,a,t),defineGetter(o.vueApp.config.globalProperties,a,t)},defineGetter(o.vueApp,"$nuxt",o),defineGetter(o.vueApp.config.globalProperties,"$nuxt",o);const a=e.ssrContext.runtimeConfig;return o.provide("config",a),o}({vueApp:t,ssrContext:e});try{await async function(e,t){const o=new Set,a=[],n=[];let r,s=0;async function executePlugin(i){const u=i.dependsOn?.filter(e=>t.some(t=>t._name===e)&&!o.has(e))??[];if(u.length>0)a.push([new Set(u),i]);else{const t=async function(e,t){if("function"==typeof t){const{provide:o}=await e.runWithContext(()=>t(e))||{};if(o&&"object"==typeof o)for(const t in o)e.provide(t,o[t])}}(e,i).then(async()=>{i._name&&(o.add(i._name),await Promise.all(a.map(async([e,t])=>{e.has(i._name)&&(e.delete(i._name),0===e.size&&(s++,await executePlugin(t)))})))}).catch(t=>{if(!i.parallel&&!e.payload.error)throw t;r||=t});i.parallel?n.push(t):await t}}for(const o of t)e.ssrContext?.islandContext&&!1===o.env?.islands||registerPluginHooks(e,o);for(const o of t)e.ssrContext?.islandContext&&!1===o.env?.islands||await executePlugin(o);if(await Promise.all(n),s)for(let e=0;e<s;e++)await Promise.all(n);if(r)throw e.payload.error||r}(o,Pe),await o.hooks.callHook("app:created",t)}catch(e){await o.hooks.callHook("app:error",e),o.payload.error||=createError(e)}if(e?._renderResponse)throw new Error("skipping render");return t};const entry$1=e=>Ie(e);export{He as _,useRouter as a,useNuxtApp as b,useRuntimeConfig as c,ce as d,entry$1 as default,useSupabaseUser as e,useState as f,useSeoMeta as g,useRoute as h,defineNuxtRouteMiddleware as i,navigateTo as n,resolveRouteObject as r,useHead as u};
//# sourceMappingURL=server.mjs.map
