{"version":3,"file":"useNotificaciones-Ck9ap90W.mjs","sources":["../../../../../../composables/useNotificaciones.ts"],"sourcesContent":null,"names":["useNotificaciones","supabase","useSupabaseClient","user","useSupabaseUser","getUserId","useSupabase","notificaciones","ref","loading","error","canal","totalNoVistas","noLeidas","computed","value","filter","n","leido","urgentes","tipo","metadata","urgencia","sesiones_restantes","tieneUrgentes","length","marcarVista","async","notificacionId","data","rpcError","rpc","p_notificacion_id","map","id","leido_at","Date","toISOString","Math","max","e","console","marcarTodasVistas","success","marcadas","message","contarNoVistas","listar","limite","userId","warn","fetchError","from","select","eq","order","ascending","limit","code","includes","visto","crear","usuarioId","titulo","mensaje","referenciaId","insertError","insert","usuario_id","referencia_id","single","marcarComoLeida","marcarTodasComoLeidas","obtenerContador","eliminar","deleteError","delete","notificacionEliminada","find","eliminarVistas","suscribirse","channel","on","event","schema","table","payload","nuevaNotificacion","new","unshift","Notification","permission","body","icon","badge","notificacionActualizada","index","findIndex","subscribe","desuscribirse","removeChannel","solicitarPermisosNotificaciones","requestPermission"],"mappings":"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"}