{"version":3,"file":"appointment-validation.mjs","sources":["../../../../../../utils/appointment-validation.ts","../../../../../../utils/timezone.ts"],"sourcesContent":null,"names":["STATE_TRANSITIONS","pending","confirmed","completed","canceled","STATUS_MAP","pendiente","confirmada","realizada","completada","cancelada","STATUS_MAP_REVERSE","validateStateTransition","from","to","toNormalized","allowedTransitions","valid","error","errorCode","includes","map","s","join","details","validateAppointmentRules","appointment","fecha_cita","hora_inicio","hora_fin","terapeuta_id","duration","startTime","endTime","startHours","startMinutes","split","Number","endHours","endMinutes","getDurationMinutes","substring","test","timeRegex","validateAppointment","existingAppointments","rulesValidation","conflictValidation","newAppointment","conflicts","filter","existing","hasTimeConflict","appointment2","appointment1","estado","id","start1","end1","start2","length","conflictDetails","conflictingAppointment","date","time","validateAppointmentConflicts","formatValidationError","validationResult","message","conflict"],"mappings":"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"}