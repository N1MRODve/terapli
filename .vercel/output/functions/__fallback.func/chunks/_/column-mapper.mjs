const e={nombre_completo:["nombre","nombre completo","nombre y apellido","nombre apellido","paciente","full name","name","cliente","persona"],email:["email","e-mail","correo","correo electrónico","correo electronico","mail","e mail"],telefono:["teléfono","telefono","tel","celular","móvil","movil","phone","número de teléfono","numero de telefono","contacto"],documento_identidad:["documento","documento de identidad","dni","nie","pasaporte","identificación","identificacion","id","cédula","cedula","rut","ci"],fecha_nacimiento:["fecha de nacimiento","fecha nacimiento","nacimiento","fecha nac","fec nac","birth date","birthday","edad"],direccion:["dirección","direccion","domicilio","address","calle"],contacto_emergencia:["contacto emergencia","contacto de emergencia","emergencia","contacto familiar","familiar","emergency contact"],area_de_acompanamiento:["área","area","área de acompañamiento","area de acompanamiento","motivo","motivo consulta","motivo de consulta","diagnóstico","diagnostico","problema","tratamiento"],frecuencia:["frecuencia","periodicidad","frecuencia sesiones","frequency"],activo:["activo","estado","status","active","vigente"],derivacion:["derivación","derivacion","derivado por","referido por","referral"],medicacion:["medicación","medicacion","medicamentos","medication","fármacos","farmacos"],orientacion_diagnostica:["orientación diagnóstica","orientacion diagnostica","diagnóstico","diagnostico","diagnosis","hipótesis","hipotesis"],inicio_tratamiento:["inicio","inicio tratamiento","inicio del tratamiento","fecha inicio","start date"],precio_sesion:["precio","precio sesión","precio sesion","tarifa","coste","costo","price","fee"],descuento:["descuento","discount","rebaja"],notas:["notas","observaciones","comentarios","notes","remarks"]};function normalizeText(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s]/g,"").trim()}function calculateSimilarityScore(e,i){const o=normalizeText(e),n=normalizeText(i);if(o===n)return 1;if(o.includes(n))return.8;if(n.includes(o))return.6;const t=o.split(/\s+/),a=n.split(/\s+/),c=t.filter(e=>a.includes(e));if(c.length>0){const e=(t.length+a.length)/2;return c.length/e*.5}return 0}function suggestMapping(i,o=.5){let n=null,t=0;for(const[o,a]of Object.entries(e)){const e=Math.max(...a.map(e=>calculateSimilarityScore(i,e)));e>t&&(t=e,n=o)}return t>=o?n:null}function autoMapColumns(e){const i=[],o=new Set;for(const n of e){const e=suggestMapping(n,.7);e&&!o.has(e)&&(i.push({sourceColumn:n,targetField:e}),o.add(e))}for(const n of e){if(i.some(e=>e.sourceColumn===n))continue;const e=suggestMapping(n,.5);e&&!o.has(e)?(i.push({sourceColumn:n,targetField:e}),o.add(e)):i.push({sourceColumn:n,targetField:""})}return i}function hasRequiredFieldsMapped(e){const i=e.map(e=>e.targetField).filter(e=>""!==e),o=i.includes("nombre_completo"),n=i.includes("email"),t=i.includes("telefono");return o&&(n||t)}function getMissingRequiredFields(e){const i=new Set(e.map(e=>e.targetField).filter(e=>""!==e)),o=[];return i.has("nombre_completo")||o.push("nombre_completo"),i.has("email")||i.has("telefono")||o.push("email"),o}function getMissingProfileFields(e){const i=new Set(e.map(e=>e.targetField).filter(e=>""!==e)),o=[],n=["nombre_completo","email","telefono","documento_identidad"];for(const e of n)i.has(e)||o.push(e);return o}export{autoMapColumns as a,getMissingProfileFields as b,getMissingRequiredFields as g,hasRequiredFieldsMapped as h};
//# sourceMappingURL=column-mapper.mjs.map
